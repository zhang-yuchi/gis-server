// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.15/esri/copyright.txt for details.
//>>built
require({cache:{"esri/views/2d/LabelManager":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Error ../../core/HandleOwner ../../core/Logger ../../core/throttle ../../core/accessorSupport/decorators ./engine".split(" "),function(w,a,v,f,u,p,g,t,n,d,x){Object.defineProperty(a,"__esModule",{value:!0});var r=t.getLogger("esri.views.2d.layers.labels.LabelManager");w=function(a){function b(b){b=a.call(this,b)||
this;b._applyVisibilityPassThrottled=n.throttle(b._applyVisibilityPass,64,b);b.lastUpdateId=-1;b.updateRequested=!1;b.view=null;return b}v(b,a);b.prototype.initialize=function(){var b=this;this.collisionEngine=new x.CollisionEngine(this.view.featuresTilingScheme);this._layerViewSorter=new x.LayerViewSorter(function(a,c){b.collisionEngine.registerLayerView(a,c);(c=a.tileRenderer)&&c.forEachTile(function(c){c.isDirty=!0;b.addTile(a,c)});b.requestUpdate()},function(a){b.collisionEngine.unregisterLayerView(a);
b.requestUpdate()});this.handles.add(this.view.allLayerViews.on("change",function(a){b._layerViewSorter.update(a)}))};b.prototype.destroy=function(){this._layerViewSorter.destroy();this.collisionEngine=this._layerViewSorter=null;this._applyVisibilityPassThrottled.remove()};Object.defineProperty(b.prototype,"updating",{get:function(){return this.updateRequested},enumerable:!0,configurable:!0});b.prototype.update=function(b){this._applyVisibilityPassThrottled(b)};b.prototype.viewChange=function(){this.requestUpdate()};
b.prototype.requestUpdate=function(){this.updateRequested||(this.updateRequested=!0,this.view.requestUpdate(this))};b.prototype.processUpdate=function(b){this._set("updateParameters",b);this.updateRequested&&(this.update(b),this.updateRequested=!1)};b.prototype.addTile=function(b,a){this.collisionEngine.addTile(b,a)};b.prototype.removeTile=function(b,a){this.collisionEngine.removeTile(b,a)};b.prototype._applyVisibilityPass=function(b){try{var a=this.view.featuresTilingScheme.getClosestInfoForScale(b.state.scale).level;
this.collisionEngine.run(b,a)}catch(c){r.error(new p("mapview-labeling","Encountered an error during label decluttering",c))}};f([d.property()],b.prototype,"updateRequested",void 0);f([d.property({readOnly:!0})],b.prototype,"updateParameters",void 0);f([d.property({dependsOn:["updateRequested"]})],b.prototype,"updating",null);f([d.property()],b.prototype,"view",void 0);return b=f([d.subclass("esri.views.2d.layers.labels.LabelManager")],b)}(d.declared(g.HandleOwnerMixin(u)));a.default=w})},"esri/views/2d/layers/graphics/GraphicsView2D":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/tsSupport/assignHelper ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/awaiterHelper ../../../../core/Accessor ../../../../core/HandleOwner ../../../../core/Identifiable ../../../../core/MapPool ../../../../core/MapUtils ../../../../core/maybe ../../../../core/promiseUtils ../../../../core/promiseUtils ../../../../core/screenUtils ../../../../core/accessorSupport/decorators ../../../../geometry/Polygon ../../../../geometry/SpatialReference ../../../../geometry/support/aaBoundingRect ../../../../geometry/support/coordsUtils ../../../../geometry/support/jsonUtils ../../../../geometry/support/spatialReferenceUtils ../../../../layers/graphics/data/projectionSupport ../../../../symbols/support/cimSymbolUtils ../../../../symbols/support/defaults ../../engine ../../engine/webgl/definitions ../features/support/AttributeStore ../features/support/TileStore ./GraphicContainer ./GraphicProcessingQueue ./GraphicStore ./graphicsUtils ../../../layers/GraphicsView".split(" "),
function(w,a,v,f,u,p,g,t,n,d,x,r,y,b,k,l,c,e,C,h,q,m,z,E,K,J,D,G,F,H,A,I,B,L,N){function M(b,c,a){if(a.has(b))return a.get(b);c={tile:c,addedOrModified:[],removed:[]};a.set(b,c);return c}Object.defineProperty(a,"__esModule",{value:!0});w=function(a){function d(){for(var c=[],e=0;e<arguments.length;e++)c[e]=arguments[e];c=a.apply(this,c)||this;c._tiles=new Map;c._graphicStoreUpdate=!1;c._graphicsSet=new Set;c._matcher=b.resolve(null);c._tileUpdateSet=new Set;c._tilesToUpdate=new Map;c._graphicIdToAbortController=
new Map;c._attached=!1;c._highlightIds=new Map;c._updatingGraphicsTimer=null;c.lastUpdateId=-1;c.updateRequested=!1;c.graphicUpdateHandler=c.graphicUpdateHandler.bind(c);c.addOrUpdateGraphic=c.addOrUpdateGraphic.bind(c);c._processAnalyzedGraphics=c._processAnalyzedGraphics.bind(c);c._graphicsChangeHandler=c._graphicsChangeHandler.bind(c);return c}v(d,a);d.prototype.initialize=function(){var c=this;this._tileStore=new H.default(this.view.featuresTilingScheme);this.container=new A.default(this.view.featuresTilingScheme,
null);this._attributeStore=new F.default({type:"local",initialize:function(a){return b.resolve(c.container.attributeView.initialize(a))},update:function(b){return c.container.attributeView.requestUpdate(b)},render:function(){return c.container.requestRender()}});this._graphicStore=new B.default(this.view.featuresTilingScheme,this.view.state.scale,this.uid,this.graphics,function(b){c._attributeStore.createLocalId(b.uid);c._setFilterState(b.uid,b.visible)},function(b){c._attributeStore.freeLocalId(b.uid)});
this._graphicProcessingQueue=new I.default({process:this.addOrUpdateGraphic});var a=new D.WGLTemplateStore(this.container.getMaterialItems.bind(this.container),!0),e=this._tileStore.tileScheme.tileInfo;this._matcher=this.renderer?D.createMatcher(a,null,this.renderer):D.createMatcher(a,null);this._meshFactory=new D.WGLMeshFactory(null,this.uid,null,a,null,e);this._templateStore=a;this.watch("renderer",function(b){b&&(c._matcher=c.renderer?D.createMatcher(a,null,c.renderer):D.createMatcher(a,null))});
this._tileStore.on("update",this._onTileUpdate.bind(this));this.container.on("attach",function(){0<c.graphics.items.length&&c._graphicsChangeHandler({target:c.graphics,added:c.graphics.items,removed:[],moved:[]});c.handles.add(c.graphics.on("change",c._graphicsChangeHandler),"graphics");c._attached=!0;c.notifyChange("updating")});this.container.on("detach",function(){c._graphicProcessingQueue&&c._graphicProcessingQueue.clear()})};d.prototype.destroy=function(){this._updatingGraphicsTimer&&(clearTimeout(this._updatingGraphicsTimer),
this._updatingGraphicsTimer=null,this.notifyChange("updating"));this.container.dispose();this._set("graphics",null);this._graphicProcessingQueue&&(this._graphicProcessingQueue.destroy(),this._graphicProcessingQueue=null);this._graphicStore.clear();this._tileStore.destroy();this._attributeStore=null};Object.defineProperty(d.prototype,"updating",{get:function(){return!this._attached||null!==this._updatingGraphicsTimer||this._graphicProcessingQueue.updating||0<this._tileUpdateSet.size||0<this._tilesToUpdate.size},
enumerable:!0,configurable:!0});d.prototype.install=function(b){b.addChild(this.container)};d.prototype.uninstall=function(b){b.removeChild(this.container)};d.prototype.hitTest=function(c,a){if(!this.view||!this.view.position)return b.resolve();c=this.view.toMap(l.createScreenPoint(c,a));return this.searchFeatures(c).then(function(b){return b&&b.length?b[0]:null})};d.prototype.searchFeatures=function(c,a){var e=this;void 0===a&&(a=2);return b.create(function(b){b(e._graphicStore.hitTest(c.x,c.y,a,
e.view.state.resolution,e.view.state.rotation))})};d.prototype.update=function(b){b=b.state;var c=this.view.featuresTilingScheme.getClosestInfoForScale(b.scale).level;this._graphicStore.updateLevel(c);this._tileStore.setViewState(b);this._graphicStoreUpdate=!0;this.updateRequested=!1};d.prototype.viewChange=function(){this.requestUpdate()};d.prototype.requestUpdate=function(){this.updateRequested||(this.updateRequested=!0,this.view.requestUpdate(this))};d.prototype.processUpdate=function(b){this.updateRequested&&
(this.updateRequested=!1,this.update(b))};d.prototype.graphicUpdateHandler=function(b){var c=b.newValue,a=b.graphic;switch(b.property){case "geometry":case "symbol":this._graphicProcessingQueue.push(a,"update");break;case "visible":this._setFilterState(a.uid,c),this._attributeStore.sendUpdates()}};d.prototype.addHighlight=function(b){for(var c=0;c<b.length;c++){var a=b[c];if(this._highlightIds.has(a)){var e=this._highlightIds.get(a);this._highlightIds.set(a,e+1)}else this._highlightIds.set(a,1)}this._updateHighlight()};
d.prototype.removeHighlight=function(b){for(var c=0;c<b.length;c++){var a=b[c];if(this._highlightIds.has(a)){var e=this._highlightIds.get(a)-1;0===e?this._highlightIds.delete(a):this._highlightIds.set(a,e)}}this._updateHighlight()};d.prototype._updateHighlight=function(){this._attributeStore.setHighlight(r.keysOfMap(this._highlightIds))};d.prototype._getIntersectingTiles=function(b){return(b=this._graphicStore.getBounds(b))&&0!==h.width(b)&&0!==h.height(b)?this._tileStore.boundsIntersections(b):[]};
d.prototype._updateTile=function(b){var c=this,a=b.tile,e=this._getGraphicsData(this._templateStore,a,b.addedOrModified);return this._processGraphics(a.key,e).then(function(e){c._patchTile(a.key,{addOrUpdate:e,remove:b.removed});return e})};d.prototype._patchTile=function(b,c){this._tiles.has(b)&&(b=this._tiles.get(b),this.container.onTileData(b,c),this.container.requestRender())};d.prototype._graphicsChangeHandler=function(c){var a=this;if(!this._graphicStoreUpdate){var e=this.view.state,h=this.view.featuresTilingScheme.getClosestInfoForScale(e.scale).level;
this._graphicStore.updateLevel(h);this._tileStore.setViewState(e)}var m=c.added,h=c.removed;c=c.moved;for(var q=this._tilesToUpdate,k,e=[],C=Array(m.length),d=0;d<m.length;d++){var l=m[d];C[d]=l;this._graphicsSet.add(l);e.push(this.addGraphic(l))}for(d=0;d<h.length;d++){l=h[d];this._abortProcessingGraphic(l.uid);for(var m=this._getIntersectingTiles(l),A=0,z=m;A<z.length;A++)m=z[A],k=m.key.id,m=M(k,m,q),m.removed.push(this._attributeStore.getLocalId(l.uid));this._graphicsSet.delete(l);this._graphicStore.remove(l)}for(h=
0;h<c.length;h++)for(d=c[h],m=this._getIntersectingTiles(d),l=0,A=m;l<A.length;l++)m=A[l],k=m.key.id,m=M(k,m,q),m.addedOrModified.push(d);this._flipUpdatingGraphics();b.all(e).then(function(){for(var c,e=0;e<C.length;e++){c=C[e];for(var m=0,h=a._getIntersectingTiles(c);m<h.length;m++){var d=h[m];k=d.key.id;M(k,d,q).addedOrModified.push(c)}}a._graphicStore.updateZ();var l=[];q.forEach(function(b){return l.push(a._updateTile(b))});return b.all(l).then(function(){q.clear();a.notifyChange("updating")})}).catch(function(){q.clear();
a.notifyChange("updating")})};d.prototype._getArcadeInfo=function(b){var c=(b.attributes?Object.keys(b.attributes):[]).map(function(c){return{name:c,alias:c,type:"string"===typeof b.attributes[c]?"esriFieldTypeString":"esriFieldTypeDouble"}});return y.isNone(b.geometry)?null:{geometryType:m.getJsonType(b.geometry),spatialReference:C.fromJSON(b.geometry.spatialReference),fields:c}};d.prototype._getSymbolForGraphic=function(b,c){return g(this,void 0,void 0,function(){return p(this,function(a){return y.isSome(b.symbol)?
[2,b.symbol]:this.renderer?[2,this.renderer.getSymbolAsync(b,{scale:this.view.scale,abortOptions:c})]:[2,this._getNullSymbol(b)]})})};d.prototype._getSymbolResources=function(c,a){return g(this,void 0,void 0,function(){var e,m,h,q,d,k,l,C,A;return p(this,function(z){switch(z.label){case 0:if(!this.container.attached)return[2,b.resolve(null)];e=this._getArcadeInfo(c);h=K.expandSymbol;return[4,this._getSymbolForGraphic(c,a)];case 1:return[4,h.apply(void 0,[z.sent(),null,e,a])];case 2:m=z.sent();if("text"!==
m.type)return[3,4];q=[];d=m;k=D.bidiText(d.text)[0];for(l=0;l<k.length;l++)q.push(k.charCodeAt(l));C={symbol:m.toJSON(),id:0,glyphIds:q};return[4,this.container.getMaterialItems([C])];case 3:return A=z.sent()[0].mosaicItem,[2,{symbol:m,mosaicItem:A}];case 4:return[2,{symbol:m,mosaicItem:null}]}})})};d.prototype._projectAndNormalizeGeometry=function(c){return g(this,void 0,void 0,function(){var a,h,d,k=this;return p(this,function(l){if(y.isNone(c.geometry))return[2,b.resolve(null)];a=c.geometry;m.isPolygon(a)?
(h=a.rings,a.rings=h):m.isPolyline(a)?(d=a.paths,a.paths=d):m.isExtent(a)&&(a=e.fromExtent(a));return[2,E.checkProjectionSupport(a.spatialReference,this.view.spatialReference).then(function(){var b=L.normalizeCentralMeridian(a),b=E.project(b,a.spatialReference,k.view.spatialReference);q.closeRingsAndFixWinding(b);return b})]})})};d.prototype._onTileUpdate=function(b){var c=z.getInfo(this.view.spatialReference);if(b.added&&0<b.added.length)for(var a=0,e=b.added;a<e.length;a++)this._addNewTile(e[a],
c);if(b.removed&&0<b.removed.length)for(c=0,b=b.removed;c<b.length;c++)this._removeTile(b[c].key)};d.prototype.addOrUpdateGraphic=function(b,c,a){return this._addOrUpdateGraphic(b,c,a)};d.prototype.addGraphic=function(c){var a=this;this._abortProcessingGraphic(c.uid);var e=k.createAbortController();this._graphicIdToAbortController.set(c.uid,e);return this._addOrUpdateGraphic(c,"add",{signal:e.signal}).then(function(){a._graphicIdToAbortController.delete(c.uid)}).catch(function(e){a._graphicIdToAbortController.delete(c.uid);
if(!b.isAbortError(e))throw e;})};d.prototype._addOrUpdateGraphic=function(c,a,e){var m=this,h=this._projectAndNormalizeGeometry(c),q=this._getSymbolResources(c,e);return b.all([h,q]).then(function(b){var h=b[0];b=b[1];return"add"===a?m._addProjectedGraphic(c,b,h):m._updateGraphic(c,b,h,e)})};d.prototype._addProjectedGraphic=function(b,c,a){this._graphicsSet.has(b)&&this._graphicStore.add(b,c,a)};d.prototype._updateGraphic=function(c,a,e,m){var q=this;if(!this._graphicStore.has(c)||b.isAborted(m))return b.resolve();
e=this._graphicStore.update(c,a,e);a=e.oldBounds;e=e.newBounds;var d=0===h.width(a)&&0===h.height(a),k=0===h.width(e)&&0===h.height(e),d=d?[]:this._tileStore.boundsIntersections(a);a=k?[]:this._tileStore.boundsIntersections(e);e=x.acquire();for(var l=0;l<d.length;l++)k=d[l],e.set(k.key,{addOrUpdate:null,remove:[this._attributeStore.getLocalId(c.uid)]});for(d=0;d<a.length;d++)k=a[d],l=this._getGraphicData(this._templateStore,k,c),e.has(k.key)?(k=e.get(k.key),k.remove.length=0,k.addOrUpdate=l):e.set(k.key,
{addOrUpdate:l,remove:null});var C=[];e.forEach(function(b,c){var a=q._processGraphics(c,b.addOrUpdate,m).then(function(a){q._patchTile(c,{addOrUpdate:a,remove:b.remove})});C.push(a)});x.release(e);return b.all(C).then(function(){})};d.prototype._addTile=function(b,c){var a=h.create();this.view.featuresTilingScheme.getTileBounds(a,b);a=new D.WGLTile(b,a,!0);c={clear:!0,addOrUpdate:c,remove:[]};this._tiles.set(b,a);this.container.addChild(a);a.setData(c,!1,!1)};d.prototype._addNewTile=function(c,a){var e=
this,h=this._graphicStore.queryTileData(this._templateStore,c);if(a){a=Math.round((a.valid[1]-a.valid[0])/c.resolution);for(var q=0;q<h.length;q++){var k=h[q];k.geometry&&m.isPoint(k.geometry)&&this._wrapPoints(k,a)}}var d=c.key;this._tileUpdateSet.add(c.key);this.notifyChange("updating");this._processGraphics(d,h).then(function(b){e._addTile(d,b);e._tileUpdateSet.delete(d);e.notifyChange("updating")}).catch(function(c){e._tileUpdateSet.delete(d);e.notifyChange("updating");if(!b.isAbortError(c))throw c;
})};d.prototype._removeTile=function(b){if(this._tiles.has(b)){var c=this._tiles.get(b);this.container.removeChild(c);c.destroy();this._tiles.delete(b)}};d.prototype._setFilterState=function(b,c){var a=this._attributeStore.getLocalId(b);b=this._attributeStore.getHighlightFlag(b);this._attributeStore.setData(a,0,0,b|(c?G.FILTER_FLAG_0:0))};d.prototype._getGraphicsData=function(b,c,a){var e=z.getInfo(this.view.spatialReference);b=this._graphicStore.getGraphicsData(b,c,a);if(e)for(c=Math.round((e.valid[1]-
e.valid[0])/c.resolution),e=0;e<b.length;e++)a=b[e],a.geometry&&m.isPoint(a.geometry)&&this._wrapPoints(a,c);b.sort(function(b,c){return b.insertAfter-c.insertAfter});return b};d.prototype._getGraphicData=function(b,c,a){b=this._graphicStore.getGraphicData(b,c,a);a=[b];var e=z.getInfo(this.view.spatialReference);e&&(c=Math.round((e.valid[1]-e.valid[0])/c.resolution),b.geometry&&m.isPoint(b.geometry)&&this._wrapPoints(b,c));return a};d.prototype._wrapPoints=function(b,c){var a=b.geometry;512===c?20>
a.x?b.geometry={points:[[a.x,a.y],[c,0]]}:492<a.x&&(b.geometry={points:[[a.x,a.y],[-c,0]]}):-20>a.x?b.geometry={points:[[a.x,a.y],[c,0]]}:532<a.x&&(b.geometry={points:[[a.x,a.y],[-c,0]]})};d.prototype._processGraphics=function(b,c,a){return g(this,void 0,void 0,function(){var e,m,h;return p(this,function(q){switch(q.label){case 0:e=c&&c.length;if(!e||!this._meshFactory)return[2,null];m=this._meshFactory;return[4,this._matcher.then(function(b){return m.analyze(c,b,null,null,a)})];case 1:return h=q.sent(),
this._attributeStore.sendUpdates(),[2,this._processAnalyzedGraphics(b,h)]}})})};d.prototype._processAnalyzedGraphics=function(b,c){for(var a=this._meshFactory,e=a.createMeshData(c.length),m=this._attributeStore,h=0;h<c.length;h++){var q=c[h];q.insertAfter=-1===q.insertAfter?-1:m.getLocalId(q.insertAfter);q.localId=m.getLocalId(q.attributes[this.uid]);a.write(e,q,null,null,b.level,null)}return D.TileData.fromMeshData(e)};d.prototype._abortProcessingGraphic=function(b){this._graphicIdToAbortController.has(b)&&
this._graphicIdToAbortController.get(b).abort()};d.prototype._getNullSymbol=function(b){b=b.geometry;return m.isPolyline(b)?J.errorPolylineSymbol2D:m.isPolygon(b)||m.isExtent(b)?J.errorPolygonSymbol2D:J.errorPointSymbol2D};d.prototype._flipUpdatingGraphics=function(){var b=this;this._updatingGraphicsTimer&&clearTimeout(this._updatingGraphicsTimer);this._updatingGraphicsTimer=setTimeout(function(){b._updatingGraphicsTimer=null;b.notifyChange("updating")},160);this.notifyChange("updating")};f([c.property()],
d.prototype,"_graphicProcessingQueue",void 0);f([c.property({constructOnly:!0})],d.prototype,"graphics",void 0);f([c.property({dependsOn:["_graphicProcessingQueue.updating"]})],d.prototype,"updating",null);f([c.property()],d.prototype,"view",void 0);f([c.property()],d.prototype,"updateRequested",void 0);return d=f([c.subclass("esri.views.2d.layers.support.GraphicsView2D")],d)}(c.declared(N.GraphicsView(n.HandleOwnerMixin(d.IdentifiableMixin(t)))));a.default=w})},"esri/core/MapPool":function(){define(["require",
"exports","./ObjectPool"],function(w,a,v){w=function(){function a(a,f){void 0===a&&(a=50);void 0===f&&(f=50);this._pool=new v(Map,!1,function(a){return a.clear()},f,a)}a.prototype.acquire=function(){return this._pool.acquire()};a.prototype.release=function(a){this._pool.release(a)};a.acquire=function(){return f.acquire()};a.release=function(a){return f.release(a)};return a}();var f=new w(100);return w})},"esri/layers/graphics/data/projectionSupport":function(){define("require exports ../../../core/tsSupport/generatorHelper ../../../core/tsSupport/awaiterHelper ../../../core/Error ../../../core/promiseUtils ../../../geometry/projection ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),
function(w,a,v,f,u,p,g,t,n){function d(c,a){var e;if(!a)return null;if("x"in a){var q={x:0,y:0};c=c(a.x,a.y,b);q.x=c[0];q.y=c[1];null!=a.z&&(q.z=a.z);null!=a.m&&(q.m=a.m);return q}if("xmin"in a)return q={xmin:0,ymin:0,xmax:0,ymax:0},e=c(a.xmin,a.ymin,b),q.xmin=e[0],q.ymin=e[1],c=c(a.xmax,a.ymax,b),q.xmax=c[0],q.ymax=c[1],a.hasZ&&(q.zmin=a.zmin,q.zmax=a.zmax,q.hasZ=!0),a.hasM&&(q.mmin=a.mmin,q.mmax=a.mmax,q.hasM=!0),q;if("rings"in a)return{rings:x(a.rings,c),hasM:a.hasM,hasZ:a.hasZ};if("paths"in a)return{paths:x(a.paths,
c),hasM:a.hasM,hasZ:a.hasZ};if("points"in a)return{points:r(a.points,c),hasM:a.hasM,hasZ:a.hasZ}}function x(b,c){for(var a=[],e=0;e<b.length;e++)a.push(r(b[e],c));return a}function r(b,c){for(var a=[],e=0;e<b.length;e++){var m=b[e],k=c(m[0],m[1],[0,0]);a.push(k);2<m.length&&k.push(m[2]);3<m.length&&k.push(m[3])}return a}function y(b,c){return!t.isValid(b)||!t.isValid(c)||t.equals(b,c)||n.canProject(b,c)?!1:!0}Object.defineProperty(a,"__esModule",{value:!0});var b=[0,0];a.doesBrowserSupportProjection=
function(b,c){return y(b,c)?g.isSupported():!0};a.checkProjectionSupport=function(b,c){return f(this,void 0,void 0,function(){var a,e,m;return v(this,function(h){if(!c)return[2];if(Array.isArray(b)){a=0;for(e=b;a<e.length;a++)if(m=e[a],y(m.geometry&&m.geometry.spatialReference,c)){if(g.isSupported())return[2,g.load()];throw new u("feature-store:unsupported-query","projection not supported",{inSpatialReference:b,outSpatialReference:c});}return[2]}if(!y(b,c))return[2];if(g.isSupported())return[2,g.load()];
throw new u("feature-store:unsupported-query","projection not supported",{inSpatialReference:b,outSpatialReference:c});})})};var k=d.bind(null,n.lngLatToXY),l=d.bind(null,n.xyToLngLat);a.project=function(b,c,a){if(!b)return b;a||(a=c,c=b.spatialReference);return t.isValid(c)&&t.isValid(a)&&!t.equals(c,a)?n.canProject(c,a)?t.isWebMercator(a)?k(b):l(b):g.projectMany([b],c,a,null,!0)[0]:b};var c=new (function(){function b(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}b.prototype.push=
function(b,c,a){return f(this,void 0,void 0,function(){var e,h=this;return v(this,function(m){b&&b.length&&c&&a&&!t.equals(c,a)||p.resolve(b);e={geometries:b,inSpatialReference:c,outSpatialReference:a,resolve:null};this._jobs.push(e);return[2,p.create(function(b){e.resolve=b;null===h._timer&&(h._timer=setTimeout(h._process,10))})]})})};b.prototype._process=function(){this._timer=null;var b=this._jobs.shift();if(b){var c=b.geometries,a=b.inSpatialReference,e=b.outSpatialReference,b=b.resolve;n.canProject(a,
e)?t.isWebMercator(e)?b(c.map(k)):b(c.map(l)):b(g.projectMany(c,a,e,null,!0));0<this._jobs.length&&(this._timer=setTimeout(this._process,10))}};return b}());a.projectMany=function(b,a,h){return f(this,void 0,void 0,function(){return v(this,function(e){return[2,c.push(b,a,h)]})})}})},"esri/geometry/projection":function(){define("require exports ../core/promiseUtils ./pe ./SpatialReference ./support/GeographicTransformation".split(" "),function(w,a,v,f,u,p){function g(a,d,b,k,l){void 0===k&&(k=null);
void 0===l&&(l=!1);if(null===k){var c=p.cacheKey(d,b);void 0!==x[c]?k=x[c]:(k=t(d,b,null),null===k&&(k=new p),x[c]=k)}return n._project(a,d,b instanceof u||!1===l?b:new u(b),k,l)}function t(a,d,b){void 0===b&&(b=null);a=n._getTransformation(a,d,b);return null!==a?p.fromGE(a):null}Object.defineProperty(a,"__esModule",{value:!0});var n=null;a.isLoaded=function(){return!!n&&f.isLoaded()};a.isSupported=function(){return f.isSupported()};var d=null;a.load=function(){return d?d:d=v.create(function(a,d){var b=
f.load();w(["./geometryEngine"],function(k){n=k;b.then(function(){n._enableProjection(f);a()},function(b){d(b)})})})};a.project=function(a,d,b){void 0===b&&(b=null);return a instanceof Array?0===a.length?[]:g(a,a[0].spatialReference,d,b):g([a],a.spatialReference,d,b)[0]};var x={};a.projectMany=g;a.getTransformation=t;a.getTransformations=function(a,d,b){void 0===b&&(b=null);a=n._getTransformationBySuitability(a,d,b);if(null!==a){d=[];for(b=0;b<a.length;b++)d.push(p.fromGE(a[b]));return d}return[]}})},
"esri/geometry/pe":function(){define(["require","exports","../core/tsSupport/extendsHelper","../core/has","../core/promiseUtils"],function(w,a,v,f,u){function p(c){function e(b,c,a){b[c]=a(b[c])}a._pe=c;r.init();y.init();b.init();k.init();l.init();a.PeGCSExtent=function(b){function c(){return null!==b&&b.apply(this,arguments)||this}v(c,b);c.prototype.destroy=function(){a._pe.destroy(this)};return c}(a._pe.PeGCSExtent);for(var f=0,h=[a._pe.PeDatum,a._pe.PeGeogcs,a._pe.PeGeogtran,a._pe.PeObject,a._pe.PeParameter,
a._pe.PePrimem,a._pe.PeProjcs,a._pe.PeSpheroid,a._pe.PeUnit];f<h.length;f++)c=h[f],e(c.prototype,"getName",function(b){return function(){return b.call(this,Array(r.PE_NAME_MAX))}});f=0;for(h=[a._pe.PeGeogtran,a._pe.PeProjcs];f<h.length;f++)c=h[f],e(c.prototype,"getParameters",function(b){return function(){for(var c=Array(r.PE_PARM_MAX),e=b.call(this),m=0;m<c.length;m++){var h=a._pe.getValue(e,"*");c[m]=h?a._pe.wrapPointer(h,a._pe.PeParameter):null;e+=Int32Array.BYTES_PER_ELEMENT}return c}});e(a._pe.PeHorizon.prototype,
"getCoord",function(b){return function(){var c=this.getSize();if(!c)return null;var a=[],e=b.call(this);d(a,c,e);return a}});e(a._pe.PeGTlistExtendedEntry.prototype,"getEntries",function(b){var c=a._pe._pe_getPeGTlistExtendedGTsSize();return function(){var e=null,m=b.call(this);if(!a._pe.compare(m,a._pe.NULL)){var e=[m],h=this.getSteps();if(1<h)for(var m=a._pe.getPointer(m),q=1;q<h;q++)e.push(a._pe.wrapPointer(m+c*q,a._pe.PeGTlistExtendedGTs))}return e}});var q=a._pe._pe_getPeHorizonSize();c=function(b){return function(){var c=
this._cache;c||(this._cache=c=new Map);if(c.has(b))return c.get(b);var e=null,m=b.call(this);if(!a._pe.compare(m,a._pe.NULL)){var e=[m],h=m.getNump();if(1<h)for(var m=a._pe.getPointer(m),d=1;d<h;d++)e.push(a._pe.wrapPointer(m+q*d,a._pe.PeHorizon))}c.set(b,e);return e}};e(a._pe.PeProjcs.prototype,"horizonGcsGenerate",c);e(a._pe.PeProjcs.prototype,"horizonPcsGenerate",c);a._pe.PeObject.prototype.toString=function(b){void 0===b&&(b=r.PE_STR_OPTS_NONE);a._pe.ensureCache.prepare();var c=a._pe.getPointer(this),
e=a._pe.ensureInt8(Array(r.PE_BUFFER_MAX));return a._pe.UTF8ToString(a._pe._pe_object_to_string_ext(c,b,e))}}function g(b){if(b){var c=a._pe.getClass(b);c&&(c=a._pe.getCache(c))&&(b=a._pe.getPointer(b))&&delete c[b]}}function t(b,e){var c=[];e=Array(e);for(var h=0;h<b;h++)c.push(a._pe.ensureInt8(e));return c}function n(b){var c;Array.isArray(b[0])?(c=[],b.forEach(function(b){c.push(b[0],b[1])})):c=b;return c}function d(b,e,d,h){void 0===h&&(h=!1);if(h)for(h=0;h<2*e;h++)b[h]=a._pe.getValue(d+h*Float64Array.BYTES_PER_ELEMENT,
"double");else{var c=0===b.length;for(h=0;h<e;h++)c&&(b[h]=Array(2)),b[h][0]=a._pe.getValue(d,"double"),b[h][1]=a._pe.getValue(d+Float64Array.BYTES_PER_ELEMENT,"double"),d+=2*Float64Array.BYTES_PER_ELEMENT}}Object.defineProperty(a,"__esModule",{value:!0});var x;a._pe=null;a.isLoaded=function(){return!!a._pe};a.isSupported=function(){return!!f("esri-wasm")};a.load=function(){return x?x:x=u.create(function(b,a){w(["./support/pe-wasm"],function(c){c({locateFile:function(b){return w.toUrl("./support/"+
b)},onAbort:function(b){a(Error(b))}}).then(function(c){p(c);b()})})})};(function(b){function c(b,c,e){a._pe.ensureCache.prepare();var m=n(e),h=e===m,m=a._pe.ensureFloat64(m);(b=a._pe._pe_geog_to_proj(a._pe.getPointer(b),c,m))&&d(e,c,m,h);return b}function k(b,c,a){return h(b,c,a,0)}function h(b,c,e,h){a._pe.ensureCache.prepare();var m=n(e),q=e===m,m=a._pe.ensureFloat64(m);(b=a._pe._pe_proj_to_geog_center(a._pe.getPointer(b),c,m,h))&&d(e,c,m,q);return b}b.geogToProj=c;b.projGeog=function(b,a,e,h){switch(h){case r.PE_TRANSFORM_P_TO_G:return k(b,
a,e);case r.PE_TRANSFORM_G_TO_P:return c(b,a,e)}return 0};b.projToGeog=k;b.projToGeogCenter=h})(a.PeCSTransformations||(a.PeCSTransformations={}));var r;(function(b){b.init=function(){b.PE_BUFFER_MAX=a._pe.PeDefs.prototype.PE_BUFFER_MAX;b.PE_NAME_MAX=a._pe.PeDefs.prototype.PE_NAME_MAX;b.PE_MGRS_MAX=a._pe.PeDefs.prototype.PE_MGRS_MAX;b.PE_USNG_MAX=a._pe.PeDefs.prototype.PE_USNG_MAX;b.PE_DD_MAX=a._pe.PeDefs.prototype.PE_DD_MAX;b.PE_DDM_MAX=a._pe.PeDefs.prototype.PE_DDM_MAX;b.PE_DMS_MAX=a._pe.PeDefs.prototype.PE_DMS_MAX;
b.PE_UTM_MAX=a._pe.PeDefs.prototype.PE_UTM_MAX;b.PE_PARM_MAX=a._pe.PeDefs.prototype.PE_PARM_MAX;b.PE_TYPE_NONE=a._pe.PeDefs.prototype.PE_TYPE_NONE;b.PE_TYPE_GEOGCS=a._pe.PeDefs.prototype.PE_TYPE_GEOGCS;b.PE_TYPE_PROJCS=a._pe.PeDefs.prototype.PE_TYPE_PROJCS;b.PE_TYPE_GEOGTRAN=a._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;b.PE_TYPE_COORDSYS=a._pe.PeDefs.prototype.PE_TYPE_COORDSYS;b.PE_TYPE_UNIT=a._pe.PeDefs.prototype.PE_TYPE_UNIT;b.PE_STR_OPTS_NONE=a._pe.PeDefs.prototype.PE_STR_OPTS_NONE;b.PE_STR_AUTH_NONE=
a._pe.PeDefs.prototype.PE_STR_AUTH_NONE;b.PE_STR_AUTH_TOP=a._pe.PeDefs.prototype.PE_STR_AUTH_TOP;b.PE_STR_NAME_CANON=a._pe.PeDefs.prototype.PE_STR_NAME_CANON;b.PE_PARM_X0=a._pe.PeDefs.prototype.PE_PARM_X0;b.PE_PARM_ND=a._pe.PeDefs.prototype.PE_PARM_ND;b.PE_TRANSFORM_1_TO_2=a._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;b.PE_TRANSFORM_2_TO_1=a._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;b.PE_TRANSFORM_P_TO_G=a._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;b.PE_TRANSFORM_G_TO_P=a._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;
b.PE_HORIZON_RECT=a._pe.PeDefs.prototype.PE_HORIZON_RECT;b.PE_HORIZON_POLY=a._pe.PeDefs.prototype.PE_HORIZON_POLY;b.PE_HORIZON_LINE=a._pe.PeDefs.prototype.PE_HORIZON_LINE;b.PE_HORIZON_DELTA=a._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(r=a.PeDefs||(a.PeDefs={}));(function(b){function c(b,c){var e=null,m=h[b];m||(m={},h[b]=m);m.hasOwnProperty(String(c))?e=m[c]:(b=a._pe.PeFactory.prototype.factoryByType(b,c),a._pe.compare(b,a._pe.NULL)||(e=b,m[c]=e));return e=d(e)}function d(b){if(b){var c=b.getType();
switch(c){case r.PE_TYPE_GEOGCS:b=a._pe.castObject(b,a._pe.PeGeogcs);break;case r.PE_TYPE_PROJCS:b=a._pe.castObject(b,a._pe.PeProjcs);break;case r.PE_TYPE_GEOGTRAN:b=a._pe.castObject(b,a._pe.PeGeogtran);break;default:c&r.PE_TYPE_UNIT&&(b=a._pe.castObject(b,a._pe.PeUnit))}}return b}var h={},q={};b.initialize=function(){a._pe.PeFactory.prototype.initialize(null)};b.coordsys=function(b){return c(r.PE_TYPE_COORDSYS,b)};b.factoryByType=c;b.fromString=function(b,c){var e=null,h=q[b];h||(h={},q[b]=h);h.hasOwnProperty(c)?
e=h[c]:(b=a._pe.PeFactory.prototype.fromString(b,c),a._pe.compare(b,a._pe.NULL)||(e=b,h[c]=e));return e=d(e)};b.geogcs=function(b){return c(r.PE_TYPE_GEOGCS,b)};b.geogtran=function(b){return c(r.PE_TYPE_GEOGTRAN,b)};b.getCode=function(b){return a._pe.PeFactory.prototype.getCode(b)};b.projcs=function(b){return c(r.PE_TYPE_PROJCS,b)};b.unit=function(b){return c(r.PE_TYPE_UNIT,b)}})(a.PeFactory||(a.PeFactory={}));a.PeGCSExtent=null;var y;(function(b){var c;b.init=function(){b.PE_GTLIST_OPTS_COMMON=a._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;
c=a._pe._pe_getPeGTlistExtendedEntrySize()};b.getGTlist=function(b,e,d,m,k,l){var h=null,q=new a._pe.PeInteger(l);try{var f=a._pe.PeGTlistExtended.prototype.getGTlist(b,e,d,m,k,q);if(l=q.val)if(h=[f],1<l){var n=a._pe.getPointer(f);for(b=1;b<l;b++)h.push(a._pe.wrapPointer(n+c*b,a._pe.PeGTlistExtendedEntry))}}finally{a._pe.destroy(q)}return h}})(y=a.PeGTlistExtended||(a.PeGTlistExtended={}));(function(b){b.destroy=function(b){if(b&&b.length){for(var c=0;c<b.length;c++){var e=b[c];g(e);e.getEntries().forEach(function(b){g(b);
b=b.getGeogtran();g(b);b.getParameters().forEach(g);[b.getGeogcs1(),b.getGeogcs2()].forEach(function(b){g(b);var a=b.getDatum();g(a);g(a.getSpheroid());g(b.getPrimem());g(b.getUnit())})})}a._pe.PeGTlistExtendedEntry.prototype.Delete(b[0])}}})(a.PeGTlistExtendedEntry||(a.PeGTlistExtendedEntry={}));(function(b){b.geogToGeog=function(b,c,h,k,m){a._pe.ensureCache.prepare();var e=n(h),q=h===e,e=a._pe.ensureFloat64(e),l=0;k&&(l=a._pe.ensureFloat64(k));(b=a._pe._pe_geog_to_geog(a._pe.getPointer(b),c,e,l,
m))&&d(h,c,e,q);return b}})(a.PeGTTransformations||(a.PeGTTransformations={}));(function(b){function c(b,c,e,d,k,l){a._pe.ensureCache.prepare();var h,m;switch(b){case "dd":h=a._pe._pe_geog_to_dd;m=r.PE_DD_MAX;break;case "ddm":h=a._pe._pe_geog_to_ddm;m=r.PE_DDM_MAX;break;case "dms":h=a._pe._pe_geog_to_dms,m=r.PE_DMS_MAX}b=0;c&&(b=a._pe.getPointer(c));c=n(d);c=a._pe.ensureFloat64(c);m=t(e,m);d=a._pe.ensureInt32(m);if(k=h(b,e,c,k,d))for(h=0;h<e;h++)l[h]=a._pe.UTF8ToString(m[h]);return k}function k(b,
c,e,k,l){a._pe.ensureCache.prepare();var h;switch(b){case "dd":h=a._pe._pe_dd_to_geog;break;case "ddm":h=a._pe._pe_ddm_to_geog;break;case "dms":h=a._pe._pe_dms_to_geog}b=0;c&&(b=a._pe.getPointer(c));c=k.map(function(b){return a._pe.ensureString(b)});k=a._pe.ensureInt32(c);c=a._pe.ensureFloat64(Array(2*e));(h=h(b,e,k,c))&&d(l,e,c);return h}b.geog_to_dms=function(b,a,e,d,k){return c("dms",b,a,e,d,k)};b.dms_to_geog=function(b,c,a,e){return k("dms",b,c,a,e)};b.geog_to_ddm=function(b,a,e,d,k){return c("ddm",
b,a,e,d,k)};b.ddm_to_geog=function(b,c,a,e){return k("ddm",b,c,a,e)};b.geog_to_dd=function(b,a,e,d,k){return c("dd",b,a,e,d,k)};b.dd_to_geog=function(b,c,a,e){return k("dd",b,c,a,e)}})(a.PeNotationDms||(a.PeNotationDms={}));var b;(function(b){b.init=function(){b.PE_MGRS_STYLE_NEW=a._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;b.PE_MGRS_STYLE_OLD=a._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;b.PE_MGRS_STYLE_AUTO=a._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;b.PE_MGRS_180_ZONE_1_PLUS=a._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;
b.PE_MGRS_ADD_SPACES=a._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};b.geog_to_mgrs_extended=function(b,c,d,k,m,l,f){a._pe.ensureCache.prepare();var e=0;b&&(e=a._pe.getPointer(b));b=n(d);d=a._pe.ensureFloat64(b);b=t(c,r.PE_MGRS_MAX);var h=a._pe.ensureInt32(b);if(k=a._pe._pe_geog_to_mgrs_extended(e,c,d,k,m,l,h))for(m=0;m<c;m++)f[m]=a._pe.UTF8ToString(b[m]);return k};b.mgrs_to_geog_extended=function(b,c,h,k,l){a._pe.ensureCache.prepare();var e=0;b&&(e=a._pe.getPointer(b));b=h.map(function(b){return a._pe.ensureString(b)});
h=a._pe.ensureInt32(b);b=a._pe.ensureFloat64(Array(2*c));(k=a._pe._pe_mgrs_to_geog_extended(e,c,h,k,b))&&d(l,c,b);return k}})(b=a.PeNotationMgrs||(a.PeNotationMgrs={}));(function(b){b.geog_to_usng=function(b,c,d,k,l,f,g){a._pe.ensureCache.prepare();var e=0;b&&(e=a._pe.getPointer(b));b=n(d);d=a._pe.ensureFloat64(b);b=t(c,r.PE_MGRS_MAX);var h=a._pe.ensureInt32(b);if(k=a._pe._pe_geog_to_usng(e,c,d,k,l,f,h))for(l=0;l<c;l++)g[l]=a._pe.UTF8ToString(b[l]);return k};b.usng_to_geog=function(b,c,k,l){a._pe.ensureCache.prepare();
var e=0;b&&(e=a._pe.getPointer(b));b=k.map(function(b){return a._pe.ensureString(b)});k=a._pe.ensureInt32(b);b=a._pe.ensureFloat64(Array(2*c));(e=a._pe._pe_usng_to_geog(e,c,k,b))&&d(l,c,b);return e}})(a.PeNotationUsng||(a.PeNotationUsng={}));var k;(function(b){b.init=function(){b.PE_UTM_OPTS_NONE=a._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;b.PE_UTM_OPTS_ADD_SPACES=a._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;b.PE_UTM_OPTS_NS=a._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};b.geog_to_utm=function(b,
c,d,k,l){a._pe.ensureCache.prepare();var e=0;b&&(e=a._pe.getPointer(b));b=n(d);d=a._pe.ensureFloat64(b);b=t(c,r.PE_UTM_MAX);var h=a._pe.ensureInt32(b);if(k=a._pe._pe_geog_to_utm(e,c,d,k,h))for(e=0;e<c;e++)l[e]=a._pe.UTF8ToString(b[e]);return k};b.utm_to_geog=function(b,c,k,l,m){a._pe.ensureCache.prepare();var e=0;b&&(e=a._pe.getPointer(b));b=k.map(function(b){return a._pe.ensureString(b)});k=a._pe.ensureInt32(b);b=a._pe.ensureFloat64(Array(2*c));(l=a._pe._pe_utm_to_geog(e,c,k,l,b))&&d(m,c,b);return l}})(k=
a.PeNotationUtm||(a.PeNotationUtm={}));var l;(function(b){var c=new Map;b.init=function(){b.PE_PCSINFO_OPTION_NONE=a._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;b.PE_PCSINFO_OPTION_DOMAIN=a._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;b.PE_POLE_OUTSIDE_BOUNDARY=a._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;b.PE_POLE_POINT=a._pe.PePCSInfo.prototype.PE_POLE_POINT};b.generate=function(e,k){void 0===k&&(k=b.PE_PCSINFO_OPTION_DOMAIN);var d,l;c.has(e)&&(l=c.get(e),l[k]&&(d=l[k]));d||(d=a._pe.PePCSInfo.prototype.generate(e,
k),l||(l=[],c.set(e,l)),l[k]=d);return d}})(l=a.PePCSInfo||(a.PePCSInfo={}));(function(b){b.version_string=function(){return a._pe.PeVersion.prototype.version_string()}})(a.PeVersion||(a.PeVersion={}));a._init=p})},"esri/geometry/support/GeographicTransformation":function(){define(["require","exports","./GeographicTransformationStep"],function(w,a,v){return function(){function a(a){this.steps=[];this._cached_projection={};this._chain="";this._gtlistentry=null;if(a&&a.steps){var f=0;for(a=a.steps;f<
a.length;f++){var g=a[f];g instanceof v?this.steps.push(g):this.steps.push(new v({wkid:g.wkid,wkt:g.wkt,isInverse:g.isInverse}))}}}a.cacheKey=function(a,f){return[void 0!==a.wkid&&null!==a.wkid?a.wkid.toString():"-1",void 0!==a.wkt&&null!==a.wkt?a.wkt.toString():"",void 0!==f.wkid&&null!==f.wkid?f.wkid.toString():"-1",void 0!==f.wkt&&null!==f.wkt?f.wkt.toString():""].join()};a.fromGE=function(f){var u=new a,g="",t=0;for(f=f.steps;t<f.length;t++){var n=v.fromGE(f[t]);u.steps.push(n);g+=n.uid.toString()+
","}u._cached_projection={};u._gtlistentry=null;u._chain=g;return u};a.prototype.getInverse=function(){var f=new a;f.steps=[];for(var p=this.steps.length-1;0<=p;p--)f.steps.push(this.steps[p].getInverse());return f};a.prototype.getGTListEntry=function(){for(var a="",f=0,g=this.steps;f<g.length;f++)a+=g[f].uid.toString()+",";a!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=a);return this._gtlistentry};a.prototype.assignCachedGe=function(f,p,g){this._cached_projection[a.cacheKey(f,
p)]=g};a.prototype.getCachedGeTransformation=function(f,p){for(var g="",t=0,n=this.steps;t<n.length;t++)g+=n[t].uid.toString()+",";g!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=g);f=this._cached_projection[a.cacheKey(f,p)];return void 0===f?null:f};return a}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["require","exports"],function(w,a){var v=0;return function(){function a(a){void 0===a&&(a=null);this.uid=v++;a?(this._wkt=void 0!==
a.wkt?a.wkt:null,this._wkid=void 0!==a.wkid?a.wkid:-1,this._isInverse=void 0!==a.isInverse?!0===a.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}a.fromGE=function(f){var p=new a;p._wkt=f.wkt;p._wkid=f.wkid;p._isInverse=f.isInverse;return p};Object.defineProperty(a.prototype,"wkt",{get:function(){return this._wkt},set:function(a){this._wkt=a;this.uid=v++},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"wkid",{get:function(){return this._wkid},set:function(a){this._wkid=
a;this.uid=v++},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"isInverse",{get:function(){return this._isInverse},set:function(a){this._isInverse=a;this.uid=v++},enumerable:!0,configurable:!0});a.prototype.getInverse=function(){var f=new a;f._wkt=this.wkt;f._wkid=this._wkid;f._isInverse=!this.isInverse;return f};return a}()})},"esri/views/2d/layers/features/support/AttributeStore":function(){define("require exports ../../../../../core/tsSupport/generatorHelper ../../../../../core/tsSupport/awaiterHelper ../../../../../core/Error ../../../../../core/has ../../../../../core/Logger ../../../../../core/mathUtils ../../../../../core/maybe ../../../../../core/promiseUtils ../../../../../layers/support/FieldsIndex ../../../../../support/arcadeOnDemand ../../../../webgl ../../../engine ../../../arcade/utils ../../../engine/webgl/definitions ../tileRenderers/support/visualVariablesUtils @dojo/framework/shim/Promise".split(" "),
function(w,a,v,f,u,p,g,t,n,d,x,r,y,b,k,l,c){Object.defineProperty(a,"__esModule",{value:!0});var e=g.getLogger("esri.views.layers.2d.features.support.AttributeStore"),C=b.debug.createDebugLogger(b.debug.DEBUG_ATTR_UPDATES,e),h=function(b,a){return function(c,e,k){var d;try{d=a(c,e,k)}catch(I){d=NaN}return(null===d||isNaN(d)||Infinity===d)&&b||d}},q=p("esri-shared-array-buffer"),m=p("esri-webgl-texture-float"),z=p("esri-webgl-max-texture-size"),E=p("esri-atomics"),K=function(){function a(b,a,c,e){this.texelSize=
4;var d=e.pixelType,k=e.layout;this.textureOnly=(e=e.textureOnly)||!1;this.pixelType=d;this._ctype=a;this.layout=k;this._resetRange();this._shared=b;e||(this.data=this._initData(d,c,b,a))}Object.defineProperty(a.prototype,"buffer",{get:function(){return n.andThen(this.data,function(b){return b.buffer})},enumerable:!0,configurable:!0});a.prototype.getData=function(b,a){b&=2147483647;return n.expect(this.data)[b*this.texelSize+a]};a.prototype.setData=function(b,a,c){b&=2147483647;0===(this.layout&1<<
a)?e.error("mapview-attributes-store","Tried to set a value for a texel's readonly component"):(this.data[b*this.texelSize+a]=c,this.dirtyStart=Math.min(this.dirtyStart,b),this.dirtyEnd=Math.max(this.dirtyEnd,b))};a.prototype.lock=function(){5121===this.pixelType&&this._shared&&E&&"local"!==this._ctype&&Atomics.store(this.data,0,1)};a.prototype.unlock=function(){5121===this.pixelType&&this._shared&&E&&"local"!==this._ctype&&Atomics.store(this.data,0,0)};a.prototype.expand=function(b){if(!this.textureOnly){b=
this._initData(this.pixelType,b,this._shared,this._ctype);var a=n.expect(this.data);b.set(a);this.data=b}};a.prototype.toMessage=function(){var a=this.dirtyStart,c=this.dirtyEnd,e=this.texelSize;if(a>c)return null;this._resetRange();var d=!this._shared&&"local"!==this._ctype,k=this.pixelType,l=this.layout,h=n.expect(this.data);if(!h.slice){if(!d)return{start:a,end:c,data:null,pixelType:k,layout:l};e=new (b.Utils.getPixelArrayCtor(this.pixelType))(Array.prototype.slice.call(this.data,a*e,(c+1)*e));
return{start:a,end:c,data:e,pixelType:k,layout:l}}e=d&&h.slice(a*e,(c+1)*e)||null;return{start:a,end:c,data:e,pixelType:k,layout:l}};a.prototype._initData=function(a,c,e,d){e=e&&"local"!==d?SharedArrayBuffer:ArrayBuffer;a=b.Utils.getPixelArrayCtor(a);c=new a(new e(c*c*4*a.BYTES_PER_ELEMENT));for(a=0;a<c.length;a+=4)c[a+1]=255;return c};a.prototype._resetRange=function(){this.dirtyStart=2147483647;this.dirtyEnd=0};return a}();p=function(){function a(a){this._attributeComputeMap=new Map;this._blocks=
[];this._idMap=new Map;this._localToObjectId=new Map;this._filters=Array(b.definitions.MAX_FILTERS);this._freeTexelsList=[];this._abortController=d.createAbortController();this._hasScaleExpr=!1;this._size=32;this._idCounter=1;this._idsToHighlight=new Set;var c=m?5126:5121;C("Creating AttributeStore "+(q?"with":"without")+" shared memory");this._client=a;this._blockDescriptors=[{pixelType:5121,layout:1},{pixelType:5121,layout:15,textureOnly:!0},{pixelType:c,layout:15},{pixelType:c,layout:15}];this._blocks=
this._blockDescriptors.map(function(){return null})}a.prototype.destroy=function(){this._abortController.abort()};Object.defineProperty(a.prototype,"hasScaleExpr",{get:function(){return this._hasScaleExpr},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"_signal",{get:function(){return this._abortController.signal},enumerable:!0,configurable:!0});a.prototype.invalidateResources=function(){this._createResourcesPromise=null;this._abortController.abort();this._abortController=d.createAbortController()};
a.prototype.createLocalId=function(b,a){void 0===a&&(a=!1);if(!this._idMap.has(b)){var c=this._getFreeTexel();a=((a?2147483648:0)|c)>>>0;this._idMap.set(b,-1===a?0:a);this._localToObjectId.set(a,b)}return this._idMap.get(b)};a.prototype.addLocalId=function(b){this._getBlock(0).setData(b,0,0);this._freeTexelsList.push(b&2147483647)};a.prototype.removeLocalId=function(b){var a=this._idMap.get(b);this._idMap.delete(b);this._localToObjectId.delete(a);return a};a.prototype.freeLocalId=function(b){var a=
this._idMap.get(b);this._getBlock(0).setData(a,0,0);this._idMap.delete(b);this._localToObjectId.delete(a);this._freeTexelsList.push(a&2147483647)};a.prototype.getFeatureId=function(b){return this._localToObjectId.get(b)};a.prototype.getLocalId=function(b){return this._idMap.has(b)?this._idMap.get(b):null};a.prototype.setHighlight=function(b){return f(this,void 0,void 0,function(){var a,c,e,d,k,l,h=this;return v(this,function(m){switch(m.label){case 0:this._getBlock(0).lock();this._idsToHighlight.forEach(function(b){if(b=
h.getLocalId(b)){var a=h._getBlock(0).getData(b,0);h._getBlock(0).setData(b,0,a&-2)}});this._idsToHighlight.clear();a=0;for(c=b;a<c.length;a++)e=c[a],this._idsToHighlight.add(e);for(d=0;d<b.length;d++)k=this.getLocalId(b[d]),null!=k&&(l=this._getBlock(0).getData(k,0),this._getBlock(0).setData(k,0,l|1));this._getBlock(0).unlock();return[4,this.sendUpdates()];case 1:return m.sent(),[2]}})})};a.prototype.addHighlight=function(){return f(this,void 0,void 0,function(){return v(this,function(b){return[2]})})};
a.prototype.removeHighlight=function(){return f(this,void 0,void 0,function(){return v(this,function(b){return[2]})})};a.prototype.updateFilters=function(b){return f(this,void 0,void 0,function(){var a,c,e,k,l,h=this;return v(this,function(m){switch(m.label){case 0:return a=b.config,c=b.service,e=b.spatialReference,k=a.filters,l=k.map(function(a,d){return h._updateFilter(b,a,d,c,e)}),[4,d.all(l)];case 1:return m.sent(),[2]}})})};a.prototype.setAttributeBindings=function(b,a){return f(this,void 0,
void 0,function(){return v(this,function(c){this._hasScaleExpr=!1;switch(b.type){case "simple":case "class-breaks":case "unique-value":case "dictionary":return[2,this._bindVVEvaluators(b.visualVariables,a)];case "dot-density":return[2,this._bindDDEvaluators(b.attributes,a)];case "heatmap":break;default:e.error(new u("attribute-store","Found invalid renderer type: "+b))}return[2]})})};a.prototype.setData=function(b,a,c,e){this._getBlock(a).setData(b,c,e)};a.prototype.getData=function(b,a,c){return this._getBlock(a).getData(b,
c)};a.prototype.getHighlightFlag=function(b){return this._idsToHighlight.has(b)?l.HIGHLIGHT_FLAG:0};a.prototype.setAttributeData=function(a,c,e,d){var k=this;this._getBlock(0).setData(a,0,this.getFilterFlags(c));var h=m?1:2;this._attributeComputeMap.forEach(function(f,q){var A=q*h%4;q=k._getBlock(Math.floor(q*h/4)+l.ATTRIBUTE_DATA_VV);f=f(c,{$view:d},e);if(m)q.setData(a,A,f);else if(f===b.definitions.NAN_MAGIC_NUMBER)q.setData(a,A,255),q.setData(a,A+1,255);else{f=t.clamp(Math.round(f),-32767,32766)+
32768;var n=(f&65280)>>8;q.setData(a,A,f&255);q.setData(a,A+1,n)}})};a.prototype.sendUpdates=function(){var b=this;if(this._nextUpdate)return this._nextUpdate.promise;if(this._currUpdate)return this._nextUpdate=d.createResolver(),this._nextUpdate.promise;var a={blocks:this._blocks.map(function(b){return n.isSome(b)?b.toMessage():null})};return this._currUpdate=this._createResources().then(function(){var c=function(){b._currUpdate=null;if(b._nextUpdate){var a=b._nextUpdate;b._nextUpdate=null;b.sendUpdates().then(function(){return a.resolve()})}},
c=b._client.update(a,b._signal).then(c).catch(c);b._client.render();return c}).catch(function(a){if(d.isAbortError(a))return b._createResourcesPromise=null,b._createResources();e.error(new u("mapview-attribute-store","Encountered an error during client update",a));return d.resolve()})};a.prototype._createResources=function(){var b=this;if(n.isSome(this._createResourcesPromise))return this._createResourcesPromise;this._getBlock(l.ATTRIBUTE_DATA_ANIMATION);C("Initializing AttributeStore");var a={shared:q&&
"local"!==this._client.type,size:this._size,blocks:n.mapMany(this._blocks,function(b){return{textureOnly:b.textureOnly,buffer:b.buffer,pixelType:b.pixelType}})};this._createResourcesPromise=a=this._client.initialize(a,this._signal).catch(function(a){d.isAbortError(a)?b._createResourcesPromise=null:e.error(new u("mapview-attribute-store","Encountered an error during client initialization",a))});a.then(function(){return n.isNone(b._createResourcesPromise)?b._createResources():void 0});return a};a.prototype._getBlock=
function(b){var a=this._blocks[b];if(n.isSome(a))return a;C("Initializing AttributeBlock at index "+b);a=new K(q,this._client.type,this._size,this._blockDescriptors[b]);this._blocks[b]=a;this._createResourcesPromise=null;return a};a.prototype._expand=function(){if(this._size<z){var b=this._size<<=1;C("Expanding block size to",b,this._blocks);n.forEachSome(this._blocks,function(a){return a.expand(b)});this._createResourcesPromise=null;this._size=b;return 0}e.error(new u("mapview-limitations","Maximum number of onscreen features exceeded."));
return-1};a.prototype._getFreeTexel=function(){return this._freeTexelsList.length?this._freeTexelsList.pop():this._idCounter>=this._size*this._size&&this._expand()?-1:this._idCounter++};a.prototype._updateFilter=function(b,a,c,e,d){return f(this,void 0,void 0,function(){var k,l,h,m,f,q,A,g,x,r=this;return v(this,function(I){switch(I.label){case 0:k=this._filters[c];l=n.isSome(k)&&k.hash;if(l===JSON.stringify(a))return[2];h=1<<c+1;return n.isNone(a)?(this._filters[c]=null,this._idMap.forEach(function(b){var a=
r._getBlock(0).getData(b,0);r._getBlock(0).setData(b,0,a|h)}),[2]):[4,b.queryObjectIds(a)];case 1:return m=I.sent(),a.hiddenIds&&a.hiddenIds.length&&(m=m.filter(function(b){return-1===a.hiddenIds.indexOf(b)})),f=m.map(function(b){return r._idMap.get(b)}),[4,this._getFilter(c,e)];case 2:q=I.sent();q.update(a,d);this._getBlock(0).lock();this._idMap.forEach(function(b){if(1!==(b&2147483648)>>>31){var a=r._getBlock(0).getData(b,0);r._getBlock(0).setData(b,0,a&~h)}});for(A=0;A<f.length;A++)g=f[A],null!=
g&&(x=this._getBlock(0).getData(g,0),this._getBlock(0).setData(g,0,x|h));this._getBlock(0).unlock();return[2]}})})};a.prototype._getFilter=function(b,a){return f(this,void 0,void 0,function(){var c,e,d;return v(this,function(k){switch(k.label){case 0:return c=this._filters[b],n.isSome(c)?[2,c]:[4,new Promise(function(b,a){w(["../../../../../layers/graphics/data/FeatureFilter"],b,a)})];case 1:return e=k.sent().default,d=new e({geometryType:a.geometryType,hasM:!1,hasZ:!1,timeInfo:a.timeInfo,fieldsIndex:new x(a.fields)}),
this._filters[b]=d,[2,d]}})})};a.prototype.isVisible=function(b){return!!(this._getBlock(0).getData(b.localId,0)&2)};a.prototype.getFilterFlags=function(b){for(var a=0,c=1===(b.localId&2147483648)>>>31?254:255,e=0;e<this._filters.length;e++)var d=this._filters[e],d=!(c&1<<e)||n.isNone(d)||d.check(b),a=a|(d?1:0)<<e;b=this.getFeatureId(b.localId);return a<<1|this.getHighlightFlag(b)};a.prototype._bindVVEvaluators=function(a,c){return f(this,void 0,void 0,function(){var e,k=this;return v(this,function(l){switch(l.label){case 0:this._attributeComputeMap.clear();
if(!n.isSome(a))return[3,2];e=d.all(a.map(function(a){return f(k,void 0,void 0,function(){var e,d;return v(this,function(k){switch(k.label){case 0:return e=b.Utils.getVVType(a.type),[4,this._createGetValueFunction(a,c)];case 1:return d=k.sent(),n.isSome(d)&&this._attributeComputeMap.set(e,d),[2]}})})}));return[4,e];case 1:l.sent(),l.label=2;case 2:return[2]}})})};a.prototype._bindDDEvaluators=function(a,c){return f(this,void 0,void 0,function(){var k,l,m,f=this;return v(this,function(q){switch(q.label){case 0:return this._attributeComputeMap.clear(),
a.length>b.definitions.DOT_DENSITY_MAX_FIELDS&&e.warn("mapview-invalid-value","DotDensityRenderer supports a maximum of "+b.definitions.DOT_DENSITY_MAX_FIELDS+" attribtues, but found "+a.length),[4,d.all(a.map(function(b){return f._createNormalizedFunction(b,c)}))];case 1:k=q.sent().map(function(b){return h(0,b)});for(l=0;l<b.definitions.DOT_DENSITY_MAX_FIELDS;l++)(m=l<a.length&&k[l])?this._attributeComputeMap.set(l,m):this._attributeComputeMap.has(l)&&this._attributeComputeMap.delete(l);return[2]}})})};
a.prototype._createGetValueFunction=function(a,e){return f(this,void 0,void 0,function(){var d,k,l,m,f,q,n;return v(this,function(A){switch(A.label){case 0:if("size"!==a.type)return[3,2];d=b.getTypeOfSizeVisualVariable(a);if(d===b.enums.WGLVVFlag.SIZE_SCALE_STOPS)return[2,null];l=(k=d===b.enums.WGLVVFlag.SIZE_UNIT_VALUE)&&function(b){return c.getVisualVariableSizeValueRepresentationRatio(b,a.valueRepresentation)};m=h;f=[b.definitions.NAN_MAGIC_NUMBER];return[4,this._createNormalizedFunction(a,e,l)];
case 1:return[2,m.apply(void 0,f.concat([A.sent()]))];case 2:return q=h,n=[b.definitions.NAN_MAGIC_NUMBER],[4,this._createNormalizedFunction(a,e)];case 3:return[2,q.apply(void 0,n.concat([A.sent()]))]}})})};a.prototype._createNormalizedFunction=function(b,a,c){return f(this,void 0,void 0,function(){var d,l,h;return v(this,function(m){switch(m.label){case 0:if(d=b.field){if("string"===typeof d)return(l=b.normalizationField)?[2,function(b){if(b.attributes[d]&&b.attributes[l])return b=b.attributes[d]/
b.attributes[l],c?c(b):b}]:[2,c?function(b){return c(b.attributes[d])}:function(b){return b.attributes[d]}];e.error(new u("mapview-rendering:invalid-type","The field for a vv must be a string or a number, but got "+typeof d));return[2,function(){}]}if(!b.valueExpression)return[3,2];this._hasScaleExpr=this._hasScaleExpr||-1!==b.valueExpression.indexOf("scale");return[4,r.createVVExpression(b.valueExpression,a.spatialReference,a.fields)];case 1:return h=m.sent(),[2,k.callWithOptimizedFeature.bind(null,
h)];case 2:return e.error("Unable to create a normalized function for visual variable: "+b),[2,function(){}]}})})};return a}();a.default=p})},"esri/views/2d/layers/features/tileRenderers/support/visualVariablesUtils":function(){define("require exports ../../../../../../core/tsSupport/assignHelper ../../../../../../core/screenUtils ../../../../engine ../../../../engine/webgl/definitions ../../../../../3d/layers/support/FastSymbolUpdates".split(" "),function(w,a,v,f,u,p,g){function t(b){return{value:b.value,
size:f.toPt(b.size)}}function n(b){return b.map(function(b){return t(b)})}function d(b){return"string"===typeof b||"number"===typeof b?f.toPt(b):{type:"size",expression:b.expression,stops:n(b.stops)}}function x(b){var a={values:[0,0,0,0,0,0,0,0],opacities:[0,0,0,0,0,0,0,0]};if(u.Utils.isString(b.field))if(b.stops){if(8<b.stops.length)return null;var d=b.stops;for(b=0;8>b;++b){var c=d[Math.min(b,d.length-1)];a.values[b]=c.value;a.opacities[b]=c.opacity}}else return null;else if(b.stops&&0<=b.stops.length)for(d=
b.stops&&0<=b.stops.length&&b.stops[0].opacity,b=0;8>b;b++)a.values[b]=Infinity,a.opacities[b]=d;else return null;return a}Object.defineProperty(a,"__esModule",{value:!0});var r=u.enums.WGLVVFlag;a.getVisualVariableSizeValueRepresentationRatio=function(b,a){if(!b||!a)return b;switch(a){case "radius":case "distance":return 2*b;case "area":return Math.sqrt(b)}return b};a.stopToSizeStop=t;a.normalizeSizeStops=n;a.normalizeSizeElement=d;a.getVisualVariablesFields=function(b){var a=b&&0<b.length?{}:null;
a&&b.forEach(function(b){var c=b.type;b.field&&(a[c]=b.field)});return a};var y=function(b){var a=[],d=[];b=n(b);for(var c=b.length,e=0;6>e;e++){var g=b[Math.min(e,c-1)];a.push(g.value);d.push(null==g.size?p.NAN_MAGIC_NUMBER:f.pt2px(g.size))}return{values:new Float32Array(a),sizes:new Float32Array(d)}};a.convertVisualVariables=function(b){var a=b&&0<b.length?{}:null,l=a?{}:null;if(!a)return{vvFields:a,vvRanges:l};for(var c=0;c<b.length;c++){var e=b[c],f=e.type;e.field&&(a[f]=e.field);if("size"===
f)switch(l.size||(l.size={}),u.getTypeOfSizeVisualVariable(e)){case r.SIZE_MINMAX_VALUE:l.size.minMaxValue={minDataValue:e.minDataValue,maxDataValue:e.maxDataValue,minSize:d(e.minSize),maxSize:d(e.maxSize)};break;case r.SIZE_SCALE_STOPS:l.size.scaleStops={stops:n(e.stops)};break;case r.SIZE_FIELD_STOPS:if(e.levels){var f={},h;for(h in e.levels)f[h]=y(e.levels[h]);l.size.fieldStops={type:"level-dependent",levels:f}}else l.size.fieldStops=v({type:"static"},y(e.stops));break;case r.SIZE_UNIT_VALUE:l.size.unitValue=
{unit:e.valueUnit,valueRepresentation:e.valueRepresentation}}else if("color"===f){if(e=g.convertVisualVariables([e],{modelSize:null,symbolSize:null,unitInMeters:1,transformation:null}))for(l.color=e.color,e=0;32>e;e+=4)u.color.premultiplyAlpha(l.color.colors,e,!0)}else"opacity"===f?l.opacity=x(e):"rotation"===f&&(l.rotation={type:e.rotationType})}return{vvFields:a,vvRanges:l}}})},"esri/views/3d/layers/support/FastSymbolUpdates":function(){define("require exports ../../../../core/compilerUtils ../../../../core/mathUtils ../../../../core/libs/gl-matrix-2/mat3 ../../../../core/libs/gl-matrix-2/mat3f64 ../../../../core/libs/gl-matrix-2/mat4 ../../../../core/libs/gl-matrix-2/mat4f64 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../renderers/support/utils ../../support/debugFlags".split(" "),
function(w,a,v,f,u,p,g,t,n,d,x,r){function y(b){return null!==b&&void 0!==b}function b(b){return"number"===typeof b}function k(b){return"string"===typeof b}function l(b,a){b&&b.push(a)}function c(a,c,d,k,h){var m=a.minSize,f=a.maxSize;if(a.expression)return l(h,"Could not convert size info: expression not supported"),!1;if(a.useSymbolValue)return a=k.symbolSize[d],c.minSize[d]=a,c.maxSize[d]=a,c.offset[d]=c.minSize[d],c.factor[d]=0,c.type[d]=1,!0;if(y(a.field)){if(y(a.stops)){if(2===a.stops.length&&
b(a.stops[0].size)&&b(a.stops[1].size))return e(a.stops[0].size,a.stops[1].size,a.stops[0].value,a.stops[1].value,c,d),c.type[d]=1,!0;l(h,"Could not convert size info: stops only supported with 2 elements");return!1}if(b(m)&&b(f)&&y(a.minDataValue)&&y(a.maxDataValue))return e(m,f,a.minDataValue,a.maxDataValue,c,d),c.type[d]=1,!0;if(null!=x.meterIn[a.valueUnit])return c.minSize[d]=-Infinity,c.maxSize[d]=Infinity,c.offset[d]=0,c.factor[d]=1/x.meterIn[a.valueUnit],c.type[d]=1,!0;if("unknown"===a.valueUnit)return l(h,
"Could not convert size info: proportional size not supported"),!1;l(h,"Could not convert size info: scale-dependent size not supported");return!1}if(!y(a.field)){if(a.stops&&a.stops[0]&&b(a.stops[0].size))return c.minSize[d]=a.stops[0].size,c.maxSize[d]=a.stops[0].size,c.offset[d]=c.minSize[d],c.factor[d]=0,c.type[d]=1,!0;if(b(m))return c.minSize[d]=m,c.maxSize[d]=m,c.offset[d]=m,c.factor[d]=0,c.type[d]=1,!0}l(h,"Could not convert size info: unsupported variant of sizeInfo");return!1}function e(b,
a,c,e,d,k){e=0<Math.abs(e-c)?(a-b)/(e-c):0;d.minSize[k]=0<e?b:a;d.maxSize[k]=0<e?a:b;d.offset[k]=b-c*e;d.factor[k]=e}function C(b,a,e,d){if(b.normalizationField||b.valueRepresentation)return l(d,"Could not convert size info: unsupported property"),null;var h=b.field;if(null!=h&&!k(h))return l(d,"Could not convert size info: field is not a string"),null;if(!a.size)a.size={field:b.field,minSize:[0,0,0],maxSize:[0,0,0],offset:[0,0,0],factor:[0,0,0],type:[0,0,0]};else if(b.field)if(!a.size.field)a.size.field=
b.field;else if(b.field!==a.size.field)return l(d,"Could not convert size info: multiple fields in use"),null;switch(b.axis){case "width":return(h=c(b,a.size,0,e,d))?a:null;case "height":return(h=c(b,a.size,2,e,d))?a:null;case "depth":return(h=c(b,a.size,1,e,d))?a:null;case "width-and-depth":return(h=c(b,a.size,0,e,d))&&c(b,a.size,1,e,d),h?a:null;case null:case void 0:case "all":return(h=(h=(h=c(b,a.size,0,e,d))&&c(b,a.size,1,e,d))&&c(b,a.size,2,e,d))?a:null;default:return l(d,'Could not convert size info: unknown axis "'+
b.axis+'""'),null}}function h(b,a,c){for(var e=0;3>e;++e){var d=a.unitInMeters;1===b.type[e]&&(d*=a.modelSize[e],b.type[e]=2);b.minSize[e]/=d;b.maxSize[e]/=d;b.offset[e]/=d;b.factor[e]/=d}if(0!==b.type[0])a=0;else if(0!==b.type[1])a=1;else if(0!==b.type[2])a=2;else return l(c,"No size axis contains a valid size or scale"),!1;for(e=0;3>e;++e)0===b.type[e]&&(b.minSize[e]=b.minSize[a],b.maxSize[e]=b.maxSize[a],b.offset[e]=b.offset[a],b.factor[e]=b.factor[a],b.type[e]=b.type[a]);return!0}function q(b,
a,c){b[4*a+0]=c.r/255;b[4*a+1]=c.g/255;b[4*a+2]=c.b/255;b[4*a+3]=c.a}function m(b,a,c){if(b.normalizationField)return l(c,"Could not convert color info: unsupported property"),null;if(k(b.field))if(b.stops){if(8<b.stops.length)return l(c,"Could not convert color info: too many color stops"),null;a.color={field:b.field,values:[0,0,0,0,0,0,0,0],colors:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]};c=b.stops;for(b=0;8>b;++b){var e=c[Math.min(b,c.length-1)];a.color.values[b]=e.value;
q(a.color.colors,b,e.color)}}else return l(c,"Could not convert color info: missing stops or colors"),null;else if(b.stops&&0<=b.stops.length)for(c=b.stops&&0<=b.stops.length&&b.stops[0].color,a.color={field:null,values:[0,0,0,0,0,0,0,0],colors:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},b=0;8>b;b++)a.color.values[b]=Infinity,q(a.color.colors,b,c);else return l(c,"Could not convert color info: no field and no colors/stops"),null;return a}function z(b,a,c){if(b.normalizationField)return l(c,
"Could not convert opacity info: unsupported property"),null;if(k(b.field))if(b.stops){if(8<b.stops.length)return l(c,"Could not convert opacity info: too many opacity stops"),null;a.opacity={field:b.field,values:[0,0,0,0,0,0,0,0],opacityValues:[0,0,0,0,0,0,0,0]};c=b.stops;for(b=0;8>b;++b){var e=c[Math.min(b,c.length-1)];a.opacity.values[b]=e.value;a.opacity.opacityValues[b]=e.opacity}}else return l(c,"Could not convert opacity info: missing stops or opacities"),null;else if(b.stops&&0<=b.stops.length)for(c=
b.stops&&0<=b.stops.length&&b.stops[0].opacity,a.opacity={field:null,values:[0,0,0,0,0,0,0,0],opacityValues:[0,0,0,0,0,0,0,0]},b=0;8>b;b++)a.opacity.values[b]=Infinity,a.opacity.opacityValues[b]=c;else return l(c,"Could not convert opacity info: no field and no opacities/stops"),null;return a}function E(b,a,c){b=2===c&&"arithmetic"===b.rotationType;a.offset[c]=b?90:0;a.factor[c]=b?-1:1;a.type[c]=1}function K(b,a,c){if(!k(b.field))return l(c,"Could not convert rotation info: field is not a string"),
null;if(!a.rotation)a.rotation={field:b.field,offset:[0,0,0],factor:[1,1,1],type:[0,0,0]};else if(b.field)if(!a.rotation.field)a.rotation.field=b.field;else if(b.field!==a.rotation.field)return l(c,"Could not convert rotation info: multiple fields in use"),null;switch(b.axis){case "tilt":return E(b,a.rotation,0),a;case "roll":return E(b,a.rotation,1),a;case null:case void 0:case "heading":return E(b,a.rotation,2),a;default:return l(c,'Could not convert rotation info: unknown axis "'+b.axis+'""'),
null}}function J(b,a,c){if(!b)return null;var e=!a.supportedTypes||!!a.supportedTypes.size,d=!a.supportedTypes||!!a.supportedTypes.color,k=!a.supportedTypes||!!a.supportedTypes.rotation,f=!!a.supportedTypes&&!!a.supportedTypes.opacity,q=b.reduce(function(b,h){if(!b)return b;if(h.valueExpression)return l(c,"Could not convert visual variables: arcade expressions not supported"),null;switch(h.type){case "size":return e?C(h,b,a,c):b;case "color":return d?m(h,b,c):b;case "opacity":return f?z(h,b,c):null;
case "rotation":return k?K(h,b,c):b;default:return v.neverReached(h),null}},{size:null,color:null,opacity:null,rotation:null});return 0<b.length&&q&&!q.size&&!q.color&&!q.opacity&&!q.rotation||q&&q.size&&!h(q.size,a,c)?null:q}function D(b,a,c){if(!!b!==!!a||b&&b.field!==a.field)return!1;if(b&&"rotation"===c)for(c=0;3>c;c++)if(b.type[c]!==a.type[c]||b.offset[c]!==a.offset[c]||b.factor[c]!==a.factor[c])return!1;return!0}function G(b,a){var c={vvSizeEnabled:!1,vvSizeMinSize:null,vvSizeMaxSize:null,vvSizeOffset:null,
vvSizeFactor:null,vvSizeValue:null,vvColorEnabled:!1,vvColorValues:null,vvColorColors:null,vvOpacityEnabled:!1,vvOpacityValues:null,vvOpacityOpacities:null,vvSymbolAnchor:null,vvSymbolRotationMatrix:null},e=b&&null!=b.size;b&&b.size?(c.vvSizeEnabled=!0,c.vvSizeMinSize=b.size.minSize,c.vvSizeMaxSize=b.size.maxSize,c.vvSizeOffset=b.size.offset,c.vvSizeFactor=b.size.factor):b&&e&&(c.vvSizeValue=a.transformation.scale);if(b&&e){c.vvSymbolAnchor=a.transformation.anchor;c.vvSymbolRotationMatrix=p.mat3f64.create();
g.mat4.identity(H);var d=a.transformation.rotation[2],e=a.transformation.rotation[0],k=a.transformation.rotation[1];a=H;void 0===a&&(a=t.mat4f64.create());d=d||0;e=e||0;k=k||0;0!==d&&g.mat4.rotateZ(a,a,-d/180*Math.PI);0!==e&&g.mat4.rotateX(a,a,e/180*Math.PI);0!==k&&g.mat4.rotateY(a,a,k/180*Math.PI);u.mat3.fromMat4(c.vvSymbolRotationMatrix,H)}b&&b.color&&(c.vvColorEnabled=!0,c.vvColorValues=b.color.values,c.vvColorColors=b.color.colors);b&&b.opacity&&(c.vvOpacityEnabled=!0,c.vvOpacityValues=b.opacity.values,
c.vvOpacityOpacities=b.opacity.opacityValues);return c}Object.defineProperty(a,"__esModule",{value:!0});a.convertVisualVariables=J;a.initFastSymbolUpdatesState=function(b,a){return!b||r.DISABLE_FAST_UPDATES?{enabled:!1}:(b=J(b.visualVariables,a))?{enabled:!0,visualVariables:b,materialParameters:G(b,a),requiresShaderTransformation:b&&null!=b.size}:{enabled:!1}};a.updateFastSymbolUpdatesState=function(b,a,c){if(!a||!b.enabled)return!1;var e=b.visualVariables;a=J(a.visualVariables,c);if(!(a&&D(e.size,
a.size,"size")&&D(e.color,a.color,"color")&&D(e.rotation,a.rotation,"rotation")&&D(e.opacity,a.opacity,"opacity")))return!1;b.visualVariables=a;b.materialParameters=G(a,c);b.requiresShaderTransformation=a&&null!=a.size;return!0};a.getMaterialParams=G;var F;(function(b){var a=t.mat4f64.create(),c=d.vec3f64.create();b.evaluateModelTransform=function(b,e,d){if(!b.vvSizeEnabled)return d;g.mat4.copy(a,d);d=b.vvSymbolRotationMatrix;g.mat4.set(H,d[0],d[1],d[2],0,d[3],d[4],d[5],0,d[6],d[7],d[8],0,0,0,0,1);
g.mat4.multiply(a,a,H);for(d=0;3>d;++d)c[d]=f.clamp(b.vvSizeOffset[d]+e[0]*b.vvSizeFactor[d],b.vvSizeMinSize[d],b.vvSizeMaxSize[d]);g.mat4.scale(a,a,c);g.mat4.translate(a,a,b.vvSymbolAnchor);return a};b.evaluateModelTransformScale=function(b,a,c){if(!a.vvSizeEnabled)return n.vec3.set(b,1,1,1);for(var e=0;3>e;++e)b[e]=f.clamp(a.vvSizeOffset[e]+c[0]*a.vvSizeFactor[e],a.vvSizeMinSize[e],a.vvSizeMaxSize[e]);return b}})(F||(F={}));var H=t.mat4f64.create();a.evaluateModelTransform=F.evaluateModelTransform;
a.evaluateModelTransformScale=F.evaluateModelTransformScale})},"esri/core/libs/gl-matrix-2/mat3f64":function(){define(["require","exports","./factories/mat3f64"],function(w,a,v){Object.defineProperty(a,"__esModule",{value:!0});a.mat3f64=v})},"esri/core/libs/gl-matrix-2/factories/mat3f64":function(){define(["require","exports"],function(w,a){Object.defineProperty(a,"__esModule",{value:!0});a.create=function(){return[1,0,0,0,1,0,0,0,1]};a.clone=function(a){return[a[0],a[1],a[2],a[3],a[4],a[5],a[6],
a[7],a[8]]};a.fromValues=function(a,f,u,p,g,t,n,d,x){return[a,f,u,p,g,t,n,d,x]};a.createView=function(a,f){return new Float64Array(a,f,9)}})},"esri/core/libs/gl-matrix-2/mat4f64":function(){define(["require","exports","./factories/mat4f64"],function(w,a,v){Object.defineProperty(a,"__esModule",{value:!0});a.mat4f64=v})},"esri/core/libs/gl-matrix-2/factories/mat4f64":function(){define(["require","exports"],function(w,a){function v(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}Object.defineProperty(a,"__esModule",
{value:!0});a.create=v;a.clone=function(a){return[a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15]]};a.fromValues=function(a,u,p,g,t,n,d,x,r,y,b,k,l,c,e,C){return[a,u,p,g,t,n,d,x,r,y,b,k,l,c,e,C]};a.createView=function(a,u){return new Float64Array(a,u,16)};a.IDENTITY=v()})},"esri/views/3d/support/debugFlags":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/accessorSupport/decorators".split(" "),
function(w,a,v,f,u,p){return new (function(a){function g(){var f=null!==a&&a.apply(this,arguments)||this;f.SCENEVIEW_HITTEST_RETURN_INTERSECTOR=!1;f.SCENEVIEW_LOCKING_LOG=!1;f.HIGHLIGHTS_GRID_OPTIMIZATION_DISABLED=!1;f.HIGHLIGHTS_PROFILE_TO_CONSOLE=!1;f.DECONFLICTOR_SHOW_OUTLINES=!1;f.DECONFLICTOR_SHOW_OUTLINES_INVISIBLE=!1;f.DECONFLICTOR_SHOW_GRID=!1;f.LABELS_SHOW_BORDER=!1;f.OVERLAY_DRAW_DEBUG_TEXTURE=!1;f.OVERLAY_SHOW_CENTER=!1;f.TERRAIN_DEBUG_POPUP=!1;f.TESTS_DISABLE_UPDATE_THRESHOLDS=!1;f.DISABLE_DECONFLICTOR_VISIBILITY_OFFSET=
!1;f.DISABLE_ELEVATION_ALIGNERS_ITERATIVE_UPDATES=!1;f.DRAW_MESH_GEOMETRY_NORMALS=!1;f.FEATURE_TILE_FETCH_SHOW_TILES=!1;f.FEATURE_TILE_TREE_SHOW_TILES=!1;f.I3S_TREE_SHOW_TILES=!1;f.ENABLE_PROFILE_DEPTH_RANGE=!1;f.DISABLE_FAST_UPDATES=!1;f.LOD_INSTANCE_RENDERER_DISABLE_UPDATES=!1;f.LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL=!1;f.EDGES_SHOW_HIDDEN_TRANSPARENT_EDGES=!1;return f}v(g,a);f([p.property()],g.prototype,"SCENEVIEW_HITTEST_RETURN_INTERSECTOR",void 0);f([p.property()],g.prototype,"SCENEVIEW_LOCKING_LOG",
void 0);f([p.property()],g.prototype,"HIGHLIGHTS_GRID_OPTIMIZATION_DISABLED",void 0);f([p.property()],g.prototype,"HIGHLIGHTS_PROFILE_TO_CONSOLE",void 0);f([p.property()],g.prototype,"DECONFLICTOR_SHOW_OUTLINES",void 0);f([p.property()],g.prototype,"DECONFLICTOR_SHOW_OUTLINES_INVISIBLE",void 0);f([p.property()],g.prototype,"DECONFLICTOR_SHOW_GRID",void 0);f([p.property()],g.prototype,"LABELS_SHOW_BORDER",void 0);f([p.property()],g.prototype,"OVERLAY_DRAW_DEBUG_TEXTURE",void 0);f([p.property()],g.prototype,
"OVERLAY_SHOW_CENTER",void 0);f([p.property()],g.prototype,"TERRAIN_DEBUG_POPUP",void 0);f([p.property()],g.prototype,"TESTS_DISABLE_UPDATE_THRESHOLDS",void 0);f([p.property()],g.prototype,"DISABLE_DECONFLICTOR_VISIBILITY_OFFSET",void 0);f([p.property()],g.prototype,"DISABLE_ELEVATION_ALIGNERS_ITERATIVE_UPDATES",void 0);f([p.property()],g.prototype,"DRAW_MESH_GEOMETRY_NORMALS",void 0);f([p.property()],g.prototype,"FEATURE_TILE_FETCH_SHOW_TILES",void 0);f([p.property()],g.prototype,"FEATURE_TILE_TREE_SHOW_TILES",
void 0);f([p.property()],g.prototype,"I3S_TREE_SHOW_TILES",void 0);f([p.property()],g.prototype,"ENABLE_PROFILE_DEPTH_RANGE",void 0);f([p.property()],g.prototype,"DISABLE_FAST_UPDATES",void 0);f([p.property()],g.prototype,"LOD_INSTANCE_RENDERER_DISABLE_UPDATES",void 0);f([p.property()],g.prototype,"LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL",void 0);f([p.property()],g.prototype,"EDGES_SHOW_HIDDEN_TRANSPARENT_EDGES",void 0);return g=f([p.subclass("esri.views.3d.support.DebugFlags")],g)}(p.declared(u)))})},
"esri/views/2d/layers/features/support/TileStore":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../../../../../core/tsSupport/decorateHelper ../../../../../core/Evented ../../../../../core/has ../../../../../core/libs/rbush/rbush ./Tile ../../../tiling/TileCoverage ../../../tiling/TileKey".split(" "),function(w,a,v,f,u,p,g,t,n,d){Object.defineProperty(a,"__esModule",{value:!0});var x={added:[],removed:[]},r=new Set,y=new d(0,0,0,0);w=function(b){function a(a){var c=
b.call(this)||this;c._tiles=new Map;c._index=g(9,p("csp-restrictions")?function(b){return{minX:b.bounds[0],minY:b.bounds[1],maxX:b.bounds[2],maxY:b.bounds[3]}}:[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]);c.tiles=[];c.tileScheme=a;return c}v(a,b);a.prototype.destroy=function(){this._tiles.clear()};a.prototype.clear=function(){this._tiles.clear();this._index.clear()};a.prototype.has=function(b){return this._tiles.has(b)};a.prototype.get=function(b){return this._tiles.get(b)};a.prototype.findByKey=
function(b){return this._tiles.get(b.id)};a.prototype.intersections=function(b,a){var c="string"===typeof b?this.get(b):b;if(!c)return[];var d=a*c.resolution;a=c.bounds[0]-d;b=c.bounds[1]-d;for(var k=c.bounds[2]+d,c=c.bounds[3]+d,d=[],l=0,m=this._index.search({minX:a,minY:b,maxX:k,maxY:c});l<m.length;l++){var f=m[l],g=f.bounds.slice();g[0]=Math.max(g[0],a);g[1]=Math.max(g[1],b);g[2]=Math.min(g[2],k);g[3]=Math.min(g[3],c);0<g[2]-g[0]&&0<g[3]-g[1]&&d.push({bounds:g,tile:f})}return d};a.prototype.boundsIntersections=
function(b){return this._index.search({minX:b[0],minY:b[1],maxX:b[2],maxY:b[3]})};a.prototype.setViewState=function(b){if(b=this.tileScheme.getTileCoverage(b,0)){var a=b.spans,d=b.lodInfo,k=d.level;if(0<a.length)for(var h=0;h<a.length;h++)for(var l=a[h],m=l.row,f=l.colTo,g=l.colFrom;g<=f;g++){var p=y.set(k,m,d.normalizeCol(g),d.getWorldForColumn(g)).id;r.add(p);this.has(p)||(l=new t.default(this.tileScheme,p),this._tiles.set(p,l),this._index.insert(l),this.tiles.push(l),x.added.push(l))}for(a=this.tiles.length-
1;0<=a;a--)l=this.tiles[a],r.has(l.id)||(this._tiles.delete(l.id),this.tiles.splice(a,1),this._index.remove(l),x.removed.push(l));(x.added.length||x.removed.length)&&this.emit("update",x);n.pool.release(b);r.clear();x.added.length=0;x.removed.length=0}};return a}(u);a.default=w})},"esri/core/libs/rbush/rbush":function(){define(["../quickselect/quickselect"],function(w){function a(b,d){if(!(this instanceof a))return new a(b,d);this._maxEntries=Math.max(4,b||9);this._minEntries=Math.max(2,Math.ceil(.4*
this._maxEntries));d&&("function"===typeof d?this.toBBox=d:this._initFormat(d));this.clear()}function v(b,a){f(b,0,b.children.length,a,b)}function f(b,a,d,c,e){e||(e=r(null));e.minX=Infinity;e.minY=Infinity;e.maxX=-Infinity;e.maxY=-Infinity;for(var k;a<d;a++)k=b.children[a],u(e,b.leaf?c(k):k);return e}function u(b,a){b.minX=Math.min(b.minX,a.minX);b.minY=Math.min(b.minY,a.minY);b.maxX=Math.max(b.maxX,a.maxX);b.maxY=Math.max(b.maxY,a.maxY);return b}function p(b,a){return b.minX-a.minX}function g(b,
a){return b.minY-a.minY}function t(b){return(b.maxX-b.minX)*(b.maxY-b.minY)}function n(b){return b.maxX-b.minX+(b.maxY-b.minY)}function d(b,a){return b.minX<=a.minX&&b.minY<=a.minY&&a.maxX<=b.maxX&&a.maxY<=b.maxY}function x(b,a){return a.minX<=b.maxX&&a.minY<=b.maxY&&a.maxX>=b.minX&&a.maxY>=b.minY}function r(b){return{children:b,height:1,leaf:!0,minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity}}function y(b,a,d,c,e){for(var k=[a,d],h;k.length;)d=k.pop(),a=k.pop(),d-a<=c||(h=a+Math.ceil((d-
a)/c/2)*c,w(b,h,a,d,e),k.push(a,h,h,d))}a.prototype={all:function(){return this._all(this.data,[])},search:function(b){var a=this.data,l=[],c=this.toBBox;if(!x(b,a))return l;for(var e=[],f,h,q,m;a;){f=0;for(h=a.children.length;f<h;f++)q=a.children[f],m=a.leaf?c(q):q,x(b,m)&&(a.leaf?l.push(q):d(b,m)?this._all(q,l):e.push(q));a=e.pop()}return l},collides:function(b){var a=this.data,l=this.toBBox;if(!x(b,a))return!1;for(var c=[],e,f,h,q;a;){e=0;for(f=a.children.length;e<f;e++)if(h=a.children[e],q=a.leaf?
l(h):h,x(b,q)){if(a.leaf||d(b,q))return!0;c.push(h)}a=c.pop()}return!1},load:function(b){if(!b||!b.length)return this;if(b.length<this._minEntries){for(var a=0,d=b.length;a<d;a++)this.insert(b[a]);return this}b=this._build(b.slice(),0,b.length-1,0);this.data.children.length?this.data.height===b.height?this._splitRoot(this.data,b):(this.data.height<b.height&&(a=this.data,this.data=b,b=a),this._insert(b,this.data.height-b.height-1,!0)):this.data=b;return this},insert:function(b){b&&this._insert(b,this.data.height-
1);return this},clear:function(){this.data=r([]);return this},remove:function(b,a){if(!b)return this;for(var k=this.data,c=this.toBBox(b),e=[],f=[],h,q,m,g;k||e.length;){k||(k=e.pop(),q=e[e.length-1],h=f.pop(),g=!0);if(k.leaf){a:{m=b;var n=k.children,x=a;if(x){for(var r=0;r<n.length;r++)if(x(m,n[r])){m=r;break a}m=-1}else m=n.indexOf(m)}if(-1!==m){k.children.splice(m,1);e.push(k);this._condense(e);break}}g||k.leaf||!d(k,c)?q?(h++,k=q.children[h],g=!1):k=null:(e.push(k),f.push(h),h=0,q=k,k=k.children[0])}return this},
toBBox:function(b){return b},compareMinX:p,compareMinY:g,toJSON:function(){return this.data},fromJSON:function(b){this.data=b;return this},_all:function(b,a){for(var d=[];b;)b.leaf?a.push.apply(a,b.children):d.push.apply(d,b.children),b=d.pop();return a},_build:function(b,a,d,c){var e=d-a+1,k=this._maxEntries,h;if(e<=k)return h=r(b.slice(a,d+1)),v(h,this.toBBox),h;c||(c=Math.ceil(Math.log(e)/Math.log(k)),k=Math.ceil(e/Math.pow(k,c-1)));h=r([]);h.leaf=!1;h.height=c;var e=Math.ceil(e/k),k=e*Math.ceil(Math.sqrt(k)),
f,m,l;for(y(b,a,d,k,this.compareMinX);a<=d;a+=k)for(m=Math.min(a+k-1,d),y(b,a,m,e,this.compareMinY),f=a;f<=m;f+=e)l=Math.min(f+e-1,m),h.children.push(this._build(b,f,l,c-1));v(h,this.toBBox);return h},_chooseSubtree:function(b,a,d,c){for(var e,k,h,f,m,l,g,n;;){c.push(a);if(a.leaf||c.length-1===d)break;g=n=Infinity;e=0;for(k=a.children.length;e<k;e++)h=a.children[e],m=t(h),l=(Math.max(h.maxX,b.maxX)-Math.min(h.minX,b.minX))*(Math.max(h.maxY,b.maxY)-Math.min(h.minY,b.minY))-m,l<n?(n=l,g=m<g?m:g,f=h):
l===n&&m<g&&(g=m,f=h);a=f||a.children[0]}return a},_insert:function(b,a,d){var c=this.toBBox;d=d?b:c(b);var c=[],e=this._chooseSubtree(d,this.data,a,c);e.children.push(b);for(u(e,d);0<=a;)if(c[a].children.length>this._maxEntries)this._split(c,a),a--;else break;this._adjustParentBBoxes(d,c,a)},_split:function(b,a){var d=b[a],c=d.children.length,e=this._minEntries;this._chooseSplitAxis(d,e,c);c=this._chooseSplitIndex(d,e,c);c=r(d.children.splice(c,d.children.length-c));c.height=d.height;c.leaf=d.leaf;
v(d,this.toBBox);v(c,this.toBBox);a?b[a-1].children.push(c):this._splitRoot(d,c)},_splitRoot:function(b,a){this.data=r([b,a]);this.data.height=b.height+1;this.data.leaf=!1;v(this.data,this.toBBox)},_chooseSplitIndex:function(b,a,d){var c,e,k,h,l,m,g;l=m=Infinity;for(c=a;c<=d-a;c++)e=f(b,0,c,this.toBBox),k=f(b,c,d,this.toBBox),h=Math.max(0,Math.min(e.maxX,k.maxX)-Math.max(e.minX,k.minX))*Math.max(0,Math.min(e.maxY,k.maxY)-Math.max(e.minY,k.minY)),e=t(e)+t(k),h<l?(l=h,g=c,m=e<m?e:m):h===l&&e<m&&(m=
e,g=c);return g},_chooseSplitAxis:function(b,a,d){var c=b.leaf?this.compareMinX:p,e=b.leaf?this.compareMinY:g,k=this._allDistMargin(b,a,d,c);a=this._allDistMargin(b,a,d,e);k<a&&b.children.sort(c)},_allDistMargin:function(b,a,d,c){b.children.sort(c);c=this.toBBox;var e=f(b,0,a,c),k=f(b,d-a,d,c),h=n(e)+n(k),l,m;for(l=a;l<d-a;l++)m=b.children[l],u(e,b.leaf?c(m):m),h+=n(e);for(l=d-a-1;l>=a;l--)m=b.children[l],u(k,b.leaf?c(m):m),h+=n(k);return h},_adjustParentBBoxes:function(b,a,d){for(;0<=d;d--)u(a[d],
b)},_condense:function(b){for(var a=b.length-1,d;0<=a;a--)0===b[a].children.length?0<a?(d=b[a-1].children,d.splice(d.indexOf(b[a]),1)):this.clear():v(b[a],this.toBBox)},_initFormat:function(b){var a=["return a"," - b",";"];this.compareMinX=new Function("a","b",a.join(b[0]));this.compareMinY=new Function("a","b",a.join(b[1]));this.toBBox=new Function("a","return {minX: a"+b[0]+", minY: a"+b[1]+", maxX: a"+b[2]+", maxY: a"+b[3]+"};")}};return a})},"esri/core/libs/quickselect/quickselect":function(){define([],
function(){function w(f,u,p,g,t){for(;g>p;){if(600<g-p){var n=g-p+1,d=u-p+1,x=Math.log(n),r=.5*Math.exp(2*x/3),x=.5*Math.sqrt(x*r*(n-r)/n)*(0>d-n/2?-1:1);w(f,u,Math.max(p,Math.floor(u-d*r/n+x)),Math.min(g,Math.floor(u+(n-d)*r/n+x)),t)}n=f[u];d=p;r=g;a(f,p,u);for(0<t(f[g],n)&&a(f,p,g);d<r;){a(f,d,r);d++;for(r--;0>t(f[d],n);)d++;for(;0<t(f[r],n);)r--}0===t(f[p],n)?a(f,p,r):(r++,a(f,r,g));r<=u&&(p=r+1);u<=r&&(g=r-1)}}function a(a,u,p){var f=a[u];a[u]=a[p];a[p]=f}function v(a,u){return a<u?-1:a>u?1:0}
return function(a,u,p,g,t){w(a,u,p||0,g||a.length-1,t||v)}})},"esri/views/2d/layers/features/support/Tile":function(){define("require exports ../../../../../core/ArrayPool ../../../../../geometry/Extent ../../../../../geometry/support/aaBoundingRect ../../../../../tasks/support/QuantizationParameters ../../../tiling/TileKey".split(" "),function(w,a,v,f,u,p,g){function t(a,d){var f=a.bounds,g=d.bounds;return a.key.id!==d.key.id&&a.key.world===d.key.world&&f[0]<=g[0]&&f[1]<=g[1]&&f[2]>=g[2]&&f[3]>=
g[3]}Object.defineProperty(a,"__esModule",{value:!0});a.isParentOf=t;a.isChildOf=function(a,d){return t(d,a)};w=function(){function a(a,f){this.bounds=u.create();this.key=new g(0,0,0,0);this.objectIds=new Set;this.key.set(f);f=a.getLODInfoAt(this.key);this.tileInfoView=a;this.tileInfoView.getTileBounds(this.bounds,this.key,!0);this.resolution=f.resolution;this.scale=f.scale;this.level=f.level;this.needsClear=!0}Object.defineProperty(a.prototype,"id",{get:function(){return this.key.id},enumerable:!0,
configurable:!0});Object.defineProperty(a.prototype,"extent",{get:function(){return f.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"transform",{get:function(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}},enumerable:!0,configurable:!0});a.prototype.clone=function(){return new a(this.tileInfoView,this.id)};a.prototype.createChildTiles=function(){for(var d=
this.key.getChildKeys(),f=v.acquire(),g=0;g<d.length;g++)f[g]=new a(this.tileInfoView,d[g]);return f};a.prototype.getQuantizationParameters=function(){return p.default.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})};return a}();a.Tile=w;a.default=w})},"esri/views/2d/layers/graphics/GraphicContainer":function(){define("require exports ../../../../core/tsSupport/assignHelper ../../../../core/tsSupport/extendsHelper ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/awaiterHelper ../../engine/FeatureContainer".split(" "),
function(w,a,v,f,u,p,g){Object.defineProperty(a,"__esModule",{value:!0});w=function(a){function g(){return null!==a&&a.apply(this,arguments)||this}f(g,a);Object.defineProperty(g.prototype,"hasLabels",{get:function(){return!1},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"labelsVisible",{get:function(){return!1},enumerable:!0,configurable:!0});g.prototype._renderGraphics=function(a,f){for(var d=0,g=this.children;d<g.length;d++){var b=g[d];b.isReady&&b.hasData&&(b.commitChanges(),
a.context.setStencilFunction(514,b.stencilRef,255),b._displayList.replay(a,b,f))}};g.prototype.renderChildren=function(d){var f=d.painter;this.children.some(function(a){return a.hasData})&&(a.prototype.renderChildren.call(this,d),this._renderGraphics(d),f=f.effects.highlight,f.bind(d),this._renderGraphics(d,f.defines),f.draw(d),f.unbind())};return g}(g.FeatureContainer);a.default=w})},"esri/views/2d/engine/FeatureContainer":function(){define("require exports ../../../core/tsSupport/generatorHelper ../../../core/tsSupport/awaiterHelper ../../../core/tsSupport/extendsHelper ../../../core/tsSupport/assignHelper ../../../core/promiseUtils ../../../core/promiseUtils ../../../geometry/support/aaBoundingRect ../engine".split(" "),
function(w,a,v,f,u,p,g,t,n,d){Object.defineProperty(a,"__esModule",{value:!0});w=function(a){function r(f,b){f=a.call(this,f,b)||this;f._rendererInfo=new d.WGLRendererInfo;f.attributeView=new d.AttributeStoreView;return f}u(r,a);r.prototype.destroy=function(){this.removeAllChildren();this.children.forEach(function(a){return a.destroy()});this.attributeView.destroy()};r.prototype.whenAttached=function(){var a=this;return this.attached?g.resolve():g.create(function(b){return a.once("attached",function(){return b()})})};
r.prototype.setRendererInfo=function(a,b,d){this._rendererInfo.setInfo(a,b,d);this.requestRender()};r.prototype.getMaterialItems=function(a,b){return f(this,void 0,void 0,function(){var d,f,c,e;return v(this,function(k){switch(k.label){case 0:return a&&0!==a.length?[4,this.whenAttached()]:[2,null];case 1:return k.sent(),d=this.stage.painter.textureManager,f=a.map(function(a){return d.rasterizeItem(a.symbol,a.glyphIds,b)}),[4,t.all(f)];case 2:return c=k.sent(),e=c.map(function(b,c){return{id:a[c].id,
mosaicItem:b}}),[2,e]}})})};r.prototype.onTileData=function(a,b){if(!(b.addOrUpdate&&"tileDisplayData"in b.addOrUpdate)){var f=b.addOrUpdate&&d.TileData.decode(b.addOrUpdate);b=p({},b,{addOrUpdate:f})}a.setData(b,this.hasLabels,this.labelsVisible);this.contains(a)||this.addChild(a);this.requestRender()};r.prototype.onTileError=function(a){a.clear();this.contains(a)||this.addChild(a)};r.prototype.renderChildren=function(d){this._rendererInfo.update(d.state);this.attributeView.bindTextures(this.stage.context);
a.prototype.renderChildren.call(this,d)};r.prototype.createTile=function(a){var b=this._tileInfoView.getTileBounds(n.create(),a);return new d.WGLTile(a,b)};r.prototype.destroyTile=function(a){this.removeChild(a);a.destroy()};r.prototype.attach=function(){this._initializeExtensions();return a.prototype.attach.call(this)};r.prototype.createRenderParams=function(d){return p({},a.prototype.createRenderParams.call(this,d),{rendererInfo:this._rendererInfo,attributeView:this.attributeView})};r.prototype._initializeExtensions=
function(){var a=this.stage.context.capabilities;a.textureFloat;a.vao};return r}(d.TileContainer);a.FeatureContainer=w})},"esri/views/2d/layers/graphics/GraphicProcessingQueue":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/Accessor ../../../../core/promiseUtils ../../../../core/scheduling ../../../../core/accessorSupport/decorators".split(" "),function(w,a,v,f,u,p,g,t){Object.defineProperty(a,"__esModule",
{value:!0});w=function(a){function d(d){d=a.call(this,d)||this;d._queue=new Map;d._queueArray=[];d._onGoingGraphic=null;d._onGoingPromise=null;d._scheduledNextHandle=null;d._next=d._next.bind(d);d._finalize=d._finalize.bind(d);return d}v(d,a);Object.defineProperty(d.prototype,"length",{get:function(){return this._queueArray.length},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"updating",{get:function(){return 0<this._queueArray.length||null!==this._onGoingPromise},enumerable:!0,
configurable:!0});d.prototype.cancel=function(a){this._onGoingGraphic&&this._onGoingGraphic.graphic===a&&(this._ongoingAbortController.abort(),this._onGoingGraphic=this._onGoingPromise=null);if(this._queue.has(a)){var d=this._queue.get(a);this._queue.delete(a);a=this._queueArray.indexOf(d);this._queueArray.slice(a,1)}this._scheduleNext();this.notifyChange("updating")};d.prototype.clear=function(){this._queue.clear();this._queueArray.length=0;this._onGoingPromise&&(this._ongoingAbortController.abort(),
this._onGoingGraphic=this._onGoingPromise=null);this._cancelNext();this.notifyChange("updating")};d.prototype.has=function(a){return this._queue.has(a)};d.prototype.isOngoing=function(a){return this._onGoingGraphic&&this._onGoingGraphic.graphic===a};d.prototype.push=function(a,d){this._queue.has(a)||(d={graphic:a,addOrUpdate:d},this._queueArray.push(d),this._queue.set(a,d),this._scheduleNext(),this.notifyChange("updating"))};d.prototype.refresh=function(){this.reset()};d.prototype.reset=function(){var a=
this._onGoingGraphic;a&&this.push(a.graphic,a.addOrUpdate)};d.prototype._finalize=function(){this._onGoingPromise=this._ongoingAbortController=this._onGoingGraphic=null;this.notifyChange("updating");this._scheduleNext()};d.prototype._cancelNext=function(){this._scheduledNextHandle&&(this._scheduledNextHandle.remove(),this._scheduledNextHandle=null)};d.prototype._scheduleNext=function(){this._scheduledNextHandle||0===this._queue.size||null!=this._onGoingGraphic||(this._scheduledNextHandle=g.schedule(this._next))};
d.prototype._next=function(){if(null==this._scheduledNextHandle||0===this._queue.size||this._onGoingGraphic)this._scheduledNextHandle=null;else{this._scheduledNextHandle=null;var a=this._peek(),d=a.graphic,f=a.addOrUpdate,b=p.createAbortController();this._queue.delete(d);this._onGoingGraphic=a;this._onGoingPromise=this.process(d,f,{signal:b.signal});this._ongoingAbortController=b;this._onGoingPromise.then(this._finalize,this._finalize);this.notifyChange("updating")}};d.prototype._peek=function(){return 0===
this._queueArray.length?null:this._queueArray.pop()};f([t.property({readOnly:!0})],d.prototype,"length",null);f([t.property({readOnly:!0})],d.prototype,"updating",null);f([t.property({constructOnly:!0})],d.prototype,"process",void 0);return d=f([t.subclass("esri.views.2d.layers.graphics.GraphicProcessingQueue")],d)}(t.declared(u));a.default=w})},"esri/views/2d/layers/graphics/GraphicStore":function(){define("require exports ../../../../core/tsSupport/assignHelper ../../../../core/has ../../../../core/screenUtils ../../../../core/unitUtils ../../../../core/libs/rbush/rbush ../../../../geometry/support/aaBoundingRect ../../../../geometry/support/contains ../../../../geometry/support/extentUtils ../../../../geometry/support/jsonUtils ../../../../geometry/support/normalizeUtils ./GraphicStoreItem ./graphicsUtils".split(" "),
function(w,a,v,f,u,p,g,t,n,d,x,r,y,b){function k(a,b,c,d,e){l.minX=b;l.minY=c;l.maxX=d;l.maxY=e;return a.search(l)}Object.defineProperty(a,"__esModule",{value:!0});var l={minX:0,minY:0,maxX:0,maxY:0},c=t.create(),e=[];w=function(){function a(a,b,c,d,e,k){this._graphics=d;this._onAdd=e;this._onRemove=k;this._index=g(9,f("csp-restrictions")?function(a){return{minX:a.bounds[0],minY:a.bounds[1],maxX:a.bounds[2],maxY:a.bounds[3]}}:[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]);this._itemByGraphic=
new Map;this._currentLevel=-Infinity;this._tileInfoView=a;this._uidFieldName=c;if(b=a.getClosestInfoForScale(b))this._currentLevel=b.level,this._resolution=this._tileInfoView.getTileResolution(b.level);this._metersPerUnit=p.getMetersPerUnit(a.spatialReference)}a.prototype.hitTest=function(a,e,f,l,g){a=r.normalizeMapX(a,this._tileInfoView.spatialReference);var h=.5*l*f;c[0]=a-h;c[1]=e-h;c[2]=a+h;c[3]=e+h;f=.5*l*(f+50);f=k(this._index,a-f,e-f,a+f,e+f);if(!f||0===f.length)return[];for(var h={x:a,y:e},
m=[],q,p=0;p<f.length;p++){var v=f[p];if(v.graphic.visible)switch(x.getJsonType(v.geometry)){case "esriGeometryPoint":q=v.symbol;if(!q)continue;var z=v.geometry,y=void 0;switch(q.type){case "text":y=b.getTextSymbolBounds(z.x,z.y,q,v.size,l,g);break;case "cim":case "expanded-cim":y=b.getCIMMarkerBounds(z.x,z.y,q,l,l*this._metersPerUnit,g);break;default:y=b.getMarkerSymbolBounds(z.x,z.y,q,l,l*this._metersPerUnit,g)}n.polygonContainsPoint(y,h)&&m.push(v);break;case "esriGeometryPolyline":q=v.symbol;
if(!q)continue;q=1.5*l*window.devicePixelRatio*u.pt2px(q.width);b.isPointOnPolyline(v.geometry,a,e,q)&&m.push(v);break;case "esriGeometryEnvelope":q=v.geometry;q=t.fromValues(q.xmin,q.ymin,q.xmax,q.ymax);t.intersects(q,c)&&m.push(v);break;case "esriGeometryPolygon":if(n.polygonContainsPoint(v.geometry,h)){m.push(v);break}q=d.getPolygonExtent(v.geometry);if(Math.abs(q.ymax-q.ymin)<5*l||Math.abs(q.xmax-q.xmin)<5*l)q=t.fromValues(q.xmin,q.ymin,q.xmax,q.ymax),t.intersects(q,c)&&m.push(v);break;case "esriGeometryMultipoint":if(q=
v.symbol)for(var z=v.geometry.points,y=void 0,w=0;w<z.length;w++)if(y="text"===q.type?b.getTextSymbolBounds(z[w][0],z[w][1],q,v.size,l,g):b.getMarkerSymbolBounds(z[w][0],z[w][1],q,l,l*this._metersPerUnit,g),n.polygonContainsPoint(y,h)){m.push(v);break}}}m.sort(function(a,c){var d=b.graphicGeometryToNumber(a.graphic),e=b.graphicGeometryToNumber(c.graphic);return d===e?c.zorder-a.zorder:d-e});return m.map(function(a){return a.graphic})};a.prototype.getGraphicsData=function(a,b,c){var d=k(this._index,
b.bounds[0],b.bounds[1],b.bounds[2],b.bounds[3]);if(0===d.length||0===c.length)return[];d.sort(function(a,b){return a.zorder-b.zorder});d[0].insertAfter=-1;for(var e=1;e<d.length;e++)d[e].insertAfter=d[e-1].graphic.uid;d.sort(function(a,b){return a.graphic.uid-b.graphic.uid});c.sort(function(a,b){return a.uid-b.uid});var f=e=0,h,l=[];b={originPosition:"upperLeft",scale:[b.resolution,b.resolution],translate:[b.bounds[0],b.bounds[3]]};for(var m=0;m<c.length;m++){for(var g=c[m],f=-2;e<d.length;)if(h=
d[e],e++,g.uid===h.graphic.uid){f=h.insertAfter;break}if(h.geometry&&-2!==f){var q=h.getGeometryQuantized(b),n=v({},h.graphic.attributes);n[this._uidFieldName]=g.uid;null==h.groupId&&(h.groupId=a.createTemplateGroup(h.symbol,null,null));l.push({centroid:y.default.getCentroidQuantized(h,b),geometry:q,attributes:n,symbol:h.symbol,groupId:h.groupId,insertAfter:f})}}return l};a.prototype.getGraphicData=function(a,b,c){var d=this._itemByGraphic.get(c);if(!d)return null;var e=k(this._index,b.bounds[0],
b.bounds[1],b.bounds[2],b.bounds[3]);e.sort(function(a,b){return a.zorder-b.zorder});var f=e.indexOf(d),e=0===f||-1===f?-1:e[f-1].graphic.uid;b={originPosition:"upperLeft",scale:[b.resolution,b.resolution],translate:[b.bounds[0],b.bounds[3]]};var f=d.getGeometryQuantized(b),h=v({},d.graphic.attributes);h[this._uidFieldName]=c.uid;null==d.groupId&&(d.groupId=a.createTemplateGroup(d.symbol,null,null));return{centroid:y.default.getCentroidQuantized(d,b),geometry:f,attributes:h,symbol:d.symbol,groupId:d.groupId,
insertAfter:e}};a.prototype.queryTileData=function(a,b){var c=t.pad(b.bounds,50*b.resolution,t.create()),c=k(this._index,c[0],c[1],c[2],c[3]),d=[];this._createTileGraphics(d,a,c,{originPosition:"upperLeft",scale:[b.resolution,b.resolution],translate:[b.bounds[0],b.bounds[3]]});return d};a.prototype.has=function(a){return this._itemByGraphic.has(a)};a.prototype.getBounds=function(a){return this._itemByGraphic.has(a)?this._itemByGraphic.get(a).bounds:null};a.prototype.add=function(a,b,c){if(a)return this._onAdd(a),
b=y.default.acquire(a,b,c,this._resolution,this._resolution*this._metersPerUnit,this._tileInfoView.spatialReference),this._itemByGraphic.set(a,b),c&&this._index.insert(b),b.bounds};a.prototype.remove=function(a){if(this._itemByGraphic.has(a)){this._onRemove(a);var b=this._itemByGraphic.get(a);this._index.remove(b);this._itemByGraphic.delete(a)}};a.prototype.updateZ=function(){for(var a=this._graphics.items,b,c=0;c<a.length;c++)if(b=a[c],b=this._itemByGraphic.get(b))b.zorder=c};a.prototype.update=
function(a,b,c){var d=this._itemByGraphic.get(a);d.groupId=null;var e=t.clone(d.bounds);d.size[0]=d.size[1]=0;this._index.remove(d);d.set(a,b,c,this._resolution,this._resolution*this._metersPerUnit,this._tileInfoView.spatialReference);c&&this._index.insert(d);return{oldBounds:e,newBounds:d.bounds}};a.prototype.updateLevel=function(a){var b=this;this._currentLevel!==a&&(this._currentLevel=a,this._resolution=this._tileInfoView.getTileResolution(a),this._index.clear(),e.length=0,this._itemByGraphic.forEach(function(a){a.updateBounds(b._resolution,
b._resolution*b._metersPerUnit,b._tileInfoView.spatialReference);a.geometry&&e.push(a)}),this._index.load(e))};a.prototype.clear=function(){this._itemByGraphic.clear();this._index.clear()};a.prototype._createTileGraphics=function(a,b,c,d){var e=this._uidFieldName;c.sort(function(a,b){return a.zorder-b.zorder});for(var f,h,k,l,g=0;g<c.length;g++){k=c[g];f=k.graphic;h=k.getGeometryQuantized(d);l=0===g?-1:c[g-1].graphic.uid;var m=v({},k.graphic.attributes);m[e]=f.uid;null==k.groupId&&(k.groupId=b.createTemplateGroup(k.symbol,
null,null));a.push({centroid:y.default.getCentroidQuantized(k,d),geometry:h,attributes:m,symbol:k.symbol,groupId:k.groupId,insertAfter:l})}};return a}();a.default=w})},"esri/views/2d/layers/graphics/GraphicStoreItem":function(){define("require exports ../../../../core/maybe ../../../../geometry/support/aaBoundingRect ../../../../geometry/support/centroid ../../../../geometry/support/jsonUtils ../../../../geometry/support/quantizationUtils ../../../../layers/graphics/featureConversionUtils ../../../../layers/graphics/OptimizedGeometry ./graphicsUtils".split(" "),
function(w,a,v,f,u,p,g,t,n,d){Object.defineProperty(a,"__esModule",{value:!0});var x=new n.default,r=new n.default;w=function(){function a(){this.bounds=f.create();this.graphic=null;this.size=[0,0,0,0]}a.acquire=function(b,d,f,c,e,g){void 0===b&&(b=null);var h;0===a._pool.length?h=new a:(h=a._pool.pop(),this._set.delete(h));h.acquire(b,d,f,c,e,g);return h};a.release=function(a){a&&!this._set.has(a)&&(a.release(),this._pool.push(a),this._set.add(a))};a.getCentroidQuantized=function(a,f){if(p.isPolygon(a.geometry)){var b=
a.symbol;if(v.isNone(b))return null;if(d.isMarkerSymbol(b.type))return a=u.polygonCentroid(a.geometry),g.quantizePoint(f,{},{x:a[0],y:a[1]},!1,!1)}return null};a.prototype.acquire=function(a,d,f,c,e,g){void 0===a&&(a=null);a&&this.set(a,d,f,c,e,g)};a.prototype.release=function(){this.geometry=this.symbolResource=this.graphic=null};Object.defineProperty(a.prototype,"symbol",{get:function(){return this.symbolResource.symbol},enumerable:!0,configurable:!0});a.prototype.set=function(a,d,f,c,e,g){this.graphic=
a;this.geometry=f;this.symbolResource=d;this.updateBounds(c,e,g)};a.prototype.updateBounds=function(a,f,l){d.getBounds(this.bounds,this.size,this.symbolResource,this.geometry,a,f,l)};a.prototype.getGeometryQuantized=function(a){if(p.isPolygon(this.geometry)){var b=this.geometry.rings;if(1===b.length&&2===b[0].length)return g.quantizeGeometry(a,{paths:[[b[0][0],b[0][1]]]})}else if(p.isPolyline(this.geometry))return x.coords.length=0,x.lengths.length=0,r.coords.length=0,r.lengths.length=0,t.convertFromPolyline(x,
this.geometry),t.generalizeOptimizedGeometry(r,x,this.geometry.hasZ,this.geometry.hasM,"esriGeometryPolyline",a.scale[0]),t.quantizeOptimizedGeometry(x,r,this.geometry.hasZ,this.geometry.hasM,"esriGeometryPolyline",a),t.convertToPolyline(x,this.geometry.hasZ,this.geometry.hasM);return g.quantizeGeometry(a,this.geometry)};a._pool=[];a._set=new Set;return a}();a.default=w})},"esri/views/2d/layers/graphics/graphicsUtils":function(){define("require exports ../../../../core/maybe ../../../../core/screenUtils ../../../../core/libs/gl-matrix-2/mat2d ../../../../core/libs/gl-matrix-2/mat2df32 ../../../../core/libs/gl-matrix-2/vec2 ../../../../core/libs/gl-matrix-2/vec2f32 ../../../../geometry/SpatialReference ../../../../geometry/support/aaBoundingRect ../../../../geometry/support/boundsUtils ../../../../geometry/support/intersects ../../../../geometry/support/jsonUtils ../../../../geometry/support/normalizeUtils ../../../../geometry/support/spatialReferenceUtils ../../../../geometry/support/spatialReferenceUtils ../../engine ../../engine".split(" "),
function(w,a,v,f,u,p,g,t,n,d,x,r,y,b,k,l,c,e){function C(a,b,c,d,e,h){var k,l,m=f.pt2px(c.xoffset),q=f.pt2px(c.yoffset),n=A*c.angle;h*=A;switch(c.type){case "simple-marker":k=l=f.pt2px(c.size);break;case "picture-marker":k=f.pt2px(c.width),l=f.pt2px(c.height)}.04>e&&(d=.04*d/e);c=u.mat2d.identity(I);u.mat2d.translate(c,c,g.vec2.set(B,a,b));u.mat2d.rotate(c,c,h-n);u.mat2d.scale(c,c,g.vec2.set(B,d,-d));u.mat2d.translate(c,c,g.vec2.set(B,m,-q));a=[0,0];g.vec2.transformMat2d(a,g.vec2.set(B,-.5*k,-.5*
l),c);b=[0,0];g.vec2.transformMat2d(b,g.vec2.set(B,-.5*k,.5*l),c);d=[0,0];g.vec2.transformMat2d(d,g.vec2.set(B,.5*k,-.5*l),c);m=[0,0];g.vec2.transformMat2d(m,g.vec2.set(B,.5*k,.5*l),c);return{rings:[[a,d,m,b,a]]}}function h(a,b,d,e,h,k){var l=c.CIMSymbolHelper.getEnvelope(d.data);if(!l)return null;.04>h&&(e=.04*e/h);h=f.pt2px(l.width);var m=f.pt2px(l.height);d=f.pt2px(l.x);var l=f.pt2px(l.y),q=0*A,n=A*k;k=u.mat2d.identity(I);u.mat2d.translate(k,k,g.vec2.set(B,a,b));u.mat2d.rotate(k,k,n-q);u.mat2d.scale(k,
k,g.vec2.set(B,e,e));a=[0,0];g.vec2.transformMat2d(a,g.vec2.set(B,d,l+m),k);b=[0,0];g.vec2.transformMat2d(b,g.vec2.set(B,d,l),k);e=[0,0];g.vec2.transformMat2d(e,g.vec2.set(B,d+h,l+m),k);m=[0,0];g.vec2.transformMat2d(m,g.vec2.set(B,d+h,l),k);return{rings:[[a,e,m,b,a]]}}function q(a,b,c,d,e,h){var k=f.pt2px(c.xoffset),l=f.pt2px(c.yoffset);c=A*c.angle;var m=A*h;h=u.mat2d.identity(I);u.mat2d.translate(h,h,g.vec2.set(B,a,b));u.mat2d.rotate(h,h,m);u.mat2d.scale(h,h,g.vec2.set(B,e,-e));a=d[0]+d[2]/2;b=d[1]+
d[3]/2;u.mat2d.translate(h,h,g.vec2.set(B,k,-l));u.mat2d.translate(h,h,g.vec2.set(B,a,b));u.mat2d.rotate(h,h,c);u.mat2d.translate(h,h,g.vec2.set(B,-a,-b));k=[0,0];g.vec2.transformMat2d(k,g.vec2.set(B,d[0],d[1]),h);l=[0,0];g.vec2.transformMat2d(l,g.vec2.set(B,d[0],d[1]+d[3]),h);c=[0,0];g.vec2.transformMat2d(c,g.vec2.set(B,d[0]+d[2],d[1]),h);a=[0,0];g.vec2.transformMat2d(a,g.vec2.set(B,d[0]+d[2],d[1]+d[3]),h);return{rings:[[k,c,a,l,k]]}}function m(a,b,d){if(!d||0===d.glyphMosaicItems.length)return a;
var h=c.bidiText(b.text)[1];b=e.shapeGlyphs(d.glyphMosaicItems,h,{scale:f.pt2px(b.font.size)/24,angle:b.angle,xOffset:b.xoffset,yOffset:b.yoffset,hAlign:e.alignmentUtils.getXAnchorDirection(b.horizontalAlignment||"center"),vAlign:e.alignmentUtils.getYAnchorDirection(b.verticalAlignment||"baseline"),maxLineWidth:Math.max(32,Math.min(b.lineWidth||512,512)),lineHeight:30*Math.max(.25,Math.min(b.lineHeight||1,4)),decoration:b.font.decoration||"none",isCIM:!1}).bounds;a[0]=b.x-b.halfWidth;a[1]=b.y-b.halfHeight;
a[2]=b.width;a[3]=b.height;return a}function z(a,b){return Math.ceil((a-b)/(2*b))}function E(a,b){var c;c=y.isPolygon(a)?a.rings:a.paths;for(var d=0;d<c.length;d++)for(var e=0,f=c[d];e<f.length;e++)f[e][0]+=b;return a}function K(a,b){if(!b)return a;var c=J(a,b).map(function(a){return a.extent});return 2>c.length?c[0]||a:2<c.length?(a.xmin=b.valid[0],a.xmax=b.valid[1],a):{rings:c.map(function(a){return[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]]})}}function J(a,
b){var c=[],d=a.ymin,e=a.ymax,f=a.xmax-a.xmin,h=a.xmin,k=a.xmax,l,g=b.valid,m=g[0],q=g[1];l=D(a.xmin,b);var n=l.x,g=l.frameId;l=D(a.xmax,b);b=l.x;a=l.frameId;l=n===b&&0<f;if(f>2*q){f={xmin:h<k?n:b,ymin:d,xmax:q,ymax:e};h={xmin:m,ymin:d,xmax:h<k?b:n,ymax:e};k={xmin:0,ymin:d,xmax:q,ymax:e};d={xmin:m,ymin:d,xmax:0,ymax:e};e=[];m=[];G(f,k)&&e.push(g);G(f,d)&&m.push(g);G(h,k)&&e.push(a);G(h,d)&&m.push(a);for(q=g+1;q<a;q++)e.push(q),m.push(q);c.push({extent:f,frameIds:[g]},{extent:h,frameIds:[a]},{extent:k,
frameIds:e},{extent:d,frameIds:m})}else n>b||l?c.push({extent:{xmin:n,ymin:d,xmax:q,ymax:e},frameIds:[g]},{extent:{xmin:m,ymin:d,xmax:b,ymax:e},frameIds:[a]}):c.push({extent:{xmin:n,ymin:d,xmax:b,ymax:e},frameIds:[g]});return c}function D(a,b){var c=b.valid;b=c[0];var d=c[1],c=2*d,e=0;a>d?(b=Math.ceil(Math.abs(a-d)/c),a-=b*c,e=b):a<b&&(b=Math.ceil(Math.abs(a-b)/c),a+=b*c,e=-b);return{x:a,frameId:e}}function G(a,b){var c=b.xmin,d=b.ymin,e=b.xmax;b=b.ymax;return F(a,c,d)&&F(a,c,b)&&F(a,e,b)&&F(a,e,
d)}function F(a,b,c){return b>=a.xmin&&b<=a.xmax&&c>=a.ymin&&c<=a.ymax?!0:!1}function H(a,b,c){if(Array.isArray(a)){var d=a[0];if(d>b){var e=z(d,b);a[0]=d+-2*e*b}else d<c&&(e=z(d,c),a[0]=d+-2*e*c)}else d=a.x,d>b?(e=z(d,b),a.x+=-2*e*b):d<c&&(e=z(d,c),a.x+=-2*e*c);return a}Object.defineProperty(a,"__esModule",{value:!0});var A=Math.PI/180,I=p.mat2df32.create(),B=t.vec2f32.create(),L=d.create();a.getBounds=function(a,d,e,f,k,g,n){if(!f||!e.symbol)return a[0]=a[1]=a[2]=a[3]=0,d[0]=d[1]=d[2]=d[3]=0,a;
if(y.isPoint(f)){var r=f.x;f=f.y;"text"===e.symbol.type&&0===d[2]&&0===d[3]&&m(d,e.symbol,e.mosaicItem);e=e.symbol;var p;switch(e.type){case "simple-marker":case "picture-marker":p=C(r,f,e,k,g,0);break;case "text":p=q(r,f,e,d,k,0);break;case "cim":case "expanded-cim":p=h(r,f,e,k,g,0)}for(k=d=0;k<p.rings[0].length-1;k++)e=p.rings[0][k],e=(r-e[0])*(r-e[0])+(f-e[1])*(f-e[1]),d=Math.max(d,e);d=Math.sqrt(d);k=b.normalizeMapX(r-d,n);r=b.normalizeMapX(r+d,n);k>r&&(n=l.getInfo(n))&&(k=n.valid,n=k[1],k=k[0],
r=n);a[0]=k;a[1]=f-d;a[2]=r;a[3]=f+d}else{x.getBoundsXY(a,f);f=d[0];if(0===f){a:switch(f=0,e.symbol.type){case "simple-fill":case "picture-fill":f=e.symbol.outline;if(!f){f=0;break a}f=f.width;break;case "simple-line":f=e.symbol.width;break;case "simple-marker":f=e.symbol.size;break;case "picture-marker":f=Math.max(e.symbol.width,e.symbol.height);break;case "text":f=[0,0,0,0];m(f,e.symbol,e.mosaicItem);f=Math.max(f[2],f[3])+Math.max(Math.abs(f[0]),Math.abs(f[1]));break;case "cim":case "expanded-cim":f=
c.CIMSymbolHelper.getEnvelope(e.symbol.data),f=Math.sqrt(f.width*f.width+f.height*f.height)}d[0]=f}f=k*f/2;a[0]-=f;a[1]-=f;a[2]+=f;a[3]+=f}return a};a.isMarkerSymbol=function(a){return"simple-marker"===a||"picture-marker"===a||"text"===a};a.graphicGeometryToNumber=function(a){switch(v.expect(a.geometry).type){case "polyline":return 1;case "polygon":case "extent":return 2}return 0};var N=t.vec2f32.create(),M=t.vec2f32.create(),S=t.vec2f32.create(),O=t.vec2f32.create(),Q=t.vec2f32.create(),T=t.vec2f32.create(),
R=t.vec2f32.create();a.isPointOnPolyline=function(a,b,c,d){g.vec2.set(S,b,c);a=a.paths;for(var e,f,h,k,l,m,q,n,r=Infinity,p=0;p<a.length;p++){var t=a[p];if(!(2>t.length))for(var x=1;x<t.length;x++)e=t[x-1][0],h=t[x-1][1],f=t[x][0],k=t[x][1],l=Math.min(e,f)-d,m=Math.min(h,k)-d,q=Math.max(e,f)+d,n=Math.max(h,k)+d,b<l||b>q||c<m||c>n||(g.vec2.set(N,e,h),g.vec2.set(M,f,k),g.vec2.subtract(O,M,N),g.vec2.subtract(Q,N,S),g.vec2.scale(T,O,g.vec2.dot(O,Q)/g.vec2.dot(O,O)),g.vec2.subtract(R,Q,T),e=g.vec2.dot(R,
R),r>e&&(r=e))}return Math.sqrt(r)<=d};a.getMarkerSymbolBounds=C;a.getCIMMarkerBounds=h;a.getTextSymbolBounds=q;a.normalizeCentralMeridian=function(a){var b,c,d,e,f,h=null;if(!a)return null;b=a.spatialReference;c=k.getInfo(b);f=b.isWebMercator?102100:4326;d=P[f].maxX;e=P[f].minX;b=P[f].plus180Line;f=P[f].minus180Line;var l,g=a.toJSON();if(!c)return g;"mesh"===a.type?l=g:y.isPoint(g)?l=H(g,d,e):y.isMultipoint(g)?(g.points=g.points.map(function(a){return H(a,d,e)}),l=g):y.isExtent(g)?l=K(g,c):y.isPolygon(g)||
y.isPolyline(g)?(x.getBoundsXY(L,g),a={xmin:L[0],ymin:L[1],xmax:L[2],ymax:L[3]},c=2*z(a.xmin,e)*d,g=0===c?g:E(g,c),a.xmin+=c,a.xmax+=c,r.extentIntersectsPolyline(a,b)&&a.xmax!==d?h=g:r.extentIntersectsPolyline(a,f)&&a.xmin!==e?h=g:l=g):l=a.clone();return null!==h?(new U).cut(h,d):l};a.getTextSymbolSize=m;var P={102100:{maxX:2.0037508342788905E7,minX:-2.0037508342788905E7,plus180Line:{paths:[[[2.0037508342788905E7,-2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:n.WebMercator},
minus180Line:{paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:n.WebMercator}},4326:{maxX:180,minX:-180,plus180Line:{paths:[[[180,-180],[180,180]]],spatialReference:n.WGS84},minus180Line:{paths:[[[-180,-180],[-180,180]]],spatialReference:n.WGS84}}},U=function(){function a(){}a.prototype.cut=function(a,b){var c;if(a.rings)this.closed=!0,c=a.rings,this.minPts=4;else if(a.paths)this.closed=!1,c=a.paths,this.minPts=2;else return null;
var d=c.length;b*=-2;for(var e=0;e<d;e++){var f=c[e];if(f&&f.length>=this.minPts){for(var h=[],k=0;k<f.length;k++){var l=f[k];h.push([l[0]+b,l[1]])}c.push(h)}}this.closed?a.rings=c:a.paths=c;return a};return a}()})},"esri/views/layers/GraphicsView":function(){define(["require","exports","../../core/tsSupport/declareExtendsHelper","../../core/tsSupport/decorateHelper","../../core/accessorSupport/decorators"],function(w,a,v,f,u){Object.defineProperty(a,"__esModule",{value:!0});a.GraphicsView=function(a){return function(a){function g(){var f=
null!==a&&a.apply(this,arguments)||this;f.graphics=null;f.renderer=null;f.view=null;return f}v(g,a);f([u.property()],g.prototype,"graphics",void 0);f([u.property()],g.prototype,"renderer",void 0);f([u.property()],g.prototype,"updating",void 0);f([u.property()],g.prototype,"view",void 0);return g=f([u.subclass("esri.views.layers.GraphicsView")],g)}(u.declared(a))}})},"esri/views/2d/navigation/MapViewNavigation":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/tsSupport/generatorHelper ../../../core/tsSupport/awaiterHelper ../../../Viewpoint ../../../core/Accessor ../../../core/now ../../../core/accessorSupport/decorators ../../../geometry/Point ../viewpointUtils ./ZoomBox ./actions/Pan ./actions/Pinch ./actions/Rotate".split(" "),
function(w,a,v,f,u,p,g,t,n,d,x,r,y,b,k,l){Object.defineProperty(a,"__esModule",{value:!0});var c=new g({targetGeometry:new x}),e=[0,0];w=function(a){function h(b){b=a.call(this,b)||this;b._endTimer=null;b.animationManager=null;return b}v(h,a);h.prototype.initialize=function(){this.pan=new b({navigation:this});this.rotate=new l({navigation:this});this.pinch=new k({navigation:this});this.zoomBox=new y({view:this.view,navigation:this})};h.prototype.destroy=function(){this.zoomBox.destroy();this.animationManager=
this.zoomBox=null};h.prototype.begin=function(){this._set("interacting",!0)};h.prototype.end=function(){this._lastEventTimestamp=n();this._startTimer(250)};h.prototype.zoom=function(a,b){void 0===b&&(b=this._getDefaultAnchor());return p(this,void 0,void 0,function(){return u(this,function(c){this.stop();this.begin();if(this.view.constraints.snapToZoom&&this.view.constraints.effectiveLODs)return 1>a?[2,this.zoomIn(b)]:[2,this.zoomOut(b)];this.setViewpoint(b,a,0,[0,0]);return[2]})})};h.prototype.zoomIn=
function(a){return p(this,void 0,void 0,function(){var b,c;return u(this,function(d){b=this.view;c=b.constraints.snapToNextScale(b.scale);return[2,this._zoomToScale(c,a)]})})};h.prototype.zoomOut=function(a){return p(this,void 0,void 0,function(){var b,c;return u(this,function(d){b=this.view;c=b.constraints.snapToPreviousScale(b.scale);return[2,this._zoomToScale(c,a)]})})};h.prototype.setViewpoint=function(a,b,c,d){this.begin();this.view.state.viewpoint=this._scaleRotateTranslateViewpoint(this.view.viewpoint,
a,b,c,d);this.end()};h.prototype.setViewpointImmediate=function(a,b,c,d){void 0===b&&(b=0);void 0===c&&(c=[0,0]);void 0===d&&(d=this._getDefaultAnchor());this.view.state.viewpoint=this._scaleRotateTranslateViewpoint(this.view.viewpoint,d,a,b,c)};h.prototype.continousRotateClockwise=function(){var a=this.get("view.viewpoint");this.animationManager.animateContinous(a,function(a){r.rotateBy(a,a,-1)})};h.prototype.continousRotateCounterclockwise=function(){var a=this.get("view.viewpoint");this.animationManager.animateContinous(a,
function(a){r.rotateBy(a,a,1)})};h.prototype.resetRotation=function(){this.view.rotation=0};h.prototype.continousPanLeft=function(){var a=this.get("view.viewpoint");this.animationManager.animateContinous(a,function(a){r.translateBy(a,a,[-10,0])})};h.prototype.continousPanRight=function(){var a=this.get("view.viewpoint");this.animationManager.animateContinous(a,function(a){r.translateBy(a,a,[10,0])})};h.prototype.continousPanUp=function(){var a=this.get("view.viewpoint");this.animationManager.animateContinous(a,
function(a){r.translateBy(a,a,[0,10])})};h.prototype.continousPanDown=function(){var a=this.get("view.viewpoint");this.animationManager.animateContinous(a,function(a){r.translateBy(a,a,[0,-10])})};h.prototype.stop=function(){this.pan.stopMomentumNavigation();this.animationManager.stop();this.end();null!==this._endTimer&&(clearTimeout(this._endTimer),this._endTimer=null,this._set("interacting",!1))};h.prototype._startTimer=function(a){var b=this;return null!==this._endTimer?this._endTimer:this._endTimer=
setTimeout(function(){b._endTimer=null;var a=n()-b._lastEventTimestamp;250>a?b._endTimer=b._startTimer(a):b._set("interacting",!1)},a)};h.prototype._getDefaultAnchor=function(){var a=this.view,b=a.size,a=a.padding,c=a.top,d=a.bottom;e[0]=.5*(b[0]-a.right+a.left);e[1]=.5*(b[1]-d+c);return e};h.prototype._zoomToScale=function(a,b){void 0===b&&(b=this._getDefaultAnchor());return p(this,void 0,void 0,function(){var d,e,f,h,k,l,g,m;return u(this,function(n){d=this.view;e=d.constraints;f=d.scale;h=d.viewpoint;
k=d.size;l=d.padding;g=e.canZoomInTo(a);m=e.canZoomOutTo(a);return a<f&&!g||a>f&&!m?[2]:[2,d.goTo(r.padAndScaleAndRotateBy(c,h,a/f,0,b,k,l),{animate:!0})]})})};h.prototype._scaleRotateTranslateViewpoint=function(a,b,c,d,e){var f=this.view,h=f.size,k=f.padding,l=f.constraints,g=f.viewpoint,m=f.scale*c,f=l.canZoomInTo(m),l=l.canZoomOutTo(m);if(1>c&&!f||1<c&&!l)c=1;r.translateBy(g,g,e);return r.padAndScaleAndRotateBy(a,g,c,d,b,h,k)};f([d.property()],h.prototype,"animationManager",void 0);f([d.property({type:Boolean,
readOnly:!0})],h.prototype,"interacting",void 0);f([d.property()],h.prototype,"pan",void 0);f([d.property()],h.prototype,"pinch",void 0);f([d.property()],h.prototype,"rotate",void 0);f([d.property()],h.prototype,"view",void 0);f([d.property()],h.prototype,"zoomBox",void 0);return h=f([d.subclass("esri.views.2d.navigation.MapViewNavigation")],h)}(d.declared(t));a.default=w})},"esri/views/2d/navigation/ZoomBox":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/screenUtils ../../../core/accessorSupport/decorators".split(" "),
function(w,a,v,f,u,p,g){return function(a){function n(d){d=a.call(this,d)||this;d._container=null;d._overlay=null;d._backgroundShape=null;d._boxShape=null;d._box={x:0,y:0,width:0,height:0};d._redraw=d._redraw.bind(d);return d}v(n,a);n.prototype.destroy=function(){this.view=null};Object.defineProperty(n.prototype,"view",{set:function(a){var d=this;this._handles&&this._handles.forEach(function(a){a.remove()});this._handles=null;this._destroyOverlay();this._set("view",a);a&&(a.on("drag",["Shift"],function(a){return d._handleDrag(a,
1)}),a.on("drag",["Shift","Ctrl"],function(a){return d._handleDrag(a,-1)}))},enumerable:!0,configurable:!0});n.prototype._start=function(){this._createContainer();this._createOverlay();this.navigation.begin()};n.prototype._update=function(a,f,g,n){this._box.x=a;this._box.y=f;this._box.width=g;this._box.height=n;this._rafId||(this._rafId=requestAnimationFrame(this._redraw))};n.prototype._end=function(a,f,g,n,b){var d=this.view;a=d.toMap(p.createScreenPoint(a+.5*g,f+.5*n));g=Math.max(g/d.width,n/d.height);
-1===b&&(g=1/g);this._destroyOverlay();this.navigation.end();d.goTo({center:a,scale:d.scale*g})};n.prototype._updateBox=function(a,f,g,n){var b=this._boxShape;b.setAttributeNS(null,"x",""+a);b.setAttributeNS(null,"y",""+f);b.setAttributeNS(null,"width",""+g);b.setAttributeNS(null,"height",""+n);b.setAttributeNS(null,"class","esri-zoom-box__outline")};n.prototype._updateBackground=function(a,f,g,n){this._backgroundShape.setAttributeNS(null,"d",this._toSVGPath(a,f,g,n,this.view.width,this.view.height))};
n.prototype._createContainer=function(){var a=document.createElement("div");a.className="esri-zoom-box__container";this.view.root.appendChild(a);this._container=a};n.prototype._createOverlay=function(){var a=this.view.width,f=this.view.height,g=document.createElementNS("http://www.w3.org/2000/svg","path");g.setAttributeNS(null,"d","M 0 0 L "+a+" 0 L "+a+" "+f+" L 0 "+f+" Z");g.setAttributeNS(null,"class","esri-zoom-box__overlay-background");a=document.createElementNS("http://www.w3.org/2000/svg",
"rect");f=document.createElementNS("http://www.w3.org/2000/svg","svg");f.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink");f.setAttributeNS(null,"class","esri-zoom-box__overlay");f.appendChild(g);f.appendChild(a);this._container.appendChild(f);this._backgroundShape=g;this._boxShape=a;this._overlay=f};n.prototype._destroyOverlay=function(){this._container&&this._container.parentNode&&this._container.parentNode.removeChild(this._container);this._container=
this._backgroundShape=this._boxShape=this._overlay=null};n.prototype._toSVGPath=function(a,f,g,n,b,k){g=a+g;n=f+n;return"M 0 0 L "+b+" 0 L "+b+" "+k+" L 0 "+k+" ZM "+a+" "+f+" L "+a+" "+n+" L "+g+" "+n+" L "+g+" "+f+" Z"};n.prototype._handleDrag=function(a,f){var d=a.x,g=a.y,b=a.origin.x,k=a.origin.y,l;d>b?(l=b,b=d-b):(l=d,b-=d);g>k?(d=k,g-=k):(d=g,g=k-g);switch(a.action){case "start":this._start();break;case "update":this._update(l,d,b,g);break;case "end":this._end(l,d,b,g,f)}a.stopPropagation()};
n.prototype._redraw=function(){if(this._rafId&&(this._rafId=null,this._overlay)){var a=this._box,f=a.x,g=a.y,n=a.width,a=a.height;this._updateBox(f,g,n,a);this._updateBackground(f,g,n,a);this._rafId=requestAnimationFrame(this._redraw)}};f([g.property()],n.prototype,"navigation",void 0);f([g.property()],n.prototype,"view",null);return n=f([g.subclass("esri.views.2d.navigation.ZoomBox")],n)}(g.declared(u))})},"esri/views/2d/navigation/actions/Pan":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../geometry ../../../../Viewpoint ../../../../core/Accessor ../../../../core/screenUtils ../../../../core/accessorSupport/decorators ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../viewpointUtils ../../../navigation/PanPlanarMomentumEstimator".split(" "),
function(w,a,v,f,u,p,g,t,n,d,x,r,y){return function(a){function b(b){var c=a.call(this,b)||this;c.animationTime=0;c.momentumEstimator=new y.PanPlanarMomentumEstimator(500,6,.92);c.momentum=null;c.tmpMomentum=x.vec3f64.create();c.momentumFinished=!1;c.viewpoint=new p({targetGeometry:new u.Point,scale:0,rotation:0});c.watch("momentumFinished",function(a){a&&c.navigation.stop()});return c}v(b,a);b.prototype.begin=function(a,b){this.navigation.begin();this.momentumEstimator.reset();this.addToEstimator(b);
this.previousDrag=b};b.prototype.update=function(a,b){this.addToEstimator(b);var c=b.center.x,d=b.center.y,f=this.previousDrag,c=f?f.center.x-c:-c,d=f?d-f.center.y:d;a.viewpoint=r.translateBy(this.viewpoint,a.viewpoint,[c||0,d||0]);this.previousDrag=b};b.prototype.end=function(a,b){this.addToEstimator(b);this.momentum=a.navigation.momentumEnabled?this.momentumEstimator.evaluateMomentum():null;this.animationTime=0;if(this.momentum)this.onAnimationUpdate(a);this.previousDrag=null;this.navigation.end()};
b.prototype.addToEstimator=function(a){var b=a.center.x,d=a.center.y,f=t.createScreenPointArray(-b,d),b=x.vec3f64.fromValues(-b,d,0);this.momentumEstimator.add(f,b,.001*a.timestamp)};b.prototype.onAnimationUpdate=function(a){var b=this;this.navigation.animationManager.animateContinous(a.viewpoint,function(c,f){b.momentumFinished=!b.momentum||b.momentum.isFinished(b.animationTime);f*=.001;if(!b.momentumFinished){var e=b.momentum.valueDelta(b.animationTime,f);d.vec3.scale(b.tmpMomentum,b.momentum.direction,
e);a.viewpoint=r.translateBy(c,c,b.tmpMomentum)}b.animationTime+=f})};b.prototype.stopMomentumNavigation=function(){this.momentum&&(this.momentumEstimator.reset(),this.momentum=null,this.navigation.stop())};f([n.property()],b.prototype,"momentumFinished",void 0);f([n.property()],b.prototype,"viewpoint",void 0);f([n.property()],b.prototype,"navigation",void 0);return b=f([n.subclass("esri.views.2d.navigation.actions.Pan")],b)}(n.declared(g))})},"esri/views/navigation/PanPlanarMomentumEstimator":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/libs/gl-matrix-2/vec3 ../../core/libs/gl-matrix-2/vec3f64 ./FilteredFiniteDifference ./Momentum".split(" "),
function(w,a,v,f,u,p,g){Object.defineProperty(a,"__esModule",{value:!0});var t=function(a){function d(d,f,g,b,k){d=a.call(this,d,f,g)||this;d.sceneVelocity=b;d.direction=k;return d}v(d,a);d.prototype.value=function(d){return a.prototype.valueFromInitialVelocity.call(this,this.sceneVelocity,d)};return d}(g.Momentum);a.PanPlanarMomentum=t;w=function(){function a(a,f,g){void 0===a&&(a=300);void 0===f&&(f=12);void 0===g&&(g=.84);this.minimumInitialVelocity=a;this.stopVelocity=f;this.friction=g;this.enabled=
!0;this.time=new p.FilteredFiniteDifference(.6);this.screen=[new p.FilteredFiniteDifference(.4),new p.FilteredFiniteDifference(.4)];this.scene=[new p.FilteredFiniteDifference(.6),new p.FilteredFiniteDifference(.6),new p.FilteredFiniteDifference(.6)];this.tmpDirection=u.vec3f64.create()}a.prototype.add=function(a,f,g){!this.enabled||this.time.hasLastValue&&.015>this.time.computeDelta(g)||(this.screen[0].update(a[0]),this.screen[1].update(a[1]),this.scene[0].update(f[0]),this.scene[1].update(f[1]),
this.scene[2].update(f[2]),this.time.update(g))};a.prototype.reset=function(){this.screen[0].reset();this.screen[1].reset();this.scene[0].reset();this.scene[1].reset();this.scene[2].reset();this.time.reset()};a.prototype.evaluateMomentum=function(){if(!this.enabled||!this.screen[0].hasFilteredDelta)return null;var a=this.screen[0].filteredDelta,f=this.screen[1].filteredDelta,a=Math.sqrt(a*a+f*f)/this.time.filteredDelta;return Math.abs(a)<this.minimumInitialVelocity?null:this.createMomentum(a,this.stopVelocity,
this.friction)};a.prototype.createMomentum=function(a,g,n){f.vec3.set(this.tmpDirection,this.scene[0].filteredDelta,this.scene[1].filteredDelta,this.scene[2].filteredDelta);var d=f.vec3.length(this.tmpDirection);0<d&&f.vec3.scale(this.tmpDirection,this.tmpDirection,1/d);return new t(a,g,n,d/this.time.filteredDelta,this.tmpDirection)};return a}();a.PanPlanarMomentumEstimator=w})},"esri/views/navigation/FilteredFiniteDifference":function(){define(["require","exports"],function(w,a){Object.defineProperty(a,
"__esModule",{value:!0});w=function(){function a(a){this.gain=a}a.prototype.update=function(a){if(this.hasLastValue){var f=this.computeDelta(a);this.updateDelta(f)}this.lastValue=a};a.prototype.reset=function(){this.filteredDelta=this.lastValue=void 0};Object.defineProperty(a.prototype,"hasLastValue",{get:function(){return void 0!==this.lastValue},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"hasFilteredDelta",{get:function(){return void 0!==this.filteredDelta},enumerable:!0,
configurable:!0});a.prototype.computeDelta=function(a){return a-this.lastValue};a.prototype.updateDelta=function(a){this.filteredDelta=this.hasFilteredDelta?(1-this.gain)*this.filteredDelta+this.gain*a:a};return a}();a.FilteredFiniteDifference=w})},"esri/views/navigation/Momentum":function(){define(["require","exports","../../core/tsSupport/extendsHelper"],function(w,a,v){Object.defineProperty(a,"__esModule",{value:!0});w=function(){function a(a,f,g){this._initialVelocity=a;this._stopVelocity=f;this._friction=
g;this._duration=Math.abs(Math.log(Math.abs(this._initialVelocity)/this._stopVelocity)/Math.log(1-this._friction))}Object.defineProperty(a.prototype,"duration",{get:function(){return this._duration},enumerable:!0,configurable:!0});a.prototype.isFinished=function(a){return a>this.duration};Object.defineProperty(a.prototype,"friction",{get:function(){return this._friction},enumerable:!0,configurable:!0});a.prototype.value=function(a){return this.valueFromInitialVelocity(this._initialVelocity,a)};a.prototype.valueDelta=
function(a,f){var g=this.value(a);return this.value(a+f)-g};a.prototype.valueFromInitialVelocity=function(a,f){f=Math.min(f,this.duration);var g=1-this.friction;return a*(Math.pow(g,f)-1)/Math.log(g)};return a}();a.Momentum=w})},"esri/views/2d/navigation/actions/Pinch":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../geometry ../../../../Viewpoint ../../../../core/Accessor ../../../../core/accessorSupport/decorators ../../../../core/libs/gl-matrix-2/vec2 ../../../../core/libs/gl-matrix-2/vec2f64 ../../viewpointUtils ../../../navigation/RotationMomentumEstimator ../../../navigation/ZoomMomentumEstimator".split(" "),
function(w,a,v,f,u,p,g,t,n,d,x,r,y){return function(a){function b(b){var c=a.call(this,b)||this;c._animationTime=0;c._momentumFinished=!1;c._rotationMomentumEstimator=new r.RotationMomentumEstimator(.6,.15,.95);c._rotationDirection=1;c._zoomDirection=1;c._zoomMomentumEstimator=new y.ZoomMomentumEstimator;c._zoomOnly=null;c.zoomMomentum=null;c.rotateMomentum=null;c.viewpoint=new p({targetGeometry:new u.Point,scale:0,rotation:0});c.watch("_momentumFinished",function(a){a&&c.navigation.stop()});return c}
v(b,a);b.prototype.begin=function(a,b){this.navigation.begin();this._rotationMomentumEstimator.reset();this._zoomMomentumEstimator.reset();this._zoomOnly=null;this._previousAngle=this._startAngle=b.angle;this._previousRadius=this._startRadius=b.radius;this._previousCenter=b.center;this._updateTimestamp=null;a.constraints.rotationEnabled&&this.addToRotateEstimator(0,b.timestamp);this.addToZoomEstimator(b,1)};b.prototype.update=function(a,b){null===this._updateTimestamp&&(this._updateTimestamp=b.timestamp);
var c=b.angle,d=b.radius,f=b.center,g=Math.abs(180*(c-this._startAngle)/Math.PI),k=Math.abs(d-this._startRadius),l=this._startRadius/d;if(this._previousRadius){var n=d/this._previousRadius,p=180*(c-this._previousAngle)/Math.PI;this._rotationDirection=0<=p?1:-1;this._zoomDirection=1<=n?1:-1;a.constraints.rotationEnabled?(null===this._zoomOnly&&200<b.timestamp-this._updateTimestamp&&(this._zoomOnly=0<k-g),null===this._zoomOnly||this._zoomOnly?p=0:this.addToRotateEstimator(c-this._startAngle,b.timestamp)):
p=0;this.addToZoomEstimator(b,l);this.navigation.setViewpoint([f.x,f.y],1/n,p,[this._previousCenter.x-f.x,f.y-this._previousCenter.y])}this._previousAngle=c;this._previousRadius=d;this._previousCenter=f};b.prototype.end=function(a){this.rotateMomentum=this._rotationMomentumEstimator.evaluateMomentum();this.zoomMomentum=this._zoomMomentumEstimator.evaluateMomentum();this._animationTime=0;if(this.rotateMomentum||this.zoomMomentum)this.onAnimationUpdate(a);this.navigation.end()};b.prototype.addToRotateEstimator=
function(a,b){this._rotationMomentumEstimator.add(a,.001*b)};b.prototype.addToZoomEstimator=function(a,b){this._zoomMomentumEstimator.add(b,.001*a.timestamp)};b.prototype.canZoomIn=function(a){var b=a.scale;a=a.constraints.effectiveMaxScale;return 0===a||b>a};b.prototype.canZoomOut=function(a){var b=a.scale;a=a.constraints.effectiveMinScale;return 0===a||b<a};b.prototype.onAnimationUpdate=function(a){var b=this;this.navigation.animationManager.animateContinous(a.viewpoint,function(c,f){var e=!b.canZoomIn(a)&&
1<b._zoomDirection||!b.canZoomOut(a)&&1>b._zoomDirection,g=!b.rotateMomentum||b.rotateMomentum.isFinished(b._animationTime),e=e||!b.zoomMomentum||b.zoomMomentum.isFinished(b._animationTime);f*=.001;b._momentumFinished=g&&e;if(!b._momentumFinished){var g=b.rotateMomentum?Math.abs(b.rotateMomentum.valueDelta(b._animationTime,f))*b._rotationDirection*180/Math.PI:0,e=b.zoomMomentum?Math.abs(b.zoomMomentum.valueDelta(b._animationTime,f)):1,k=d.vec2f64.create(),l=d.vec2f64.create();if(b._previousCenter){n.vec2.set(k,
b._previousCenter.x,b._previousCenter.y);x.getPaddingScreenTranslation(l,a.size,a.padding);n.vec2.add(k,k,l);var l=a.constraints,p=a.scale,t=p*e;1>e&&!l.canZoomInTo(t)?(e=p/l.effectiveMaxScale,b.zoomMomentum=null,b.rotateMomentum=null):1<e&&!l.canZoomOutTo(t)&&(e=p/l.effectiveMinScale,b.zoomMomentum=null,b.rotateMomentum=null);x.scaleAndRotateBy(c,a.viewpoint,e,g,k,a.size)}}b._animationTime+=f})};b.prototype.stopMomentumNavigation=function(){if(this.rotateMomentum||this.zoomMomentum)this.rotateMomentum&&
(this._rotationMomentumEstimator.reset(),this.rotateMomentum=null),this.zoomMomentum&&(this._zoomMomentumEstimator.reset(),this.zoomMomentum=null),this.navigation.stop()};f([t.property()],b.prototype,"_momentumFinished",void 0);f([t.property()],b.prototype,"viewpoint",void 0);f([t.property()],b.prototype,"navigation",void 0);return b=f([t.subclass("esri.views.2d.navigation.actions.Pinch")],b)}(t.declared(g))})},"esri/views/navigation/RotationMomentumEstimator":function(){define(["require","exports",
"../../core/tsSupport/extendsHelper","./MomentumEstimator"],function(w,a,v,f){Object.defineProperty(a,"__esModule",{value:!0});w=function(a){function f(f,p,n,d){void 0===f&&(f=3);void 0===p&&(p=.01);void 0===n&&(n=.95);void 0===d&&(d=12);return a.call(this,f,p,n,d)||this}v(f,a);f.prototype.add=function(f,p){if(this.value.hasLastValue){var g=this.value.lastValue;for(f-=g;f>Math.PI;)f-=2*Math.PI;for(;f<-Math.PI;)f+=2*Math.PI;f=g+f}a.prototype.add.call(this,f,p)};return f}(f.MomentumEstimator);a.RotationMomentumEstimator=
w})},"esri/views/navigation/MomentumEstimator":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/mathUtils ./FilteredFiniteDifference ./Momentum".split(" "),function(w,a,v,f,u,p){Object.defineProperty(a,"__esModule",{value:!0});w=function(){function a(a,f,d,g){void 0===a&&(a=2.5);void 0===f&&(f=.01);void 0===d&&(d=.95);void 0===g&&(g=12);this.minimumInitialVelocity=a;this.stopVelocity=f;this.friction=d;this.maxVelocity=g;this.enabled=!0;this.value=new u.FilteredFiniteDifference(.8);
this.time=new u.FilteredFiniteDifference(.3)}a.prototype.add=function(a,f){if(this.enabled){if(this.time.hasLastValue){if(.01>this.time.computeDelta(f))return;if(this.value.hasFilteredDelta){var d=this.value.computeDelta(a);0>this.value.filteredDelta*d&&this.value.reset()}}this.time.update(f);this.value.update(a)}};a.prototype.reset=function(){this.value.reset();this.time.reset()};a.prototype.evaluateMomentum=function(){if(!this.enabled||!this.value.hasFilteredDelta)return null;var a=this.value.filteredDelta/
this.time.filteredDelta,a=f.clamp(a,-this.maxVelocity,this.maxVelocity);return Math.abs(a)<this.minimumInitialVelocity?null:this.createMomentum(a,this.stopVelocity,this.friction)};a.prototype.createMomentum=function(a,f,d){return new p.Momentum(a,f,d)};return a}();a.MomentumEstimator=w})},"esri/views/navigation/ZoomMomentumEstimator":function(){define(["require","exports","../../core/tsSupport/extendsHelper","./Momentum","./MomentumEstimator"],function(w,a,v,f,u){Object.defineProperty(a,"__esModule",
{value:!0});var p=function(a){function f(f,d,g){return a.call(this,f,d,g)||this}v(f,a);f.prototype.value=function(f){f=a.prototype.value.call(this,f);return Math.exp(f)};f.prototype.valueDelta=function(f,d){var g=a.prototype.value.call(this,f);f=a.prototype.value.call(this,f+d);return Math.exp(f-g)};return f}(f.Momentum);a.ZoomMomentum=p;w=function(a){function f(f,d,g,p){void 0===f&&(f=2.5);void 0===d&&(d=.01);void 0===g&&(g=.95);void 0===p&&(p=12);return a.call(this,f,d,g,p)||this}v(f,a);f.prototype.add=
function(f,d){a.prototype.add.call(this,Math.log(f),d)};f.prototype.createMomentum=function(a,d,f){return new p(a,d,f)};return f}(u.MomentumEstimator);a.ZoomMomentumEstimator=w})},"esri/views/2d/navigation/actions/Rotate":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../geometry ../../../../Viewpoint ../../../../core/Accessor ../../../../core/accessorSupport/decorators ../../../../core/libs/gl-matrix-2/vec2 ../../../../core/libs/gl-matrix-2/vec2f64 ../../viewpointUtils".split(" "),
function(w,a,v,f,u,p,g,t,n,d,x){var r=d.vec2f64.create(),y=d.vec2f64.create();return function(a){function b(b){b=a.call(this,b)||this;b._previousCenter=d.vec2f64.create();b.viewpoint=new p({targetGeometry:new u.Point,scale:0,rotation:0});return b}v(b,a);b.prototype.begin=function(a,b){this.navigation.begin();n.vec2.set(this._previousCenter,b.center.x,b.center.y)};b.prototype.update=function(a,b){var c=a.state,d=c.size,c=c.padding;n.vec2.set(r,b.center.x,b.center.y);x.getAnchor(y,d,c);a.viewpoint=
x.rotateBy(this.viewpoint,a.state.paddedViewState.viewpoint,x.angleBetween(y,this._previousCenter,r));n.vec2.copy(this._previousCenter,r)};b.prototype.end=function(){this.navigation.end()};f([t.property()],b.prototype,"viewpoint",void 0);f([t.property()],b.prototype,"navigation",void 0);return b=f([t.subclass("esri.views.2d.actions.Rotate")],b)}(t.declared(g))})},"esri/views/2d/magnifier/MagnifierView2D":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/tsSupport/awaiterHelper ../../../core/tsSupport/generatorHelper ../../../request ../../../core/promiseUtils ../../webgl ../engine".split(" "),
function(w,a,v,f,u,p,g,t,n){Object.defineProperty(a,"__esModule",{value:!0});var d=n.enums.WGLDrawPhase,x=function(a){function r(){var b=a.call(this)||this;b.visible=!1;return b}v(r,a);r.prototype.destroy=function(){this._readbackTexture&&(this._readbackTexture.dispose(),this._readbackTexture=null,this._maskTexture.dispose(),this._maskTexture=null,this._overlayTexture.dispose(),this._overlayTexture=null,this._vertexArrayObject.dispose(),this._vertexArrayObject=null,this._program.dispose(),this._resourcesPromise=
this._program=null)};Object.defineProperty(r.prototype,"magnifier",{get:function(){return this._magnifier},set:function(a){var b=this;this._magnifier=a;this._handle&&this._handle.remove();this._handle=a.watch("version",function(){b.visible=a.visible});this.visible=a.visible},enumerable:!0,configurable:!0});r.prototype.doRender=function(a){var b=this.stage.context;if(!this._resourcesPromise)this._resourcesPromise=this._loadResources(w.toUrl("../../../images/magnifier/mask.png"),w.toUrl("../../../images/magnifier/overlay.png"));
else if(a.drawPhase===d.MAP&&this._canRender()){this._updateResources(b);var f=this._magnifier,c=1/f.factor,e=Math.ceil(c*this.overlay.width),g=Math.ceil(c*this.overlay.height),h=a.state.size,n=a.pixelRatio,c=n*h[0];a=n*h[1];var m=f.position||{x:.5*h[0],y:.5*h[1]},h=n*m.x,n=a-n*m.y,m=.5*e,p=.5*g;m>h?h=m:h>=c-m&&(h=c-m-1);p>n?n=p:n>=a-p&&(n=a-p-1);var m=h-m,p=n-p,r=this._readbackTexture;b.bindTexture(r,0);b.gl.copyTexImage2D(r.descriptor.target,0,r.descriptor.pixelFormat,m,p,e,g,0);e=(e=this.stage.background&&
this.stage.background.color)?[e.a*e.r/255,e.a*e.g/255,e.a*e.b/255,e.a]:[1,1,1,1];g=-1+(h+f.offsetX)/c*2;f=-1+(n-f.offsetY)/a*2;c=this.overlay.width/c*2;a=this.overlay.height/a*2;h=this._program;b.bindVAO(this._vertexArrayObject);b.bindTexture(this._overlayTexture,6);b.bindTexture(this._maskTexture,7);b.bindProgram(h);h.setUniform4fv("u_background",e);h.setUniform1i("u_readbackTexture",0);h.setUniform1i("u_overlyTexture",6);h.setUniform1i("u_maskTexture",7);h.setUniform2f("u_drawPos",g,f);h.setUniform1f("u_width",
c);h.setUniform1f("u_height",a);b.setStencilTestEnabled(!1);b.drawArrays(5,0,4);b.bindVAO()}};r.prototype._canRender=function(){return this.mask&&this.overlay&&null!=this._magnifier};r.prototype._loadResources=function(a,d){return f(this,void 0,void 0,function(){var b,c,e;return u(this,function(f){switch(f.label){case 0:return[4,g.all([p(a,{responseType:"image"}),p(d,{responseType:"image"})])];case 1:return b=f.sent(),c=b[0].data,e=b[1].data,this.mask=c,this.overlay=e,this.requestRender(),[2]}})})};
r.prototype._updateResources=function(a){if(!this._readbackTexture){var b=1/this._magnifier.factor,d=Math.ceil(b*this.overlay.width),b=Math.ceil(b*this.overlay.height);this._program=n.createMagnifierProgram(a);var c=new Uint16Array([0,1,0,0,1,1,1,0]);this._vertexArrayObject=new t.VertexArrayObject(a,n.magnifier.attributes,{geometry:[{name:"a_pos",count:2,type:5123,offset:0,stride:4,normalized:!1,divisor:0}]},{geometry:t.BufferObject.createVertex(a,35044,c)});this._overlayTexture=new t.Texture(a,{target:3553,
pixelFormat:6408,internalFormat:6408,dataType:5121,wrapMode:33071,samplingMode:9728,flipped:!0},this.overlay);this._maskTexture=new t.Texture(a,{target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,wrapMode:33071,samplingMode:9728,flipped:!0},this.mask);this._readbackTexture=new t.Texture(a,{target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,wrapMode:33071,samplingMode:9729,flipped:!1,width:d,height:b})}};return r}(n.DisplayObject);a.default=x})},"*noref":1}});
define("require exports ./LabelManager ./layers/graphics/GraphicsView2D ./navigation/MapViewNavigation ./magnifier/MagnifierView2D".split(" "),function(w,a,v,f,u,p){Object.defineProperty(a,"__esModule",{value:!0});a.LabelManager=v.default;a.GraphicsView2D=f.default;a.MapViewNavigation=u.default;a.MagnifierView2D=p.default});