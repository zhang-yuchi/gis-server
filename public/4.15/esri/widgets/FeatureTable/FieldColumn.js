// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.15/esri/copyright.txt for details.
//>>built
define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../intl/date ../../layers/support/CodedValueDomain ../../layers/support/fieldUtils ./Grid/Column".split(" "),function(p,q,r,k,c,d,l,m,f,n){return function(h){function a(a){var b=h.call(this,a)||this;b.config=null;b.defaultValue=null;b.description=null;b.direction=null;b.editable=!1;b.field=null;b.headerRenderFunction=function(a){var e=
a.root;a=a.column.path;var d=b.sortable,c=document.createElement("div");c.setAttribute("class","esri-field-column__header-content "+a);d?(b._set("sortElement",b.createSortElement()),c.appendChild(b.sortElement)):c.innerHTML=b.header;e.innerHTML="";e.appendChild(c)};b.layer=null;b.length=null;b.name=null;b.nullable=!0;b.path=null;b.renderFunction=function(a){var e=a.root,c=b.path,d=b.type,g=a.rowData.item.feature;a=b._getDomainForFeature(g);c=(g=g.attributes[c])||null;a?c=b._getComputedDomain(g,a):
"date"===d&&(c=g?l.formatDate(g):null);d=document.createElement("div");d.setAttribute("class","esri-field-column__cell-content");d.innerHTML=c;e.innerHTML="";e.appendChild(d)};b.type=null;return b}k(a,h);Object.defineProperty(a.prototype,"header",{get:function(){var a=this.config,b=this.path;return a&&a.label?a.label:this.alias||b||null},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"hidden",{get:function(){var a=this.config;return a&&!1===a.visible?!0:this._get("hidden")},set:function(a){this._set("hidden",
a)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"required",{get:function(){var a=this.get("field.nullable"),b=this.get("config.required");return this.editable&&(!a||!0===b)},enumerable:!0,configurable:!0});a.prototype._isDomainCompatible=function(a){var b=this.field;if(a&&"coded-value"===a.type){var c=typeof a.codedValues[0].code;if("string"===c&&f.isStringField(b)||"number"===c&&f.isNumericField(b))return!0}return a&&"range"===a.type&&f.isNumericField(b)?!0:!1};a.prototype._getDomainForFeature=
function(a){var b=this.layer,c=this.name,d=b.typeIdField,e=d===c,f=this.get("field.domain");if(e&&!f)return new m({name:"__internal-type-based-coded-value-domain__",codedValues:b.types.map(function(a){return{code:a.id,name:a.name}})});a=d&&b.getFieldDomain(c,{feature:a})||f;b=this.get("config.domain");return this._isDomainCompatible(b)?b:a};a.prototype._getComputedDomain=function(a,b){return b?"range"===b.type?a:"coded-value"===b.type?(b=b.codedValues.filter(function(b){return b.hasOwnProperty("code")&&
b.code===a}))&&b.length?b[0].name:a:null:null};c([d.property({readOnly:!0,aliasOf:"field.alias"})],a.prototype,"alias",void 0);c([d.property()],a.prototype,"config",void 0);c([d.property({readOnly:!0,aliasOf:"field.defaultValue"})],a.prototype,"defaultValue",void 0);c([d.property({readOnly:!0,aliasOf:"field.description"})],a.prototype,"description",void 0);c([d.property()],a.prototype,"direction",void 0);c([d.property({readOnly:!0,aliasOf:"field.editable"})],a.prototype,"editable",void 0);c([d.property()],
a.prototype,"field",void 0);c([d.property({readOnly:!0,dependsOn:["alias","config"]})],a.prototype,"header",null);c([d.property({dependsOn:["config"]})],a.prototype,"hidden",null);c([d.property()],a.prototype,"headerRenderFunction",void 0);c([d.property()],a.prototype,"layer",void 0);c([d.property({readOnly:!0,aliasOf:"field.length"})],a.prototype,"length",void 0);c([d.property({readOnly:!0,aliasOf:"field.name"})],a.prototype,"name",void 0);c([d.property({readOnly:!0,aliasOf:"field.nullable"})],a.prototype,
"nullable",void 0);c([d.property({readOnly:!0,aliasOf:"field.name"})],a.prototype,"path",void 0);c([d.property()],a.prototype,"renderFunction",void 0);c([d.property({dependsOn:["field","config"]})],a.prototype,"required",null);c([d.property({readOnly:!0,aliasOf:"field.type"})],a.prototype,"type",void 0);return a=c([d.subclass("esri.widgets.FeatureTable.FieldColumn")],a)}(d.declared(n))});