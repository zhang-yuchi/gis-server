// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.15/esri/copyright.txt for details.
//>>built
require({cache:{"esri/widgets/Search/SearchResultRenderer":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper dojo/i18n!./nls/Search ../../core/accessorSupport/decorators ../Widget ./SearchViewModel ../support/widget".split(" "),function(r,g,p,f,m,c,e,h,n){return function(a){function b(b){b=a.call(this,b)||this;b.showMoreResultsOpen=!1;b.viewModel=null;return b}p(b,a);b.prototype.render=function(){var b=this,a,l=this.get("viewModel.selectedResult"),
c=this.get("viewModel.results"),l=l&&l.name||"",e=1<this._countResults(c),h=e&&c.map(function(a){return b._moreResultsList(a)}),c=e?n.tsx("div",{key:"esri-search-renderer__more-results-button",class:"esri-search-result-renderer__more-results-item"},n.tsx("a",{class:"esri-widget__anchor",href:"#",bind:this,onclick:this._showMoreResultsClick,onkeydown:this._showMoreResultsClick},this.showMoreResultsOpen?m.hideMoreResults:m.showMoreResults)):null,e=e?n.tsx("div",{key:"esri-search-renderer__more-results-container",
class:"esri-search-result-renderer__more-results-list"},h):null,h=(a={},a["esri-search-result-renderer__more-results--show-more-results"]=this.showMoreResultsOpen,a);return n.tsx("div",{class:"esri-search-result-renderer esri-widget"},n.tsx("div",{key:"esri-search-renderer__container",class:this.classes("esri-search-result-renderer__more-results",h)},n.tsx("div",{key:"esri-search-renderer__result-name",class:"esri-search-result-renderer__more-results-item"},l),n.tsx("div",{key:"esri-search-renderer__more-results"},
c,e)))};b.prototype._showMoreResultsClick=function(b){b.preventDefault();this.showMoreResultsOpen=!this.showMoreResultsOpen;(b=this.get("viewModel.view.popup"))&&b.reposition()};b.prototype._selectResultClick=function(b){b.preventDefault();b=b.currentTarget["data-result"];this.viewModel&&this.viewModel.select(b)};b.prototype._moreResultsList=function(b){var a=this,d=b.results,c=d.length,e=!!c,h=this.get("viewModel.selectedResult"),c=1===c&&d[0]===h,h=this._getSourceName(b.source,b.sourceIndex),h=
1<this.get("viewModel.results").length&&!c?n.tsx("div",{key:"esri-search-result-renderer__header-"+b.sourceIndex,class:"esri-search-result-renderer__more-results-list-header"},h):null,d=e&&d.map(function(b,d){return a._moreResultsListItem(b,d)}),d=e&&!c?n.tsx("ul",{key:"esri-search-result-renderer__list-"+b.sourceIndex},d):null;return e?n.tsx("div",{key:"esri-search-result-renderer__results-"+b.sourceIndex},h,d):null};b.prototype._moreResultsListItem=function(b,a){var d=this.get("viewModel.selectedResult");
return b!==d?n.tsx("li",{key:"esri-search-result-renderer__list-item-"+a},n.tsx("a",{class:"esri-widget__anchor",href:"#",tabindex:"0",bind:this,"data-result":b,onclick:this._selectResultClick,onkeydown:this._selectResultClick},b.name)):null};b.prototype._getSourceName=function(b,a){return a===h.ALL_INDEX?m.all:b.name};b.prototype._countResults=function(b){return b?b.reduce(function(b,a){return b+a.results.length},0):0};f([n.renderable(),c.property()],b.prototype,"showMoreResultsOpen",void 0);f([c.property(),
n.renderable(["viewModel.results","viewModel.selectedResult"])],b.prototype,"viewModel",void 0);f([n.accessibleHandler()],b.prototype,"_showMoreResultsClick",null);f([n.accessibleHandler()],b.prototype,"_selectResultClick",null);return b=f([c.subclass("esri.widgets.Search.SearchResultRenderer")],b)}(c.declared(e))})},"esri/widgets/Search/SearchViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper dojo/i18n!./nls/Search ../../Graphic ../../PopupTemplate ../../core/Accessor ../../core/Collection ../../core/Error ../../core/Evented ../../core/geolocationUtils ../../core/Handles ../../core/has ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/watchUtils ../../core/accessorSupport/decorators ../../geometry/Point ../../geometry/SpatialReference ../../portal/Portal ../../renderers/smartMapping/symbology/location ../../symbols/PictureMarkerSymbol ../../symbols/SimpleFillSymbol ../../symbols/SimpleLineSymbol ../../symbols/SimpleMarkerSymbol ../../symbols/TextSymbol ../../views/support/layerViewUtils ./LayerSearchSource ./LocatorSearchSource ./SearchSource ./support/geometryUtils ./support/locatorUtils ../support/GoTo".split(" "),
function(r,g,p,f,m,c,e,h,n,a,b,d,k,l,q,A,u,t,x,y,z,v,w,D,C,B,J,E,F,H,G,L,R,O,N,P,S){function I(b,a){return b.hasOwnProperty(a)&&null!=b[a]&&""!==b[a]}var K=u.getLogger("esri.widgets.Search.SearchViewModel"),Q=b.ofType({key:function(b){return b.layer?"layer":"locator"},base:O,typeMap:{layer:L,locator:R}}),T=w.WGS84,V=/<(?:.|\s)*?>/g;return function(b){function a(a){a=b.call(this,a)||this;a._handles=new q;a._gotoController=null;a._searching=null;a._loadingDefaultSources=null;a.allPlaceholder=e.allPlaceholder;
a.autoNavigate=!0;a.autoSelect=!0;a.defaultSources=new Q;a.defaultSymbol=new B({url:r.toUrl(A("trident")?"../../images/search/search-symbol-32.png":"../../images/search/search-symbol-32.svg"),size:24,width:24,height:24});a.includeDefaultSources=!0;a.maxInputLength=128;a.maxResults=6;a.maxSuggestions=6;a.minSuggestCharacters=1;a.popupEnabled=!0;a.popupTemplate=new n({title:e.searchResult,content:"{Match_addr}"});a.portal=D.getDefault();a.resultGraphicEnabled=!0;a.resultGraphic=null;a.results=null;
a.selectedSuggestion=null;a.searchAllEnabled=!0;a.selectedResult=null;a.sources=new Q;a.suggestionDelay=150;a.suggestions=null;a.suggestionsEnabled=!0;a.view=null;return a}p(a,b);a.prototype.initialize=function(){var a=this;this._handles.add(y.on(this,["defaultSources","sources"],"change",function(){return a.notifyChange("allSources")}))};a.prototype.destroy=function(){this._abortGoTo();this.clearGraphics();this._loadingDefaultSources=null;this._clearLoadingDefaultSources();this._handles.destroy();
this._handles=null};Object.defineProperty(a.prototype,"activeSource",{get:function(){return this.allSources.getItemAt(this.activeSourceIndex)||null},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"activeSourceIndex",{get:function(){return 1!==this.allSources.length&&this.searchAllEnabled?-1:0},set:function(a){void 0===a?this._clearOverride("activeSourceIndex"):this._override("activeSourceIndex",a)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"allSources",{get:function(){var a=
this.sources,b=this.defaultSources,d=this.includeDefaultSources,a="function"===typeof d?d.call(null,{sources:a,defaultSources:b}):d?b.concat(a):a,b=this._get("allSources")||new Q;b.removeAll();b.addMany(a.filter(Boolean));return b},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"locationEnabled",{get:function(){return this._get("locationEnabled")||l.supported()},set:function(a){if(void 0===a)this._clearOverride("locationEnabled");else{var b=l.supported();if(a&&!b){var k=new d("locationEnabled:geolocation-unsupported",
"Geolocation API is unsupported.",{geolocation:navigator.geolocation});K.error(k)}this._override("locationEnabled",a&&b)}},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"placeholder",{get:function(){var a=this.activeSourceIndex,b=this.allPlaceholder,b=void 0===b?e.allPlaceholder:b;return-1===a?b:(a=this.allSources.getItemAt(a))?a.placeholder:""},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"searchTerm",{get:function(){return this._get("searchTerm")||""},set:function(a){this._set("searchTerm",
a||"");this.clearGraphics();this.selectedSuggestion&&this.selectedSuggestion.text!==a&&this._set("selectedSuggestion",null);""===a&&this._clear()},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"state",{get:function(){return this._searching?"searching":this._loadingDefaultSources?"loading":0===this.allSources.length?"disabled":"ready"},enumerable:!0,configurable:!0});a.prototype.load=function(){return c(this,void 0,void 0,function(){var a=this;return m(this,function(b){this._handles.add([y.init(this,
["portal","includeDefaultSources"],function(){return a._loadPortal()}),y.init(this,["view","portal","includeDefaultSources"],function(){return a._loadDefaultSources()})]);return[2]})})};a.prototype.clear=function(){this.searchTerm=""};a.prototype.clearGraphics=function(){this._removeHighlight();this._closePopup();this.view&&this.view.graphics.remove(this.resultGraphic);this._set("resultGraphic",null)};a.prototype.search=function(a,b){var d=this;this.emit("search-start");this.clearGraphics();var k=
this._createSuggestionForSearch(a);this._searching=a=this._whenViewAndPortalLoaded().then(function(){return d._getResultsFromSources(k,b).then(function(a){var b={activeSourceIndex:d.activeSourceIndex,searchTerm:k.text,numResults:0,numErrors:0,errors:[],results:[]};d._formatResponse(b,a,k);a=d._getFirstResult(b.results);var c=(k.location&&a?a.name:k.text).replace(V,"");d._set("searchTerm",c);(k.key&&"number"===typeof k.sourceIndex||k.location)&&d._set("selectedSuggestion",k);d._set("results",b.results);
d.emit("search-complete",b);return d._selectFirstResult(a).then(function(){return b})})}).then(function(a){d._clearSearching();return a},function(a){d._clearSearching();throw a;});this.notifyChange("state");return a};a.prototype.searchNearby=function(a){var b=this;if(!this.locationEnabled){var k=new d("searchNearby:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});K.error(k);return x.reject(k)}this._searching=k=l.getCurrentPosition().then(function(d){return l.positionToPoint({position:d,
view:b.view},a)}).then(function(d){return b.search(d,a)});this.notifyChange("state");k.catch(function(){}).then(function(){return b._clearSearching()});return k};a.prototype.select=function(a){var b=this;this.clearGraphics();if(!a){var k=new d("select:missing-parameter","Cannot select without a searchResult.",{searchResult:a});K.error(k);return x.reject(k)}var c=this.view,l=I(a,"sourceIndex")?a.sourceIndex:this._getSourceIndexOfResult(a),e=this.allSources.getItemAt(l);if(!e)return k=new d("select:missing-source",
"Cannot select without a source.",{source:e}),K.error(k),x.reject(k);var k=e instanceof L?this._getLayerSourcePopupTemplate(e):e.popupTemplate,q=e.resultSymbol||this._getDefaultSymbol(a),n=I(e,"resultGraphicEnabled")?e.resultGraphicEnabled:this.resultGraphicEnabled,f=I(e,"autoNavigate")?e.autoNavigate:this.autoNavigate,v=I(e,"popupEnabled")?e.popupEnabled:this.popupEnabled,A=v?k||this.popupTemplate:null,u=a.feature;if(!u)return k=new d("select:missing-feature","Cannot select without a feature.",{feature:u}),
K.error(k),x.reject(k);var g=u.attributes,m=u.geometry,y=u.layer,w=u.sourceLayer,z=N.getPointFromGeometry(m),k={layerViewQuery:this._getLayerView(u),elevationQuery:c&&t.isSome(z)?N.getPointWithElevation(z,c).catch(function(){return z}):x.resolve(z)};return x.eachAlways(k).then(function(d){var k=d.layerViewQuery.value,L=d.elevationQuery.value;q instanceof H&&(q.text=a.name);d=c&&f?b._getGoToTarget(a,e):null;return(t.isSome(d)?b._goToSearchResult(d):x.resolve()).then(function(){var d=k?u:new h({geometry:m,
symbol:q,attributes:g,layer:y,sourceLayer:w,popupTemplate:A}),f=v&&b.get("view.popup");(f=f&&d.getEffectivePopupTemplate(f.defaultPopupTemplateEnabled))&&c.popup.open({features:[d],location:L});k&&G.highlightsSupported(k)&&!f&&b._highlightFeature({graphic:d,layerView:k});!k&&n&&c&&c.graphics.push(d);b._set("selectedResult",a);b._set("resultGraphic",d);b.emit("select-result",{result:a,source:e,sourceIndex:l});return a})})};a.prototype.suggest=function(a,b,d){var k=this,c=a||this.searchTerm;this.emit("suggest-start",
{searchTerm:c});return this._suggestTimer(b,d).then(function(){return k._suggestImmediate(c,d).then(function(a){k._set("suggestions",a.results);k.emit("suggest-complete",a);return a})})};a.prototype._loadPortal=function(){var a=this.portal;this.includeDefaultSources&&a&&!a.loaded&&a.load()};a.prototype._clearLoadingDefaultSources=function(){this._loadingDefaultSources=null;this.notifyChange("state")};a.prototype._clearSearching=function(){this._searching=null;this.notifyChange("state")};a.prototype._convertHelperServices=
function(){var a=this.get("portal.helperServices.geocode");return a?a.map(function(a){if(!1!==a.placefinding&&(a=R.fromJSON(a),P.isArcGISWorldGeocoder(a.get("locator.url"))&&a.set({singleLineFieldName:"SingleLine",outFields:["Addr_type","Match_addr","StAddr","City"],placeholder:e.placeholder,defaultZoomScale:2500}),a.singleLineFieldName))return a}).filter(Boolean):[]};a.prototype._convertApplicationProperties=function(){var a=this,b=this.get("view.map.applicationProperties.viewing.search"),d=this.get("view.map");
if(!d||!b)return[];var k=b.hintText;return b.enabled?b.layers.map(function(b){var c=d.findLayerById(b.id);if(c){b=a._getLayerJSON(b);var l=L.fromJSON(b);l.placeholder=k;a._getLayer(c,b).then(function(a){l.layer=a});return l}}).filter(Boolean):[]};a.prototype._getSubLayer=function(a,b){return a&&a.allSublayers?(a=a.allSublayers.find(function(a){return a.id===b.subLayer}))?a.createFeatureLayer():x.reject():x.reject()};a.prototype._getLayer=function(a,b){var k=this;if("feature"===a.type||"scene"===a.type)return x.resolve(a);
if("map-image"===a.type)return a.load().then(function(){return k._getSubLayer(a,b).catch(function(){var b=new d("search:create-featurelayer","Could not create a FeatureLayer from the MapImageLayer",{layer:a});K.error(b);return null})})};a.prototype._getLayerJSON=function(a){return"function"===typeof a.toJSON?a.toJSON():a};a.prototype._updateDefaultSources=function(){var a=this.defaultSources,b=this.includeDefaultSources;a.removeAll();b&&a.addMany(this._convertApplicationProperties().concat(this._convertHelperServices()));
this.notifyChange("allSources")};a.prototype._abortGoTo=function(){this._gotoController&&this._gotoController.abort();this._gotoController=null};a.prototype._clear=function(){this._abortGoTo();this._set("results",null);this._set("suggestions",null);this._set("selectedResult",null);this._set("selectedSuggestion",null);this.emit("search-clear")};a.prototype._closePopup=function(){var a=this.get("view.popup"),b=this.resultGraphic;if(a&&b){var d=a.selectedFeature;d&&d===b&&a.close()}};a.prototype._suggestTimer=
function(a,b){return x.after(null!=a?a:this.suggestionDelay,null,b&&b.signal)};a.prototype._createLocationForSearch=function(a){return a instanceof h?N.getPointFromGeometry(a.geometry):a instanceof v?a:Array.isArray(a)&&2===a.length?new v({longitude:a[0],latitude:a[1]}):null};a.prototype._createSuggestionForSearch=function(a){if(a&&I(a,"key")&&I(a,"text")&&I(a,"sourceIndex"))return a;var b=this._createLocationForSearch(a),d="string"===typeof a?a:this.searchTerm,k=this.selectedSuggestion,c=this.selectedResult,
l=(a=!a&&k&&c)&&k.location;return a&&k.key===c.key&&k.sourceIndex===c.sourceIndex||l?k:{location:t.unwrap(b),text:b?"":d,sourceIndex:null,key:null}};a.prototype._getFirstResult=function(a){var b=null;a&&a.some(function(a){a=a.results[0];var d=!!a;d&&(b=a);return d});return b};a.prototype._selectFirstResult=function(a){return this.autoSelect&&a?this.select(a):x.resolve()};a.prototype._suggestImmediate=function(a,b){var d=this;return this._whenViewAndPortalLoaded().then(function(){return d._getSuggestionsFromSources(a,
b)}).then(function(b){var k={activeSourceIndex:d.activeSourceIndex,searchTerm:a,numResults:0,numErrors:0,errors:[],results:[]};d._formatResponse(k,b);return k})};a.prototype._formatSourceResponse=function(a,b,d){var k=b&&b.value||[];b=b&&b.error;var c=this.allSources.getItemAt(d);b?(a.errors.push({sourceIndex:d,source:c,error:b}),a.numErrors++):(a.results.push({sourceIndex:d,source:c,results:k}),a.numResults+=k.length)};a.prototype._formatResponse=function(a,b,d){var k=this;if(b)if(-1===a.activeSourceIndex){var c=
d&&I(d,"sourceIndex")&&-1!==d.sourceIndex?d.sourceIndex:void 0;b.forEach(function(b,d){k._formatSourceResponse(a,b,void 0!==c?c:d)})}else this._formatSourceResponse(a,b[0],a.activeSourceIndex)};a.prototype._getResultsFromSources=function(a,b){var k=this,c=this.allSources,l=!a.location&&I(a,"sourceIndex")?a.sourceIndex:this.activeSourceIndex,e=[];if(!c.length)return c=new d("search:no-sources-defined","At least one source is required.",{allSources:c}),K.error(c),x.reject(c);-1===l?c.forEach(function(d,
c){e.push(k._getResultsFromSource(a,c,b))}):e.push(this._getResultsFromSource(a,l,b));return x.eachAlways(e)};a.prototype._getSuggestionsFromSources=function(a,b){var k=this,c=this.allSources,l=this.activeSourceIndex,e=[];if(!c.length)return c=new d("suggest:no-sources-defined","At least one source is required.",{allSources:c}),K.error(c),x.reject(c);-1===l?c.forEach(function(d,c){e.push(k._getSuggestionsFromSource(a,c,b))}):e.push(this._getSuggestionsFromSource(a,l,b));return x.eachAlways(e)};a.prototype._getResultsFromSource=
function(a,b,d){var k=this.allSources.getItemAt(b),c=a.location,c=void 0===c?null:c,l=this.get("view.spatialReference")||T,e=I(k,"maxResults")?k.maxResults:this.maxResults,h=k instanceof L&&I(k,"exactMatch")?k.exactMatch:!1;return k.getResults({view:this.view,sourceIndex:b,location:c,suggestResult:a,spatialReference:l,exactMatch:h,maxResults:e},d)};a.prototype._getSuggestionsFromSource=function(a,b,d){var k=this.allSources.getItemAt(b),c=I(k,"suggestionsEnabled")?k.suggestionsEnabled:this.suggestionsEnabled,
l=a.length,e=I(k,"minSuggestCharacters")?k.minSuggestCharacters:this.minSuggestCharacters;return c&&a.trim()&&l>=e?(c=this.get("view.spatialReference")||T,l=I(k,"maxSuggestions")?k.maxSuggestions:this.maxSuggestions,k.getSuggestions({view:this.view,sourceIndex:b,suggestTerm:a,spatialReference:c,maxSuggestions:l},d)):x.resolve()};a.prototype.createDefaultSymbol=function(a,b){if("point"===b)return new F({color:a.color,size:a.size,outline:{color:a.outline.color,width:a.outline.width}});if("polyline"===
b)return new E({color:a.color,width:a.width});if("polygon"===b)return new J({color:a.color,outline:{color:a.outline.color,width:a.outline.width}})};a.prototype._getLayerSourcePopupTemplate=function(a){var b=a.layer;if(b)return I(a,"popupTemplate")?a.popupTemplate:b.popupTemplate};a.prototype._getSourceIndexOfResult=function(a){var b=null;this.results.some(function(d){return d.results.some(function(k){return k===a?(b=d.sourceIndex,!0):!1})});return b};a.prototype._getGoToTarget=function(a,b){var d=
a.extent;a=a.feature;return b instanceof L?a||d:d||a};a.prototype._goToSearchResult=function(a){return c(this,void 0,void 0,function(){var b,d,k;return m(this,function(c){switch(c.label){case 0:return b=!!a,this._abortGoTo(),this._gotoController=d=x.createAbortController(),k={target:{target:a},options:{animate:b,signal:d.signal}},[4,this.callGoTo(k)];case 1:return c.sent(),this._gotoController=null,[2]}})})};a.prototype._whenViewAndPortalLoaded=function(){var a=this.includeDefaultSources,b=this.portal,
d=this.view,d=d?d.when():x.resolve(),a=b&&a?b.when():x.resolve();return x.eachAlways([d,a]).then(function(){})};a.prototype._loadDefaultSources=function(){return c(this,void 0,void 0,function(){var a,b,d=this;return m(this,function(k){switch(k.label){case 0:return this._loadingDefaultSources=b=(a=this.includeDefaultSources)?this._whenViewAndPortalLoaded():x.resolve(),this.notifyChange("state"),[4,b.catch(function(){}).then(function(){d._loadingDefaultSources===b&&(d._clearLoadingDefaultSources(),
d._updateDefaultSources())})];case 1:return k.sent(),[2]}})})};a.prototype._getDefaultSymbol=function(a){var b=this.get("view.map.basemap.id");a=t.get(a,"feature","geometry","type");return t.isSome(a)&&(b=(b=C.getSchemes({basemap:b,geometryType:a})||C.getSchemes({basemap:"topo",geometryType:a}))&&b.primaryScheme)?(b.color&&I(b,"opacity")&&(b.color.a=b.opacity),this.createDefaultSymbol(b,a)):this.defaultSymbol};a.prototype._removeHighlight=function(){this._handles.remove("highlight")};a.prototype._getLayerView=
function(a){return c(this,void 0,void 0,function(){var b,d;return m(this,function(k){switch(k.label){case 0:b=this.view;if(!a||!b)return[2,x.resolve(null)];d=a.layer;return[4,b.when()];case 1:return k.sent(),[2,b.whenLayerView(d)]}})})};a.prototype._highlightFeature=function(a){var b=a.graphic,d=b.attributes,k=b.layer.objectIdField;a=a.layerView.highlight(d&&d[k]||b);this._handles.add(a,"highlight")};a.ALL_INDEX=-1;f([z.property({readOnly:!0,dependsOn:["activeSourceIndex","allSources.length"],value:null})],
a.prototype,"activeSource",null);f([z.property({dependsOn:["allSources.length","searchAllEnabled"]})],a.prototype,"activeSourceIndex",null);f([z.property()],a.prototype,"allPlaceholder",void 0);f([z.property({dependsOn:["defaultSources.length","sources.length","includeDefaultSources"],readOnly:!0})],a.prototype,"allSources",null);f([z.property()],a.prototype,"autoNavigate",void 0);f([z.property()],a.prototype,"autoSelect",void 0);f([z.property({readOnly:!0})],a.prototype,"defaultSources",void 0);
f([z.property()],a.prototype,"defaultSymbol",void 0);f([z.property()],a.prototype,"includeDefaultSources",void 0);f([z.property()],a.prototype,"locationEnabled",null);f([z.property()],a.prototype,"maxInputLength",void 0);f([z.property()],a.prototype,"maxResults",void 0);f([z.property()],a.prototype,"maxSuggestions",void 0);f([z.property()],a.prototype,"minSuggestCharacters",void 0);f([z.property({readOnly:!0,dependsOn:["activeSourceIndex","activeSource.placeholder","allPlaceholder","allSources"]})],
a.prototype,"placeholder",null);f([z.property()],a.prototype,"popupEnabled",void 0);f([z.property({type:n})],a.prototype,"popupTemplate",void 0);f([z.property({type:D})],a.prototype,"portal",void 0);f([z.property()],a.prototype,"resultGraphicEnabled",void 0);f([z.property({readOnly:!0})],a.prototype,"resultGraphic",void 0);f([z.property({readOnly:!0})],a.prototype,"results",void 0);f([z.property({readOnly:!0})],a.prototype,"selectedSuggestion",void 0);f([z.property()],a.prototype,"searchAllEnabled",
void 0);f([z.property({readOnly:!0})],a.prototype,"selectedResult",void 0);f([z.property()],a.prototype,"searchTerm",null);f([z.property({type:Q})],a.prototype,"sources",void 0);f([z.property({readOnly:!0,dependsOn:["allSources.length"]})],a.prototype,"state",null);f([z.property()],a.prototype,"suggestionDelay",void 0);f([z.property({readOnly:!0})],a.prototype,"suggestions",void 0);f([z.property()],a.prototype,"suggestionsEnabled",void 0);f([z.property()],a.prototype,"view",void 0);f([z.property()],
a.prototype,"clear",null);return a=f([z.subclass("esri.widgets.Search.SearchViewModel")],a)}(z.declared(S.GoToMixin(k.EventedMixin(a))))})},"esri/core/geolocationUtils":function(){define("require exports ./tsSupport/assignHelper ../config ./Error ./has ./Logger ./promiseUtils ../geometry/Point ../geometry/support/webMercatorUtils ../portal/Portal ../tasks/GeometryService ../tasks/support/ProjectParameters".split(" "),function(r,g,p,f,m,c,e,h,n,a,b,d,k){function l(b,c,l){if(!c)return h.resolve(b);
var e=c.spatialReference;return e.isWGS84?h.resolve(b):e.isWebMercator?h.resolve(a.geographicToWebMercator(b)):q(l).then(function(a){if(!a)throw new m("geometry-service:missing-url","Geometry service URL is missing");a=new d({url:a});var c=new k({geometries:[b],outSR:e});return a.project(c,l).then(function(a){return a[0]})})}function q(a){if(f.geometryServiceUrl)return h.resolve(f.geometryServiceUrl);var d=b.getDefault();return d.load(a).catch(function(){}).then(function(){return d.get("helperServices.geometry.url")})}
Object.defineProperty(g,"__esModule",{value:!0});var A=e.getLogger("esri.core.geolocationUtils"),u={maximumAge:0,timeout:15E3,enableHighAccuracy:!0};g.supported=function(){var a=c("esri-geolocation");a||A.warn("geolocation-unsupported","Geolocation unsupported.");a&&((a=c("esri-secure-context"))||A.warn("insecure-context","Geolocation requires a secure origin."));return a};g.getCurrentPosition=function(a){a||(a=u);return h.create(function(b,d){setTimeout(function(){return d(new m("geolocation:timeout",
"getting the current geolocation position timed out"))},15E3);navigator.geolocation.getCurrentPosition(b,d,a)})};g.positionToPoint=function(a,b){var d=a.position;a=a.view;var k=d&&d.coords||{},k={accuracy:k.accuracy,altitude:k.altitude,altitudeAccuracy:k.altitudeAccuracy,heading:k.heading,latitude:k.latitude,longitude:k.longitude,speed:k.speed},d=d?{coords:k,timestamp:d.timestamp}:d;d=(d=d&&d.coords)?new n({longitude:d.longitude,latitude:d.latitude,z:d.altitude||null,spatialReference:{wkid:4326}}):
null;return l(d,a,b)}})},"esri/tasks/GeometryService":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper ../core/tsSupport/assignHelper ../geometry ../request ../core/jsonMap ../core/accessorSupport/decorators ../core/accessorSupport/ensureType ../geometry/support/jsonUtils ./Task ./operations/generalize ./operations/lengths ./operations/offset ./operations/relation ./operations/trimExtend ./support/GeneralizeParameters ./support/LengthsParameters ./support/OffsetParameters ./support/ProjectParameters ./support/RelationParameters ./support/TrimExtendParameters".split(" "),
function(r,g,p,f,m,c,e,h,n,a,b,d,k,l,q,A,u,t,x,y,z,v,w,D){var C=new n.JSONMap({MGRS:"mgrs",USNG:"usng",UTM:"utm",GeoRef:"geo-ref",GARS:"gars",DMS:"dms",DDM:"ddm",DD:"dd"}),B=b.ensureType(v);return function(b){function k(a){a=b.call(this,a)||this;a.url=null;return a}p(k,b);k.prototype.areasAndLengths=function(a,b){a=c({},this.parsedUrl.query,{f:"json"},a.toJSON());b=this._asValidOptions(a,b);return h(this.parsedUrl.path+"/areasAndLengths",b).then(function(a){return a.data})};k.prototype.autoComplete=
function(a,b,d){var k=a[0].spatialReference;a=c({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(k.toJSON()),polygons:JSON.stringify(this._encodeGeometries(a).geometries),polylines:JSON.stringify(this._encodeGeometries(b).geometries)});d=this._asValidOptions(a,d);return h(this.parsedUrl.path+"/autoComplete",d).then(function(a){return(a.data.geometries||[]).map(function(a){return new e.Polygon({spatialReference:k,rings:a.rings})})})};k.prototype.buffer=function(a,b){var d=c({},this.parsedUrl.query,
{f:"json"},a.toJSON()),k=a.outSpatialReference||a.geometries[0].spatialReference;a=this._asValidOptions(d,b);return h(this.parsedUrl.path+"/buffer",a).then(function(a){return(a.data.geometries||[]).map(function(a){return new e.Polygon({spatialReference:k,rings:a.rings})})})};k.prototype.convexHull=function(a,b){var k=a[0].spatialReference;a=c({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(k.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a))});b=this._asValidOptions(a,b);return h(this.parsedUrl.path+
"/convexHull",b).then(function(a){return d.fromJSON(a.data.geometry).set({spatialReference:k})})};k.prototype.cut=function(a,b,k){var l=a[0].spatialReference,e=a.map(function(a){return a.toJSON()});a=c({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(l.toJSON()),target:JSON.stringify({geometryType:d.getJsonType(a[0]),geometries:e}),cutter:JSON.stringify(b.toJSON())});k=this._asValidOptions(a,k);return h(this.parsedUrl.path+"/cut",k).then(function(a){a=a.data;return{cutIndexes:a.cutIndexes,geometries:(a.geometries||
[]).map(function(a){return d.fromJSON(a).set({spatialReference:l})})}})};k.prototype.densify=function(a,b){var k=a.geometries[0].spatialReference;a=c({},this.parsedUrl.query,{f:"json"},a.toJSON());b=this._asValidOptions(a,b);return h(this.parsedUrl.path+"/densify",b).then(function(a){return(a.data.geometries||[]).map(function(a){return d.fromJSON(a).set({spatialReference:k})})})};k.prototype.difference=function(a,b,k){var l=a[0].spatialReference;a={query:c({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(l.toJSON()),
geometries:JSON.stringify(this._encodeGeometries(a)),geometry:JSON.stringify({geometryType:d.getJsonType(b),geometry:b.toJSON()})})};if(this.requestOptions||k)a=c({},this.requestOptions,k,a);return h(this.parsedUrl.path+"/difference",a).then(function(a){return(a.data.geometries||[]).map(function(a){return d.fromJSON(a).set({spatialReference:l})})})};k.prototype.distance=function(a,b){a=c({},this.parsedUrl.query,{f:"json"},a.toJSON());b=this._asValidOptions(a,b);return h(this.parsedUrl.path+"/distance",
b).then(function(a){return(a=a.data)&&a.distance})};k.prototype.fromGeoCoordinateString=function(a,b){var d={};d.sr=null!=a.sr&&"object"===typeof a.sr?a.sr.wkid||JSON.stringify(a.sr):a.sr;d.strings=JSON.stringify(a.strings);d.conversionType=C.toJSON(a.conversionType||"mgrs");d.conversionMode=a.conversionMode;a=c({},this.parsedUrl.query,{f:"json"},d);b=this._asValidOptions(a,b);return h(this.parsedUrl.path+"/fromGeoCoordinateString",b).then(function(a){return a.data.coordinates})};k.prototype.generalize=
function(a,b){a=x.from(a);var k=a.toJSON();a=l.generalizeToRESTParameters(a);a=c({},this.parsedUrl.query,{f:"json"},a);var e=k.geometries[0].spatialReference;b=this._asValidOptions(a,b);return h(this.parsedUrl.path+"/generalize",b).then(function(a){return(a.data.geometries||[]).map(function(a){return d.fromJSON(a).set({spatialReference:e})})})};k.prototype.intersect=function(a,b,k){var l=a[0].spatialReference;a=c({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(l.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a)),
geometry:JSON.stringify({geometryType:d.getJsonType(b),geometry:b.toJSON()})});k=this._asValidOptions(a,k);return h(this.parsedUrl.path+"/intersect",k).then(function(a){return(a.data.geometries||[]).map(function(a){return d.fromJSON(a).set({spatialReference:l})})})};k.prototype.labelPoints=function(a,b){var k=a.map(function(a){return a.toJSON()}),l=a[0].spatialReference;a=c({},this.parsedUrl.query,{f:"json",sr:l.wkid?l.wkid:JSON.stringify(l.toJSON()),polygons:JSON.stringify(k)});b=this._asValidOptions(a,
b);return h(this.parsedUrl.path+"/labelPoints",b).then(function(a){return(a.data.labelPoints||[]).map(function(a){return d.fromJSON(a).set({spatialReference:l})})})};k.prototype.lengths=function(a,b){a=y.from(a);a=q.lengthsToRESTParameters(a);a=c({},this.parsedUrl.query,{f:"json"},a);b=this._asValidOptions(a,b);return h(this.parsedUrl.path+"/lengths",b).then(function(a){return a.data})};k.prototype.offset=function(a,b){a=z.from(a);var k=A.offsetToRESTParameters(a),k=c({},this.parsedUrl.query,{f:"json"},
k),l=a.geometries[0].spatialReference;a=this._asValidOptions(k,b);return h(this.parsedUrl.path+"/offset",a).then(function(a){return(a.data.geometries||[]).map(function(a){return d.fromJSON(a).set({spatialReference:l})})})};k.prototype.project=function(a,b){var k=this;a=B(a);var l=c({},this.parsedUrl.query,{f:"json"},a.toJSON()),e=a.outSpatialReference,q=d.getJsonType(a.geometries[0]);a=this._asValidOptions(l,b);return h(this.parsedUrl.path+"/project",a).then(function(a){return k._decodeGeometries(a.data,
q,e)})};k.prototype.relation=function(a,b){a=w.from(a);a=u.relationToRESTParameters(a);a=c({},this.parsedUrl.query,{f:"json"},a);b=this._asValidOptions(a,b);return h(this.parsedUrl.path+"/relation",b).then(function(a){return a.data.relations})};k.prototype.reshape=function(a,b,k){var l=a.spatialReference;a=c({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(l.toJSON()),target:JSON.stringify({geometryType:d.getJsonType(a),geometry:a.toJSON()}),reshaper:JSON.stringify(b.toJSON())});k=this._asValidOptions(a,
k);return h(this.parsedUrl.path+"/reshape",k).then(function(a){return d.fromJSON(a.data.geometry).set({spatialReference:l})})};k.prototype.simplify=function(a,b){var k=this,l=a[0].spatialReference,e=c({},this.parsedUrl.query,{f:"json",sr:l.wkid?l.wkid:JSON.stringify(l.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a))}),q=d.getJsonType(a[0]);a=this._asValidOptions(e,b);return h(this.parsedUrl.path+"/simplify",a).then(function(a){return k._decodeGeometries(a.data,q,l)})};k.prototype.toGeoCoordinateString=
function(a,b){var d={};d.sr=null!=a.sr&&"object"===typeof a.sr?a.sr.wkid||JSON.stringify(a.sr):a.sr;d.coordinates=JSON.stringify(a.coordinates);d.conversionType=C.toJSON(a.conversionType||"mgrs");d.conversionMode=a.conversionMode;d.numOfDigits=a.numOfDigits;d.rounding=a.rounding;d.addSpaces=a.addSpaces;a=c({},this.parsedUrl.query,{f:"json"},d);b=this._asValidOptions(a,b);return h(this.parsedUrl.path+"/toGeoCoordinateString",b).then(function(a){return a.data.strings})};k.prototype.trimExtend=function(a,
b){a=D.from(a);var d=t.trimExtendToRESTParameters(a),d=c({},this.parsedUrl.query,{f:"json"},d),k=a.sr;a=this._asValidOptions(d,b);return h(this.parsedUrl.path+"/trimExtend",a).then(function(a){return(a.data.geometries||[]).map(function(a){return new e.Polyline({spatialReference:k,paths:a.paths})})})};k.prototype.union=function(a,b){var k=a[0].spatialReference;a=c({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(k.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a))});b=this._asValidOptions(a,
b);return h(this.parsedUrl.path+"/union",b).then(function(a){return d.fromJSON(a.data.geometry).set({spatialReference:k})})};k.prototype._asValidOptions=function(a,b){a={query:a};if(this.requestOptions||b)a=c({},this.requestOptions,b,a);return a};k.prototype._encodeGeometries=function(a){for(var b=[],k=a.length,c=0;c<k;c++)b.push(a[c].toJSON());return{geometryType:d.getJsonType(a[0]),geometries:b}};k.prototype._decodeGeometries=function(a,b,k){var l=d.getGeometryType(b);a=a.geometries;var e=[],h=
{spatialReference:k.toJSON()};a.forEach(function(a,b){e[b]=new l(c({},a,h))});return e};k.prototype._toProjectGeometry=function(a){var b=a.spatialReference.toJSON();return a instanceof e.Extent?new e.Polygon({rings:[[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]]],spatialReference:b}):new e.Polyline({paths:[[].concat(a.points)],spatialReference:b})};k.prototype._fromProjectedGeometry=function(a,b,d){return"extent"===b?(a=a.rings[0],new e.Extent(a[0][0],a[0][1],a[2][0],
a[2][1],d)):new e.Multipoint({points:a.paths[0],spatialReference:d.toJSON()})};k.UNIT_METER=9001;k.UNIT_GERMAN_METER=9031;k.UNIT_FOOT=9002;k.UNIT_SURVEY_FOOT=9003;k.UNIT_CLARKE_FOOT=9005;k.UNIT_FATHOM=9014;k.UNIT_NAUTICAL_MILE=9030;k.UNIT_SURVEY_CHAIN=9033;k.UNIT_SURVEY_LINK=9034;k.UNIT_SURVEY_MILE=9035;k.UNIT_KILOMETER=9036;k.UNIT_CLARKE_YARD=9037;k.UNIT_CLARKE_CHAIN=9038;k.UNIT_CLARKE_LINK=9039;k.UNIT_SEARS_YARD=9040;k.UNIT_SEARS_FOOT=9041;k.UNIT_SEARS_CHAIN=9042;k.UNIT_SEARS_LINK=9043;k.UNIT_BENOIT_1895A_YARD=
9050;k.UNIT_BENOIT_1895A_FOOT=9051;k.UNIT_BENOIT_1895A_CHAIN=9052;k.UNIT_BENOIT_1895A_LINK=9053;k.UNIT_BENOIT_1895B_YARD=9060;k.UNIT_BENOIT_1895B_FOOT=9061;k.UNIT_BENOIT_1895B_CHAIN=9062;k.UNIT_BENOIT_1895B_LINK=9063;k.UNIT_INDIAN_FOOT=9080;k.UNIT_INDIAN_1937_FOOT=9081;k.UNIT_INDIAN_1962_FOOT=9082;k.UNIT_INDIAN_1975_FOOT=9083;k.UNIT_INDIAN_YARD=9084;k.UNIT_INDIAN_1937_YARD=9085;k.UNIT_INDIAN_1962_YARD=9086;k.UNIT_INDIAN_1975_YARD=9087;k.UNIT_FOOT_1865=9070;k.UNIT_RADIAN=9101;k.UNIT_DEGREE=9102;k.UNIT_ARCMINUTE=
9103;k.UNIT_ARCSECOND=9104;k.UNIT_GRAD=9105;k.UNIT_GON=9106;k.UNIT_MICRORADIAN=9109;k.UNIT_ARCMINUTE_CENTESIMAL=9112;k.UNIT_ARCSECOND_CENTESIMAL=9113;k.UNIT_MIL6400=9114;k.UNIT_BRITISH_1936_FOOT=9095;k.UNIT_GOLDCOAST_FOOT=9094;k.UNIT_INTERNATIONAL_CHAIN=109003;k.UNIT_INTERNATIONAL_LINK=109004;k.UNIT_INTERNATIONAL_YARD=109001;k.UNIT_STATUTE_MILE=9093;k.UNIT_SURVEY_YARD=109002;k.UNIT_50KILOMETER_LENGTH=109030;k.UNIT_150KILOMETER_LENGTH=109031;k.UNIT_DECIMETER=109005;k.UNIT_CENTIMETER=109006;k.UNIT_MILLIMETER=
109007;k.UNIT_INTERNATIONAL_INCH=109008;k.UNIT_US_SURVEY_INCH=109009;k.UNIT_INTERNATIONAL_ROD=109010;k.UNIT_US_SURVEY_ROD=109011;k.UNIT_US_NAUTICAL_MILE=109012;k.UNIT_UK_NAUTICAL_MILE=109013;k.UNIT_SQUARE_INCHES="esriSquareInches";k.UNIT_SQUARE_FEET="esriSquareFeet";k.UNIT_SQUARE_YARDS="esriSquareYards";k.UNIT_ACRES="esriAcres";k.UNIT_SQUARE_MILES="esriSquareMiles";k.UNIT_SQUARE_MILLIMETERS="esriSquareMillimeters";k.UNIT_SQUARE_CENTIMETERS="esriSquareCentimeters";k.UNIT_SQUARE_DECIMETERS="esriSquareDecimeters";
k.UNIT_SQUARE_METERS="esriSquareMeters";k.UNIT_ARES="esriAres";k.UNIT_HECTARES="esriHectares";k.UNIT_SQUARE_KILOMETERS="esriSquareKilometers";f([a.property()],k.prototype,"url",void 0);return k=f([a.subclass("esri.tasks.GeometryService")],k)}(a.declared(k))})},"esri/tasks/operations/generalize":function(){define(["require","exports","../../core/jsonMap","../../geometry/support/jsonUtils"],function(r,g,p,f){Object.defineProperty(g,"__esModule",{value:!0});var m=new p.default({109006:"centimeters",
9102:"decimal-degrees",109005:"decimeters",9002:"feet",109009:"inches",9036:"kilometers",9001:"meters",9035:"miles",109007:"millimeters",109012:"nautical-miles",9096:"yards"});g.generalizeToRESTParameters=function(c){var e=c.toJSON();c=e.geometries;var h=e.deviationUnit,e={maxDeviation:e.maxDeviation};c&&c.length&&(e.geometries=JSON.stringify({geometryType:f.getJsonType(c[0]),geometries:c}),e.sr=JSON.stringify(c[0].spatialReference));m.write(h,e,"deviationUnit");return e}})},"esri/tasks/operations/lengths":function(){define(["require",
"exports","../../core/jsonMap"],function(r,g,p){Object.defineProperty(g,"__esModule",{value:!0});var f=new p.default({preserveShape:"preserve-shape"});g.lengthsToRESTParameters=function(g){var c=g.toJSON(),e=c.lengthUnit,h=c.geodesic,n=c.calculationType,a={};a.polylines=JSON.stringify(c.polylines);g=g.polylines[0].spatialReference;a.sr=g.wkid?g.wkid:JSON.stringify(g.toJSON());e&&(a.lengthUnit=e);h&&(a.geodesic=h);n&&(a.calculationType=f.toJSON(n));return a}})},"esri/tasks/operations/offset":function(){define(["require",
"exports","../../core/jsonMap","../../geometry/support/jsonUtils"],function(r,g,p,f){Object.defineProperty(g,"__esModule",{value:!0});var m=new p.default({esriGeometryOffsetBevelled:"bevelled",esriGeometryOffsetMitered:"mitered",esriGeometryOffsetRounded:"rounded"}),c=new p.default({9001:"meters",9002:"feet",9036:"kilometers",9093:"miles",109012:"nautical-miles",109001:"yards"});g.offsetToRESTParameters=function(e){var h=e.toJSON();e=h.geometries;var n=h.offsetHow,a=h.offsetUnit,h={bevelRatio:h.bevelRatio,
offsetDistance:h.offsetDistance};e&&e.length&&(h.geometries=JSON.stringify({geometryType:f.getJsonType(e[0]),geometries:e}),h.sr=JSON.stringify(e[0].spatialReference));n&&(h.offsetHow=m.toJSON(n));a&&(h.offsetUnit=c.toJSON(a));return h}})},"esri/tasks/operations/relation":function(){define(["require","exports","../../core/jsonMap","../../geometry/support/jsonUtils"],function(r,g,p,f){Object.defineProperty(g,"__esModule",{value:!0});var m=new p.default({esriGeometryRelationCross:"cross",esriGeometryRelationDisjoint:"disjoint",
esriGeometryRelationIn:"in",esriGeometryRelationInteriorIntersection:"interior-intersection",esriGeometryRelationIntersection:"intersection",esriGeometryRelationLineCoincidence:"line-coincidence",esriGeometryRelationLineTouch:"line-touch",esriGeometryRelationOverlap:"overlap",esriGeometryRelationPointTouch:"point-touch",esriGeometryRelationTouch:"touch",esriGeometryRelationWithin:"within",esriGeometryRelationRelation:"relation"});g.relationToRESTParameters=function(c){var e=c.toJSON(),h=e.geometries1;
c=e.geometries2;var n=e.relation,e=e.relationParameter,a={};h&&h.length&&(a.geometries1=JSON.stringify({geometryType:f.getJsonType(h[0]),geometries:h}),h=h[0].spatialReference,a.sr=h.wkid?h.wkid:JSON.stringify(h));c&&0<c.length&&(a.geometries2=JSON.stringify({geometryType:f.getJsonType(c[0]),geometries:c}));n&&(a.relation=m.toJSON(n));e&&(a.relationParam=e);return a}})},"esri/tasks/operations/trimExtend":function(){define(["require","exports","../../core/jsonMap"],function(r,g,p){Object.defineProperty(g,
"__esModule",{value:!0});var f=new p.default({0:"default-curve-extension",1:"relocate-ends",2:"keep-end-attributes",4:"no-end-attributes",8:"no-extend-at-from",16:"no-extend-at-to"});g.trimExtendToRESTParameters=function(g){g=g.toJSON();var c=g.polylines,e=g.trimExtendTo,h={};h.extendHow=f.toJSON(g.extendHow);c&&c.length&&(h.polylines=JSON.stringify(c),h.sr=JSON.stringify(c[0].spatialReference));e&&(h.trimExtendTo=JSON.stringify(e));return h}})},"esri/tasks/support/GeneralizeParameters":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ../../geometry/support/jsonUtils".split(" "),
function(r,g,p,f,m,c,e,h){r=function(e){function a(a){a=e.call(this,a)||this;a.deviationUnit=null;a.geometries=null;a.maxDeviation=null;return a}p(a,e);f([c.property({type:String,json:{write:!0}})],a.prototype,"deviationUnit",void 0);f([c.property({json:{read:{reader:function(a){return a?a.map(function(a){return h.fromJSON(a)}):null}},write:{writer:function(a,d){d.geometries=a.map(function(a){return a.toJSON()})}}}})],a.prototype,"geometries",void 0);f([c.property({type:Number,json:{write:!0}})],
a.prototype,"maxDeviation",void 0);return a=f([c.subclass("esri.tasks.support.GeneralizeParameters")],a)}(c.declared(m.JSONSupport));r.from=e.default(r);return r})},"esri/tasks/support/LengthsParameters":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ../../geometry/support/jsonUtils".split(" "),function(r,g,p,f,m,c,e,h,
n){r=function(a){function b(b){b=a.call(this,b)||this;b.calculationType=null;b.geodesic=null;b.lengthUnit=null;b.polylines=null;return b}p(b,a);f([e.property({type:String,json:{write:!0}})],b.prototype,"calculationType",void 0);f([e.property({type:Boolean,json:{write:!0}})],b.prototype,"geodesic",void 0);f([e.property({json:{write:!0}})],b.prototype,"lengthUnit",void 0);f([e.property({type:[m.Polyline],json:{read:{reader:function(a){return a?a.map(function(a){return n.fromJSON(a)}):null}},write:{writer:function(a,
b){b.polylines=a.map(function(a){return a.toJSON()})}}}})],b.prototype,"polylines",void 0);return b=f([e.subclass("esri.tasks.support.LengthsParameters")],b)}(e.declared(c.JSONSupport));r.from=h.default(r);return r})},"esri/tasks/support/OffsetParameters":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ../../geometry/support/jsonUtils".split(" "),
function(r,g,p,f,m,c,e,h){r=function(e){function a(a){a=e.call(this,a)||this;a.bevelRatio=null;a.geometries=null;a.offsetDistance=null;a.offsetHow=null;a.offsetUnit=null;return a}p(a,e);f([c.property({type:Number,json:{write:!0}})],a.prototype,"bevelRatio",void 0);f([c.property({json:{read:{reader:function(a){return a?a.map(function(a){return h.fromJSON(a)}):null}},write:{writer:function(a,d){d.geometries=a.map(function(a){return a.toJSON()})}}}})],a.prototype,"geometries",void 0);f([c.property({type:Number,
json:{write:!0}})],a.prototype,"offsetDistance",void 0);f([c.property({type:String,json:{write:!0}})],a.prototype,"offsetHow",void 0);f([c.property({type:String,json:{write:!0}})],a.prototype,"offsetUnit",void 0);return a=f([c.subclass("esri.tasks.support.OffsetParameters")],a)}(c.declared(m.JSONSupport));r.from=e.default(r);return r})},"esri/tasks/support/ProjectParameters":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/Logger ../../core/accessorSupport/decorators ../../geometry/support/jsonUtils".split(" "),
function(r,g,p,f,m,c,e,h){var n=c.getLogger("esri.tasks.support.ProjectParameters");return function(a){function b(b){b=a.call(this,b)||this;b.geometries=null;b.outSpatialReference=null;b.transformation=null;b.transformForward=null;return b}p(b,a);Object.defineProperty(b.prototype,"outSR",{get:function(){n.warn("ProjectParameters.outSR is deprecated. Use outSpatialReference instead.");return this.outSpatialReference},set:function(a){n.warn("ProjectParameters.outSR is deprecated. Use outSpatialReference instead.");
this.outSpatialReference=a},enumerable:!0,configurable:!0});b.prototype.toJSON=function(){var a=this.geometries.map(function(a){return a.toJSON()}),b=this.geometries[0],c={};c.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON());c.inSR=b.spatialReference.wkid||JSON.stringify(b.spatialReference.toJSON());c.geometries=JSON.stringify({geometryType:h.getJsonType(b),geometries:a});this.transformation&&(c.transformation=this.transformation.wkid||JSON.stringify(this.transformation));
null!=this.transformForward&&(c.transformForward=this.transformForward);return c};f([e.property()],b.prototype,"geometries",void 0);f([e.property({json:{read:{source:"outSR"}}})],b.prototype,"outSpatialReference",void 0);f([e.property({json:{read:!1}})],b.prototype,"outSR",null);f([e.property()],b.prototype,"transformation",void 0);f([e.property()],b.prototype,"transformForward",void 0);return b=f([e.subclass("esri.tasks.support.ProjectParameters")],b)}(e.declared(m.JSONSupport))})},"esri/tasks/support/RelationParameters":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ../../geometry/support/jsonUtils".split(" "),
function(r,g,p,f,m,c,e,h){r=function(e){function a(a){a=e.call(this,a)||this;a.geometries1=null;a.geometries2=null;a.relation=null;a.relationParameter=null;return a}p(a,e);f([c.property({json:{read:{reader:function(a){return a?a.map(function(a){return h.fromJSON(a)}):null}},write:{writer:function(a,d){d.geometries1=a.map(function(a){return a.toJSON()})}}}})],a.prototype,"geometries1",void 0);f([c.property({json:{read:{reader:function(a){return a?a.map(function(a){return h.fromJSON(a)}):null}},write:{writer:function(a,
d){d.geometries2=a.map(function(a){return a.toJSON()})}}}})],a.prototype,"geometries2",void 0);f([c.property({type:String,json:{write:!0}})],a.prototype,"relation",void 0);f([c.property({type:String,json:{write:!0}})],a.prototype,"relationParameter",void 0);return a=f([c.subclass("esri.tasks.support.RelationParameters")],a)}(c.declared(m.JSONSupport));r.from=e.default(r);return r})},"esri/tasks/support/TrimExtendParameters":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ../../geometry/support/jsonUtils".split(" "),
function(r,g,p,f,m,c,e,h,n){r=function(a){function b(b){b=a.call(this,b)||this;b.extendHow="default-curve-extension";b.polylines=null;b.trimExtendTo=null;return b}p(b,a);f([e.property({type:String,json:{write:!0}})],b.prototype,"extendHow",void 0);f([e.property({type:[m.Polyline],json:{read:{reader:function(a){return a?a.map(function(a){return n.fromJSON(a)}):null}},write:{writer:function(a,b){b.polylines=a.map(function(a){return a.toJSON()})}}}})],b.prototype,"polylines",void 0);f([e.property({json:{read:{reader:function(a){return a?
n.fromJSON(a):null}},write:{writer:function(a,b){b.trimExtendTo=a.toJSON()}}}})],b.prototype,"trimExtendTo",void 0);return b=f([e.subclass("esri.tasks.support.TrimExtendParameters")],b)}(e.declared(c.JSONSupport));r.from=h.default(r);return r})},"esri/renderers/smartMapping/symbology/location":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/tsSupport/assignHelper ../../../Color ./support/SymbologyBase ./support/utils".split(" "),function(r,g,p,f,m,c,e){function h(a,
b){var d="mesh"!==a.geometryType&&a.worldScale?a.view:null;switch(a.geometryType){case "point":case "multipoint":a=b.color;var k=f({},b.outline);b=b.size;return{color:new m(a),outline:{color:new m(k.color),width:k.width},size:d?e.toWorldScale(b,d):b,opacity:1};case "polyline":return a=b.width,{color:new m(b.color),width:d?e.toWorldScale(a,d):a,opacity:1};case "polygon":a=b.size;var k=b.color,c=f({},b.outline);b=b.opacity;return{color:new m(k),outline:{color:new m(c.color),width:c.width},size:d?e.toWorldScale(a,
d):a,opacity:b};case "mesh":return d=b.opacity,{color:new m(b.color),opacity:d}}}var n={default:{name:"default",label:"Default",description:"Default theme for basic visualization of features.",schemes:{point:{light:{primary:{color:[77,77,77,1],outline:{color:[255,255,255,.25],width:"1px"},size:"8px"},secondary:[{color:[226,119,40,1],outline:{color:[255,255,255,.25],width:"1px"},size:"8px"},{color:[255,255,255,1],outline:{color:[51,51,51,.25],width:"1px"},size:"8px"}]},dark:{primary:{color:[255,255,
255,1],outline:{color:[92,92,92,.25],width:"1px"},size:"8px"},secondary:[{color:[226,119,40,1],outline:{color:[255,255,255,.25],width:"1px"},size:"8px"},{color:[26,26,26,1],outline:{color:[178,178,178,.25],width:"1px"},size:"8px"}]}},polyline:{light:{primary:{color:[77,77,77,1],width:"2px"},secondary:[{color:[226,119,40,1],width:"2px"},{color:[255,255,255,1],width:"2px"}]},dark:{primary:{color:[255,255,255,1],width:"2px"},secondary:[{color:[226,119,40,1],width:"2px"},{color:[26,26,26,1],width:"2px"}]}},
polygon:{light:{primary:{size:"12px",color:[227,139,79,1],outline:{color:[255,255,255,.25],width:"1px"},opacity:.8},secondary:[{size:"12px",color:[128,128,128,1],outline:{color:[255,255,255,.25],width:"1px"},opacity:.8},{size:"12px",color:[255,255,255,1],outline:{color:[128,128,128,.25],width:"1px"},opacity:.8}]},dark:{primary:{size:"12px",color:[227,139,79,1],outline:{color:[92,92,92,.25],width:"1px"},opacity:.8},secondary:[{size:"12px",color:[178,178,178,1],outline:{color:[92,92,92,.25],width:"1px"},
opacity:.8},{size:"12px",color:[26,26,26,1],outline:{color:[128,128,128,.25],width:"1px"},opacity:.8}]}}}}};return new (function(a){function b(){return a.call(this,{themeDictionary:n})||this}p(b,a);b.prototype.getSchemes=function(a){var b=this.getRawSchemes({theme:"default",basemap:a.basemap,geometryType:a.geometryType,basemapTheme:a.basemapTheme});if(b){var d=b.schemesInfo,c=b.basemapId,b=b.basemapTheme;return{primaryScheme:h(a,d.primary),secondarySchemes:d.secondary.map(function(b){return h(a,b)}).filter(Boolean),
basemapId:c,basemapTheme:b}}};b.prototype.cloneScheme=function(a){if(a)return a=f({},a),a.color&&(a.color=new m(a.color)),"outline"in a&&a.outline&&(a.outline={color:a.outline.color&&new m(a.outline.color),width:a.outline.width}),a};return b}(c))})},"esri/renderers/smartMapping/symbology/support/SymbologyBase":function(){define(["require","exports","../../../../core/tsSupport/assignHelper","../../../../core/tsSupport/restHelper","./Theme"],function(r,g,p,f,m){return function(){function c(c){this.themes=
null;c=c.themeDictionary;var e=new Map,n;for(n in c)e.set(n,new m(c[n]));this.themes=e}c.prototype.getThemes=function(c){var e=[];this.themes.forEach(function(h){h.isBasemapSupported(c)&&e.push({name:h.name,label:h.label,description:h.description,basemaps:h.supportedBasemaps.slice()})});return e};c.prototype.filterSchemesByName=function(c){var e=c.name;c=f(c,["name"]);if(e){var n=this.getSchemes(c);if(n){c=null;for(var a=0,n=[n.primaryScheme].concat(n.secondarySchemes);a<n.length;a++){var b=n[a];
if(b.name.toLowerCase()===e.toLowerCase()){c=b;break}}return c}}};c.prototype.filterSchemesByTag=function(c){var e=c.includedTags,n=c.excludedTags;c=f(c,["includedTags","excludedTags"]);if(!e&&!n)return[];var a=this.getSchemes(c);if(!a)return[];var b=!(e&&e.length),d=!(n&&n.length),k=[];c=function(a){var c=b?!0:e.some(function(b){return-1<a.tags.indexOf(b)}),l=!d&&n.some(function(b){return-1<a.tags.indexOf(b)});c&&!l&&k.push(a)};for(var l=0,a=[a.primaryScheme].concat(a.secondarySchemes);l<a.length;l++)c(a[l]);
return k};c.prototype.getRawSchemes=function(c){var e=this.themes.get(c.theme);if(e)return e.getRawSchemes({basemap:c.basemap,geometryType:c.geometryType,basemapTheme:c.basemapTheme})};return c}()})},"esri/core/tsSupport/restHelper":function(){define([],function(){return function(r,g){var p={},f;for(f in r)Object.prototype.hasOwnProperty.call(r,f)&&0>g.indexOf(f)&&(p[f]=r[f]);if(null!=r&&"function"===typeof Object.getOwnPropertySymbols){var m=0;for(f=Object.getOwnPropertySymbols(r);m<f.length;m++)0>
g.indexOf(f[m])&&(p[f[m]]=r[f[m]])}return p}})},"esri/renderers/smartMapping/symbology/support/Theme":function(){define("require exports ../../../../core/tsSupport/assignHelper ../../../../core/lang ../../../../core/maybe ../../support/utils".split(" "),function(r,g,p,f,m,c){return function(){function e(e){this.schemes=this.basemapGroups=this.supportedBasemaps=this.description=this.label=this.name=null;var h=e.label,a=e.description,b=e.schemes;this.name=e.name;this.label=h;this.description=a;this.schemes=
b;e=e.basemapGroups||c.defaultBasemapGroups;h=[];if(e)for(var d in e)h=h.concat(e[d]);this.supportedBasemaps=h;this.basemapGroups=e}e.prototype.isBasemapSupported=function(e){return(e=c.getBasemapId(e,this.supportedBasemaps))&&-1<this.supportedBasemaps.indexOf(e)?!0:!1};e.prototype.getRawSchemes=function(e){var h,a=e.basemap;h=e.basemapTheme;var b=null,d=null;a&&(b=c.getBasemapId(a,this.supportedBasemaps,!1))&&(a=c.getBasemapGroup(b),m.isSome(a)&&(d=a));!b&&h&&(b="dark"===h?"dark-gray":"gray",d=h);
b||d||(b="gray",d="light");h=b;b=d;h&&(a=c.getBasemapGroup(h,this.basemapGroups),m.isSome(a)&&(b=a));e=e.geometryType;"multipoint"===e?e="point":"mesh"===e&&(e="polygon");return{schemesInfo:f.clone((this.schemes[e]||this.schemes["default"])[b]),basemapId:h,basemapTheme:d}};return e}()})},"esri/renderers/smartMapping/support/utils":function(){define("require exports ../../../core/tsSupport/generatorHelper ../../../core/tsSupport/awaiterHelper ../../../Basemap ../../../core/string ./adapters/CSVLayerAdapter ./adapters/FeatureLayerAdapter ./adapters/LayerAdapter ./adapters/PointCloudLayerAdapter ./adapters/SceneLayerAdapter ../../../support/arcadeOnDemand ../../../support/basemapUtils".split(" "),
function(r,g,p,f,m,c,e,h,n,a,b,d,k){function l(a){return c.padStart(a,2,"0")}function q(a,b,d){if("date"===b||"number"===b){"number"===b&&(a=new Date(a));b=d?a.getFullYear():a.getUTCFullYear();var k=l((d?a.getMonth():a.getUTCMonth())+1),c=l(d?a.getDate():a.getUTCDate()),e=l(d?a.getHours():a.getUTCHours()),h=l(d?a.getMinutes():a.getUTCMinutes());a=l(d?a.getSeconds():a.getUTCSeconds());a="TIMESTAMP'"+b+"-"+k+"-"+c+" "+e+":"+h+":"+a+"'"}return a}function A(a,b){if(b instanceof Date)return"date";if("number"===
typeof b)return"number";if("string"===typeof b&&(a=a.getField(b),"\x3cnow\x3e"!==b.toLowerCase()&&a&&"date"===a.type))return"field"}Object.defineProperty(g,"__esModule",{value:!0});var u;g.defaultBasemapGroups={light:"streets gray topo terrain national-geographic oceans osm gray-vector streets-vector topo-vector streets-relief-vector streets-navigation-vector".split(" "),dark:["satellite","hybrid","dark-gray","dark-gray-vector","streets-night-vector"]};var t=(u={},u[0]={adapter:e,type:"csv",label:"CSVLayer"},
u[2]={adapter:h,type:"feature",label:"FeatureLayer"},u[1]={adapter:h,type:"geojson",label:"GeoJSONLayer"},u[3]={adapter:b,type:"scene",label:"SceneLayer"},u[4]={adapter:a,type:"point-cloud",label:"PointCloudLayer"},u),x=[0,2,1,3,4];g.unitValueInDays={years:365,months:30,days:1,hours:1/24,minutes:1/1440,seconds:1/86400,milliseconds:1/864E5};var y=["integer","small-integer"],z=null;g.getLayerTypeLabels=function(a){return a.map(function(a){return t[a].label})};g.createLayerAdapter=function(a,b){void 0===
b&&(b=x);if(a instanceof n)return a;var d=null;b.some(function(b){var k=a.type===t[b].type;k&&(d=new t[b].adapter({layer:a}));return k});return d};g.getFieldsList=function(a){return f(this,void 0,void 0,function(){var b,k,c,l,e;return p(this,function(h){switch(h.label){case 0:return b=a.field,k=a.normalizationField,c=a.valueExpression,l=[],c?z?[3,2]:[4,d.loadArcade()]:[3,3];case 1:z=e=h.sent().arcadeUtils,h.label=2;case 2:l=z.extractFieldNames(c),h.label=3;case 3:return b&&l.push(b),k&&l.push(k),
[2,l]}})})};g.getNormalizationType=function(a){var b=a.normalizationType;b||(a.normalizationField?b="field":null!=a.normalizationTotal&&(b="percent-of-total"));return b};g.getDateDiffSQL=function(a,b,d,k){var c=a.hasQueryEngine;d=q(d,A(a,d),c);a=q(b,A(a,b),c);a="("+d+" - "+a+")";c&&(a="("+a+" * "+g.unitValueInDays.milliseconds+")");k=g.unitValueInDays[k];c="/";1>k&&(k=1/k,c="*");return{sqlExpression:1===k?a:"("+a+" "+c+" "+k+")",sqlWhere:null}};g.getDateType=A;g.getBasemapGroup=function(a,b){void 0===
b&&(b=g.defaultBasemapGroups);for(var d in b)if(-1<b[d].indexOf(a))return d};g.getBasemapId=function(a,b,d){void 0===d&&(d=!0);var c=null;"string"===typeof a&&-1<b.indexOf(a)?c=a:a instanceof m&&(c=k.getWellKnownBasemapId(a));return d?c||"gray":c};g.isIntegerField=function(a,b){return(a=b&&a.getField(b))&&-1<y.indexOf(a.type)};g.castIntegerFieldToFloat=function(a){return"cast("+a+" as float)"}})},"esri/renderers/smartMapping/support/adapters/CSVLayerAdapter":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/awaiterHelper ../../../../core/Error ../../../../core/promiseUtils ../../../../core/accessorSupport/decorators ../../statistics/support/utils ../utils ./FeatureLayerAdapter ./support/utils ../../../../tasks/support/generateRendererUtils".split(" "),
function(r,g,p,f,m,c,e,h,n,a,b,d,k,l){function q(a){return"esri.tasks.support.ClassBreaksDefinition"===a.declaredClass}function A(a){return"esri.tasks.support.UniqueValueDefinition"===a.declaredClass}return function(d){function t(a){return d.call(this,a)||this}p(t,d);t.prototype._createGenerateRendererResult=function(a,b,d,h,n){return c(this,void 0,void 0,function(){var c,f,t,v,u;return m(this,function(x){switch(x.label){case 0:f=(c=a&&a.features)&&c.length;if(!f)throw new e("csv-layer-adapter:insufficient-data",
"No features are available to calculate statistics");t=null;return"percent-of-total"!==h?[3,2]:[4,k.calculateStatsFromMemory({field:b},c)];case 1:v=x.sent();t=v.sum;if(null==t)throw new e("csv-layer-adapter:invalid","invalid normalizationTotal");x.label=2;case 2:return q(n)?[4,k.getDataValues({field:b,normalizationType:h,normalizationField:d,normalizationTotal:t},c)]:[3,4];case 3:return u=x.sent().filter(function(a){return null!=a&&k.isValidNumber(a)}),[2,l.createGenerateRendererClassBreaks({definition:n,
values:u,normalizationTotal:t})];case 4:return A(n)?[4,k.getDataValues({field:b},c)]:[3,6];case 5:return u=x.sent().filter(function(a){return null!=a&&"string"===typeof a&&""!==a.trim()}),[2,l.createGenerateRendererUniqueValues(u)];case 6:return[2,void 0]}})})};t.prototype.generateRenderer=function(d,k){var c=this,l=d.classificationDefinition,e=null,h=null,n=null;q(l)?(e=l.classificationField,h=l.normalizationField,n=l.normalizationType):A(l)&&(e=l.attributeField);var f=this.layer;return b.getFieldsList({field:e,
normalizationField:h}).then(function(b){var q=f.createQuery();q.returnGeometry=!1;q.outFields=b;q.where=a.mergeWhereClauses(q.where,d.where);return f.queryFeatures(q,{signal:k}).then(function(a){return c._createGenerateRendererResult(a,e,h,n,l)})})};t.prototype.load=function(a){var b=this;a=this.layer.load(a).then(function(a){b.geometryType=a.geometryType;b.objectIdField=a.objectIdField;b.supportsSQLExpression=!0;b._hasLocalSource=!1;b.hasQueryEngine=!0});this.addResolvingPromise(a);return h.resolve(this)};
return t=f([n.subclass("esri.renderers.smartMapping.support.adapters.CSVLayerAdapter")],t)}(n.declared(d))})},"esri/renderers/smartMapping/statistics/support/utils":function(){define(["require","exports","../../../../core/Error","../../../../layers/support/fieldUtils"],function(r,g,p,f){function m(c,a){return new p(c,a)}function c(c,a){a&&(c=c?"("+c+") AND ("+a+")":a);return c}function e(c){var a=c.layer;return c.fields.filter(function(b){return!a.getField(b)})}function h(c){var a=c.layer;return c.fields.filter(function(b){b=
a.getFieldUsageInfo(b);return!b||!b.supportsStatistics})}Object.defineProperty(g,"__esModule",{value:!0});g.getSQLFilterForNormalization=function(c){var a=c.field,b=c.normalizationType;c=c.normalizationField;var d;"log"===b?d="(NOT "+a+" \x3d 0)":"field"===b&&(d="(NOT "+c+" \x3d 0)");return d};g.createError=m;g.getRangeExpr=function(e,a,b){a=null!=a?e+" \x3e\x3d "+a:"";e=null!=b?e+" \x3c\x3d "+b:"";b="";return(b=a&&e?c(a,e):a||e)?"("+b+")":""};g.verifyFieldType=function(c,a,b,d){var k=null;if(!a)k=
m(b,"'field' is not defined in the layer schema");else if(a.name===c.objectIdField||-1===d.indexOf(a.type))k=m(b,"'field' should be one of these types: "+d.join(","));return k};g.verifyNumericField=function(c,a,b){var d;a?a.name!==c.objectIdField&&f.isNumericField(a)||(d=m(b,"'field' should be one of these numeric types: "+f.numericTypes.join(","))):d=m(b,"'field' is not defined in the layer schema");return d};g.mergeWhereClauses=c;g.verifyBasicFieldValidity=function(c,a,b){var d=e({layer:c,fields:a});
if(d.length)return m(b,"Unknown fields: "+d.join(", ")+". You can only use fields defined in the layer schema");c=h({layer:c,fields:a});if(c.length)return m(b,"Unsupported fields: "+c.join(", ")+". You can only use fields that can be fetched i.e. AdapterFieldUsageInfo.supportsStatistics must be true")}})},"esri/renderers/smartMapping/support/adapters/FeatureLayerAdapter":function(){define("require exports ../../../../core/tsSupport/assignHelper ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/awaiterHelper ../../../../geometry ../../../../core/arrayUtils ../../../../core/Error ../../../../core/maybe ../../../../core/promiseUtils ../../../../core/watchUtils ../../../../core/accessorSupport/decorators ../../../../geometry/support/quantizationUtils ../../../../geometry/support/spatialReferenceUtils ../../../../layers/support/arcgisLayerUrl ../../../../layers/support/fieldUtils ../../statistics/support/predominanceUtils ../../statistics/support/utils ../utils ./LayerAdapter ./support/utils ../../../../tasks/GenerateRendererTask ../../../../tasks/support/GenerateRendererParameters ../../../../tasks/support/QuantizationParameters ../../../../tasks/support/Query ../../../../tasks/support/StatisticDefinition ../../../../tasks/support/UniqueValueDefinition".split(" "),
function(r,g,p,f,m,c,e,h,n,a,b,d,k,l,q,A,u,t,x,y,z,v,w,D,C,B,J,E,F){return function(v){function g(a){return v.call(this,a)||this}f(g,v);g.prototype.destroy=function(){this._hasLocalSource=null};g.prototype._isStatsSupportedOnService=function(){var b=this.layer;return!b.get("capabilities.query.supportsStatistics")||"multipatch"===this.geometryType&&!u.isHostedAgolService(b.url)&&10.5>b.version?d.reject(new a("feature-layer-adapter:not-supported","Layer does not support statistics query")):d.resolve()};
g.prototype._fetchFeaturesFromMemory=function(b,d,l){return e(this,void 0,void 0,function(){var e,h,q,f;return c(this,function(c){switch(c.label){case 0:return e=this.layer,this._hasLocalSource?[4,e.queryFeatures(d)]:[3,2];case 1:return h=c.sent(),[2,h.features];case 2:if(!b)throw new a("feature-layer-adapter:insufficient-data","view is required to fetch the features from layerView");return[4,b.whenLayerView(e)];case 3:return q=c.sent(),[4,k.whenFalseOnce(q,"updating")];case 4:return c.sent(),[4,
q.queryFeatures(d,{signal:l})];case 5:return f=c.sent(),[2,f.features]}})})};g.prototype._fetchFeaturesFromService=function(a,b){return this.layer.queryFeatures(a,{signal:b}).then(function(a){return a&&a.features})};g.prototype._fetchFeaturesForStats=function(a){var b=this;return z.getFieldsList({field:a.field,normalizationField:a.normalizationField,valueExpression:a.valueExpression}).then(function(d){return b.getSampleFeatures({sampleSize:-1,view:a.view,requiredFields:d,signal:a.signal})})};g.prototype._hasRequiredFieldsInView=
function(a,b){return e(this,void 0,void 0,function(){var d,l,e=this;return c(this,function(c){switch(c.label){case 0:return[4,b.whenLayerView(this.layer)];case 1:return d=c.sent(),[4,k.whenFalseOnce(d,"updating")];case 2:return c.sent(),l=!0,a&&a.length&&(l=a.every(function(a){a=e.getField(a);return-1<d.availableFields.indexOf(a.name)})),[2,l]}})})};g.prototype._summaryStatsFromGenRend=function(a){var b=a.normalizationType,d=a.normalizationField;return this.classBreaks({field:a.field,numClasses:5,
classificationMethod:"standard-deviation",standardDeviationInterval:.25,normalizationType:b,normalizationField:"field"===b?d:void 0,minValue:a.minValue,maxValue:a.maxValue,signal:a.signal}).then(function(a){var b,d,k;a.classBreakInfos.some(function(a){a.hasAvg&&(b=a);return!!b});b&&(k=b.maxValue-b.minValue,d=b.minValue+k/2,k*=4);return w.processSummaryStatisticsResult({min:a.minValue,max:a.maxValue,avg:d,stddev:k})})};g.prototype._getSummaryStatsQuery=function(a,b){var d=a.field,k=a.normalizationType,
c=a.normalizationField,l=a.normalizationTotal;b=this.supportsSQLExpression&&b?w.msSinceUnixEpochSQL(this,d):a.sqlExpression;var l=w.getFieldExpr({field:d,normalizationType:k,normalizationField:c,normalizationTotal:l,layer:this}),e=b||l,l=e?y.getRangeExpr(e,a.minValue,a.maxValue):null,d=y.getSQLFilterForNormalization({field:d,normalizationField:c,normalizationType:k});a=y.mergeWhereClauses(a.sqlWhere,d);a=y.mergeWhereClauses(a,l);d=this.layer.createQuery();d.where=y.mergeWhereClauses(d.where,a);d.sqlFormat=
b?"standard":null;d.outStatistics=w.statisticTypes.map(function(a){var b=new E;b.statisticType="variance"===a?"var":a;b.onStatisticField=e;b.outStatisticFieldName=a+"_value";return b});return d};g.prototype._summaryStatsFromServiceQuery=function(a,b){return e(this,void 0,void 0,function(){var d,k,l,e;return c(this,function(c){switch(c.label){case 0:return[4,this._isStatsSupportedOnService()];case 1:c.sent();if("percent-of-total"!==a.normalizationType)return[3,3];d=a;return[4,this._getNormalizationTotal(a.field,
a.normalizationType)];case 2:d.normalizationTotal=c.sent(),c.label=3;case 3:return k=this._getSummaryStatsQuery(a,b),[4,this.layer.queryFeatures(k,{signal:a.signal})];case 4:return l=c.sent(),e=w.getSummaryStatisticsFromFeatureSet(l,b),[2,w.processSummaryStatisticsResult(e)]}})})};g.prototype._summaryStatsFromClientQuery=function(b,d){return e(this,void 0,void 0,function(){var l,e,h,q,f,n,t,A,g;return c(this,function(c){switch(c.label){case 0:l=b.view;e=b.signal;if(!l)throw new a("feature-layer-adapter:insufficient-data",
"view is required to query stats from layerView");return[4,l.whenLayerView(this.layer)];case 1:return h=c.sent(),[4,k.whenFalseOnce(h,"updating")];case 2:return c.sent(),[4,z.getFieldsList({field:b.field,normalizationField:b.normalizationField,valueExpression:b.valueExpression})];case 3:return q=c.sent(),[4,this._hasRequiredFieldsInView(q,l)];case 4:return f=c.sent(),n=this._getSummaryStatsQuery(b,d),!this._hasLocalSource||f?[3,6]:[4,this.layer.queryFeatures(n,{signal:e})];case 5:return A=c.sent(),
[3,8];case 6:return[4,h.queryFeaturesJSON(n,{signal:e})];case 7:A=c.sent(),c.label=8;case 8:return t=A,g=w.getSummaryStatisticsFromFeatureSet(t,d),[2,w.processSummaryStatisticsResult(g)]}})})};g.prototype._summaryStatsFromMemory=function(b,d){return e(this,void 0,void 0,function(){var k,l,e,h,q,f,n,t,A,g,v;return c(this,function(c){switch(c.label){case 0:return k=b.field,l=b.valueExpression,e=b.view,h={field:k,valueExpression:l,normalizationField:b.normalizationField,view:e,signal:b.signal},(f=b.features)?
[3,2]:[4,this._fetchFeaturesForStats(h)];case 1:f=c.sent(),c.label=2;case 2:n=(q=f)&&q.length;if(!n)throw new a("feature-layer-adapter:insufficient-data","No features are available to calculate statistics");t=p({},b);return"percent-of-total"!==t.normalizationType?[3,4]:[4,w.calculateStatsFromMemory({field:k},q)];case 3:A=c.sent();g=A.sum;if(null==g)throw new a("feature-layer-adapter:invalid","invalid normalizationTotal");t.normalizationTotal=g;c.label=4;case 4:return[4,w.calculateStatsFromMemory(t,
q,d)];case 5:return v=c.sent(),[2,w.processSummaryStatisticsResult(v)]}})})};g.prototype._uvFromGenRenderer=function(a,b){var d=this,k=a.field,c=new F;c.attributeField=k;var l=new C;l.classificationDefinition=c;return this.generateRenderer(l,a.signal).then(function(a){var b={},c=d.getField(k);a.uniqueValues.forEach(function(a){var d=a.value;if(null==d||""===d||"string"===typeof d&&(""===d.trim()||"\x3cnull\x3e"===d.toLowerCase()))d=null;null==b[d]?b[d]={count:a.count,data:t.isNumericField(c)&&d?Number(d):
d}:b[d].count+=a.count});return{count:b}}).then(function(d){return w.createUVResult(d,b,a.returnAllCodedValues)})};g.prototype._getUVQuery=function(a){var b=a.field,d=a.sqlExpression,k="countOF"+(b||"Expr"),c=new E;c.statisticType="count";c.onStatisticField=d?"1":b;c.outStatisticFieldName=k;k=this.layer.createQuery();k.where=y.mergeWhereClauses(k.where,a.sqlWhere);k.sqlFormat=d?"standard":null;k.outStatistics=[c];k.groupByFieldsForStatistics=[b||d];return k};g.prototype._uvFromServiceQuery=function(a,
b){var d=this;return this._isStatsSupportedOnService().then(function(){return d.layer.queryFeatures(d._getUVQuery(a),{signal:a.signal})}).then(function(b){return w.getUniqueValuesFromFeatureSet(b,d,a.field,null,a.signal)}).then(function(d){return w.createUVResult(d,b,a.returnAllCodedValues)})};g.prototype._uvFromClientQuery=function(b,d){return e(this,void 0,void 0,function(){var l,e,h,q,f;return c(this,function(c){switch(c.label){case 0:l=b.view;e=b.signal;if(!l)throw new a("feature-layer-adapter:insufficient-data",
"view is required to query stats from layerView");return[4,l.whenLayerView(this.layer)];case 1:return h=c.sent(),[4,k.whenFalseOnce(h,"updating")];case 2:return c.sent(),[4,h.queryFeaturesJSON(this._getUVQuery(b),{signal:e})];case 3:return q=c.sent(),[4,w.getUniqueValuesFromFeatureSet(q,this,b.field,null,b.signal)];case 4:return f=c.sent(),[2,w.createUVResult(f,d,b.returnAllCodedValues)]}})})};g.prototype._uvFromMemory=function(a,b){return e(this,void 0,void 0,function(){var d,k,l,e,h,q,f;return c(this,
function(c){switch(c.label){case 0:d=a.field;k=a.valueExpression;l=a.view;e=a.signal;h={field:d,valueExpression:k,view:l,signal:e};if(!a.features)return[3,1];f=a.features;return[3,3];case 1:return[4,this._fetchFeaturesForStats(h)];case 2:f=c.sent(),c.label=3;case 3:return q=f,[2,w.calculateUniqueValuesFromMemory(a,q,b)]}})})};g.prototype._calcBinsSQL=function(a,b){var d=[],k=b.length;b.forEach(function(b,c){b=y.mergeWhereClauses(a+" \x3e\x3d "+b[0],a+(c===k-1?" \x3c\x3d ":" \x3c ")+b[1]);d.push("WHEN ("+
b+") THEN "+(c+1))});return["CASE",d.join(" "),"ELSE 0 END"].join(" ")};g.prototype._getNormalizationTotal=function(a,b,k){return a&&"percent-of-total"===b?this.summaryStatistics({field:a,signal:k}).then(function(a){return a.sum}):d.resolve(null)};g.prototype._getQueryParamsForExpr=function(a,b){var d=a.signal;if(!a.valueExpression&&!a.sqlExpression){var k=a.field,c=k?this.getField(k):null,c=t.isDateField(c);b={field:k,normalizationType:a.normalizationType,normalizationField:a.normalizationField,
normalizationTotal:b,layer:this};return{sqlExpression:c?w.msSinceUnixEpochSQL(this,k):w.getFieldExpr(b),sqlWhere:c?null:a.sqlWhere||y.getSQLFilterForNormalization(a),signal:d}}return{valueExpression:a.valueExpression,sqlExpression:a.sqlExpression,sqlWhere:a.sqlWhere,signal:d}};g.prototype._getDataRange=function(a,b,k){return null!=b&&null!=k?d.resolve({min:b,max:k}):this.summaryStatistics(a).then(function(a){return{min:a.min,max:a.max}})};g.prototype._histogramForExpr=function(a){var b=this;return this._getNormalizationTotal(a.field,
a.normalizationType,a.signal).then(function(d){var k=b._getQueryParamsForExpr(a,d);return b._getDataRange(k,a.minValue,a.maxValue).then(function(c){var l=c.min,e=c.max,h=a.numBins||10;c=w.getEqualIntervalBins(l,e,h);c=b._calcBinsSQL(k.sqlExpression,c);var q=new E({statisticType:"count",outStatisticFieldName:"countOFExpr",onStatisticField:"1"}),f=b.layer.createQuery();f.where=y.mergeWhereClauses(f.where,k.sqlWhere);f.sqlFormat="standard";f.outStatistics=[q];f.groupByFieldsForStatistics=[c];f.orderByFields=
[c];return b._isStatsSupportedOnService().then(function(){return b.layer.queryFeatures(f,{signal:k.signal})}).then(function(a){return w.getHistogramFromFeatureSet(a,l,e,h,d)})})})};g.prototype._histogramForField=function(b){var k=this,c=null,c=null!=b.minValue&&null!=b.maxValue?d.resolve({min:b.minValue,max:b.maxValue}):this.summaryStatistics(b).then(function(b){if(!b.count)throw new a("feature-layer-adapter:insufficient-data","Either the layer has no features or none of the features have data for the field");
return{min:b.min,max:b.max}});return c.then(function(a){return k._getBins({min:a.min,max:a.max},b.field,b.numBins,b.signal)})};g.prototype._getBins=function(a,b,d,k){void 0===d&&(d=10);var c=a.min,l=a.max,e=a.normTotal,h=a.excludeZerosExpr,q=a.intervals||w.getEqualIntervalBins(c,l,d);return this._queryBins(q,a.sqlExpr||b,h,k).then(function(a){return{bins:a.map(function(a,b){return{minValue:q[b][0],maxValue:q[b][1],count:a.value}}),minValue:c,maxValue:l,normalizationTotal:e}})};g.prototype._queryBins=
function(a,b,k,c){for(var l=this,e=[],h=a.length,q=0;q<h;q++){var f=y.mergeWhereClauses(k,y.mergeWhereClauses(b+" \x3e\x3d "+a[q][0],null!==a[q][1]?b+(q===h-1?" \x3c\x3d ":" \x3c ")+a[q][1]:""));e.push(f)}return d.eachAlways(e.map(function(a){return l.queryFeatureCount(a,c)}))};g.prototype._binParamsFromGenRend=function(a,b){var d=this,k=a.field,c=a.normalizationType,l=a.normalizationField,e=a.signal,h=y.getSQLFilterForNormalization({field:k,normalizationType:c,normalizationField:l});a=new C({classificationDefinition:w.createCBDefn({field:k,
normalizationType:c,normalizationField:l,classificationMethod:a.classificationMethod,standardDeviationInterval:a.standardDeviationInterval,breakCount:a.numBins||10}),where:y.mergeWhereClauses(h,b)});return this.generateRenderer(a,e).then(function(a){return w.generateBinParams({field:k,normalizationType:c,normalizationField:l,normalizationTotal:a.normalizationTotal,classBreaks:a.classBreaks,where:h,layer:d})})};g.prototype._histogramFromMemory=function(b){var k=this,c=b.field,l=b.normalizationType,
e=b.valueExpression,h=b.classificationMethod,q=b.minValue,f=b.maxValue,n=b.view,t=b.signal,A={field:c,valueExpression:e,normalizationField:b.normalizationField,view:n,signal:t};return(b.features?d.resolve(b.features):this._fetchFeaturesForStats(A)).then(function(A){if(!A||!A.length)throw new a("feature-layer-adapter:insufficient-data","No features are available to calculate histogram");var g=null!=q&&null!=f,v=null;h&&"equal-interval"!==h||l?(g=p({},b),g.features=A,v=k._getBinParamsFromMemory(g)):
v=g?d.resolve({min:q,max:f,source:"parameters"}):k.summaryStatistics({field:c,valueExpression:e,features:A,view:n,signal:t}).then(function(b){return b.count?{min:b.min,max:b.max}:d.reject(new a("feature-layer-adapter:insufficient-data","No features are available to calculate histogram"))});return v.then(function(a){return w.calculateHistogramFromMemory(b,a,A)})})};g.prototype._getBinParamsFromMemory=function(a){return e(this,void 0,void 0,function(){var b,d,k,l,e,h,q,f,n,t,A,g=this;return c(this,
function(c){b=a.field;d=a.valueExpression;k=a.classificationMethod;l=a.standardDeviationInterval;e=a.normalizationType;h=a.normalizationField;q=a.minValue;f=a.maxValue;n=a.features;t=a.view;A=a.signal;return[2,this._classBreaksFromMemory({field:b,valueExpression:d,normalizationType:e,normalizationField:h,classificationMethod:k,standardDeviationInterval:l,minValue:q,maxValue:f,numClasses:a.numBins,features:n,view:t,signal:A}).then(function(a){var d=a.normalizationTotal;a=a.classBreakInfos;var k=y.getSQLFilterForNormalization({field:b,
normalizationType:e,normalizationField:h});return w.generateBinParams({field:b,normalizationType:e,normalizationField:h,normalizationTotal:d,classBreaks:a,where:k,layer:g})})]})})};g.prototype._classBreaksFromGenRend=function(a){var b=a.field,d=a.normalizationType,k=a.normalizationField,c=a.normalizationTotal,l=a.signal,e=y.getSQLFilterForNormalization({field:b,normalizationType:d,normalizationField:k}),c=w.getFieldExpr({field:b,normalizationType:d,normalizationField:k,normalizationTotal:c,layer:this}),
c=y.getRangeExpr(c,a.minValue,a.maxValue),b=w.createCBDefn({field:b,normalizationType:d,normalizationField:k,classificationMethod:a.classificationMethod,standardDeviationInterval:a.standardDeviationInterval,breakCount:a.numClasses||5}),d=new C;d.classificationDefinition=b;d.where=y.mergeWhereClauses(e,c);return this.generateRenderer(d,l).then(function(b){return w.resolveCBResult(a,b)})};g.prototype._classBreaksFromInterpolation=function(a){for(var b=a.minValue,k=a.maxValue,c=a.numClasses||5,l=[],
e=(k-b)/c,h=0;h<c;h++){var q=b+h*e;l.push({minValue:q,maxValue:q+e})}l[c-1].maxValue=k;a=w.resolveCBResult(a,{classBreaks:l,normalizationTotal:a.normalizationTotal});return d.resolve(a)};g.prototype._classBreaksFromMemory=function(b){return e(this,void 0,void 0,function(){var d,k,l,e,h,q,f,n,t,A,g,v;return c(this,function(c){switch(c.label){case 0:return d=b.field,k=b.normalizationField,l=b.valueExpression,e=b.view,h=b.signal,q={field:d,valueExpression:l,normalizationField:k,view:e,signal:h},(n=b.features)?
[3,2]:[4,this._fetchFeaturesForStats(q)];case 1:n=c.sent(),c.label=2;case 2:t=(f=n)&&f.length;if(!t)throw new a("feature-layer-adapter:insufficient-data","No features are available to calculate statistics");A=p({},b);return"percent-of-total"!==A.normalizationType?[3,4]:[4,w.calculateStatsFromMemory({field:d},f)];case 3:g=c.sent();v=g.sum;if(null==v)throw new a("feature-layer-adapter:invalid","invalid normalizationTotal");A.normalizationTotal=v;c.label=4;case 4:return[2,w.calculateClassBreaksFromMemory(A,
f)]}})})};g.prototype._heatmapStatsFromMemory=function(b,d){return e(this,void 0,void 0,function(){var k,l,e,h,q,f,n,t,A,g,v,u;return c(this,function(c){switch(c.label){case 0:k=b.blurRadius;l=b.field;e=b.view;h=b.signal;q=e.state;f=q.resolution;n=q.size;t=new B.default({extent:e.extent,tolerance:f});A=new J({returnGeometry:!0,geometry:e.extent,quantizationParameters:t});if(!b.features)return[3,1];v=this._quantizeFeatures(b.features,t,e);return[3,3];case 1:return[4,this._fetchFeaturesFromMemory(e,
A,h)];case 2:v=c.sent(),c.label=3;case 3:g=v;if(!g||!g.length)return[2,{count:0,min:null,max:null,avg:null,stddev:null}];if(u=w.calculateHeatmapStats(g,k,d,l,n[0],n[1]))return[2,{count:u.count,min:u.min,max:u.max,avg:u.mean,stddev:u.stdDev}];throw new a("feature-layer-adapter:invalid","unable to calculate heatmap statistics");}})})};g.prototype._quantizeFeatures=function(a,d,k){var c=this,l=q.toQuantizationTransform(d);d=k.spatialReference;var e=k.size,f=A.isWrappable(d);k=A.getInfo(d);var n=Math.round((k.valid[1]-
k.valid[0])/l.scale[0]);return a.map(function(a){var d=new h.Point(b.unwrap(a.geometry));q.quantizePoint(l,d,d,d.hasZ,d.hasM);a.geometry=f?c._wrapPoint(d,n,e[0]):d;return a})};g.prototype._wrapPoint=function(a,b,d){0>a.x?a.x+=b:a.x>d&&(a.x-=b);return a};g.prototype.getField=function(a){void 0===a&&(a="");return this.layer.getField(a)};g.prototype.getFieldUsageInfo=function(a){return this.getField(a)?{supportsLabelingInfo:!0,supportsRenderer:!0,supportsPopupTemplate:!0,supportsLayerQuery:!0,supportsStatistics:!0}:
null};g.prototype.getFieldDomain=function(a,b){return this.layer.getFieldDomain(a,b)};g.prototype.summaryStatistics=function(b){var k=this,c=b.field,c=c?this.getField(c):null,l=t.isDateField(c),e=(c=b.valueExpression||b.sqlExpression)&&!b.sqlExpression,h=b.view,h=h&&"3d"===h.type;return this._hasLocalSource||b.features||e?e||b.features||h?this._summaryStatsFromMemory(b,l):this._summaryStatsFromClientQuery(b,l):this.supportsSQLExpression||!l&&!c?(b.normalizationType&&!this.supportsSQLExpression?this._summaryStatsFromGenRend(b):
this._summaryStatsFromServiceQuery(b,l)).catch(function(){d.throwIfAborted(b.signal);return k._summaryStatsFromMemory(b,l)}):d.reject(new a("feature-layer-adapter:not-supported","Layer does not support standardized SQL expression for queries"))};g.prototype.uniqueValues=function(a){var b=this,k=a.field,c=a.valueExpression,l=a.sqlExpression,e=a.signal,h=(k?this.getField(k):null)&&this.getFieldDomain(k),q=c&&(!l||!this.supportsSQLExpression),f=(k=a.view)&&"3d"===k.type;return this._hasLocalSource||
a.features||q?q||a.features||f?this._uvFromMemory(a,h):this._uvFromClientQuery(a,h):this._uvFromServiceQuery(a,h).catch(function(k){d.throwIfAborted(e);return a.field?b._uvFromGenRenderer(a,h):k}).catch(function(){d.throwIfAborted(e);return q||a.features||f?b._uvFromMemory(a,h):b._uvFromClientQuery(a,h)})};g.prototype.histogram=function(b){var k=this,c=b.field,l=b.normalizationType,e=b.normalizationField,h=b.classificationMethod,q=b.signal,f=c?this.getField(c):null,f=t.isDateField(f),n=b.valueExpression||
b.sqlExpression,A=n&&!b.sqlExpression,g=this.supportsSQLExpression,v=!h||"equal-interval"===h,u=b.minValue,x=b.maxValue,m=null!=u&&null!=x,z=b.numBins||10;return this._hasLocalSource||b.features||A?this._histogramFromMemory(b):(n||g)&&v?n&&!g?d.reject(new a("feature-layer-adapter:not-supported","Layer does not support standardized SQL expression for queries")):this._histogramForExpr(b):f&&v?d.reject(new a("feature-layer-adapter:not-supported","Normalization and date field are not allowed when layer does not support standardized SQL expression for queries")):
l||!v?this._binParamsFromGenRend(b).then(function(d){if(!m)return k._getBins(d,c,z,q);if(u>d.max||x<d.min)throw new a("histogram:insufficient-data","Range defined by 'minValue' and 'maxValue' does not intersect available data range of the field");if(v)return k._getBins({min:u,max:x,sqlExpr:d.sqlExpr,excludeZerosExpr:d.excludeZerosExpr},c,z,q);d=w.getFieldExpr({field:c,normalizationType:l,normalizationField:e,normalizationTotal:d.normTotal,layer:k});d=y.getRangeExpr(d,u,x);return k._binParamsFromGenRend(b,
d).then(function(a){return k._getBins(a,c,z,q)})}):this._histogramForField(b)};g.prototype.classBreaks=function(a){var b=this,k=!1!==a.analyzeData,c=this._hasLocalSource||a.features||a.valueExpression;return k&&c?this._classBreaksFromMemory(a):(k?this._classBreaksFromGenRend(a):this._classBreaksFromInterpolation(a)).catch(function(){d.throwIfAborted(a.signal);return b._classBreaksFromMemory(a)})};g.prototype.queryFeatureCount=function(b,k){if(this._hasLocalSource)return d.reject(new a("feature-layer-adapter:not-supported",
"Layer does not support count query"));var c=this.layer,l=c.createQuery();l.where=y.mergeWhereClauses(l.where,b);return c.queryFeatureCount(l,{signal:k})};g.prototype.generateRenderer=function(b,k){var c=this.layer;if(this._hasLocalSource||10.1>c.version)return d.reject(new a("feature-layer-adapter:not-supported","Layer does not support generateRenderer operation (requires ArcGIS Server version 10.1+)"));var l=new D({url:c.parsedUrl.path,source:c.dynamicDataSource,gdbVersion:c.gdbVersion}),c=c.createQuery();
b.where=y.mergeWhereClauses(b.where,c.where);return l.execute(b,{signal:k})};g.prototype.heatmapStatistics=function(a){var b=this,k=a.field,c=a.fieldOffset,l=a.signal;return(k&&null==c?this.summaryStatistics({field:k,signal:l}):d.resolve(null)).then(function(d){var k=c||0;if(d){var l=d.min,e=d.max;d.count?l===e&&0===l?k=1:0>=e?k="abs":0>l&&(k=-1.01*l):k=1}return b._heatmapStatsFromMemory(a,k).then(function(a){return p({},a,{summaryStatistics:d,fieldOffset:k})})})};g.prototype.predominantCategories=
function(b){return e(this,void 0,void 0,function(){var d,k,l,e,h,q,f,n,t,A,g,v,u,m,y,w;return c(this,function(c){switch(c.label){case 0:if(!this._hasLocalSource&&!this.supportsSQLExpression)throw new a("feature-layer-adapter:not-supported","Layer does not support advanced SQL expressions and standardized queries");d=b.fields;k=b.view;l=b.signal;e=x.getArcadeForPredominantCategory(d);h=x.getSQLForPredominantCategoryName(d);return k&&this._hasLocalSource?[4,this._uvFromMemory({valueExpression:e,view:k,
signal:l})]:[3,2];case 1:return f=c.sent(),[3,4];case 2:return[4,this._uvFromServiceQuery({sqlExpression:h.expression,valueExpression:e,signal:l})];case 3:f=c.sent(),c.label=4;case 4:q=f;n=q.uniqueValueInfos;t=n.map(function(a){return a.value});A=d.filter(function(a){return-1===t.indexOf(a)});g=0;for(v=A;g<v.length;g++)u=v[g],n.push({value:u,count:0});n.sort(function(a,b){return d.indexOf(a.value)-d.indexOf(b.value)});m=0;for(y=n;m<y.length;m++)w=y[m],w.value===x.noDominantCategoryField&&(w.value=
null);return[2,{predominantCategoryInfos:n}]}})})};g.prototype.getSampleFeatures=function(a){return e(this,void 0,void 0,function(){var b,k,l,e,h,q,f,t,A,g,v,u,x,m;return c(this,function(c){switch(c.label){case 0:b=a.view,k=a.sampleSize,l=a.requiredFields,e=a.returnGeometry,h=a.signal,q=this.layer.createQuery(),f=1,q.outSpatialReference=a.spatialReference||b&&b.spatialReference,q.returnGeometry=!!e,q.outFields=l,t=[],A=!1,c.label=1;case 1:return c.trys.push([1,5,,6]),[4,this._hasRequiredFieldsInView(l,
b)];case 2:return(A=c.sent())?[4,this._fetchFeaturesFromMemory(b,q,h)]:[3,4];case 3:t=c.sent();if(t.length&&0<k&&k<=t.length)return[2,n.pickRandom(t,k,f)];c.label=4;case 4:return[3,6];case 5:return c.sent(),d.throwIfAborted(h),[3,6];case 6:return c.trys.push([6,10,,11]),this._hasLocalSource?[2,A?t:this._fetchFeaturesFromService(q,h)]:[4,this.queryFeatureCount(null,h)];case 7:g=c.sent();v=this.layer.capabilities.query.maxRecordCount;u=-1===k?g:k;u=v&&u>v?v:u;if(g<=t.length||t.length>=v)return[2,t];
x=b.extent.width/b.width/b.scale*4E5;q.maxAllowableOffset=a.resolution||x;return g<=u?[2,this._fetchFeaturesFromService(q,h)]:2E4>=g?[4,this.layer.queryObjectIds()]:[3,9];case 8:return m=c.sent(),q.objectIds=n.pickRandom(m,u,f),[2,this._fetchFeaturesFromService(q,h)];case 9:return this.layer.get("capabilities.query.supportsPagination")&&(q.num=Math.min(u,2E4)),[2,this._fetchFeaturesFromService(q,h)];case 10:return c.sent(),d.throwIfAborted(h),[2,t];case 11:return[2]}})})};g.prototype.load=function(a){var b=
this;a=this.layer.load(a).then(function(a){b.geometryType=a.geometryType;b.objectIdField=a.objectIdField;b.supportsSQLExpression=a.get("capabilities.query.supportsSqlExpression");b._hasLocalSource=!a.url&&!!a.source;b.hasQueryEngine=b._hasLocalSource;b.minScale=a.minScale;b.maxScale=a.maxScale;b.fullExtent=a.fullExtent});this.addResolvingPromise(a);return d.resolve(this)};m([l.property({constructOnly:!0})],g.prototype,"layer",void 0);return g=m([l.subclass("esri.renderers.smartMapping.support.adapters.FeatureLayerAdapter")],
g)}(l.declared(v))})},"esri/renderers/smartMapping/statistics/support/predominanceUtils":function(){define(["require","exports","../../support/utils"],function(r,g,p){function f(a){return"("+a.map(function(a){return a+" \x3e\x3d 0"}).join(" OR ")+")"}function m(a,d){var b=d.returnFieldName,c=d.defaultValue,e=d.layer,h=[];b&&c&&(d=a.map(function(a){return a+" \x3c\x3d 0"}).join(" AND "),h.push("WHEN "+d+" THEN "+c));d=function(d){var k=a.reduce(function(a,b){d!==b&&a.push(d+" \x3e "+b);return a},[]).join(" AND "),
c=e&&p.isIntegerField(e,d),c=b&&"'"+d+"'"?"'"+d+"'":c?p.castIntegerFieldToFloat(d):d;h.push("WHEN "+k+" THEN "+c)};for(var f=0;f<a.length;f++)d(a[f]);return"CASE "+h.join(" ")+" ELSE "+(c||"0")+" END"}function c(a){return a&&a.map(function(a){return'$feature["'+a+'"];'}).join("\n")+"\n"||""}function e(a,d){void 0===d&&(d=!1);a=a.map(function(a){return'"'+a+'"'});return"\n  var fieldNames \x3d [ "+a.join(", ")+" ];\n  var numFields \x3d "+a.length+";\n  var maxValueField \x3d null;\n  var maxValue \x3d -Infinity;\n  var value, i, totalValue \x3d null;\n\n  for(i \x3d 0; i \x3c numFields; i++) {\n    value \x3d $feature[fieldNames[i]];\n\n    if(value \x3e 0) {\n      if(value \x3e maxValue) {\n        maxValue \x3d value;\n        maxValueField \x3d fieldNames[i];\n      }\n      else if (value \x3d\x3d maxValue) {\n        maxValueField \x3d null;\n      }\n    }\n    "+
(d?"\n  if(value !\x3d null \x26\x26 value \x3e\x3d 0) {\n    if (totalValue \x3d\x3d null) { totalValue \x3d 0; }\n    totalValue \x3d totalValue + value;\n  }\n  ":"")+"\n  }\n  "}function h(a){var b=e(a);return"\n  "+c(a)+"\n  "+b+"\n  return maxValueField;\n  "}function n(a){var b=c(a);a=a.map(function(a){return'"'+a+'"'});return"\n  "+b+"\n  var fieldNames \x3d [ "+a.join(", ")+" ];\n  var numFields \x3d "+a.length+";\n  var value, i, totalValue \x3d null;\n\n  for(i \x3d 0; i \x3c numFields; i++) {\n    value \x3d $feature[fieldNames[i]];\n\n    if(value !\x3d null \x26\x26 value \x3e\x3d 0) {\n      if (totalValue \x3d\x3d null) { totalValue \x3d 0; }\n      totalValue \x3d totalValue + value;\n    }\n  }\n\n  return totalValue;\n  "}
function a(a){var b=e(a,!0);return"\n  "+c(a)+"\n  "+b+"\n\n  var strength \x3d null;\n\n  if (maxValueField !\x3d null \x26\x26 totalValue \x3e 0) {\n    strength \x3d (maxValue / totalValue) * 100;\n  }\n\n  return strength;\n  "}Object.defineProperty(g,"__esModule",{value:!0});g.noDominantCategoryField="no_dominant_category";g.getSQLForPredominantCategoryName=function(a){return{expression:m(a,{returnFieldName:!0,defaultValue:"'"+g.noDominantCategoryField+"'"})}};g.getPredominanceExpressions=function(b,
d){var k=d.join(" + "),c={sqlExpression:"("+k+")",sqlWhere:f(d)};b={sqlExpression:"(( ("+m(d,{layer:b})+") / ("+k+") ) * 100)",sqlWhere:f(d)+" AND (("+k+") \x3e 0)"};return{predominantCategory:{valueExpression:h(d)},size:{valueExpression:n(d),statisticsQuery:c,histogramQuery:c},opacity:{valueExpression:a(d),statisticsQuery:b,histogramQuery:b}}};g.getArcadeForPredominantCategory=h;g.getArcadeForPredominantCategoryValue=function(a){var b=e(a);return"\n  "+c(a)+"\n  "+b+"\n  return maxValue;\n  "};g.getArcadeForPredominantCategoryAlias=
function(a){var b=a.map(function(a){return a.fieldName}),k=c(b),b=b.map(function(a){return'"'+a+'"'});a=a.map(function(a){return a.label?'"'+a.label+'"':'"'+a.fieldName+'"'});return"\n  "+k+"\n  var fieldNames \x3d [ "+b.join(", ")+" ];\n  var fieldAliases \x3d [ "+a.join(", ")+" ];\n  var numFields \x3d "+b.length+';\n  var maxFieldAlias \x3d null;\n  var maxValue \x3d -Infinity;\n  var value, i, totalValue \x3d null;\n\n  for(i \x3d 0; i \x3c numFields; i++) {\n    value \x3d $feature[fieldNames[i]];\n\n    if(value \x3e 0) {\n      if(value \x3e maxValue) {\n        maxValue \x3d value;\n        maxFieldAlias \x3d fieldAliases[i];\n      }\n      else if (value \x3d\x3d maxValue) {\n        maxFieldAlias \x3d "Tie";\n      }\n    }\n  }\n  return maxFieldAlias;\n  '};
g.getArcadeForPredominanceMargin=function(a){var b=c(a);a=a.map(function(a){return'$feature["'+a+'"]'});return"\n  "+b+"\n  var fieldValues \x3d [ "+a.join(", ")+" ];\n  var totalValue \x3d Sum(fieldValues);\n  var order \x3d Reverse(Sort(fieldValues));\n  return IIF(totalValue \x3e 0, Round(((order[0] - order[1]) / totalValue) * 100, 2), null);\n  "};g.getArcadeForSumOfFields=n;g.getArcadeForStrengthOfPredominance=a;g.getArcadeForOrderedFields=function(a){var b=a.map(function(a){return a.fieldName}),
b=c(b);a=a.map(function(a){return'{\n    value: $feature["'+a.fieldName+'"],\n    alias: "'+(a.label||a.fieldName)+'"\n    }'});return"\n  "+b+"\n  var groups \x3d [ "+a.join(", ")+' ];\n  var numTopValues \x3d Count(groups);\n\n  function getValuesArray(arr){\n    var valuesArray \x3d []\n    for(var i in arr){\n      valuesArray[i] \x3d arr[i].value;\n    }\n    return valuesArray;\n  }\n\n  function findAliases(top5Array, fullArray){\n    var aliases \x3d [];\n    var found \x3d "";\n    for(var i in top5Array){\n      for(var k in fullArray){\n        if(top5Array[i] \x3d\x3d fullArray[k].value \x26\x26 Find(fullArray[k].alias, found) \x3d\x3d -1){\n          found +\x3d fullArray[k].alias;\n          aliases[Count(aliases)] \x3d {\n            alias: fullArray[k].alias,\n            value: top5Array[i]\n          };\n        }\n      }\n    }\n    return aliases;\n  }\n\n  function getTopGroups(groupsArray){\n    var values \x3d getValuesArray(groupsArray);\n    var top5Values \x3d IIF(Max(values) \x3e 0, Top(Reverse(Sort(values)),numTopValues), "no data");\n    var top5Aliases \x3d findAliases(top5Values,groupsArray);\n\n    if(TypeOf(top5Values) \x3d\x3d "String"){\n      return top5Values;\n    } else {\n      var content \x3d "";\n      for(var i in top5Aliases){\n        if(top5Aliases[i].value \x3e 0){\n          content +\x3d (i+1) + ". " + top5Aliases[i].alias + " (" + Text(top5Aliases[i].value, "#,###") + ")";\n          content +\x3d IIF(i \x3c numTopValues-1, TextFormatting.NewLine, "");\n        }\n      }\n    }\n\n    return content;\n  }\n\n  getTopGroups(groups);\n  '}})},
"esri/renderers/smartMapping/support/adapters/LayerAdapter":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/awaiterHelper ../../../../core/Loadable ../../../../core/accessorSupport/decorators".split(" "),function(r,g,p,f,m,c,e,h){return function(c){function a(a){return c.call(this,a)||this}p(a,c);f([h.property()],a.prototype,"geometryType",void 0);f([h.property()],
a.prototype,"objectIdField",void 0);f([h.property()],a.prototype,"supportsSQLExpression",void 0);f([h.property()],a.prototype,"hasQueryEngine",void 0);f([h.property()],a.prototype,"minScale",void 0);f([h.property()],a.prototype,"maxScale",void 0);f([h.property()],a.prototype,"fullExtent",void 0);return a=f([h.subclass("esri.renderers.smartMapping.support.adapters.LayerAdapter")],a)}(h.declared(e))})},"esri/renderers/smartMapping/support/adapters/support/utils":function(){define("require exports ../../../../../core/tsSupport/generatorHelper ../../../../../core/tsSupport/awaiterHelper ../../../../../core/promiseUtils ../../utils ../../../../support/heatmapUtils ../../../../../support/arcadeOnDemand ../../../../../tasks/support/ClassBreaksDefinition ../../../../../tasks/support/generateRendererUtils".split(" "),
function(r,g,p,f,m,c,e,h,n,a){function b(a,b,d){b=null==b?-Infinity:b;d=null==d?Infinity:d;return a.filter(function(a){return null!=a&&w(a)&&a>=b&&a<=d})}function d(a,b){return f(this,void 0,void 0,function(){var d,k,c,l,e,q,f,n,t,g,A;return p(this,function(v){switch(v.label){case 0:return d=a.field,k="function"===typeof d,c=a.valueExpression,l=a.normalizationType,e=a.normalizationField,q=a.normalizationTotal,f=[],n=a.view,g=t=null,c?J?[3,2]:[4,h.loadArcade()]:[3,3];case 1:J=A=v.sent().arcadeUtils,
v.label=2;case 2:t=J.createFunction(c),g=n&&J.getViewInfo({viewingMode:"2d"===n.type?"map":n.viewingMode,scale:n.scale,spatialReference:n.spatialReference}),v.label=3;case 3:if(!b)return[2,f];b.forEach(function(a){var b=a.attributes,h;c?(h=J.createExecContext(a,g),h=J.executeFunction(t,h)):k?h=d.call(null,a):b&&(h=b[d]);l&&null!=h&&w(h)&&(b=b&&parseFloat(b[e]),"log"===l&&0!==h?h=Math.log(h)*Math.LOG10E:"percent-of-total"===l&&w(q)&&0!==q?h=h/q*100:"field"===l&&w(b)&&0!==b&&(h/=b));f.push(h)});return[2,
f]}})})}function k(a,b){for(var d=Number.POSITIVE_INFINITY,k=Number.NEGATIVE_INFINITY,c=null,l=null,e=null,h=null,q=0;q<a.length;q++)var f=a[q],c=c+f,d=Math.min(d,f),k=Math.max(k,f);if(q=a.length){l=c/q;for(h=e=0;h<a.length;h++)f=a[h],e+=Math.pow(f-l,2);h=b?1<q?e/(q-1):0:0<q?e/q:0;e=Math.sqrt(h)}else k=d=null;return{avg:l,count:q,max:k,min:d,stddev:e,sum:c,variance:h}}function l(a){var b=a.field,d=a.classificationMethod||"equal-interval",k=a.normalizationType,c=a.normalizationField,l=new n;l.classificationField=
b;l.breakCount=a.breakCount;l.classificationMethod=d;l.standardDeviationInterval="standard-deviation"===d?a.standardDeviationInterval||1:void 0;l.normalizationType=k;l.normalizationField="field"===k?c:void 0;return l}function q(a,b){var d=b.classBreaks,k=d[0].minValue,c=d[d.length-1].maxValue,l="standard-deviation"===a.classificationMethod,e=C,d=d.map(function(a){var b=a.label;a={minValue:a.minValue,maxValue:a.maxValue,label:b};if(l&&b){var d=b.match(e).map(function(a){return+a.trim()});2===d.length?
(a.minStdDev=d[0],a.maxStdDev=d[1],0>d[0]&&0<d[1]&&(a.hasAvg=!0)):1===d.length&&(-1<b.indexOf("\x3c")?(a.minStdDev=null,a.maxStdDev=d[0]):-1<b.indexOf("\x3e")&&(a.minStdDev=d[0],a.maxStdDev=null))}return a});return{minValue:k,maxValue:c,classBreakInfos:d,normalizationTotal:b.normalizationTotal}}function A(a,b,d){b=(b-a)/d;for(var k=[],c,l=1;l<=d;l++)c=a+b,c=Number(c.toFixed(16)),k.push([a,c]),a=c;return k}function u(a){var b=a.field,d=a.normalizationType,k=a.normalizationField,l=a.normalizationTotal;
a=c.isIntegerField(a.layer,b);var e=b;"percent-of-total"===d?e="(("+(a?c.castIntegerFieldToFloat(b):b)+" / "+l+") * 100)":"log"===d?e="(log("+b+") * "+B+")":"field"===d&&(e="("+(a?c.castIntegerFieldToFloat(b):b)+" / "+k+")");return e}function t(a,b){for(var d=-1,k=a.length-1;0<=k;k--)if(b>=a[k][0]){d=k;break}return d}function x(a,b){var d;b=b.toLowerCase();if(a)for(var k in a)if(k.toLowerCase()!==b){d=a[k];break}return d}function y(a,b){var d;b=b.toLowerCase();if(a)for(var k in a)if(k.toLowerCase()===
b){d=a[k];break}return d}function z(a,b){if(b)for(var d in a)a[d].label=b[d];return{count:a}}function v(a,b,d){var k=a.count;a=[];d&&b&&"coded-value"===b.type&&b.codedValues.forEach(function(a){a=a.code;k.hasOwnProperty(a)||(k[a]={data:a,count:0})});for(var c in k)b=k[c],a.push({value:b.data,count:b.count,label:b.label});return{uniqueValueInfos:a}}function w(a){return"number"===typeof a&&!isNaN(a)&&Infinity!==a&&-Infinity!==a}Object.defineProperty(g,"__esModule",{value:!0});var D=/_value$/i,C=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,
B=Math.LOG10E;g.statisticTypes="min max avg stddev count sum variance".split(" ");var J=null;g.getSummaryStatisticsFromFeatureSet=function(a,b){a=(a=a&&a.features)&&a[0]&&a[0].attributes;var d={},k;for(k in a)d[k.replace(D,"").toLowerCase()]=a[k];d.min===d.max&&null!=d.min&&null==d.stddev&&(d.stddev=d.variance=0);b&&("min max avg stddev sum variance".split(" ").forEach(function(a){null!=d[a]&&(d[a]=Math.ceil(d[a]))}),d.min===d.max&&null!=d.min&&(d.avg=d.min,d.stddev=d.variance=0));return d};g.calculateStatsFromMemory=
function(a,c,l){return f(this,void 0,void 0,function(){var e,h;return p(this,function(q){switch(q.label){case 0:return[4,d(a,c)];case 1:return e=q.sent(),e=b(e,a.minValue,a.maxValue),h=k(e,!a.normalizationType),l&&["avg","stddev","variance"].forEach(function(a){null!=h[a]&&(h[a]=Math.ceil(h[a]))}),[2,h]}})})};g.getDataValues=d;g.processSummaryStatisticsResult=function(a){for(var b in a)-1<g.statisticTypes.indexOf(b)&&(w(a[b])||(a[b]=null));return a};g.createCBDefn=l;g.calculateHeatmapStats=function(a,
b,d,k,c,l){void 0===b&&(b=10);var h=new Float64Array(c*l),q=e.createKernel(b);b=Math.round(3*b);var f=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,t=0,g=0,A=0,v=0;d=e.createValueFunction(k,d);for(k=0;k<a.length;k++)for(var u=a[k],x=u.geometry,m=x.x-b,y=x.y-b,w=Math.max(0,m),t=Math.max(0,y),z=Math.min(l,x.y+b),x=Math.min(c,x.x+b),u=+d(u.attributes),D=t;D<z;D++)for(var p=q[D-y],C=w;C<x;C++){var t=D*c+C,B=h[t],t=h[t]+=p*q[C-m]*u,B=t-B,g=g+B,A=A+B*B;t<f&&(f=t);t>n&&(n=t);v++}return v?{mean:g/v,
stdDev:Math.sqrt((A-g*g/v)/v),min:f,max:n,mid:(n-f)/2,count:v}:{mean:0,stddev:0,min:0,max:0,mid:0,count:0}};g.calculateClassBreaksFromMemory=function(k,c){return f(this,void 0,void 0,function(){var e,h,f,n;return p(this,function(t){switch(t.label){case 0:return e=k.normalizationTotal,h=l({field:k.field,normalizationType:k.normalizationType,normalizationField:k.normalizationField,classificationMethod:k.classificationMethod,standardDeviationInterval:k.standardDeviationInterval,breakCount:k.numClasses||
5}),[4,d(k,c)];case 1:return f=t.sent(),f=b(f,k.minValue,k.maxValue),n=a.createGenerateRendererClassBreaks({definition:h,values:f,normalizationTotal:e}),[2,q(k,n)]}})})};g.resolveCBResult=q;g.getEqualIntervalBins=A;g.generateBinParams=function(a){var b=[],d=a.classBreaks,k=d[0].minValue,c=d[d.length-1].maxValue;d.forEach(function(a){b.push([a.minValue,a.maxValue])});return{min:k,max:c,intervals:b,sqlExpr:u({field:a.field,normalizationType:a.normalizationType,normalizationField:a.normalizationField,
normalizationTotal:a.normalizationTotal,layer:a.layer}),excludeZerosExpr:a.where,normTotal:a.normalizationTotal}};g.getFieldExpr=u;g.calculateHistogramFromMemory=function(a,b,k){return f(this,void 0,void 0,function(){var c,l,e,h,q,f,n,g,v,u,x;return p(this,function(m){switch(m.label){case 0:return c=b.min,l=b.max,e=b.normTotal,h=a.numBins||10,q=b.intervals||A(c,l,h),f=q.map(function(a,b){return{minValue:q[b][0],maxValue:q[b][1],count:0}}),[4,d(a,k)];case 1:n=m.sent();g=0;for(v=n;g<v.length;g++)u=
v[g],null!=u&&u>=c&&u<=l&&(x=t(q,u),-1<x&&f[x].count++);return[2,{bins:f,minValue:c,maxValue:l,normalizationTotal:e}]}})})};g.getHistogramFromFeatureSet=function(a,b,d,k,c){var l={};a&&a.features&&a.features.forEach(function(a){var b=a.attributes;a=x(b,"countOFExpr");b=y(b,"countOFExpr");0!==a&&(l[a]=b)});var e=[];A(b,d,k).forEach(function(a,b){b=(b+1).toString();e.push({minValue:a[0],maxValue:a[1],count:l.hasOwnProperty(b)?l[b]:0})});return{bins:e,minValue:b,maxValue:d,normalizationTotal:c}};g.getUniqueValuesFromFeatureSet=
function(a,b,d,k,c){var l="countOF"+(d||"Expr"),e={},h=!1;(a&&a.features).forEach(function(a){var b=a.attributes;a=y(b,l);b=d?y(b,d):x(b,l);null===b&&0===a&&(h=!0);if(null==b||"string"===typeof b&&""===b.trim())b=null;null==e[b]?e[b]={count:a,data:b}:e[b].count+=a});return d&&h?b.queryFeatureCount(d+" is NULL",c).then(function(a){e["null"].count+=a||0;return z(e,k)}).catch(function(){m.throwIfAborted(c);return z(e,k)}):m.resolve(z(e,k))};g.createUVResult=v;g.calculateUniqueValuesFromMemory=function(a,
b,k){return f(this,void 0,void 0,function(){var c,l,e,h,q;return p(this,function(f){switch(f.label){case 0:return[4,d(a,b)];case 1:c=f.sent();l={};e=0;for(h=c;e<h.length;e++){q=h[e];if(null==q||"string"===typeof q&&""===q.trim())q=null;null==l[q]?l[q]={count:1,data:q}:l[q].count++}return[2,v({count:l},k,a.returnAllCodedValues)]}})})};g.msSinceUnixEpochSQL=function(a,b){return c.getDateDiffSQL(a,new Date(0),b,"milliseconds").sqlExpression};g.isValidNumber=w})},"esri/renderers/support/heatmapUtils":function(){define(["require",
"exports","../../core/global","../../core/mathUtils"],function(r,g,p,f){function m(c,e,a,b,d){c=new Uint32Array(c*c);e="buffer"in e?e:new Float64Array(e);a="buffer"in a?new Uint32Array(a.buffer):new Uint32Array((new Uint8Array(a)).buffer);d=a.length/(d-b);for(var k=0;k<e.length;k++)c[k]=a[f.clamp(Math.floor((e[k]-b)*d),0,a.length-1)];return c.buffer}function c(c){for(var e=Math.round(3*c),a=2*c*c,b=new Float64Array(2*e+1),d=0;d<=b.length;d++)b[d]=Math.exp(-Math.pow(d-e,2)/a)/Math.sqrt(2*Math.PI)*
(c/2);return b}function e(c,e){return"function"===typeof c?c:c?"string"===typeof e?function(a){return-1*+a[c]}:function(a){return+a[c]+e}:function(){return 1}}Object.defineProperty(g,"__esModule",{value:!0});g.generateGradient=function(){if(!("document"in p))return function(){return null};var c=document.createElement("canvas"),e=c.getContext("2d");c.height=512;c.width=1;return function(a){e.clearRect(0,0,1,c.height);var b=e.createLinearGradient(0,0,0,c.height),d=0;for(a=a.colorStops;d<a.length;d++){var k=
a[d],l=k.color;b.addColorStop(Math.max(k.ratio,.001),"rgba("+l[0]+", "+l[1]+", "+l[2]+", "+l[3]+")")}e.fillStyle=b;e.fillRect(0,0,1,c.height);return e.getImageData(0,0,1,c.height).data}}();g.calculateHeatmapIntensityInfo=function(h,f,a,b){var d=f.blurRadius,k=f.fieldOffset,l=f.field;f=new Float64Array(a*b);for(var q=c(d),d=Math.round(3*d),n=Number.NEGATIVE_INFINITY,g,k=e(l,k),l=0;l<h.length;l++){var t=h[l],x=t.geometry,m=x.x-d,z=x.y-d,v=Math.max(0,m);g=Math.max(0,z);for(var w=Math.min(b,x.y+d),x=
Math.min(a,x.x+d),t=+k(t.attributes),D=g;D<w;D++)for(var p=q[D-z],B=v;B<x;B++)g=f[D*a+B]+=p*q[B-m]*t,g>n&&(n=g)}return{matrix:f.buffer,max:n}};g.drawHeatmap=function(c,e,a,b,d,k){c.canvas.width=c.canvas.height=e;c.clearRect(0,0,e,e);var l=c.getImageData(0,0,e,e);a&&b&&l.data.set(new Uint8ClampedArray(m(e,a,b,d,k)));c.putImageData(l,0,0)};g.createHeatmapImageData=m;g.createKernel=c;g.createValueFunction=e})},"esri/tasks/support/ClassBreaksDefinition":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/jsonMap ../../core/accessorSupport/decorators ./ClassificationDefinition".split(" "),
function(r,g,p,f,m,c,e){var h=new m.default({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),n=new m.default({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});return function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.breakCount=null;b.classificationField=null;b.classificationMethod=
null;b.normalizationField=null;b.normalizationType=null;b.type="class-breaks-definition";return b}p(b,a);Object.defineProperty(b.prototype,"standardDeviationInterval",{set:function(a){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",a)},enumerable:!0,configurable:!0});f([c.property({json:{write:!0}})],b.prototype,"breakCount",void 0);f([c.property({json:{write:!0}})],b.prototype,"classificationField",void 0);f([c.property({type:String,json:{read:h.read,write:h.write}})],
b.prototype,"classificationMethod",void 0);f([c.property({json:{write:!0}})],b.prototype,"normalizationField",void 0);f([c.property({json:{read:n.read,write:n.write}})],b.prototype,"normalizationType",void 0);f([c.property({value:null,json:{write:!0}})],b.prototype,"standardDeviationInterval",null);f([c.property()],b.prototype,"type",void 0);return b=f([c.subclass("esri.tasks.support.ClassBreaksDefinition")],b)}(c.declared(e))})},"esri/tasks/support/ClassificationDefinition":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators ../../symbols/Symbol ./colorRamps".split(" "),
function(r,g,p,f,m,c,e,h,n){var a=new m.default({classBreaksDef:"class-breaks-definition",uniqueValueDef:"unique-value-definition"});return function(b){function d(){var a=null!==b&&b.apply(this,arguments)||this;a.baseSymbol=null;a.colorRamp=null;a.type=null;return a}p(d,b);f([e.property({type:h,json:{write:!0}})],d.prototype,"baseSymbol",void 0);f([e.property({types:n.types,json:{read:{reader:n.fromJSON},write:!0}})],d.prototype,"colorRamp",void 0);f([e.property({json:{read:a.read,write:a.write}})],
d.prototype,"type",void 0);return d=f([e.subclass("esri.tasks.support.ClassificationDefinition")],d)}(e.declared(c.JSONSupport))})},"esri/tasks/support/generateRendererUtils":function(){define(["require","exports"],function(r,g){function p(b){var d=b.definition,l=d.classificationMethod,e=d.breakCount,g=d.normalizationType,u=[],t=b.values;if(0===t.length)return[];var t=t.sort(function(a,b){return a-b}),x=t[0];b=t[t.length-1];if("equal-interval"===l)if(t.length>=e){t=(b-x)/e;l=x;for(d=1;d<e;d++){var y=
Number((x+d*t).toFixed(6));u.push({minValue:l,maxValue:y,label:f(l,y,g)});l=y}u.push({minValue:l,maxValue:b,label:f(l,b,g)})}else t.forEach(function(a){u.push({minValue:a,maxValue:a,label:f(a,a,g)})});else if("natural-breaks"===l){for(var t=m(t),z=c(t.uniqueValues,t.valueFrequency,e),l=x,d=1;d<e;d++)t.uniqueValues.length>d&&(y=Number(t.uniqueValues[z[d]].toFixed(6)),u.push({minValue:l,maxValue:y,label:f(l,y,g)}),l=y);u.push({minValue:l,maxValue:b,label:f(l,b,g)})}else if("quantile"===l)if(t.length>=
e&&x!==b){l=x;x=Math.ceil(t.length/e);y=0;for(d=1;d<e;d++)z=x+y-1,z>t.length&&(z=t.length-1),0>z&&(z=0),u.push({minValue:l,maxValue:t[z],label:f(l,t[z],g)}),l=t[z],y+=x,x=Math.ceil((t.length-y)/(e-d));u.push({minValue:l,maxValue:b,label:f(l,b,g)})}else for(l=-1,d=0;d<t.length;d++)y=t[d],y!==l&&(l=y,u.push({minValue:l,maxValue:y,label:f(l,y,g)}),l=y);else if("standard-deviation"===l)if(z=n(t),l=a(t,z),0===l)u.push({minValue:t[0],maxValue:t[0],label:f(t[0],t[0],g)});else{for(var t=h(x,b,e,z,l),t=t*
l,v=0,l=x,d=e;1<=d;d--)x=Number((z-(d-.5)*t).toFixed(6)),u.push({minValue:l,maxValue:x,label:f(l,x,g)}),l=x,v++;y=Number((z+.5*t).toFixed(6));u.push({minValue:l,maxValue:y,label:f(l,y,g)});l=y;v++;for(d=1;d<=e;d++)y=v===2*e?b:Number((z+(d+.5)*t).toFixed(6)),u.push({minValue:l,maxValue:y,label:f(l,y,g)}),l=y,v++}return u}function f(a,b,c){var d=null;return d=a===b?c&&"percent-of-total"===c?a+"%":a.toString():c&&"percent-of-total"===c?a+"% - "+b+"%":a+" - "+b}function m(a){for(var b=[],d=[],c=Number.MIN_VALUE,
e=1,h=-1,f=0;f<a.length;f++){var n=a[f];n===c?(e++,d[h]=e):null!==n&&(b.push(n),c=n,e=1,d.push(e),h++)}return{uniqueValues:b,valueFrequency:d}}function c(a,k,c){var d=a.length,l=[];c>d&&(c=d);for(var h=0;h<c;h++)l.push(Math.round(h*d/c-1));l.push(d-1);for(var h=e(l,a,k,c),d=h.mean,h=h.sdcm,f=c,n=0,g=0,m=0,v=0,w=!0,D=0;2>D&&w;D++){0===D&&(w=!1);for(var p=0;p<f-1;p++)for(;l[p+1]+1!==l[p+2];)if(l[p+1]+=1,n=b(p,l,a,k),m=n.sbMean,n=n.sbSdcm,g=b(p+1,l,a,k),v=g.sbMean,g=g.sbSdcm,n+g<h[p]+h[p+1])h[p]=n,h[p+
1]=g,d[p]=m,d[p+1]=v,w=!0;else{--l[p+1];break}for(p=f-1;0<p;p--)for(;l[p]!==l[p-1]+1;)if(--l[p],n=b(p-1,l,a,k),m=n.sbMean,n=n.sbSdcm,g=b(p,l,a,k),v=g.sbMean,g=g.sbSdcm,n+g<h[p-1]+h[p])h[p-1]=n,h[p]=g,d[p-1]=m,d[p]=v,w=!0;else{l[p]+=1;break}}w&&(h=e(l,a,k,c));return l}function e(a,k,c,e){for(var d=[],l=[],h=[],q=0,f=[],n=[],g=0;g<e;g++){var m=b(g,a,k,c);f.push(m.sbMean);n.push(m.sbSdcm);q+=n[g]}for(var D=q,p=!0;p||q<D;){p=!1;d=[];for(g=0;g<e;g++)d.push(a[g]);for(g=0;g<e;g++)for(h=a[g]+1;h<=a[g+1];h++)if(l=
k[h],0<g&&h!==a[g+1]&&Math.abs(l-f[g])>Math.abs(l-f[g-1]))a[g]=h;else if(g<e-1&&a[g]!==h-1&&Math.abs(l-f[g])>Math.abs(l-f[g+1])){a[g+1]=h-1;break}D=q;q=0;l=[];h=[];for(g=0;g<e;g++)l.push(f[g]),h.push(n[g]),m=b(g,a,k,c),f[g]=m.sbMean,n[g]=m.sbSdcm,q+=n[g]}if(q>D){for(g=0;g<e;g++)a[g]=d[g],f[g]=l[g],n[g]=h[g];q=D}return{mean:f,sdcm:n}}function h(a,b,c,e,h){a=Math.max(e-a,b-e)/h/c;return 1<=a?1:.5<=a?.5:.25}function n(a){for(var b=0,d=0;d<a.length;d++)b+=a[d];return b/=a.length}function a(a,b){for(var d=
0,k=0;k<a.length;k++)var c=a[k],d=d+(c-b)*(c-b);d/=a.length;return Math.sqrt(d)}function b(a,b,c,e){for(var d=0,k=0,l=b[a]+1;l<=b[a+1];l++)var h=e[l],d=d+c[l]*h,k=k+h;0>=k&&console.log("Exception in Natural Breaks calculation");d/=k;k=0;for(l=b[a]+1;l<=b[a+1];l++)k+=e[l]*Math.pow(c[l]-d,2);return{sbMean:d,sbSdcm:k}}Object.defineProperty(g,"__esModule",{value:!0});g.createGenerateRendererUniqueValues=function(a){a=m(a);for(var b=[],d=a.uniqueValues.length,c=0;c<d;c++){var e=a.uniqueValues[c];b.push({value:e,
count:a.valueFrequency[c],label:e.toString()})}return{uniqueValues:b}};g.createGenerateRendererClassBreaks=function(a){var b=a.normalizationTotal;return{classBreaks:p(a),normalizationTotal:b}}})},"esri/tasks/GenerateRendererTask":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../request ../core/promiseUtils ../core/accessorSupport/decorators ../layers/support/layerSourceUtils ../renderers/support/jsonUtils ./QueryTask ./Task ./support/Query ./support/StatisticDefinition".split(" "),
function(r,g,p,f,m,c,e,h,n,a,b,d,k,l){return function(d){function q(a){a=d.call(this,a)||this;a._field=null;a.checkValueRange=null;a.gdbVersion=null;a.source=null;return a}f(q,d);Object.defineProperty(q.prototype,"parsedUrl",{get:function(){var a=this._parseUrl(this.url);a.path+="/generateRenderer";return a},enumerable:!0,configurable:!0});q.prototype.execute=function(a,b){var d=this,k=a.classificationDefinition;a=p({},a.toJSON(),{f:"json"});this._field="esri.tasks.support.ClassBreaksDefinition"===
k.declaredClass?k.classificationField:k.attributeField;this.source&&(k={source:n.sourceToJSON(this.source)},a.layer=JSON.stringify(k));this.gdbVersion&&(a.gdbVersion=this.gdbVersion);a.classificationDef&&(a.classificationDef=JSON.stringify(a.classificationDef));k={query:a};if(this.requestOptions||b)k=p({},this.requestOptions,b,k);return c(this.parsedUrl.path,k).then(function(a){return d._handleExecuteResponse(a)})};q.prototype._handleExecuteResponse=function(a){var d=this,c=a&&a.data;if(c){if(!this.checkValueRange)return a=
this._processRendererJSON(c),e.resolve(a);a=new b(this.url);var h=new l({statisticType:"min",onStatisticField:this._field}),q=new l({statisticType:"max",onStatisticField:this._field}),h=new k({outStatistics:[h,q]});return a.execute(h).then(function(a){a=a.features[0].attributes;var b=null,k=null,e;for(e in a)0===e.toLowerCase().indexOf("min")?b=a[e]:k=a[e];return d._processRendererJSON(c,b,k)})}};q.prototype._processRendererJSON=function(b,d,k){if("classBreaks"===b.type){var c=a.fromJSON(b);return{classBreaks:c.classBreakInfos.map(function(a,
b){0===b&&void 0!==d&&null!==d&&(a.minValue=d);b===c.classBreakInfos.length-1&&void 0!==k&&null!==k&&(a.maxValue=k);return{minValue:a.minValue,maxValue:a.maxValue,label:a.label}}),normalizationTotal:c.normalizationTotal}}return{uniqueValues:b.uniqueValueInfos.map(function(a,c){0===c&&void 0!==d&&null!==d&&(a.value=d);c===b.uniqueValueInfos.length-1&&void 0!==k&&null!==k&&(a.value=k);return{count:a.count,value:a.value,label:a.label}})}};m([h.property()],q.prototype,"checkValueRange",void 0);m([h.property()],
q.prototype,"gdbVersion",void 0);m([h.property()],q.prototype,"source",void 0);m([h.property({readOnly:!0,dependsOn:["url"]})],q.prototype,"parsedUrl",null);return q=m([h.subclass("esri.tasks.GenerateRendererTask")],q)}(h.declared(d))})},"esri/tasks/support/GenerateRendererParameters":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ./ClassificationDefinition".split(" "),function(r,
g,p,f,m,c,e){return function(h){function n(){var a=null!==h&&h.apply(this,arguments)||this;a.classificationDefinition=null;a.where=null;return a}p(n,h);f([c.property({type:e,json:{read:{source:"classificationDef"},write:{target:"classificationDef"}}})],n.prototype,"classificationDefinition",void 0);f([c.property({type:String,json:{write:!0}})],n.prototype,"where",void 0);return n=f([c.subclass("esri.tasks.support.GenerateRendererParameters")],n)}(c.declared(m.JSONSupport))})},"esri/tasks/support/UniqueValueDefinition":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./ClassificationDefinition".split(" "),
function(r,g,p,f,m,c){return function(c){function e(){var e=null!==c&&c.apply(this,arguments)||this;e.attributeField=null;e.attributeField2=null;e.attributeField3=null;e.fieldDelimiter=null;e.type="unique-value-definition";return e}p(e,c);Object.defineProperty(e.prototype,"uniqueValueFields",{get:function(){var c=[];this.attributeField&&c.push(this.attributeField);this.attributeField2&&c.push(this.attributeField2);this.attributeField3&&c.push(this.attributeField3);return c},enumerable:!0,configurable:!0});
f([m.property()],e.prototype,"attributeField",void 0);f([m.property()],e.prototype,"attributeField2",void 0);f([m.property()],e.prototype,"attributeField3",void 0);f([m.property({json:{write:!0}})],e.prototype,"fieldDelimiter",void 0);f([m.property({dependsOn:["attributeField","attributeField2","attributeField3"],json:{write:!0}})],e.prototype,"uniqueValueFields",null);f([m.property()],e.prototype,"type",void 0);return e=f([m.subclass("esri.tasks.support.UniqueValueDefinition")],e)}(m.declared(c))})},
"esri/renderers/smartMapping/support/adapters/PointCloudLayerAdapter":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/promiseUtils ../../../../core/accessorSupport/decorators ../../../../layers/support/fieldUtils ./SceneLayerAdapter".split(" "),function(r,g,p,f,m,c,e,h){return function(h){function a(a){return h.call(this,a)||this}p(a,h);a.prototype.getField=function(a){void 0===a&&(a="");return e.getField(this.layer.fields,
a)};a.prototype.getFieldUsageInfo=function(a){a=this.getField(a);if(!a)return null;a=this._hasCachedStatistics(a.name);return{supportsLabelingInfo:a,supportsPopupTemplate:a,supportsRenderer:a,supportsLayerQuery:!1,supportsStatistics:a}};a.prototype.getFieldDomain=function(){return null};a.prototype.load=function(a){var b=this;a=this.layer.load(a).then(function(){b.geometryType="point";b.objectIdField=null;b.supportsSQLExpression=!1;b.hasQueryEngine=!1});this.addResolvingPromise(a);return m.resolve(this)};
return a=f([c.subclass("esri.renderers.smartMapping.support.adapters.PointCloudLayerAdapter")],a)}(c.declared(h))})},"esri/renderers/smartMapping/support/adapters/SceneLayerAdapter":function(){define("require exports ../../../../core/tsSupport/assignHelper ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/awaiterHelper ../../../../Graphic ../../../../core/arrayUtils ../../../../core/Error ../../../../core/promiseUtils ../../../../core/watchUtils ../../../../core/accessorSupport/decorators ../../../../layers/support/fieldUtils ../../statistics/support/utils ./FeatureLayerAdapter ./LayerAdapter ./support/utils ../../../../tasks/support/FeatureSet".split(" "),
function(r,g,p,f,m,c,e,h,n,a,b,d,k,l,q,A,u,t,x){return function(g){function u(a){return g.call(this,a)||this}f(u,g);u.prototype._hasCachedStatistics=function(a){return this.layer.hasCachedStatistics(a)};u.prototype._fetchFeaturesFromMemory=function(k,c){return k?k.whenLayerView(this.layer).then(function(a){var k=d.whenFalseOnce(a,"updating").then(function(){return a.queryFeatures(c)}).then(function(a){return"esri.tasks.support.FeatureSet"===a.declaredClass?a.features:a});return b.timeout(k,1E4,null)}):
b.reject(new a("scene-layer-adapter:insufficient-data","view is required to fetch the features from layerView"))};u.prototype._generateFeatureSetForCachedHistogram=function(a,b,d,k){void 0===b&&(b=a.minimum);void 0===d&&(d=a.maximum);for(var c=[],e=0;e<k;e++)c[e]=0;for(var l=a.counts.length,q=a.minimum,f=a.maximum,e=0;e<l;e++){var g=(e+.5)/l,g=((1-g)*q+g*f-b)/(d-b)*k;0<=g&&g<=k&&(c[g===k?k-1:Math.floor(g)]+=a.counts[e])}var n=[];c.forEach(function(a,b){var d=new h({attributes:{}});d.attributes.EXPR_1=
b+1;d.attributes.countOFExpr=a;n.push(d)});a=new x;a.features=n;return a};u.prototype._getCachedStatistics=function(d,k){var c=this.layer;return d.valueExpression||d.sqlExpression||d.sqlWhere||d.minValue||d.maxValue?b.reject(new a("scene-layer-adapter:not-supported","This Layer does not support calculating statistics when 'valueExpression', 'sqlExpression', 'sqlWhere', 'minValue' or 'maxValue' is specified")):c.queryCachedStatistics(k&&k.name,{signal:d.signal}).then(function(a){var b=a.stats;a=b.min;
var d=b.max,k=b.avg,c=b.stddev,e=b.sum,l=b.variance,b=b.count;if(0!==a||0!==d)k=0===k?null:k,e=0===e?null:e,c=0===c?null:c,l=0===l?null:l,b=0===b?null:b;null==b&&null!=e&&null!=k&&(b=Math.round(e/k));return{avg:k,count:b,max:d,min:a,stddev:c,sum:e,variance:l}})};u.prototype._getSummaryStatisticsFromMemory=function(b,d){return e(this,void 0,void 0,function(){var k,e,h,q,f,g,n,u;return c(this,function(c){switch(c.label){case 0:if(!b.features)return[3,1];e=b.features;return[3,3];case 1:return[4,this._fetchFeaturesFromMemory(b.view)];
case 2:e=c.sent(),c.label=3;case 3:h=(k=e)&&k.length;if(!h)throw new a("scene-layer-adapter:insufficient-data","No features are available to calculate statistics");q=l.isDateField(d);f=p({},b);return"percent-of-total"!==f.normalizationType?[3,5]:[4,t.calculateStatsFromMemory({field:f.field},k)];case 4:g=c.sent();n=g.sum;if(null==n)throw new a("scene-layer-adapter:invalid","invalid normalizationTotal");f.normalizationTotal=n;c.label=5;case 5:return[4,t.calculateStatsFromMemory(f,k,q)];case 6:return u=
c.sent(),[2,t.processSummaryStatisticsResult(u)]}})})};u.prototype._getCachedStatisticsForUniqueValues=function(d,k){var c=this,e=this.layer,q=k&&k.name,f=k&&this.getFieldDomain(d.field);return d.valueExpression||d.sqlExpression||d.sqlWhere?b.reject(new a("scene-layer-adapter:not-supported","This Layer does not support calculating statistics when 'valueExpression', 'sqlExpression' or 'sqlWhere' is specified")):e.queryCachedStatistics(q,{signal:d.signal}).then(function(a){var b=a.stats;a=a.labels&&
a.labels.labels;var f={},g=[];if(b.mostFrequentValues){var n="countOF"+q;b.mostFrequentValues.forEach(function(a){var b=new h({attributes:{}});b.attributes[q]=k&&k.name!==e.objectIdField&&(l.isNumericField(k)||l.isDateField(k))?Number(a.value):a.value;b.attributes[n]=a.count;g.push(b)});a&&a.forEach(function(a){f[a.value]=a.label})}b=new x;b.features=g;return t.getUniqueValuesFromFeatureSet(b,c,d.field,f,d.signal)}).then(function(a){return t.createUVResult(a,f,d.returnAllCodedValues)})};u.prototype._getUniqueValuesFromMemory=
function(a,d){var k=d&&this.getFieldDomain(a.field);return(a.features?b.resolve(a.features):this._fetchFeaturesFromMemory(a.view)).then(function(b){return t.calculateUniqueValuesFromMemory(a,b,k)})};u.prototype._getCachedStatisticsForHistogram=function(d,k){var c=this,e=this.layer;return d.valueExpression||d.sqlExpression||d.sqlWhere||d.normalizationType?b.reject(new a("scene-layer-adapter:not-supported","This Layer does not support calculating statistics when 'valueExpression' or 'sqlExpression' or 'sqlWhere' or 'normalizationType' is specified")):
e.queryCachedStatistics(k&&k.name,{signal:d.signal}).then(function(a){a=a.stats;var b=d.minValue,k=d.maxValue,b=null!=b?b:a.min,k=null!=k?k:a.max,e=d.numBins||10;a=c._generateFeatureSetForCachedHistogram(a.histogram,b,k,e);return t.getHistogramFromFeatureSet(a,b,k,e)})};u.prototype._getClassBreaksFromMemory=function(b){return e(this,void 0,void 0,function(){var d,k,e,l,h,q;return c(this,function(c){switch(c.label){case 0:if(!b.features)return[3,1];k=b.features;return[3,3];case 1:return[4,this._fetchFeaturesFromMemory(b.view)];
case 2:k=c.sent(),c.label=3;case 3:e=(d=k)&&d.length;if(!e)throw new a("scene-layer-adapter:insufficient-data","No features are available to calculate statistics");l=p({},b);return"percent-of-total"!==l.normalizationType?[3,5]:[4,t.calculateStatsFromMemory({field:l.field},d)];case 4:h=c.sent();q=h.sum;if(null==q)throw new a("scene-layer-adapter:invalid","invalid normalizationTotal");l.normalizationTotal=q;c.label=5;case 5:return[2,t.calculateClassBreaksFromMemory(l,d)]}})})};u.prototype._getHistogramFromMemory=
function(d){var k=this;return(d.features?b.resolve(d.features):this._fetchFeaturesFromMemory(d.view)).then(function(c){if(!c||!c.length)throw new a("scene-layer-adapter:insufficient-data","No features are available to calculate histogram");var e=d.field,l=d.normalizationType,h=d.valueExpression,q=d.classificationMethod,f=d.minValue,g=d.maxValue,n=d.view,u=null!=f&&null!=g,A=null;q&&"equal-interval"!==q||l?(e=p({},d),e.features=c,A=k._getBinParamsFromMemory(e)):A=u?b.resolve({min:f,max:g}):k.summaryStatistics({field:e,
valueExpression:h,features:c,view:n,signal:d.signal}).then(function(d){return d.count?{min:d.min,max:d.max}:b.reject(new a("feature-layer-adapter:insufficient-data","No features are available to calculate histogram"))});return A.then(function(a){return t.calculateHistogramFromMemory(d,a,c)})})};u.prototype._getBinParamsFromMemory=function(a){return e(this,void 0,void 0,function(){var b,d,k,e,l,h,f,g,n,u,A=this;return c(this,function(c){b=a.field;d=a.valueExpression;k=a.classificationMethod;e=a.standardDeviationInterval;
l=a.normalizationType;h=a.normalizationField;f=a.minValue;g=a.maxValue;n=a.features;u=a.view;return[2,this._getClassBreaksFromMemory({field:b,valueExpression:d,normalizationType:l,normalizationField:h,classificationMethod:k,standardDeviationInterval:e,minValue:f,maxValue:g,numClasses:a.numBins,features:n,view:u}).then(function(a){var d=a.normalizationTotal;a=a.classBreakInfos;var k=q.getSQLFilterForNormalization({field:b,normalizationType:l,normalizationField:h});return t.generateBinParams({field:b,
normalizationType:l,normalizationField:h,normalizationTotal:d,classBreaks:a,where:k,layer:A})})]})})};u.prototype.getField=function(a){void 0===a&&(a="");return this.layer.getField(a)};u.prototype.getFieldUsageInfo=function(a){a=this.getField(a);if(!a)return null;a=this.layer.getFieldUsageInfo(a.name);return{supportsLabelingInfo:a.supportsLabelingInfo,supportsPopupTemplate:a.supportsPopupTemplate,supportsRenderer:a.supportsRenderer,supportsLayerQuery:a.supportsLayerQuery,supportsStatistics:!0}};u.prototype.getFieldDomain=
function(a,b){return this._featureLayerAdapter?this._featureLayerAdapter.getFieldDomain(a,b):null};u.prototype.summaryStatistics=function(a){var d=this,k=this.getField(a.field);return this._featureLayerAdapter?this._featureLayerAdapter.summaryStatistics(a):this._hasCachedStatistics(k&&k.name)?this._getCachedStatistics(a,k).catch(function(){b.throwIfAborted(a.signal);return d._getSummaryStatisticsFromMemory(a,k)}):this._getSummaryStatisticsFromMemory(a,k)};u.prototype.uniqueValues=function(a){var d=
this,k=this.getField(a.field);return this._featureLayerAdapter?this._featureLayerAdapter.uniqueValues(a):this._hasCachedStatistics(k&&k.name)?this._getCachedStatisticsForUniqueValues(a,k).catch(function(){b.throwIfAborted(a.signal);return d._getUniqueValuesFromMemory(a,k)}):this._getUniqueValuesFromMemory(a,k)};u.prototype.histogram=function(a){var d=this,k=this.getField(a.field);return this._featureLayerAdapter?this._featureLayerAdapter.histogram(a):this._hasCachedStatistics(k&&k.name)?this._getCachedStatisticsForHistogram(a,
k).catch(function(){b.throwIfAborted(a.signal);return d._getHistogramFromMemory(a)}):this._getHistogramFromMemory(a)};u.prototype.classBreaks=function(d){var k=this.getField(d.field);return this._featureLayerAdapter?this._featureLayerAdapter.classBreaks(d):this._hasCachedStatistics(k&&k.name)?b.reject(new a("scene-layer-adapter:not-supported","Cached stats not supported")):this._getClassBreaksFromMemory(d)};u.prototype.queryFeatureCount=function(d,k){return this._featureLayerAdapter?this._featureLayerAdapter.queryFeatureCount(d,
k):b.reject(new a("scene-layer-adapter:not-supported","SceneLayer without associated FeatureLayer does not support count query"))};u.prototype.generateRenderer=function(d,k){return this._featureLayerAdapter?this._featureLayerAdapter.generateRenderer(d,k):b.reject(new a("scene-layer-adapter:not-supported","SceneLayer without associated FeatureLayer does not support generateRenderer operation"))};u.prototype.heatmapStatistics=function(d){return this._featureLayerAdapter?this._featureLayerAdapter.heatmapStatistics(d):
b.reject(new a("scene-layer-adapter:not-supported","SceneLayer without associated FeatureLayer does not support heatmapStatistics operation"))};u.prototype.predominantCategories=function(b){return e(this,void 0,void 0,function(){return c(this,function(d){if(this._featureLayerAdapter)return[2,this._featureLayerAdapter.predominantCategories(b)];throw new a("scene-layer-adapter:not-supported","SceneLayer without associated FeatureLayer does not support predominantCategories");})})};u.prototype.getSampleFeatures=
function(b){return e(this,void 0,void 0,function(){var d,k,e,l,h,q,f;return c(this,function(c){switch(c.label){case 0:if("mesh"===this.layer.geometryType)throw new a("scene-layer-adapter:not-supported","getSampleFeatures does not support scene layer with mesh geometry type");d=b.view;k=b.sampleSize;e=1;l=this.layer.createQuery();l.outFields=null;l.returnGeometry=!0;l.where=null;l.num=k;h=[];c.label=1;case 1:return c.trys.push([1,3,,4]),[4,this._fetchFeaturesFromMemory(d,l)];case 2:return h=c.sent(),
h.length&&0<k&&k<=h.length?[2,n.pickRandom(h,k,e)]:[3,4];case 3:return c.sent(),[3,4];case 4:q=null;if(!this._featureLayerAdapter)return[3,6];f=p({},b);delete f.view;return[4,this._featureLayerAdapter.getSampleFeatures(f)];case 5:q=c.sent(),c.label=6;case 6:return q&&q.length?[2,q]:[2,n.pickRandom(h,h.length,e)]}})})};u.prototype.load=function(a){var d=this,k=this.layer.load(a).then(function(b){var k=b.associatedLayer;d.geometryType=b.geometryType;if(k)return d._featureLayerAdapter=new A({layer:k}),
d._featureLayerAdapter.load(a).then(function(){d.objectIdField=d._featureLayerAdapter.objectIdField;d.supportsSQLExpression=d._featureLayerAdapter.supportsSQLExpression;d.minScale=d._featureLayerAdapter.minScale;d.maxScale=d._featureLayerAdapter.maxScale;d.fullExtent=d._featureLayerAdapter.fullExtent});d.objectIdField=b.objectIdField;d.supportsSQLExpression=!1;d.hasQueryEngine=!1;d.fullExtent=b.fullExtent});this.addResolvingPromise(k);return b.resolve(this)};m([k.property({constructOnly:!0})],u.prototype,
"layer",void 0);return u=m([k.subclass("esri.renderers.smartMapping.support.adapters.SceneLayerAdapter")],u)}(k.declared(u))})},"esri/renderers/smartMapping/symbology/support/utils":function(){define(["require","exports","../../../../core/arrayUtils","../../../../core/screenUtils","../../support/utils"],function(r,g,p,f,m){function c(a,d){return a.r===d.r&&a.g===d.g&&a.b===d.b}function e(a){var b=a.width,k=a.height,c=a.pixelSizeAt(a.toMap(f.createScreenPoint(.5*b,.5*k),{exclude:[]}));0>=c&&(c=a.pixelSizeAt(a.toMap(f.createScreenPoint(.5*
b,.95*k),{exclude:[]})),0>=c&&(b=a.camera.position.clone(),b.z=0,c=2*a.pixelSizeAt(b)));return c}Object.defineProperty(g,"__esModule",{value:!0});var h="streets gray topo terrain national-geographic oceans osm gray-vector streets-vector topo-vector streets-relief-vector streets-navigation-vector".split(" "),n=["satellite","hybrid","dark-gray","dark-gray-vector","streets-night-vector"],a=[].concat(h).concat(n);g.hasIdenticalColors=function(a,d){var b=0;if(a.length===d.length){var e=a.every(function(a,
b){return c(a,d[b])});e?b=1:(e=a.slice(0).reverse().every(function(a,b){return c(a,d[b])}))&&(b=-1)}return b};g.getPixelSize=e;g.toWorldScale=function(a,d){return Math.ceil(e(d)*f.pt2px(f.toPt(a)))};g.getStorageType=function(a){return"multipoint"===a?"point":"mesh"===a?"polygon":a};g.getBasemapTheme=function(b){b=m.getBasemapId(b,a,!1);if(!b)return null;if(-1<h.indexOf(b))return"light";if(-1<n.indexOf(b))return"dark"};g.getTagsFromSchemes=function(a){if(!a)return[];var b=new Set,k=[a.primaryScheme];
a.secondarySchemes&&k.push.apply(k,a.secondarySchemes);for(a=0;a<k.length;a++){var c=k[a];c&&"tags"in c&&c.tags&&c.tags.forEach(function(a){return b.add(a)})}return p.keysOfSet(b)}})},"esri/widgets/Search/LayerSearchSource":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/assignHelper ../../core/lang ../../core/accessorSupport/decorators ./SearchSource ./support/layerSearchUtils".split(" "),function(r,g,p,f,m,c,e,
h,n){return function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.displayField=null;b.exactMatch=null;b.orderByFields=null;b.searchFields=null;b.searchQueryParams=null;b.searchTemplate=null;b.suggestionTemplate=null;b.suggestQueryParams=null;b.getResults=function(a,d){return n.getResults(m({source:b},a),d)};b.getSuggestions=function(a,d){return n.getSuggestions(m({source:b},a),d)};return b}p(b,a);d=b;Object.defineProperty(b.prototype,"layer",{set:function(a){this._set("layer",a);
a&&a.load().catch(function(){})},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"name",{get:function(){return this._getLayerTitle()||""},set:function(a){void 0===a?this._clearOverride("name"):this._override("name",a)},enumerable:!0,configurable:!0});b.prototype.clone=function(){return new d({autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?c.clone(this.outFields):
null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,searchExtent:this.searchExtent?this.searchExtent.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,displayField:this.displayField,exactMatch:this.exactMatch,layer:this.layer,searchFields:this.searchFields?c.clone(this.searchFields):null,searchQueryParams:this.searchQueryParams?
c.clone(this.searchQueryParams):null,suggestionTemplate:this.suggestionTemplate,suggestQueryParams:this.suggestQueryParams?c.clone(this.suggestQueryParams):null,zoomScale:this.zoomScale})};b.prototype._getFirstStringField=function(){var a=this.layer,b="";a&&a.fields&&a.fields.some(function(a){return"string"===a.type?(b=a.name,!0):!1});return b};b.prototype._getDisplayField=function(){return this.displayField||this.layer.displayField||this._getFirstStringField()};b.prototype._getSearchFieldsString=
function(){var a=this.layer;return a.loaded?": "+(this.searchFields||[this._getDisplayField()]).map(function(b){var d=a.getField(b);return d&&d.alias||b}).join(", "):""};b.prototype._getLayerTitle=function(){var a=this.layer;if(a&&(a=a.title))return""+a+this._getSearchFieldsString()};var d;f([e.property({json:{read:{source:"field.name"},write:{target:"field.name"}}})],b.prototype,"displayField",void 0);f([e.property({json:{read:{source:"field.exactMatch"},write:{target:"field.exactMatch"}}})],b.prototype,
"exactMatch",void 0);f([e.property({value:null})],b.prototype,"layer",null);f([e.property({dependsOn:["layer.title","layer.loaded"]})],b.prototype,"name",null);f([e.property({type:[String],json:{write:!0}})],b.prototype,"orderByFields",void 0);f([e.property()],b.prototype,"searchFields",void 0);f([e.property()],b.prototype,"searchQueryParams",void 0);f([e.property()],b.prototype,"searchTemplate",void 0);f([e.property()],b.prototype,"suggestionTemplate",void 0);f([e.property()],b.prototype,"suggestQueryParams",
void 0);return b=d=f([e.subclass("esri.widgets.Search.LayerSearchSource")],b)}(e.declared(h))})},"esri/widgets/Search/SearchSource":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Identifiable ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),function(r,g,p,f,m,c,e){return function(c){function h(a){a=c.call(this,a)||this;a.autoNavigate=null;a.filter=null;a.getResults=null;a.getSuggestions=null;a.maxResults=
null;a.maxSuggestions=null;a.minSuggestCharacters=null;a.outFields=null;a.placeholder="";a.popupEnabled=null;a.popupTemplate=null;a.prefix="";a.resultGraphicEnabled=null;a.resultSymbol=null;a.searchExtent=null;a.suggestionsEnabled=null;a.suffix="";a.withinViewEnabled=!1;a.zoomScale=null;return a}p(h,c);f([e.property()],h.prototype,"autoNavigate",void 0);f([e.property()],h.prototype,"filter",void 0);f([e.property()],h.prototype,"getResults",void 0);f([e.property()],h.prototype,"getSuggestions",void 0);
f([e.property()],h.prototype,"maxResults",void 0);f([e.property()],h.prototype,"maxSuggestions",void 0);f([e.property()],h.prototype,"minSuggestCharacters",void 0);f([e.property()],h.prototype,"outFields",void 0);f([e.property()],h.prototype,"placeholder",void 0);f([e.property()],h.prototype,"popupEnabled",void 0);f([e.property()],h.prototype,"popupTemplate",void 0);f([e.property()],h.prototype,"prefix",void 0);f([e.property()],h.prototype,"resultGraphicEnabled",void 0);f([e.property()],h.prototype,
"resultSymbol",void 0);f([e.property()],h.prototype,"searchExtent",void 0);f([e.property()],h.prototype,"suggestionsEnabled",void 0);f([e.property()],h.prototype,"suffix",void 0);f([e.property()],h.prototype,"withinViewEnabled",void 0);f([e.property()],h.prototype,"zoomScale",void 0);return h=f([e.subclass("esri.widgets.Search.SearchSource")],h)}(e.declared(m.IdentifiableMixin(c.JSONSupport)))})},"esri/widgets/Search/support/layerSearchUtils":function(){define("require exports ../../../intl ../../../core/Error ../../../core/lang ../../../core/Logger ../../../core/promiseUtils ../../../core/unitUtils ./geometryUtils".split(" "),
function(r,g,p,f,m,c,e,h,n){function a(a,b){var d=a.filter,k=a.searchExtent;b=b&&b.extent;a=a.withinViewEnabled&&b?b:void 0;return d&&d.geometry||k||a}function b(a){return a?a.load().then(e.resolve).catch(e.reject):e.resolve()}function d(a){return a&&!!a.get("capabilities.query.supportsPagination")}function k(a){var b="";a&&(a=a.fields)&&a.some(function(a){return"string"===a.type?(b=a.name,!0):!1});return b}function l(a,b){return a&&b?b.every(function(b){return!!a.getField(b)}):!1}function q(a){for(var b=
0;b<a.length;b++)if(255<a.charCodeAt(b))return!0;return!1}function A(a,b,d){var k=null;(a=a.codedValues)&&a.some(function(a){var c=a.name,c=d?c:c.toLowerCase();return(d?b:b.toLowerCase())===c?(k=a.code.toString(),!0):!1});return k}function u(a,b){return(b=b&&b.where)?"("+a+") AND ("+b+")":a}function t(a,b,d,k,c){var e=b.definitionExpression,l="";if(a){var h=w.test(b.url)&&q(a)?"N":"";d&&d.forEach(function(d){var e=b.getField(d);d=((d="function"===typeof b.getFieldDomain&&b.getFieldDomain(d))&&"coded-value"===
d.type?A(d,a,c):null)||a||null;if(null!==d){var f=e.type,e=e.name;"string"===f||"date"===f||"global-id"===f?c?e=u(e+" \x3d "+h+"'"+d+"'",k):(d=d.toUpperCase(),e=u("UPPER("+e+") LIKE "+h+"'%"+d+"%'",k)):"oid"===f||"small-integer"===f||"integer"===f||"single"===f||"double"===f?(d=Number(d),e=isNaN(d)?null:u(e+" \x3d "+d,k)):e=u(e+" \x3d "+d,k);e&&(l+=l?" OR ("+e+")":"("+e+")")}})}return e?"("+e+") AND ("+l+")":l}function x(a,b){var d=null;(a=a.codedValues)&&a.length&&a.some(function(a){return a.code===
b?(d=a.name,!0):!1});return d}function y(a,b,d){var k=a.layer,c=a.attributes,e="function"===typeof k.getFieldDomain&&k.getFieldDomain(d);return b?p.substitute(b,c):d&&a.hasOwnProperty("attributes")&&c.hasOwnProperty(d)?(a=c[d],d=k.getField(d),e&&"coded-value"===e.type?x(e,a):d&&"date"===d.type?p.formatDate(new Date(a)):"number"===typeof a?a.toString():"string"!==typeof a?"":a.trim()):""}function z(a,b,d,k){return a.features.map(function(a){var c=a.attributes[a.layer.objectIdField];return{text:y(a,
b.suggestionTemplate,k),key:c,sourceIndex:d}})}function v(a,b,d,k,c,e,l){return a.features.map(function(a){var h=a.clone(),f=a.layer,f=(f=f&&f.objectIdField)&&a.attributes[f];a=y(a,d.searchTemplate,c);var q=n.createExtentFromGeometry(h.geometry,b,e);return{extent:l?n.scaleExtent(m.clone(q),b,l):q,feature:h,key:f,name:a,sourceIndex:k}})}Object.defineProperty(g,"__esModule",{value:!0});var w=/https?:\/\/services.*\.arcgis\.com/i,D=/(?:\{([^}]+)\})/g,C=c.getLogger("esri.widgets.Search.support.layerSearchUtils");
g.getResults=function(c,e){var q=c.exactMatch,g=void 0===q?!1:q,n=c.location,u=c.maxResults,A=c.spatialReference,m=c.source,x=c.sourceIndex,y=c.suggestResult,z=c.view,w=m.layer,p=m.filter,D=m.zoomScale,Q=z&&z.scale,r=a(m,z),B=e&&e.signal;return b(w).then(function(){var a=w.popupTemplate;return a?a.getRequiredFields(w.fields):null}).then(function(a){var b=w.objectIdField,c=w.returnZ,e=m.displayField||m.layer.displayField||k(m.layer);if(!w.getField(e))throw C.error("invalid-field: displayField is invalid."),
new f("getResults():invalid-field","displayField is invalid.");a=a&&a.length?a:[e];var q=(a=m.outFields||a)&&-1!==a.indexOf("*");-1!==a.indexOf(b)||q||a.push(b);if(!q&&!l(w,a))throw C.error("invalid-field: outField is invalid."),new f("getResults():invalid-field","outField is invalid.");var b=w.createQuery(),q=m.orderByFields,G=m.searchQueryParams;G&&b.set(G);q&&(b.orderByFields=q);A&&(b.outSpatialReference=A,q=1/h.getMetersPerUnitForSR(A))&&(b.maxAllowableOffset=q);q=!!w.get("capabilities.data.supportsZ");
b.returnZ=q&&!1!==c;b.returnGeometry=!0;a&&(b.outFields=a);if(n)b.geometry=n;else if(y.key)b.objectIds=[parseInt(y.key,10)];else{c=m.searchFields||[e];if(!l(w,c))throw C.error("invalid-field: search field is invalid."),new f("getResults():invalid-field","search field is invalid.");d(w)&&(b.num=u);r&&(b.geometry=r);if(!y.text.trim())return[];a=m.prefix;q=m.suffix;a=(""+(void 0===a?"":a)+y.text+(void 0===q?"":q)).replace(/\'/g,"''");c=t(a,w,c,p,g);if(!c)return[];b.where=c}return w.queryFeatures(b,{signal:B}).then(function(a){return v(a,
z,m,x,e,Q,D)})})};g.getSuggestions=function(c,e){var h=c.source,q=c.spatialReference,g=c.suggestTerm,n=c.maxSuggestions,u=c.sourceIndex,A=h.layer,m=h.filter,x=e&&e.signal,y=a(h,c.view);return b(A).then(function(){if(!d(A))return[];var a=h.displayField||h.layer.displayField||k(h.layer),b=h.searchFields||[a],c=[];h.suggestionTemplate?h.suggestionTemplate.replace(D,function(a,b){c.push(b);return a}):c.push(a);var e=c&&-1!==c.indexOf("*");-1!==c.indexOf(A.objectIdField)||e||c.push(A.objectIdField);var v=
!!A.getField(a),e=e||l(A,c),w=l(A,b);if(!v)throw C.error("invalid-field: displayField is invalid."),new f("getSuggestions():invalid-field","displayField is invalid.");if(!e)throw C.error("invalid-field: outField is invalid."),new f("getSuggestions():invalid-field","outField is invalid.");if(!w)throw C.error("invalid-field: search field is invalid."),new f("getSuggestions():invalid-field","search field is invalid.");v=A.createQuery();e=h.orderByFields;(w=h.suggestQueryParams)&&v.set(w);e&&(v.orderByFields=
e);v.outSpatialReference=q;v.returnGeometry=!1;v.num=n;v.outFields=c;y&&(v.geometry=y);if(!g.trim())return[];e=h.prefix;w=h.suffix;e=(""+(void 0===e?"":e)+g+(void 0===w?"":w)).replace(/\'/g,"''");b=t(e,A,b,m,!1);if(!b)return[];v.where=b;return A.queryFeatures(v,{signal:x}).then(function(b){return z(b,h,u,a)})})}})},"esri/widgets/Search/support/geometryUtils":function(){define("require exports ../../../geometry ../../../core/Error ../../../core/Logger ../../../core/maybe ../../../core/promiseUtils ../../../geometry/support/scaleUtils ../../../views/MapView".split(" "),
function(r,g,p,f,m,c,e,h,n){function a(a,b,c){var d=a.hasZ?a.z:void 0;return b&&b.map?(c?h.getExtentForScale(b,c):b.extent).clone().centerAt(a).set({zmax:d,zmin:d}):new p.Extent({xmin:a.x-.25,ymin:a.y-.25,xmax:a.x+.25,ymax:a.y+.25,spatialReference:a.spatialReference,zmin:d,zmax:d})}Object.defineProperty(g,"__esModule",{value:!0});var b=m.getLogger("esri.widgets.Search.support.geometryUtils");g.getPointWithElevation=function(a,c){return c?a?a.hasZ||c instanceof n?e.resolve(a):(c=c.get("map.ground"))&&
c.layers.length?c.queryElevation(a).then(function(a){return a.geometry}):e.resolve(a):(b.error("missing-parameter: point is missing."),e.reject(new f("searchgeometryutils:missing-parameter","point is missing."))):(b.error("missing-parameter: view is missing."),e.reject(new f("searchgeometryutils:missing-parameter","view is missing.")))};g.getPointFromGeometry=function(a){return a instanceof p.Point?a:a instanceof p.Extent?a.center:a instanceof p.Polygon?a.centroid:a instanceof p.Multipoint?a.getPoint(0):
a instanceof p.Polyline?a.getPoint(0,0):null};g.createExtentFromGeometry=function(b,k,e){if(c.isNone(b))return null;if(b instanceof p.Extent)return b;if(b instanceof p.Multipoint||b instanceof p.Polygon||b instanceof p.Polyline)return b.extent;if(b instanceof p.Point)return a(b,k,e)};g.scaleExtent=function(b,k,e){return c.isNone(b)||c.isNone(k)?null:a(b.center,k,e)}})},"esri/geometry/support/scaleUtils":function(){define(["require","exports","../../core/unitUtils"],function(r,g,p){function f(f,c){c=
p.getMetersPerUnitForSR(c);return f/(c*p.inchesPerMeter*96)}Object.defineProperty(g,"__esModule",{value:!0});g.getScale=function(f,c){c=c||f.extent;f=f.width;var e=p.getMetersPerUnitForSR(c&&c.spatialReference);return c&&f?c.width/f*e*p.inchesPerMeter*96:0};g.getResolutionForScale=f;g.getScaleForResolution=function(f,c){c=p.getMetersPerUnitForSR(c);return f*c*p.inchesPerMeter*96};g.getExtentForScale=function(g,c){var e=g.extent;g=g.width;c=f(c,e.spatialReference);return e.clone().expand(c*g/e.width)}})},
"esri/views/MapView":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper ../core/Error ../core/has ../core/Logger ../core/promiseUtils ../core/screenUtils ../core/watchUtils ../core/workers ../core/accessorSupport/decorators ./BreakpointsOwner ./DOMContainer ./Magnifier ./MapViewBase ./2d/input/MapViewInputManager ./2d/support/HighlightOptions ./support/screenshotUtils ./support/WebGLRequirements ./ui/2d/DefaultUI2D @dojo/framework/shim/Promise".split(" "),
function(r,g,p,f,m,c,e,h,n,a,b,d,k,l,q,A,u,t,x,y,z,v,w){function D(){return c(this,void 0,void 0,function(){var a,b,d,c,k,e,l;return m(this,function(h){switch(h.label){case 0:return[4,Promise.all([new Promise(function(a,b){r(["./webgl"],a,b)}),new Promise(function(a,b){r(["./2d/mapViewDeps"],a,b)}),new Promise(function(a,b){r(["./2d/engine"],a,b)})])];case 1:return a=h.sent(),b=a[1],d=b.GraphicsView2D,c=b.LabelManager,k=b.MapViewNavigation,e=b.MagnifierView2D,l=a[2].Stage,E=d,F=c,H=k,G=e,J=l,[2]}})})}
function C(a){return!("layerViews"in a)&&null!=a.container}var B=n.getLogger("esri.views.MapView"),J,E,F,H,G;return function(c){function q(a){a=c.call(this,a)||this;a._magnifierView=null;a._stage=null;a._resolveWhenReady=[];a.graphicsView=null;a.highlightOptions=new y;a.magnifier=new u;a.inputManager=new x({view:a});a.mapViewNavigation=null;a.supersampleScreenhotsEnabled=!0;a.ui=new w;a.rendering=!1;k.initialize();return a}p(q,c);q.prototype.destroy=function(){this.inputManager.destroy();this._set("inputManager",
null)};Object.defineProperty(q.prototype,"background",{get:function(){return this.get("map.initialViewProperties.background")||null},enumerable:!0,configurable:!0});Object.defineProperty(q.prototype,"navigating",{get:function(){return!(!this.mapViewNavigation||!this.mapViewNavigation.interacting)},enumerable:!0,configurable:!0});q.prototype.toMap=function(a){if(b.isSupportedScreenPointEvent(a)){var d=b.createScreenPointFromSupportedEvent(this,a);return this.inherited(arguments,[d])}return this.inherited(arguments)};
q.prototype.hitTest=function(d){var c=b.isSupportedScreenPointEvent(d)?b.createScreenPointFromSupportedEvent(this,d):d;if(!this.ready||isNaN(c.x)||isNaN(c.y))return a.resolve({screenPoint:c,results:[]});var k=this.toMap(c);d=[this.graphicsView];d.push.apply(d,this.allLayerViews.toArray().reverse());return a.all(d.map(function(a){return a&&a.hitTest?a.hitTest(c.x,c.y):null})).then(function(a){return{screenPoint:c,results:a.filter(function(a){return null!=a}).map(function(a){return{mapPoint:k,graphic:a}})}})};
q.prototype.takeScreenshot=function(b){return this.ready?this._stage.takeScreenshot(z.toRenderSettings(b,this),this.allLayerViews):a.reject("Map view cannot be used before it is ready")};q.prototype.on=function(a,b,d,c){var k=this.inputManager&&this.viewEvents.on(a,b,d,c);return k?k:this.inherited(arguments)};q.prototype.hasEventListener=function(a){return this.inherited(arguments)||this.viewEvents.hasHandler(a)};q.prototype.whenLayerView=function(a){return this.inherited(arguments)};q.prototype.graphicChanged=
function(a){this.graphicsView&&this.graphicsView.graphicUpdateHandler(a)};q.prototype.whenReady=function(){var b=this;return a.create(function(a){b.ready?a(b):b._resolveWhenReady.push(a)})};q.prototype.forceDOMReadyCycle=function(){this.forceReadyCycle()};q.prototype.validate=function(){var b=v.check({supportsMajorWebPerformanceCaveat:!0});h("safari")&&9>h("safari")&&(b=new e("mapview:browser-not-supported","This browser is not supported by MapView (Safari \x3c 9)",{type:"safari",requiredVersion:9,
detectedVersion:h("safari")}));return b?(B.warn("#validate()",b.message),a.reject(b)):D()};q.prototype._startup=function(){var a=this;this.timeline.begin("MapView Startup");this.inherited(arguments);this.graphics.owner=this;var b=new J(this.surface,{canvas:this.renderCanvas,supersampleScreenshots:this.supersampleScreenhotsEnabled,contextOptions:{deactivatedWebGLExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline}),
c=new E({view:this,graphics:this.graphics}),k=new H({view:this,animationManager:this.animationManager}),e=new F({view:this});this._magnifierView=new G;this._magnifierView.magnifier=this.magnifier;this._stage=b;this.frameTask.graphicsView=c;this._set("graphicsView",c);this._set("mapViewNavigation",k);this._set("labelManager",e);this.handles.add([this.allLayerViews.on("change",function(){return a._updateStageChildren()}),b.on("post-render",function(){return a._set("rendering",a.allLayerViews.some(function(a){return!("layerViews"in
a)&&!0===a.rendering}))}),b.on("webgl-error",function(b){return a.fatalError=b.error}),d.init(this,"stationary",function(a){return b.stationary=a},!0),d.init(this,"state.id",function(){return b.state=a.state},!0),d.init(this,"background",function(a){return b.background=a},!0),d.init(this,"magnifier",function(b){return a._magnifierView.magnifier=b},!0),d.init(this,"renderingOptions",function(a){return b.renderingOptions=a},!0),d.init(this,"highlightOptions",function(){return b.highlightOptions=a.highlightOptions},
!0)],"map-view");b.state=this.state;b.background=this.background;this._updateStageChildren();c=this._resolveWhenReady;this._resolveWhenReady=[];c.forEach(function(b){return b(a)});this.timeline.end("MapView Startup")};q.prototype._teardown=function(){this.handles.remove("map-view");this.layerViewManager.clear();this.labelManager.destroy();this._magnifierView.destroy();this._stage.destroy();this.graphicsView.destroy();this.mapViewNavigation.destroy();this._stage=null;this._set("graphicsView",null);
this._magnifierView=null;this._set("labelManager",null);this._set("mapViewNavigation",null);this.graphics.owner=null;this.inherited(arguments)};q.prototype._updateStageChildren=function(){var a=this;this._stage.removeAllChildren();this.allLayerViews.filter(C).forEach(function(b,d){a._stage.addChildAt(b.container,d)});this._stage.addChild(this.graphicsView.container);this._stage.addChild(this._magnifierView)};f([l.property({readOnly:!0,dependsOn:["map.initialViewProperties?.background"]})],q.prototype,
"background",null);f([l.property()],q.prototype,"graphicsView",void 0);f([l.property({type:y})],q.prototype,"highlightOptions",void 0);f([l.property({type:u})],q.prototype,"magnifier",void 0);f([l.property({readOnly:!0})],q.prototype,"inputManager",void 0);f([l.property({readOnly:!0})],q.prototype,"mapViewNavigation",void 0);f([l.property({dependsOn:["mapViewNavigation.interacting"],type:Boolean})],q.prototype,"navigating",null);f([l.property({type:Boolean,constructOnly:!0})],q.prototype,"supersampleScreenhotsEnabled",
void 0);f([l.property({type:w})],q.prototype,"ui",void 0);f([l.property({readOnly:!0})],q.prototype,"rendering",void 0);f([l.property({constructOnly:!0})],q.prototype,"renderCanvas",void 0);f([l.property({constructOnly:!0})],q.prototype,"deactivatedWebGLExtensions",void 0);f([l.property({constructOnly:!0})],q.prototype,"debugWebGLExtensions",void 0);return q=f([l.subclass("esri.views.MapView")],q)}(l.declared(q.BreakpointsOwner(A.DOMContainer(t))))})},"esri/views/BreakpointsOwner":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/assignHelper ../core/ArrayPool ../core/Handles ../core/watchUtils ../core/accessorSupport/decorators".split(" "),
function(r,g,p,f,m,c,e,h,n){function a(a,d){return d?b[a].valueToClassName[d].split(" "):[]}Object.defineProperty(g,"__esModule",{value:!0});var b={widthBreakpoint:{getValue:function(a){var b=a.viewSize[0];a=a.breakpoints;var d=this.values;return b<=a.xsmall?d.xsmall:b<=a.small?d.small:b<=a.medium?d.medium:b<=a.large?d.large:d.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",
small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",
xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue:function(a){var b=a.viewSize[1];a=a.breakpoints;var d=this.values;return b<=a.xsmall?d.xsmall:b<=a.small?d.small:b<=a.medium?d.medium:b<=a.large?d.large:d.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",
small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",
xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue:function(a){a=a.viewSize;var b=this.values;return a[1]>=a[0]?b.portrait:b.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},d={xsmall:544,small:768,medium:992,large:1200};g.BreakpointsOwner=
function(k){return function(k){function l(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];a=k.apply(this,a)||this;a._breakpointsHandles=new e;a.orientation=null;a.widthBreakpoint=null;a.heightBreakpoint=null;a.breakpoints=d;return a}p(l,k);l.prototype.initialize=function(){this._breakpointsHandles.add(h.init(this,["breakpoints","size"],this._updateClassNames))};l.prototype.destroy=function(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles.destroy(),this._breakpointsHandles=
null)};Object.defineProperty(l.prototype,"breakpoints",{set:function(a){var b=this._get("breakpoints");if(a!==b){b=(b=a)&&b.xsmall<b.small&&b.small<b.medium&&b.medium<b.large;if(!b){var c=JSON.stringify(d,null,2);console.warn("provided breakpoints are not valid, using defaults:"+c)}a=b?a:d;this._set("breakpoints",m({},a))}},enumerable:!0,configurable:!0});l.prototype._updateClassNames=function(){if(this.container){var d=c.acquire(),k=c.acquire(),e=!1,l;for(l in b){var h=this[l],f=b[l].getValue({viewSize:this.size,
breakpoints:this.breakpoints});h!==f&&(e=!0,this[l]=f,a(l,h).forEach(function(a){return k.push(a)}),a(l,f).forEach(function(a){return d.push(a)}))}e&&(this._applyClassNameChanges(d,k),c.release(d),c.release(k))}};l.prototype._applyClassNameChanges=function(a,b){var d=this.container;d&&(b.forEach(function(a){return d.classList.remove(a)}),a.forEach(function(a){return d.classList.add(a)}))};l.prototype._removeActiveClassNames=function(){var d=this.container;if(d)for(var c in b)a(c,this[c]).forEach(function(a){return d.classList.remove(a)})};
f([n.property()],l.prototype,"breakpoints",null);f([n.property()],l.prototype,"orientation",void 0);f([n.property()],l.prototype,"widthBreakpoint",void 0);f([n.property()],l.prototype,"heightBreakpoint",void 0);return l=f([n.subclass("esri.views.BreakpointsOwner")],l)}(n.declared(k))}})},"esri/views/Magnifier":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/accessorSupport/decorators".split(" "),function(r,g,p,f,m,
c){return function(e){function h(c){c=e.call(this,c)||this;c.factor=1.5;c.offsetX=0;c.offsetY=0;c.position=null;c.visible=!1;return c}p(h,e);Object.defineProperty(h.prototype,"version",{get:function(){return(this._get("version")||0)+1},enumerable:!0,configurable:!0});f([c.property({type:Number})],h.prototype,"factor",void 0);f([c.property({type:Number})],h.prototype,"offsetX",void 0);f([c.property({type:Number})],h.prototype,"offsetY",void 0);f([c.property()],h.prototype,"position",void 0);f([c.property({readOnly:!0,
dependsOn:["factor","offsetX","offsetY","position","visible"]})],h.prototype,"version",null);f([c.property({type:Boolean})],h.prototype,"visible",void 0);return h=f([c.subclass("esri.views.Magnifier")],h)}(c.declared(m))})},"esri/views/MapViewBase":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../geometry ../Viewpoint ../core/Error ../core/Logger ../core/now ../core/promiseUtils ../core/screenUtils ../core/watchUtils ../core/accessorSupport/decorators ../geometry/support/webMercatorUtils ../layers/support/TileInfo ./PopupView ./View ./ViewAnimation ./2d/AnimationManager ./2d/FrameTask ./2d/layerViewModuleImportUtils ./2d/MapViewConstraints ./2d/PaddedViewState ./2d/tiling ./2d/viewpointUtils ./2d/support/Timeline".split(" "),
function(r,g,p,f,m,c,e,h,n,a,b,d,k,l,q,A,u,t,x,y,z,v,w,D,C,B,J){var E=n.getLogger("esri.views.MapView");return function(g){function n(b){var d=g.call(this,b)||this;d._stationaryTimer=null;d.frameTask=new z.default(d);d.featuresTilingScheme=null;d.fullOpacity=1;d.initialExtent=null;d.labelManager=null;d.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0};d.resizeAlign="center";d.timeline=new J.Timeline;d.type="2d";d.constraints=new w;d.padding=
{top:0,right:0,bottom:0,left:0};var c=d.handles,k=function(){return d.notifyChange("updating")};c.add([d.watch("viewpoint",function(){d._lastStationaryEventTimestamp=a();d._flipStationary(160)},!0),d.on("resize",function(a){return d._resizeHandler(a)}),d.watch("animationManager.animation",function(a){d.animation=a}),d.allLayerViews.on("change",function(){k();c.remove("map-view-base-layerViewsUpdating");c.add(d.allLayerViews.map(function(a){return a.watch("updating",k)}),"map-view-base-layerViewsUpdating")})],
"map-view-base");return d}f(n,g);n.prototype.destroy=function(){this.destroyed||(this._set("preconditionsReady",!1),this._gotoTask=this.frameTask=null)};Object.defineProperty(n.prototype,"animation",{set:function(a){var b=this,d=this._get("animation");a!==d&&(d&&d.stop(),!a||a.isFulfilled()?this._set("animation",null):(this._set("animation",a),this.frameTask.animationInProgress=!0,d=function(){a===b._get("animation")&&(b._set("animation",null),b.frameTask.requestFrame());b.frameTask.animationInProgress=
!1},a.when(d,d)))},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"center",{get:function(){if(!this.ready)return this._get("center");var a=this.state.paddedViewState,b=a.center;return new c.Point({x:b[0],y:b[1],spatialReference:a.spatialReference})},set:function(a){if(null!=a)if(this._normalizeInput(a))if(this.ready){var b=this.viewpoint;B.centerAt(b,b,a);this.viewpoint=b}else this._set("center",a),this.notifyChange("initialExtentRequired");else E.error("#center","incompatible spatialReference "+
JSON.stringify(a.spatialReference)+" with view's spatialReference "+JSON.stringify(this.spatialReference))},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"constraints",{set:function(a){var b=this,d=this._get("constraints");d&&(this.handles.remove("map-view-base-constraints"),d.destroy());this._set("constraints",a);a&&(a.view=this,this.ready&&(this.state.viewpoint=a.fit(this.state.paddedViewState.viewpoint)),this.handles.add(a.on("update",function(){b.ready&&b.state&&(b.state.viewpoint=
a.fit(b.state.paddedViewState.viewpoint))}),"map-view-base-constraints"))},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"extent",{get:function(){return this.ready?this.state.paddedViewState.extent.clone():this._get("extent")},set:function(a){if(null!=a){var b=this._normalizeInput(a);b?b.width&&b.height?this.ready?(a=this.viewpoint,B.setExtent(a,a,b,this.size,{constraints:this.constraints}),this.viewpoint=a):(this._set("extent",b),this._set("center",null),this._set("viewpoint",
null),this._set("scale",0),this._set("zoom",-1),this.notifyChange("initialExtentRequired")):E.error("#extent","invalid extent size"):E.error("#center","incompatible spatialReference "+JSON.stringify(a.spatialReference)+" with view's spatialReference "+JSON.stringify(this.spatialReference))}},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"initialExtentRequired",{get:function(){var a=this.extent,b=this.center,d=this.scale,c=this.viewpoint,k=this.zoom;return this.get("map.initialViewProperties.viewpoint")||
a||b&&(0!==d||-1!==k)||c?!1:!0},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"padding",{get:function(){return this.ready?this.state.padding:this._get("padding")},set:function(a){this.ready?(this.state.padding=a,this._set("padding",this.state.padding)):this._set("padding",a)},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"resolution",{get:function(){return this.state?this.state.resolution:0},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,
"rotation",{get:function(){return this.ready?this.state.rotation:this._get("rotation")},set:function(a){if(!isNaN(a))if(this.ready){var b=this.viewpoint;B.rotateTo(b,b,a);this.viewpoint=b}else this._set("rotation",a)},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"scale",{get:function(){return this.ready?this.state.scale:this._get("scale")},set:function(a){if(a&&!isNaN(a))if(this.ready){var b=this.viewpoint;B.scaleTo(b,b,a);this.viewpoint=b}else{this._set("scale",a);this._set("zoom",
-1);if(a=this._get("extent"))this._set("extent",null),this._set("center",a.center);this.notifyChange("initialExtentRequired")}},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"stationary",{get:function(){return!this.animation&&!this.navigating&&!this._get("resizing")&&!this._stationaryTimer},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"updating",{get:function(){return!this.destroyed&&(!0===this.get("layerViewManager.updating")||!0===this.get("labelManager.updating")||
!0===this.get("graphicsView.updating")||this.allLayerViews.some(function(a){return!a.destroyed&&!("layerViews"in a)&&a.attached&&!0===a.updating}))},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"viewpoint",{get:function(){if(!this.ready)return this._get("viewpoint");var a=this.state.paddedViewState;return a&&a.viewpoint.clone()},set:function(a){if(null!=a){var b=this._normalizeInput(a);b?this.ready?(a=new e({targetGeometry:new c.Point,scale:0,rotation:0}),B.copy(a,b),this.constraints.constrain(a,
this.state.paddedViewState.viewpoint),this.state.viewpoint=a,this.frameTask.requestFrame(),this._set("viewpoint",a)):(this._set("viewpoint",b),this._set("extent",null),this._set("center",null),this._set("zoom",-1),this._set("scale",0),this.notifyChange("initialExtentRequired")):!a.scale||isNaN(a.scale)?E.error("#viewpoint","invalid scale value of "+a.scale):a.targetGeometry?E.error("#viewpoint","incompatible spatialReference "+JSON.stringify(a.targetGeometry.spatialReference)+" with view's spatialReference "+
JSON.stringify(this.spatialReference)):E.error("#viewpoint","geometry not defined")}},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"zoom",{get:function(){return this.ready?this.constraints.scaleToZoom(this.scale):this._get("zoom")},set:function(a){if(null!=a){if(!this.ready){this.notifyChange("initialExtentRequired");this._set("zoom",a);this._set("scale",0);var b=this._get("extent");b&&(this._set("extent",null),this._set("center",b.center))}this.constraints.effectiveLODs&&(b=
this.viewpoint,B.scaleTo(b,b,this.constraints.zoomToScale(a)),this.viewpoint=b,this._set("zoom",this.constraints.scaleToZoom(this.scale)))}},enumerable:!0,configurable:!0});n.prototype.goTo=function(a,b){var d=this;if(a)return k.whenTrueOnce(this,"ready",b&&b.signal).then(function(){d.animation&&(d.animation=null);var c=p({animate:!0},b),k=B.createAsync(a,d);d._gotoTask={};return c.animate?d._gotoAnimated(k,c):d._gotoImmediate(k,c)});E.error("#goTo()","target cannot be null or undefined")};n.prototype.hitTest=
function(a){return b.reject("Should be implemented by subclasses")};n.prototype.popupHitTest=function(a){var b=this;return this.hitTest(a).then(function(d){return p({},d,{mapPoint:b.toMap(a)})})};n.prototype.toMap=function(a){if(!this.ready)return null;a=this.state.toMap([0,0],[a.x,a.y]);return new c.Point({x:a[0],y:a[1],spatialReference:this.spatialReference})};n.prototype.isTileInfoRequired=function(){return!0};n.prototype.toScreen=function(a){if(!this.ready)return null;a=this._normalizeInput(a);
a=[a.x,a.y];a=this.state.toScreen(a,a);return d.createScreenPoint(a[0],a[1])};n.prototype.pixelSizeAt=function(){return this.ready?this.state.resolution:(E.error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)};n.prototype.requestLayerViewUpdate=function(a){this.ready&&this.frameTask.requestLayerViewUpdate(a)};n.prototype.requestUpdate=function(a){this.ready&&this.frameTask.requestUpdate(a)};n.prototype.getDefaultSpatialReference=function(){return this.get("map.initialViewProperties.spatialReference")||
this.get("defaultsFromMap.spatialReference")||null};n.prototype.isSpatialReferenceSupported=function(a,b){return b||this._get("ready")?!0:null!==this._getDefaultViewpoint()};n.prototype.importLayerView=function(a){return v.layerView2DImporter.importLayerView(a)};n.prototype.hasLayerViewModule=function(a){return v.layerView2DImporter.hasLayerViewModule(a)};n.prototype._createOrReplaceAnimation=function(a){if(!this.animation||this.animation.done)this.animation=new x;this.animation.update(a);return this.animation};
n.prototype._cancellableGoTo=function(a,d,c){var k=this,e=c.then(function(){a===k._gotoTask&&(k.animation=null)}).catch(function(b){a===k._gotoTask&&(k.animation=null,d.done||(d.stop(),k.frameTask.animationInProgress=!1));throw b;}),l=b.create(function(a){return a(e)},function(){a!==k._gotoTask||d.done||(d.stop(),k.frameTask.animationInProgress=!1)});d.when().catch(function(){a===k._gotoTask&&l.cancel&&l.cancel()});return l};n.prototype._gotoImmediate=function(a,d){var c=this,k=this._gotoTask,e=this._createOrReplaceAnimation(a);
a=a.then(function(a){b.throwIfAborted(d);if(k!==c._gotoTask)throw new h("view:goto-interrupted","Goto was interrupted");c.viewpoint=e.target=a;e.finish()});return this._cancellableGoTo(k,e,a)};n.prototype._gotoAnimated=function(a,b){var d=this,c=this._gotoTask,k=this._createOrReplaceAnimation(a);a=a.then(function(a){if(c!==d._gotoTask)throw new h("view:goto-interrupted","Goto was interrupted");k.update(a);d.animationManager.animate(k,d.viewpoint,b);return k.when().then(function(){},function(){})});
return this._cancellableGoTo(c,k,a)};n.prototype._resizeHandler=function(a){var b=this.state;if(b){var d=this.state.paddedViewState.viewpoint,c=this.state.paddedViewState.size.concat();b.size=[a.width,a.height];B.resize(d,d,c,this.state.paddedViewState.size,this.resizeAlign);d=this.constraints.constrain(d,null);this.state.viewpoint=d}};n.prototype._startup=function(){var a=this._getDefaultViewpoint();this.constraints.view=this;this.constraints.fit(a);this._set("animationManager",new y.default({view:this}));
this._set("state",new D({padding:this._get("padding"),size:this.size,viewpoint:a}));this._set("featuresTilingScheme",new C.TileInfoView(A.create({spatialReference:this.spatialReference,size:512})));this._set("ready",!0);this.frameTask&&this.frameTask.start()};n.prototype._teardown=function(){this.frameTask&&this.frameTask.stop();this._set("ready",!1);this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null);var a=this.state.paddedViewState,b=a.center,d=a.spatialReference,
k=a.rotation,a=a.scale,b=new c.Point({x:b[0],y:b[1],spatialReference:d});this._set("viewpoint",null);this._set("extent",null);this._set("center",b);this._set("zoom",-1);this._set("rotation",k);this._set("scale",a);this._set("spatialReference",d);this.constraints.view=null;this.animationManager.destroy();this._set("animationManager",null);this._set("state",null);this.animation=null};n.prototype._flipStationary=function(b){var d=this;return null!==this._stationaryTimer?this._stationaryTimer:this._stationaryTimer=
setTimeout(function(){d._stationaryTimer=null;var b=a()-d._lastStationaryEventTimestamp;160>b&&(d._stationaryTimer=d._flipStationary(b))},b)};n.prototype._normalizeInput=function(a,b){void 0===b&&(b=this.spatialReference);var d=a&&a.targetGeometry||a;return b?d?b.equals(d.spatialReference)?a:q.canProject(d,b)?a&&"esri.Viewpoint"===a.declaredClass?(a.targetGeometry=q.project(d,b),a):q.project(d,b):null:null:a};n.prototype._getDefaultViewpoint=function(){var a=this.constraints,b=this._get("zoom"),d=
this._get("scale"),c=this._normalizeInput(this._get("center")),k=this._normalizeInput(this._get("extent")),l=this._get("rotation"),h=this._normalizeInput(this._get("viewpoint"));a.effectiveLODs?-1!==b&&(d=a.zoomToScale(b)):b=-1;var f=null,q=null,b=0,a=h&&h.rotation,n=h&&h.targetGeometry;n&&("extent"===n.type?f=n:"point"===n.type&&(q=n,b=h.scale));h=this._normalizeInput(this.get("map.initialViewProperties.viewpoint.targetGeometry.extent"));n=this._normalizeInput(this.initialExtent);k=k||f||h||n;c=
c||q||k&&k.center;d=d||b||k&&B.extentToScale(k,this.size);return c&&d?new e({targetGeometry:c,scale:d,rotation:l||a||0}):null};m([l.property()],n.prototype,"_stationaryTimer",void 0);m([l.property()],n.prototype,"animation",null);m([l.property({readOnly:!0})],n.prototype,"animationManager",void 0);m([l.property({value:null,type:c.Point,dependsOn:["state.id","ready"]})],n.prototype,"center",null);m([l.property({type:w})],n.prototype,"constraints",null);m([l.property({value:null,type:c.Extent,dependsOn:["state.id",
"ready"]})],n.prototype,"extent",null);m([l.property({readOnly:!0})],n.prototype,"featuresTilingScheme",void 0);m([l.property()],n.prototype,"fullOpacity",void 0);m([l.property({type:c.Extent})],n.prototype,"initialExtent",void 0);m([l.property({dependsOn:["map.initialViewProperties?.viewpoint"]})],n.prototype,"initialExtentRequired",null);m([l.property()],n.prototype,"labelManager",void 0);m([l.property({value:{top:0,right:0,bottom:0,left:0},cast:function(a){return p({top:0,right:0,bottom:0,left:0},
a)}})],n.prototype,"padding",null);m([l.property({type:Object})],n.prototype,"renderingOptions",void 0);m([l.property()],n.prototype,"resizeAlign",void 0);m([l.property({readOnly:!0,dependsOn:["state.id"]})],n.prototype,"resolution",null);m([l.property({value:0,type:Number,dependsOn:["state.id","ready"]})],n.prototype,"rotation",null);m([l.property({value:0,type:Number,dependsOn:["state.id","ready"]})],n.prototype,"scale",null);m([l.property({type:c.SpatialReference,dependsOn:["map.initialViewProperties?.spatialReference",
"defaultsFromMap.isSpatialReferenceDone"]})],n.prototype,"spatialReference",void 0);m([l.property({readOnly:!0})],n.prototype,"state",void 0);m([l.property({dependsOn:["animation","navigating","resizing","_stationaryTimer"]})],n.prototype,"stationary",null);m([l.property({type:J.Timeline,readOnly:!0})],n.prototype,"timeline",void 0);m([l.property({readOnly:!0})],n.prototype,"type",void 0);m([l.property({readOnly:!0,dependsOn:["layerViewManager.updating","labelManager.updating","graphicsView?.updating"]})],
n.prototype,"updating",null);m([l.property({value:null,type:e,dependsOn:["state.id","ready"]})],n.prototype,"viewpoint",null);m([l.property({value:-1,dependsOn:["state.id"]})],n.prototype,"zoom",null);return n=m([l.subclass("esri.views.MapViewBase")],n)}(l.declared(u.PopupView(t)))})},"esri/layers/support/TileInfo":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../geometry ../../core/jsonMap ../../core/JSONSupport ../../core/unitUtils ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ../../geometry/support/aaBoundingRect ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ./LOD".split(" "),
function(r,g,p,f,m,c,e,h,n,a,b,d,k,l,q){var A=new e.default({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});return function(e){function h(a){a=e.call(this,a)||this;a.dpi=96;a.format=null;a.origin=null;a.minScale=0;a.maxScale=0;a.size=null;a.spatialReference=null;return a}f(h,e);g=h;h.create=function(a){void 0===a&&(a=
{size:256,spatialReference:c.SpatialReference.WebMercator});var b=a.resolutionFactor||1,d=a.scales,e=a.size||256;a=a.spatialReference||c.SpatialReference.WebMercator;if(!k.isValid(a)){b=[];if(d)for(var l=0;l<d.length;l++){var h=d[l];b.push({level:l,scale:h,resolution:h})}else for(var f=5E-4,l=23;0<=l;l--)b.unshift({level:l,scale:f,resolution:f}),f*=2;return new g({dpi:96,lods:b,origin:new c.Point(0,0,a),size:[e,e],spatialReference:a})}var q=(l=k.getInfo(a))?new c.Point(l.origin[0],l.origin[1],a):
new c.Point(0,0,a),t=1/(39.37*n.getMetersPerUnitForSR(a)*96),A=[];if(d)for(l=0;l<d.length;l++)h=d[l],f=h*t,A.push({level:l,scale:h,resolution:f});else for(h=k.isGeographic(a)?512/e*5.916575275917094E8:256/e*5.91657527591555E8,d=Math.ceil(24/b),A.push({level:0,scale:h,resolution:h*t}),l=1;l<d;l++)h/=Math.pow(2,b),f=h*t,A.push({level:l,scale:h,resolution:f});return new g({dpi:96,lods:A,origin:q,size:[e,e],spatialReference:a})};Object.defineProperty(h.prototype,"isWrappable",{get:function(){var a=this.spatialReference,
b=this.origin;if(a&&b){var d=k.getInfo(a);return a.isWrappable&&Math.abs(d.origin[0]-b.x)<=d.dx}return!1},enumerable:!0,configurable:!0});h.prototype.readOrigin=function(a,b){return c.Point.fromJSON(p({spatialReference:b.spatialReference},a))};Object.defineProperty(h.prototype,"lods",{set:function(a){var b=this,d=0,c=0,k=[];this._levelToLOD={};a&&(d=-Infinity,c=Infinity,a.forEach(function(a){k.push(a.scale);d=a.scale>d?a.scale:d;c=a.scale<c?a.scale:c;b._levelToLOD[a.level]=a}));this._set("scales",
k);this._set("minScale",d);this._set("maxScale",c);this._set("lods",a);this._initializeUpsampleLevels()},enumerable:!0,configurable:!0});h.prototype.readSize=function(a,b){return[b.cols,b.rows]};h.prototype.writeSize=function(a,b){b.cols=a[0];b.rows=a[0]};h.prototype.zoomToScale=function(a){var b=this.scales;if(0>=a)return b[0];if(a>=b.length)return b[b.length-1];var d=Math.round(a);return b[d]+(d-a)*(b[Math.round(a-.5)]-b[d])};h.prototype.scaleToZoom=function(a){for(var b=this.scales,d=b.length-
1,c=0;c<d;c++){var k=b[c],e=b[c+1];if(k<=a)break;if(e===a)return c+1;if(k>a&&e<a)return c+1-(a-e)/(k-e)}return c};h.prototype.snapScale=function(a,b){void 0===b&&(b=.95);a=this.scaleToZoom(a);return a%Math.floor(a)>=b?this.zoomToScale(Math.ceil(a)):this.zoomToScale(Math.floor(a))};h.prototype.tileAt=function(a,b,c,e){var h=this.lodAt(a);if(!h)return null;var f;if("number"===typeof b)f=b,b=c;else{if(k.equals(b.spatialReference,this.spatialReference))f=b.x,b=b.y;else{e=l.project(b,this.spatialReference);
if(!e)return null;f=e.x;b=e.y}e=c}c=h.resolution*this.size[0];h=h.resolution*this.size[1];e||(e={id:null,level:0,row:0,col:0,extent:d.create()});e.level=a;e.row=Math.floor((this.origin.y-b)/h+.001);e.col=Math.floor((f-this.origin.x)/c+.001);this.updateTileInfo(e);return e};h.prototype.updateTileInfo=function(a){var b=this.lodAt(a.level);if(b){var c=b.resolution*this.size[0],b=b.resolution*this.size[1];a.id=a.level+"/"+a.row+"/"+a.col;a.extent||(a.extent=d.create());a.extent[0]=this.origin.x+a.col*
c;a.extent[1]=this.origin.y-(a.row+1)*b;a.extent[2]=a.extent[0]+c;a.extent[3]=a.extent[1]+b}};h.prototype.upsampleTile=function(a){var b=this._upsampleLevels[a.level];if(!b||-1===b.parentLevel)return!1;a.level=b.parentLevel;a.row=Math.floor(a.row/b.factor+.001);a.col=Math.floor(a.col/b.factor+.001);this.updateTileInfo(a);return!0};h.prototype.getTileBounds=function(a,b){var d=this.lodAt(b.level).resolution,c=d*this.size[0],d=d*this.size[1];a[0]=this.origin.x+b.col*c;a[1]=this.origin.y-(b.row+1)*d;
a[2]=a[0]+c;a[3]=a[1]+d;return a};h.prototype.lodAt=function(a){return this._levelToLOD&&this._levelToLOD[a]||null};h.prototype.clone=function(){return g.fromJSON(this.write({}))};h.prototype._initializeUpsampleLevels=function(){var a=this.lods;this._upsampleLevels=[];for(var b=null,d=0;d<a.length;d++){var c=a[d];this._upsampleLevels[c.level]={parentLevel:b?b.level:-1,factor:b?b.resolution/c.resolution:0};b=c}};var g;m([a.property({type:Number,json:{write:!0}})],h.prototype,"compressionQuality",void 0);
m([a.property({type:Number,json:{write:!0}})],h.prototype,"dpi",void 0);m([a.property({type:String,json:{read:A.read,write:A.write,origins:{"web-scene":{read:!1,write:!1}}}})],h.prototype,"format",void 0);m([a.property({readOnly:!0,dependsOn:["spatialReference","origin"]})],h.prototype,"isWrappable",null);m([a.property({type:c.Point,json:{write:!0}})],h.prototype,"origin",void 0);m([a.reader("origin")],h.prototype,"readOrigin",null);m([a.property({type:[q],value:null,json:{write:!0}})],h.prototype,
"lods",null);m([a.property({readOnly:!0})],h.prototype,"minScale",void 0);m([a.property({readOnly:!0})],h.prototype,"maxScale",void 0);m([a.property({readOnly:!0})],h.prototype,"scales",void 0);m([a.property({cast:function(a){return Array.isArray(a)?a:"number"===typeof a?[a,a]:[256,256]}})],h.prototype,"size",void 0);m([a.reader("size",["rows","cols"])],h.prototype,"readSize",null);m([a.writer("size",{cols:{type:b.Integer},rows:{type:b.Integer}})],h.prototype,"writeSize",null);m([a.property({type:c.SpatialReference,
json:{write:!0}})],h.prototype,"spatialReference",void 0);return h=g=m([a.subclass("esri.layers.support.TileInfo")],h)}(a.declared(h.JSONSupport))})},"esri/layers/support/LOD":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType".split(" "),function(r,g,p,f,m,c,e){return function(h){function n(a){a=h.call(this,a)||this;a.level=0;a.levelValue=
null;a.resolution=0;a.scale=0;return a}p(n,h);a=n;n.prototype.clone=function(){return new a({level:this.level,levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})};var a;f([c.property({type:e.Integer,json:{write:!0}})],n.prototype,"level",void 0);f([c.property({type:String,json:{write:!0}})],n.prototype,"levelValue",void 0);f([c.property({type:Number,json:{write:!0}})],n.prototype,"resolution",void 0);f([c.property({type:Number,json:{write:!0}})],n.prototype,"scale",void 0);return n=
a=f([c.subclass("esri.layers.support.LOD")],n)}(c.declared(m.JSONSupport))})},"esri/views/PopupView":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/awaiterHelper ../core/tsSupport/generatorHelper ../core/arrayUtils ../core/maybe ../core/promiseUtils ../core/accessorSupport/decorators".split(" "),function(r,g,p,f,m,c,e,h,n,a,b){Object.defineProperty(g,"__esModule",{value:!0});g.PopupView=function(d){return function(d){function k(){return null!==
d&&d.apply(this,arguments)||this}f(k,d);k.prototype.fetchPopupFeatures=function(a,b){return this._fetchPopupFeaturesAsync(a,b)};k.prototype._fetchPopupFeaturesAsync=function(b,d){return c(this,void 0,void 0,function(){var c,k,l,f,q,n,g,A,m;return e(this,function(e){switch(e.label){case 0:return[4,this.when()];case 1:return e.sent(),[4,this._prepareFetchPopupFeatures(b,d)];case 2:return c=e.sent(),k=c.location,l=c.queryArea,f=c.layerViewsAndGraphics,q=c.clientOnlyGraphics,n=a.resolve(q),g=this._queryLayerPopupFeatures({queryArea:l,
layerViewsAndGraphics:f,options:d}),A=g.map(function(a){return a.promise}),m=a.eachAlwaysValues([n].concat(A)).then(h.flatten),[2,{location:k,clientOnlyGraphics:q,allGraphicsPromise:m,promisesPerLayerView:g}]}})})};k.prototype._queryLayerPopupFeatures=function(a){var b=a.queryArea,d=a.options;return a.layerViewsAndGraphics.map(function(a){var c=a.layerView;a={clientGraphics:a.graphics,event:n.isSome(d)?d.event:null,signal:n.isSome(d)?d.signal:null,defaultPopupTemplateEnabled:n.isSome(d)?!!d.defaultPopupTemplateEnabled:
!1};a=c.fetchPopupFeatures(b,a);return{layerView:c,promise:a}})};k.prototype._isValidPopupGraphic=function(a,b){return a&&!!a.getEffectivePopupTemplate(n.isSome(b)&&b.defaultPopupTemplateEnabled)};k.prototype._prepareFetchPopupFeatures=function(a,b){return c(this,void 0,void 0,function(){var d,c,k,l,h,f,q,n;return e(this,function(e){switch(e.label){case 0:return[4,this._popupHitTestGraphics(a,b)];case 1:return d=e.sent(),c=d.clientGraphics,k=d.queryArea,l=d.location,h=this._getFetchPopupLayerViews(),
f=this._graphicsPerFetchPopupLayerView(c,h),q=f.layerViewsAndGraphics,n=f.clientOnlyGraphics,[2,{clientOnlyGraphics:n,layerViewsAndGraphics:q,queryArea:k,location:l}]}})})};k.prototype._popupHitTestGraphics=function(a,b){return c(this,void 0,void 0,function(){var d,c,k,l,h,f,q=this;return e(this,function(e){switch(e.label){case 0:return[4,this.popupHitTest(a)];case 1:return d=e.sent(),c=d.results,k=d.mapPoint,l=c.filter(function(a){return q._isValidPopupGraphic(a.graphic,b)}),h=l.length?l[0].mapPoint:
null,f=l.map(function(a){return a.graphic}),[2,{clientGraphics:f,queryArea:k,location:k||h}]}})})};k.prototype._getFetchPopupLayerViews=function(){var a=this,b=[];this.allLayerViews.forEach(function(d){a._isValidPopupLayerView(d)&&b.push(d)});n.isSome(this.graphicsView)&&this._isValidPopupLayerView(this.graphicsView)&&b.push(this.graphicsView);return b.reverse()};k.prototype._isValidPopupLayerView=function(a){return n.isSome(a)&&(!("layer"in a)||!a.suspended)&&"fetchPopupFeatures"in a};k.prototype._graphicsPerFetchPopupLayerView=
function(a,b){var d=[],c=new Map;b=b.map(function(a){var b=[];"layer"in a?c.set(a.layer,b):c.set(a.graphics,b);return{layerView:a,graphics:b}});for(var k=0;k<a.length;k++){var e=a[k],l=c.get(e.layer)||null;l?l.push(e):d.push(e)}return{layerViewsAndGraphics:b,clientOnlyGraphics:d}};return k=m([b.subclass("esri.views.PopupView")],k)}(b.declared(d))}})},"esri/views/2d/AnimationManager":function(){define("require exports ../../core/tsSupport/decorateHelper ../../core/tsSupport/declareExtendsHelper ../../geometry ../../Viewpoint ../../core/Accessor ../../core/scheduling ../../core/accessorSupport/decorators ../ViewAnimation ./unitBezier ./viewpointUtils".split(" "),
function(r,g,p,f,m,c,e,h,n,a,b,d){Object.defineProperty(g,"__esModule",{value:!0});var k=function(){function a(a,d,c,k){var e=a.targetGeometry,l=d.targetGeometry;k?"string"===typeof k&&(k=b.parse(k)||b.easingFunctions.ease):k=b.easingFunctions.ease;this.easing=k;this.duration=c;this.sCenterX=e.x;this.sCenterY=e.y;this.sScale=a.scale;this.sRotation=a.rotation;this.tCenterX=l.x;this.tCenterY=l.y;this.tScale=d.scale;this.tRotation=d.rotation;this.dCenterX=this.tCenterX-this.sCenterX;this.dCenterY=this.tCenterY-
this.sCenterY;this.dScale=this.tScale-this.sScale;this.dRotation=this.tRotation-this.sRotation;180<this.dRotation?this.dRotation-=360:-180>this.dRotation&&(this.dRotation+=360)}a.prototype.applyRatio=function(a,b){var d=this.easing(b),c,k;1<=b?(b=this.tCenterX,c=this.tCenterY,k=this.tRotation,d=this.tScale):(b=this.sCenterX+d*this.dCenterX,c=this.sCenterY+d*this.dCenterY,k=this.sRotation+d*this.dRotation,d=this.sScale+d*this.dScale);a.targetGeometry.x=b;a.targetGeometry.y=c;a.scale=d;a.rotation=k};
return a}();r=function(e){function l(a){a=e.call(this,a)||this;a.duration=200;a.transition=null;a.easing=b.easingFunctions.ease;a.view=null;a.viewpoint=null;a.viewpoint=new c({targetGeometry:new m.Point,scale:0,rotation:0});a._updateTask=h.addFrameTask({postRender:a._postRender.bind(a)});a._updateTask.pause();return a}f(l,e);l.prototype.destroy=function(){this._updateTask.remove();this._updateTask=null};l.prototype.animate=function(a,b,c){var e=this;this.stop();d.copy(this.viewpoint,b);this.transition=
new k(this.viewpoint,a.target,c&&c.duration||this.duration,c&&c.easing||this.easing);b=function(){e.animation===a&&e._updateTask&&("finished"===a.state&&(e.transition.applyRatio(e.viewpoint,1),e.view.state&&(e.view.state.viewpoint=e.viewpoint.clone())),e.animation=null,e.updateFunction=null)};a.when(b,b);this._startTime=h.now();this._updateTask.resume();return this.animation=a};l.prototype.animateContinous=function(b,d){var c=this;this.stop();this.updateFunction=d;this.viewpoint=b;var k=new a({target:b.clone()});
b=function(){c.animation===k&&c._updateTask&&(c.animation=null,c.updateFunction=null)};k.when(b,b);this._startTime=h.now();this._updateTask.resume();return this.animation=k};l.prototype.stop=function(){this.animation&&(this.animation.stop(),this.updateFunction=this.animation=null)};l.prototype._postRender=function(b){var d=this.animation;d&&d.state!==a.State.STOPPED?(this.updateFunction?this.updateFunction(this.viewpoint,b.deltaTime):(b=(h.now()-this._startTime)/this.transition.duration,d=1<=b,this.transition.applyRatio(this.viewpoint,
b),d&&this.animation.finish()),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())):this._updateTask.pause()};p([n.property()],l.prototype,"animation",void 0);p([n.property()],l.prototype,"duration",void 0);p([n.property()],l.prototype,"transition",void 0);p([n.property()],l.prototype,"easing",void 0);p([n.property()],l.prototype,"view",void 0);p([n.property()],l.prototype,"viewpoint",void 0);return l=p([n.subclass("esri.views.2d.AnimationManager")],l)}(n.declared(e));g.default=r})},
"esri/views/2d/unitBezier":function(){define(["require","exports"],function(r,g){function p(f,c,e,h){function n(c,k){var e,l,h,f;h=c;for(l=0;8>l;l++){f=((d*h+b)*h+a)*h-c;if(Math.abs(f)<k)return h;e=(3*d*h+2*b)*h+a;if(1E-6>Math.abs(e))break;h-=f/e}e=0;l=1;h=c;if(h<e)return e;if(h>l)return l;for(;e<l;){f=((d*h+b)*h+a)*h;if(Math.abs(f-c)<k)break;c>f?e=h:l=h;h=.5*(l-e)+e}return h}var a=3*f,b=3*(e-f)-a,d=1-a-b,k=3*c,l=3*(h-c)-k,q=1-k-l;return function(a,b){void 0===b&&(b=1E-6);a=n(a,b);return((q*a+l)*
a+k)*a}}Object.defineProperty(g,"__esModule",{value:!0});g.unitBezier=p;var f=/^cubic-bezier\((.*)\)/;g.easingFunctions={};g.parse=function(m){var c=g.easingFunctions[m]||null;!c&&(m=f.exec(m))&&(m=m[1].split(",").map(function(c){return parseFloat(c.trim())}),4!==m.length||m.some(function(c){return isNaN(c)})||(c=p.apply(p,m)));return c};g.easingFunctions.ease=p(.25,.1,.25,1);g.easingFunctions.linear=p(0,0,1,1);g.easingFunctions.easeIn=g.easingFunctions["ease-in"]=p(.42,0,1,1);g.easingFunctions.easeOut=
g.easingFunctions["ease-out"]=p(0,0,.58,1);g.easingFunctions.easeInOut=g.easingFunctions["ease-in-out"]=p(.42,0,.58,1)})},"esri/views/2d/viewpointUtils":function(){define("require exports ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../Viewpoint ../../core/Collection ../../core/maybe ../../core/promiseUtils ../../core/unitUtils ../../core/wgs84Constants ../../core/libs/gl-matrix-2/common ../../core/libs/gl-matrix-2/mat2d ../../core/libs/gl-matrix-2/mat2df64 ../../core/libs/gl-matrix-2/vec2 ../../core/libs/gl-matrix-2/vec2f64 ../../geometry/Extent ../../geometry/Geometry ../../geometry/Point ../../geometry/SpatialReference ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ../../geometry/support/webMercatorUtils".split(" "),
function(r,g,p,f,m,c,e,h,n,a,b,d,k,l,q,A,u,t,x,y,z,v){function w(a,d,c,k){return k&&c&&!k.equals(c)&&z.canProject(k,c)&&k.isWebMercator?(k.isWebMercator?(c=d[1],89.99999<c?c=89.99999:-89.99999>c&&(c=-89.99999),c=Math.sin(b.common.toRadian(c)),a=l.vec2.set(a,b.common.toRadian(d[0])*I,.5*I*Math.log((1+c)/(1-c)))):(c=b.common.toDegree(d[0]/I),a=l.vec2.set(a,c-360*Math.floor((c+180)/360),b.common.toDegree(.5*Math.PI-2*Math.atan(Math.exp(-1*d[1]/I))))),a):l.vec2.copy(a,d)}function D(a){return a.wkid?a:
a.spatialReference||x.WGS84}function C(a,b){return b.type?l.vec2.set(a,b.x,b.y):l.vec2.copy(a,b)}function B(a,b){return Math.max(a.width/b[0],a.height/b[1])*P(a.spatialReference)}function J(a,b,d,k){return f(this,void 0,void 0,function(){var l,f,q,n,g,m,x,v,w,y,D,C,r,Q,B,T,E,V,U,H,F,G,L,I,O,K,N,P;return p(this,function(M){switch(M.label){case 0:if(!a||Array.isArray(a)&&!a.length)return[2,null];c.isCollection(a)&&(a=a.toArray());if(!Array.isArray(a)||!a.length||"object"!==typeof a[0])return[3,7];f=
a.every(function(a){return"attributes"in a});q=a.some(function(a){return!a.geometry});n=a;if(!(f&&q&&b&&b.allLayerViews))return[3,2];g=new Map;m=0;for(x=a;m<x.length;m++)v=x[m],w=v.layer,y=g.get(w)||[],D=v.attributes[w.objectIdField],null!=D&&y.push(D),g.set(w,y);C=[];g.forEach(function(a,d){var c=b.allLayerViews.find(function(a){return a.layer.id===d.id});if("queryFeatures"in c){var k=d.createQuery();k.objectIds=a;k.returnGeometry=!0;C.push(c.queryFeatures(k))}});return[4,h.all(C)];case 1:r=M.sent();
Q=[];B=0;for(T=r;B<T.length;B++)if((E=T[B])&&E.features&&E.features.length)for(V=0,U=E.features;V<U.length;V++)v=U[V],e.isSome(v.geometry)&&Q.push(v.geometry);n=Q;M.label=2;case 2:H=0,F=n,M.label=3;case 3:if(!(H<F.length))return[3,6];G=F[H];return[4,J(G,b,d,k)];case 4:k=M.sent(),M.label=5;case 5:return H++,[3,3];case 6:return[2,k];case 7:if(!Array.isArray(a)||2!==a.length||"number"!==typeof a[0]||"number"!==typeof a[1])return[3,8];l=new t(a);return[3,12];case 8:if(!(a instanceof u))return[3,9];l=
a;return[3,12];case 9:if(!("geometry"in a))return[3,12];if(!a.geometry)return[3,10];l=a.geometry;return[3,12];case 10:if(!a.layer)return[3,12];L=a.layer;I=b.allLayerViews.find(function(a){return a.layer.id===L.id});if(!("queryFeatures"in I))return[3,12];O=L.createQuery();O.objectIds=[a.attributes[L.objectIdField]];O.returnGeometry=!0;return[4,I.queryFeatures(O)];case 11:K=M.sent(),l=e.get(K,"features",0,"geometry"),M.label=12;case 12:if(e.isNone(l))return[2,null];N="point"===l.type?new A({xmin:l.x,
ymin:l.y,xmax:l.x,ymax:l.y,spatialReference:l.spatialReference}):l.extent;if(!N)return[2,null];P=z.canProject(N,d);if(!N.spatialReference.equals(d)&&P)N=z.project(N,d);else if(!P)return[2,null];k=k?k.union(N):N.clone();return[2,k]}})})}function E(a){if(a&&(!Array.isArray(a)||"number"!==typeof a[0])&&("object"===typeof a||Array.isArray(a)&&"object"===typeof a[0])){if("layer"in a&&a.layer&&a.layer.minScale&&a.layer.maxScale){var b=a.layer;return{min:b.minScale,max:b.maxScale}}if(Array.isArray(a)&&a.length&&
a.every(function(a){return"layer"in a})){for(var d=0,c=0,k=0;k<a.length;k++)(b=a[k].layer)&&b.minScale&&b.maxScale&&(d=b.minScale<d?b.minScale:d,c=b.maxScale>c?b.maxScale:c);return d&&c?{min:d,max:c}:null}}}function F(a,b){return f(this,void 0,void 0,function(){var d,c,k,e,l,h,f,n,g,u,x,y,r,Q,T,H,F,G,L,I;return p(this,function(M){switch(M.label){case 0:if(!a||!b)return[2,new m({targetGeometry:new t,scale:0,rotation:0})];d=b.spatialReference;c=b.constraints;k=b.padding;e=b.viewpoint;l=b.size;h=k?l[0]-
k.left-k.right:l[0];f=k?l[1]-k.top-k.bottom:l[1];n=[h,f];g=null;a instanceof m?g=a:a.viewpoint?g=a.viewpoint:a.target&&"esri.Viewpoint"===a.target.declaredClass&&(g=a.target);u=null;if(!g||!g.targetGeometry)return[3,1];u=g.targetGeometry;return[3,10];case 1:if(!(a instanceof A))return[3,2];u=a;return[3,10];case 2:return a||a&&("center"in a||"extent"in a||"target"in a)?[4,J(a.center,b,d)]:[3,10];case 3:return(r=M.sent())?[3,5]:[4,J(a.extent,b,d)];case 4:r=M.sent(),M.label=5;case 5:return(y=r)?[3,7]:
[4,J(a.target,b,d)];case 6:y=M.sent(),M.label=7;case 7:return(x=y)?[3,9]:[4,J(a,b,d)];case 8:x=M.sent(),M.label=9;case 9:u=x,M.label=10;case 10:!u&&e&&e.targetGeometry?u=e.targetGeometry:!u&&b.extent&&(u=b.extent);Q=D(u);d||(d=D(b.spatialReference||b.extent||u));if(!v.canProject(u,d)&&Q&&!Q.equals(d))return[2,null];T=C(q.vec2f64.create(),u.center?u.center:u);H=new t(w(T,T,Q,d),d);F=null;F=g&&g.targetGeometry&&"point"===g.targetGeometry.type?g.scale:a.hasOwnProperty("scale")&&a.scale?a.scale:a.hasOwnProperty("zoom")&&
-1!==a.zoom&&c&&c.effectiveLODs?c.zoomToScale(a.zoom):Array.isArray(u)||"point"===u.type||"extent"===u.type&&0===u.width&&0===u.height?b.extent&&z.canProject(b.extent,d)?B(z.project(b.extent,d),n):b.extent?B(b.extent,n):e.scale:z.canProject(u.extent,d)?B(z.project(u.extent,d),n):B(u.extent,n);if(G=E(a))G.min&&G.min>F?F=G.min:G.max&&G.max<F&&(F=G.max);L=0;g?L=g.rotation:a.hasOwnProperty("rotation")?L=a.rotation:e&&(L=e.rotation);I=new m({targetGeometry:H,scale:F,rotation:L});c&&(I=c.fit(I),c.rotationEnabled||
(I.rotation=L));return[2,I]}})})}function H(a,b){var d=a.targetGeometry,c=b.targetGeometry;d.x=c.x;d.y=c.y;d.spatialReference=c.spatialReference;a.scale=b.scale;a.rotation=b.rotation;return a}function G(a,b,d){return d?l.vec2.set(a,.5*(b[0]-d.right+d.left),.5*(b[1]-d.bottom+d.top)):l.vec2.scale(a,b,.5)}function L(a,b,c,k){g.getTransform(a,b,c,k);return d.mat2d.invert(a,a)}function R(a,b,d){var c=N(b);b=Math.abs(Math.cos(c));c=Math.abs(Math.sin(c));return l.vec2.set(a,Math.round(d[1]*c+d[0]*b),Math.round(d[1]*
b+d[0]*c))}function O(a){var b=a.scale;a=a.targetGeometry.spatialReference;a=y.isValid(a)?1/(39.37*n.getMetersPerUnitForSR(a)*96):1;return b*a}function N(a){return b.common.toRadian(a.rotation)||0}function P(a){return y.isValid(a)?39.37*n.getMetersPerUnitForSR(a)*96:1}function S(a){return a.isWrappable?(a=y.getInfo(a),a.valid[1]-a.valid[0]):0}Object.defineProperty(g,"__esModule",{value:!0});var I=a.wgs84Radius,K=180/Math.PI;g.extentToScale=B;g.create=F;g.copy=H;g.getAnchor=G;g.getExtent=function(){var a=
q.vec2f64.create();return function(b,d,c){var k=d.targetGeometry;C(a,k);d=.5*O(d);b.xmin=a[0]-d*c[0];b.ymin=a[1]-d*c[1];b.xmax=a[0]+d*c[0];b.ymax=a[1]+d*c[1];b.spatialReference=k.spatialReference;return b}}();g.setExtent=function(a,b,d,c,k){g.centerAt(a,b,d.center);a.scale=B(d,c);k&&k.constraints&&k.constraints.constrain(a);return a};g.getOuterExtent=function(){var a=q.vec2f64.create(),b=q.vec2f64.create();return function(d,c,k){C(a,c.targetGeometry);R(b,c,k);k=.5*O(c);d.set({xmin:a[0]-k*b[0],ymin:a[1]-
k*b[1],xmax:a[0]+k*b[0],ymax:a[1]+k*b[1],spatialReference:c.targetGeometry.spatialReference});return d}}();g.getOuterSize=R;g.getPaddingScreenTranslation=function(){var a=q.vec2f64.create();return function(b,d,c){return l.vec2.sub(b,l.vec2.scale(b,d,.5),G(a,d,c))}}();g.getPaddingMapTranslation=function(){var a=k.mat2df64.create(),b=q.vec2f64.create();return function(c,k,e,h){var f=O(k);k=N(k);l.vec2.set(b,f,f);d.mat2d.fromScaling(a,b);d.mat2d.rotate(a,a,k);d.mat2d.translate(a,a,g.getPaddingScreenTranslation(b,
e,h));d.mat2d.translate(a,a,[0,h.top-h.bottom]);return l.vec2.set(c,a[4],a[5])}}();g.getResolution=O;g.getResolutionToScaleFactor=P;g.getMatrix=function(){var a=q.vec2f64.create(),b=q.vec2f64.create(),c=q.vec2f64.create();return function(k,e,h,f,q,n){l.vec2.negate(a,e);l.vec2.scale(b,h,.5*n);l.vec2.set(c,1/f*n,-1/f*n);d.mat2d.identity(k);d.mat2d.translate(k,k,b);q&&d.mat2d.rotate(k,k,q);d.mat2d.scale(k,k,c);d.mat2d.translate(k,k,a);return k}}();g.getTransform=function(){var a=q.vec2f64.create();return function(b,
d,c,k){var e=O(d),l=N(d);C(a,d.targetGeometry);return g.getMatrix(b,a,c,e,l,k)}}();g.getTransformNoRotation=function(){var a=q.vec2f64.create();return function(b,d,c,k){var e=O(d);C(a,d.targetGeometry);return g.getMatrix(b,a,c,e,0,k)}}();g.getWorldWidth=S;g.getWorldScreenWidth=function(a,b){return Math.round(S(a)/b)};g.createAsync=function(a,b){return F(a,b)};g.angleBetween=function(){var a=q.vec2f64.create(),b=q.vec2f64.create(),d=[0,0,0];return function(c,k,e){l.vec2.subtract(a,c,k);l.vec2.normalize(a,
a);l.vec2.subtract(b,c,e);l.vec2.normalize(b,b);l.vec2.cross(d,a,b);c=Math.acos(l.vec2.dot(a,b)/(l.vec2.length(a)*l.vec2.length(b)))*K;0>d[2]&&(c=-c);isNaN(c)&&(c=0);return c}}();g.addPadding=function(){var a=q.vec2f64.create();return function(b,d,c,k){var e=b.targetGeometry;H(b,d);g.getPaddingMapTranslation(a,d,c,k);e.x+=a[0];e.y+=a[1];return b}}();g.removePadding=function(){var a=q.vec2f64.create();return function(b,d,c,k){var e=b.targetGeometry;H(b,d);g.getPaddingMapTranslation(a,d,c,k);e.x-=a[0];
e.y-=a[1];return b}}();g.centerAt=function(){var a=q.vec2f64.create();return function(b,d,c){H(b,d);d=b.targetGeometry;var k=D(c),e=D(d);C(a,c);w(a,a,k,e);d.x=a[0];d.y=a[1];return b}}();g.pixelSize=function(a){return O(a)};g.resize=function(){var a=q.vec2f64.create();return function(b,d,c,k,e){e||(e="center");l.vec2.sub(a,c,k);l.vec2.scale(a,a,.5);c=a[0];k=a[1];switch(e){case "center":l.vec2.set(a,0,0);break;case "left":l.vec2.set(a,-c,0);break;case "top":l.vec2.set(a,0,k);break;case "right":l.vec2.set(a,
c,0);break;case "bottom":l.vec2.set(a,0,-k);break;case "top-left":l.vec2.set(a,-c,k);break;case "bottom-left":l.vec2.set(a,-c,-k);break;case "top-right":l.vec2.set(a,c,k);break;case "bottom-right":l.vec2.set(a,c,-k)}g.translateBy(b,d,a);return b}}();g.rotateBy=function(a,b,d){H(a,b);a.rotation+=d;return a};g.rotateTo=function(a,b,d){H(a,b);a.rotation=d;return a};g.scaleBy=function(){var a=q.vec2f64.create();return function(b,d,c,k,e){H(b,d);isNaN(c)||0===c||(g.toMap(a,k,d,e),b.scale=d.scale*c,g.toScreen(a,
a,b,e),g.translateBy(b,b,l.vec2.set(a,a[0]-k[0],k[1]-a[1])));return b}}();g.scaleTo=function(a,b,d){H(a,b);a.scale=d;return a};g.scaleAndRotateBy=function(){var a=q.vec2f64.create();return function(b,d,c,k,e,h){H(b,d);isNaN(c)||0===c||(g.toMap(a,e,d,h),b.scale=d.scale*c,b.rotation+=k,g.toScreen(a,a,b,h),g.translateBy(b,b,l.vec2.set(a,a[0]-e[0],e[1]-a[1])));return b}}();g.padAndScaleAndRotateBy=function(){var a=q.vec2f64.create(),b=q.vec2f64.create();return function(d,c,k,e,h,f,q){g.getPaddingScreenTranslation(b,
f,q);l.vec2.add(a,h,b);return e?g.scaleAndRotateBy(d,c,k,e,a,f):g.scaleBy(d,c,k,a,f)}}();g.toMap=function(){var a=k.mat2df64.create();return function(b,d,c,k){return l.vec2.transformMat2d(b,d,L(a,c,k,1))}}();g.toScreen=function(){var a=k.mat2df64.create();return function(b,d,c,k){return l.vec2.transformMat2d(b,d,g.getTransform(a,c,k,1))}}();g.translateBy=function(){var a=q.vec2f64.create(),b=k.mat2df64.create();return function(c,k,e){H(c,k);var h=O(k),f=c.targetGeometry;d.mat2d.fromRotation(b,N(k));
d.mat2d.scale(b,b,q.vec2f64.fromValues(h,h));l.vec2.transformMat2d(a,e,b);f.x+=a[0];f.y+=a[1];return c}}()})},"esri/core/libs/gl-matrix-2/common":function(){define(["require","exports","./math/common"],function(r,g,p){Object.defineProperty(g,"__esModule",{value:!0});g.common=p})},"esri/core/libs/gl-matrix-2/mat2d":function(){define(["require","exports","./math/mat2d"],function(r,g,p){Object.defineProperty(g,"__esModule",{value:!0});g.mat2d=p})},"esri/core/libs/gl-matrix-2/math/mat2d":function(){define(["require",
"exports","./common"],function(r,g,p){function f(c,e,h){var f=e[0],a=e[1],b=e[2],d=e[3],k=e[4];e=e[5];var l=h[0],q=h[1],g=h[2],m=h[3],t=h[4];h=h[5];c[0]=f*l+b*q;c[1]=a*l+d*q;c[2]=f*g+b*m;c[3]=a*g+d*m;c[4]=f*t+b*h+k;c[5]=a*t+d*h+e;return c}function m(c,e,h){c[0]=e[0]-h[0];c[1]=e[1]-h[1];c[2]=e[2]-h[2];c[3]=e[3]-h[3];c[4]=e[4]-h[4];c[5]=e[5]-h[5];return c}Object.defineProperty(g,"__esModule",{value:!0});g.copy=function(c,e){c[0]=e[0];c[1]=e[1];c[2]=e[2];c[3]=e[3];c[4]=e[4];c[5]=e[5];return c};g.identity=
function(c){c[0]=1;c[1]=0;c[2]=0;c[3]=1;c[4]=0;c[5]=0;return c};g.set=function(c,e,h,f,a,b,d){c[0]=e;c[1]=h;c[2]=f;c[3]=a;c[4]=b;c[5]=d;return c};g.invert=function(c,e){var h=e[0],f=e[1],a=e[2],b=e[3],d=e[4];e=e[5];var k=h*b-f*a;if(!k)return null;k=1/k;c[0]=b*k;c[1]=-f*k;c[2]=-a*k;c[3]=h*k;c[4]=(a*e-b*d)*k;c[5]=(f*d-h*e)*k;return c};g.determinant=function(c){return c[0]*c[3]-c[1]*c[2]};g.multiply=f;g.rotate=function(c,e,h){var f=e[0],a=e[1],b=e[2],d=e[3],k=e[4];e=e[5];var l=Math.sin(h);h=Math.cos(h);
c[0]=f*h+b*l;c[1]=a*h+d*l;c[2]=f*-l+b*h;c[3]=a*-l+d*h;c[4]=k;c[5]=e;return c};g.scale=function(c,e,h){var f=e[1],a=e[2],b=e[3],d=e[4],k=e[5],l=h[0];h=h[1];c[0]=e[0]*l;c[1]=f*l;c[2]=a*h;c[3]=b*h;c[4]=d;c[5]=k;return c};g.translate=function(c,e,h){var f=e[0],a=e[1],b=e[2],d=e[3],k=e[4];e=e[5];var l=h[0];h=h[1];c[0]=f;c[1]=a;c[2]=b;c[3]=d;c[4]=f*l+b*h+k;c[5]=a*l+d*h+e;return c};g.fromRotation=function(c,e){var h=Math.sin(e);e=Math.cos(e);c[0]=e;c[1]=h;c[2]=-h;c[3]=e;c[4]=0;c[5]=0;return c};g.fromScaling=
function(c,e){c[0]=e[0];c[1]=0;c[2]=0;c[3]=e[1];c[4]=0;c[5]=0;return c};g.fromTranslation=function(c,e){c[0]=1;c[1]=0;c[2]=0;c[3]=1;c[4]=e[0];c[5]=e[1];return c};g.str=function(c){return"mat2d("+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+", "+c[4]+", "+c[5]+")"};g.frob=function(c){return Math.sqrt(Math.pow(c[0],2)+Math.pow(c[1],2)+Math.pow(c[2],2)+Math.pow(c[3],2)+Math.pow(c[4],2)+Math.pow(c[5],2)+1)};g.add=function(c,e,h){c[0]=e[0]+h[0];c[1]=e[1]+h[1];c[2]=e[2]+h[2];c[3]=e[3]+h[3];c[4]=e[4]+h[4];c[5]=e[5]+
h[5];return c};g.subtract=m;g.multiplyScalar=function(c,e,h){c[0]=e[0]*h;c[1]=e[1]*h;c[2]=e[2]*h;c[3]=e[3]*h;c[4]=e[4]*h;c[5]=e[5]*h;return c};g.multiplyScalarAndAdd=function(c,e,h,f){c[0]=e[0]+h[0]*f;c[1]=e[1]+h[1]*f;c[2]=e[2]+h[2]*f;c[3]=e[3]+h[3]*f;c[4]=e[4]+h[4]*f;c[5]=e[5]+h[5]*f;return c};g.exactEquals=function(c,e){return c[0]===e[0]&&c[1]===e[1]&&c[2]===e[2]&&c[3]===e[3]&&c[4]===e[4]&&c[5]===e[5]};g.equals=function(c,e){var h=c[0],f=c[1],a=c[2],b=c[3],d=c[4];c=c[5];var k=e[0],l=e[1],q=e[2],
g=e[3],m=e[4];e=e[5];return Math.abs(h-k)<=p.EPSILON*Math.max(1,Math.abs(h),Math.abs(k))&&Math.abs(f-l)<=p.EPSILON*Math.max(1,Math.abs(f),Math.abs(l))&&Math.abs(a-q)<=p.EPSILON*Math.max(1,Math.abs(a),Math.abs(q))&&Math.abs(b-g)<=p.EPSILON*Math.max(1,Math.abs(b),Math.abs(g))&&Math.abs(d-m)<=p.EPSILON*Math.max(1,Math.abs(d),Math.abs(m))&&Math.abs(c-e)<=p.EPSILON*Math.max(1,Math.abs(c),Math.abs(e))};g.mul=f;g.sub=m})},"esri/core/libs/gl-matrix-2/mat2df64":function(){define(["require","exports","./factories/mat2df64"],
function(r,g,p){Object.defineProperty(g,"__esModule",{value:!0});g.mat2df64=p})},"esri/core/libs/gl-matrix-2/factories/mat2df64":function(){define(["require","exports"],function(r,g){Object.defineProperty(g,"__esModule",{value:!0});g.create=function(){return[1,0,0,1,0,0]};g.clone=function(g){return[g[0],g[1],g[2],g[3],g[4],g[5]]};g.fromValues=function(g,f,m,c,e,h){return[g,f,m,c,e,h]};g.createView=function(g,f){return new Float64Array(g,f,6)}})},"esri/core/libs/gl-matrix-2/vec2":function(){define(["require",
"exports","./math/vec2"],function(r,g,p){Object.defineProperty(g,"__esModule",{value:!0});g.vec2=p})},"esri/core/libs/gl-matrix-2/math/vec2":function(){define(["require","exports","./common"],function(r,g,p){function f(a,d,c){a[0]=d[0]-c[0];a[1]=d[1]-c[1];return a}function m(a,d,c){a[0]=d[0]*c[0];a[1]=d[1]*c[1];return a}function c(a,d,c){a[0]=d[0]/c[0];a[1]=d[1]/c[1];return a}function e(a,d){var b=d[0]-a[0];a=d[1]-a[1];return Math.sqrt(b*b+a*a)}function h(a,d){var b=d[0]-a[0];a=d[1]-a[1];return b*
b+a*a}function n(a){var b=a[0];a=a[1];return Math.sqrt(b*b+a*a)}function a(a){var b=a[0];a=a[1];return b*b+a*a}Object.defineProperty(g,"__esModule",{value:!0});g.copy=function(a,d){a[0]=d[0];a[1]=d[1];return a};g.set=function(a,d,c){a[0]=d;a[1]=c;return a};g.add=function(a,d,c){a[0]=d[0]+c[0];a[1]=d[1]+c[1];return a};g.subtract=f;g.multiply=m;g.divide=c;g.ceil=function(a,d){a[0]=Math.ceil(d[0]);a[1]=Math.ceil(d[1]);return a};g.floor=function(a,d){a[0]=Math.floor(d[0]);a[1]=Math.floor(d[1]);return a};
g.min=function(a,d,c){a[0]=Math.min(d[0],c[0]);a[1]=Math.min(d[1],c[1]);return a};g.max=function(a,d,c){a[0]=Math.max(d[0],c[0]);a[1]=Math.max(d[1],c[1]);return a};g.round=function(a,d){a[0]=Math.round(d[0]);a[1]=Math.round(d[1]);return a};g.scale=function(a,d,c){a[0]=d[0]*c;a[1]=d[1]*c;return a};g.scaleAndAdd=function(a,d,c,e){a[0]=d[0]+c[0]*e;a[1]=d[1]+c[1]*e;return a};g.distance=e;g.squaredDistance=h;g.length=n;g.squaredLength=a;g.negate=function(a,d){a[0]=-d[0];a[1]=-d[1];return a};g.inverse=
function(a,d){a[0]=1/d[0];a[1]=1/d[1];return a};g.normalize=function(a,d){var b=d[0],c=d[1],b=b*b+c*c;0<b&&(b=1/Math.sqrt(b),a[0]=d[0]*b,a[1]=d[1]*b);return a};g.dot=function(a,d){return a[0]*d[0]+a[1]*d[1]};g.cross=function(a,d,c){d=d[0]*c[1]-d[1]*c[0];a[0]=a[1]=0;a[2]=d;return a};g.lerp=function(a,d,c,e){var b=d[0];d=d[1];a[0]=b+e*(c[0]-b);a[1]=d+e*(c[1]-d);return a};g.random=function(a,d){d=d||1;var b=2*p.RANDOM()*Math.PI;a[0]=Math.cos(b)*d;a[1]=Math.sin(b)*d;return a};g.transformMat2=function(a,
d,c){var b=d[0];d=d[1];a[0]=c[0]*b+c[2]*d;a[1]=c[1]*b+c[3]*d;return a};g.transformMat2d=function(a,d,c){var b=d[0];d=d[1];a[0]=c[0]*b+c[2]*d+c[4];a[1]=c[1]*b+c[3]*d+c[5];return a};g.transformMat3=function(a,d,c){var b=d[0];d=d[1];a[0]=c[0]*b+c[3]*d+c[6];a[1]=c[1]*b+c[4]*d+c[7];return a};g.transformMat4=function(a,d,c){var b=d[0];d=d[1];a[0]=c[0]*b+c[4]*d+c[12];a[1]=c[1]*b+c[5]*d+c[13];return a};g.rotate=function(a,d,c,e){var b=d[0]-c[0];d=d[1]-c[1];var k=Math.sin(e);e=Math.cos(e);a[0]=b*e-d*k+c[0];
a[1]=b*k+d*e+c[1];return a};g.angle=function(a,d){var b=a[0];a=a[1];var c=d[0];d=d[1];var e=b*b+a*a;0<e&&(e=1/Math.sqrt(e));var h=c*c+d*d;0<h&&(h=1/Math.sqrt(h));b=(b*c+a*d)*e*h;return 1<b?0:-1>b?Math.PI:Math.acos(b)};g.str=function(a){return"vec2("+a[0]+", "+a[1]+")"};g.exactEquals=function(a,d){return a[0]===d[0]&&a[1]===d[1]};g.equals=function(a,d){var b=a[0];a=a[1];var c=d[0];d=d[1];return Math.abs(b-c)<=p.EPSILON*Math.max(1,Math.abs(b),Math.abs(c))&&Math.abs(a-d)<=p.EPSILON*Math.max(1,Math.abs(a),
Math.abs(d))};g.len=n;g.sub=f;g.mul=m;g.div=c;g.dist=e;g.sqrDist=h;g.sqrLen=a})},"esri/core/libs/gl-matrix-2/vec2f64":function(){define(["require","exports","./factories/vec2f64"],function(r,g,p){Object.defineProperty(g,"__esModule",{value:!0});g.vec2f64=p})},"esri/core/libs/gl-matrix-2/factories/vec2f64":function(){define(["require","exports"],function(r,g){Object.defineProperty(g,"__esModule",{value:!0});g.create=function(){return[0,0]};g.clone=function(g){return[g[0],g[1]]};g.fromValues=function(g,
f){return[g,f]};g.fromArray=function(g){for(var f=[0,0],m=Math.min(2,g.length),c=0;c<m;++c)f[c]=g[c];return f};g.createView=function(g,f){return new Float64Array(g,f,2)};g.zeros=function(){return[0,0]};g.ones=function(){return[1,1]};g.unitX=function(){return[1,0]};g.unitY=function(){return[0,1]};g.ZEROS=[0,0];g.ONES=[1,1];g.UNIT_X=[1,0];g.UNIT_Y=[0,1]})},"esri/views/2d/FrameTask":function(){define(["require","exports","../../core/scheduling"],function(r,g,p){Object.defineProperty(g,"__esModule",{value:!0});
r=function(){function f(f){var c=this;this.view=f;this._frameTaskHandle=null;this.updateEnabled=this.stationary=!0;this.animationInProgress=!1;this.prepare=function(){c._updateParameters.state=c.view.state;c._updateParameters.stationary=c.view.stationary;c._updateParameters.pixelRatio=window.devicePixelRatio;c._updateParameters.renderingOptions=c.view.renderingOptions};this.update=function(){if(c.updateEnabled){var e=c.view,h=e.labelManager,f=c.graphicsView,a=e.allLayerViews.toArray().filter(function(a){return!("layerViews"in
a)&&a.isFulfilled()}),b=a.length,d=e.state,k=0;for(;k<a.length;k++)if(e=a[k],e.attached){var l=e.lastUpdateId;if(null==l||!c.stationary&&!e.moving)e.moving=!0,e.moveStart();l!==d.id&&e.viewChange();c.stationary&&e.moving&&(e.moving=!1,e.moveEnd());e.lastUpdateId=d.id}h&&h.lastUpdateId!==d.id&&(h.viewChange(),h.lastUpdateId=d.id);f&&f.lastUpdateId!==d.id&&(f.viewChange(),f.lastUpdateId=d.id);h=c._layerViewsTrash;for(f=0;f<h.length;f++)e=h[f],c._detachLayerView(e);for(f=h.length=0;f<b;f++)e=a[f],e.isFulfilled()&&
!e.attached&&c._attachLayerView(e);a=c._updateParameters;b=c._layerViewsToUpdate;e=b.slice();f=b.length=0;for(d=e;f<d.length;f++)e=d[f],"layerViews"in e?b.push(e):e.processUpdate(a);b=c._updatablesToUpdate;e=b.slice();for(b=b.length=0;b<e.length;b++)e[b].processUpdate(a);c.animationInProgress||0!==c._layerViewsToUpdate.length||0!==c._updatablesToUpdate.length||0!==h.length||c._frameTaskHandle.pause()}}}f.prototype.destroy=function(){this.stop()};f.prototype.start=function(){var f=this;this.stationary=
this.view.stationary;this._updateParameters={state:this.view.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:this.view.renderingOptions};this._layerViewsTrash=[];this._layerViewsToUpdate=[];this._updatablesToUpdate=[];this._allLayerViewsChangeHandle=this.view.allLayerViews.on("change",function(c){Array.prototype.push.apply(f._layerViewsTrash,c.removed);f.requestFrame()});this._stationaryHandle=this.view.watch("stationary",function(c){f.stationary=c;f.requestFrame()});
this._frameTaskHandle=p.addFrameTask(this)};f.prototype.stop=function(){var f=this;this._frameTaskHandle&&(this.view.allLayerViews.forEach(function(c){"layerViews"in c||f._detachLayerView(c)}),this._stationaryHandle.remove(),this._allLayerViewsChangeHandle.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._allLayerViewsChangeHandle=this._frameTaskHandle=this._layerViewsTrash=this._layerViewsToUpdate=null,this.stationary=!0,this.animationInProgress=!1)};f.prototype.requestLayerViewUpdate=
function(f){this._layerViewsToUpdate.push(f);this.requestFrame()};f.prototype.requestUpdate=function(f){this._updatablesToUpdate.push(f);this.requestFrame()};f.prototype.requestFrame=function(){this._frameTaskHandle&&this._frameTaskHandle.resume()};f.prototype._attachLayerView=function(f){f.attached||(f.attached=!0,f.attach(),this._updateParameters.stationary?f.moving=!1:(f.moving=!0,f.moveStart()))};f.prototype._detachLayerView=function(f){f.attached&&(f.detach(),f.attached=!1,f.moving=!1)};return f}();
g.default=r})},"esri/views/2d/layerViewModuleImportUtils":function(){define(["require","exports","../../core/Error","../../core/maybe","@dojo/framework/shim/Promise"],function(r,g,p,f){function m(){return Promise.all([new Promise(function(c,a){r(["../webgl"],c,a)}),new Promise(function(c,a){r(["./engine"],c,a)})])}Object.defineProperty(g,"__esModule",{value:!0});var c=function(){return m().then(function(){return new Promise(function(c,a){r(["./layers/TileLayerView2D"],c,a)})})},e=function(){return m().then(function(){return new Promise(function(c,
a){r(["./layers/FeatureLayerView2D"],c,a)})})},h={"base-dynamic":function(){return m().then(function(){return new Promise(function(c,a){r(["./layers/BaseDynamicLayerView2D"],c,a)})})},"base-tile":c,"bing-maps":c,csv:e,"geo-rss":function(){return m().then(function(){return new Promise(function(c,a){r(["./layers/GeoRSSLayerView2D"],c,a)})})},feature:e,geojson:e,graphics:function(){return m().then(function(){return new Promise(function(c,a){r(["./layers/GraphicsLayerView2D"],c,a)})})},group:function(){return m().then(function(){return new Promise(function(c,
a){r(["../layers/GroupLayerView"],c,a)})})},imagery:function(){return m().then(function(){return new Promise(function(c,a){r(["./layers/ImageryLayerView2D"],c,a)})})},"imagery-tile":function(){return m().then(function(){return new Promise(function(c,a){r(["./layers/TileImageryLayerView2D"],c,a)})})},kml:function(){return m().then(function(){return new Promise(function(c,a){r(["./layers/KMLLayerView2D"],c,a)})})},"map-image":function(){return m().then(function(){return new Promise(function(c,a){r(["./layers/MapImageLayerView2D"],
c,a)})})},"map-notes":function(){return m().then(function(){return new Promise(function(c,a){r(["./layers/MapNotesLayerView2D"],c,a)})})},"open-street-map":c,route:function(){return m().then(function(){return new Promise(function(c,a){r(["./layers/RouteLayerView2D"],c,a)})})},stream:function(){return m().then(function(){return new Promise(function(c,a){r(["./layers/StreamLayerView2D"],c,a)})})},tile:c,"vector-tile":function(){return m().then(function(){return new Promise(function(c,a){r(["./layers/VectorTileLayerView2D"],
c,a)})})},"web-tile":c,wms:function(){return m().then(function(){return new Promise(function(c,a){r(["./layers/WMSLayerView2D"],c,a)})})},wmts:function(){return m().then(function(){return new Promise(function(c,a){r(["./layers/WMTSLayerView2D"],c,a)})})},"base-elevation":null,"building-scene":null,elevation:null,"integrated-mesh":null,"point-cloud":null,scene:null,unknown:null,unsupported:null};g.layerView2DImporter={hasLayerViewModule:function(c){return f.isSome(h[c.type])},importLayerView:function(c){var a=
h[c.type];if(!f.isSome(a))throw c=c.declaredClass?c.declaredClass.slice(c.declaredClass.lastIndexOf(".")+1):"Unknown",a=c.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),new p(a+":view-not-supported",c+" is not supported in 2D");return a(c)}}})},"esri/views/2d/MapViewConstraints":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Evented ../../core/accessorSupport/decorators ../../layers/support/LOD ./constraints/RotationConstraint ./constraints/ZoomConstraint".split(" "),
function(r,g,p,f,m,c,e,h,n){return function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.lods=null;b.minScale=0;b.maxScale=0;b.minZoom=-1;b.maxZoom=-1;b.rotationEnabled=!0;b.snapToZoom=!0;return b}p(b,a);b.prototype.initialize=function(){this.watch("_zoom, _rotation",this.emit.bind(this,"update"),!0)};b.prototype.destroy=function(){this.view=null;this._set("_zoom",null);this._set("_rotation",null)};Object.defineProperty(b.prototype,"_rotation",{get:function(){return new h({rotationEnabled:this.rotationEnabled})},
enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"_defaultLODs",{get:function(){var a=this.get("view.defaultsFromMap.tileInfo"),b=this.get("view.spatialReference");return a&&b&&a.spatialReference.equals(b)?a.lods:null},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"_zoom",{get:function(){return new n({lods:this.lods||this._defaultLODs,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale,snapToZoom:this.snapToZoom})},enumerable:!0,
configurable:!0});b.prototype.canZoomInTo=function(a){var b=this.effectiveMaxScale;return 0===b||a>=b};b.prototype.canZoomOutTo=function(a){var b=this.effectiveMinScale;return 0===b||a<=b};b.prototype.constrain=function(a,b){this._zoom.constrain(a,b);this._rotation.constrain(a,b);return a};b.prototype.fit=function(a){return this._zoom.fit(a)};b.prototype.zoomToScale=function(a){return this._zoom.zoomToScale(a)};b.prototype.scaleToZoom=function(a){return this._zoom.scaleToZoom(a)};b.prototype.snapScale=
function(a){return this._zoom.snapToClosestScale(a)};b.prototype.snapToNextScale=function(a){return this._zoom.snapToNextScale(a)};b.prototype.snapToPreviousScale=function(a){return this._zoom.snapToPreviousScale(a)};f([c.property({readOnly:!0,aliasOf:"_zoom.effectiveLODs"})],b.prototype,"effectiveLODs",void 0);f([c.property({readOnly:!0,aliasOf:"_zoom.effectiveMinScale"})],b.prototype,"effectiveMinScale",void 0);f([c.property({readOnly:!0,aliasOf:"_zoom.effectiveMaxScale"})],b.prototype,"effectiveMaxScale",
void 0);f([c.property({readOnly:!0,aliasOf:"_zoom.effectiveMinZoom"})],b.prototype,"effectiveMinZoom",void 0);f([c.property({readOnly:!0,aliasOf:"_zoom.effectiveMaxZoom"})],b.prototype,"effectiveMaxZoom",void 0);f([c.property({type:[e]})],b.prototype,"lods",void 0);f([c.property()],b.prototype,"minScale",void 0);f([c.property()],b.prototype,"maxScale",void 0);f([c.property()],b.prototype,"minZoom",void 0);f([c.property()],b.prototype,"maxZoom",void 0);f([c.property()],b.prototype,"rotationEnabled",
void 0);f([c.property()],b.prototype,"snapToZoom",void 0);f([c.property()],b.prototype,"view",void 0);f([c.property({type:h,dependsOn:["rotationEnabled"]})],b.prototype,"_rotation",null);f([c.property({dependsOn:["view.spatialReference","view.defaultsFromMap.tileInfo"]})],b.prototype,"_defaultLODs",null);f([c.property({readOnly:!0,type:n,dependsOn:"lods minZoom maxZoom minScale maxScale snapToZoom _defaultLODs".split(" ")})],b.prototype,"_zoom",null);return b=f([c.subclass("esri.views.2d.MapViewConstraints")],
b)}(c.declared(m.EventedAccessor))})},"esri/views/2d/constraints/RotationConstraint":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/accessorSupport/decorators".split(" "),function(r,g,p,f,m,c){return function(e){function h(){var a=null!==e&&e.apply(this,arguments)||this;a.enabled=!0;a.rotationEnabled=!0;return a}p(h,e);g=h;h.prototype.constrain=function(a,b){if(!this.enabled||!b)return a;this.rotationEnabled||
(a.rotation=b.rotation);return a};h.prototype.clone=function(){return new g({enabled:this.enabled,rotationEnabled:this.rotationEnabled})};var g;f([c.property()],h.prototype,"enabled",void 0);f([c.property()],h.prototype,"rotationEnabled",void 0);return h=g=f([c.subclass("esri.views.2d.constraints.RotationConstraint")],h)}(c.declared(m))})},"esri/views/2d/constraints/ZoomConstraint":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/accessorSupport/decorators ../../../layers/support/LOD".split(" "),
function(r,g,p,f,m,c,e){return function(h){function g(a){a=h.call(this,a)||this;a._lodByScale={};a._scales=[];a.effectiveLODs=null;a.effectiveMinZoom=-1;a.effectiveMaxZoom=-1;a.effectiveMinScale=0;a.effectiveMaxScale=0;a.lods=null;a.minZoom=-1;a.maxZoom=-1;a.minScale=0;a.maxScale=0;a.snapToZoom=!0;return a}p(g,h);a=g;g.prototype.initialize=function(){var a=this,d,c,e=this.lods;c=this.minScale;d=this.maxScale;var h=this.minZoom,f=this.maxZoom,g=-1,n=-1,m=!1,y=!1;0!==c&&0!==d&&c<d&&(d=[d,c],c=d[0],
d=d[1]);if(e&&e.length){e=e.map(function(a){return a.clone()});e.sort(function(a,b){return b.scale-a.scale});e.forEach(function(a,b){return a.level=b});for(var p,v=0,w=e;v<w.length;v++){var D=w[v];!m&&0<c&&c>=D.scale&&(g=D.level,m=!0);!y&&0<d&&d>=D.scale&&(n=p?p.level:-1,y=!0);p=D}-1===h&&(h=0===c?0:g);-1===f&&(f=0===d?e.length-1:n);h=Math.max(h,0);h=Math.min(h,e.length-1);f=Math.max(f,0);f=Math.min(f,e.length-1);h>f&&(c=[f,h],h=c[0],f=c[1]);c=e[h].scale;d=e[f].scale;e.splice(0,h);e.splice(f-h+1,
e.length);e.forEach(function(b,d){a._lodByScale[b.scale]=b;a._scales[d]=b.scale});this._set("effectiveLODs",e);this._set("effectiveMinZoom",h);this._set("effectiveMaxZoom",f)}this._set("effectiveMinScale",c);this._set("effectiveMaxScale",d)};g.prototype.constrain=function(a,d){if(d&&a.scale===d.scale)return a;var b=this.effectiveMinScale,c=this.effectiveMaxScale,e=a.targetGeometry,h=d&&d.targetGeometry,f=0!==b&&a.scale>b;if(0!==c&&a.scale<c||f)b=f?b:c,h&&(d=(b-d.scale)/(a.scale-d.scale),e.x=h.x+(e.x-
h.x)*d,e.y=h.y+(e.y-h.y)*d),a.scale=b;this.snapToZoom&&this.effectiveLODs&&(a.scale=this._getClosestScale(a.scale));return a};g.prototype.fit=function(a){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(a,null);var b=this.scaleToZoom(a.scale);a.scale=this.zoomToScale(.99<Math.abs(b-Math.floor(b))?Math.round(b):Math.floor(b));return a};g.prototype.zoomToScale=function(a){if(!this.effectiveLODs)return 0;a-=this.effectiveMinZoom;a=Math.max(0,a);var b=this._scales;if(0>=a)return b[0];if(a>=
b.length)return b[b.length-1];var c=Math.round(a);return b[c]+(c-a)*(b[Math.round(a-.5)]-b[c])};g.prototype.scaleToZoom=function(a){if(!this.effectiveLODs)return-1;var b=this._scales,c,e;if(a>=b[0])return this.effectiveMinZoom;if(a<=b[b.length-1])return this.effectiveMaxZoom;for(var h=0;h<b.length-1;h++){c=b[h];e=b[h+1];if(e===a)return b=h+this.effectiveMinZoom,b+1;if(c>a&&e<a)return b=h+this.effectiveMinZoom,b+1-(a-e)/(c-e)}};g.prototype.snapToClosestScale=function(a){if(!this.effectiveLODs)return a;
a=this.scaleToZoom(a);return this.zoomToScale(Math.round(a))};g.prototype.snapToNextScale=function(a,d){void 0===d&&(d=.5);if(!this.effectiveLODs)return a*d;a=Math.round(this.scaleToZoom(a));return this.zoomToScale(a+1)};g.prototype.snapToPreviousScale=function(a,d){void 0===d&&(d=2);if(!this.effectiveLODs)return a*d;a=Math.round(this.scaleToZoom(a));return this.zoomToScale(a-1)};g.prototype.clone=function(){return new a({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,
maxScale:this.maxScale})};g.prototype._getClosestScale=function(a){if(this._lodByScale[a])return this._lodByScale[a].scale;a=this._scales.reduce(function(b,c){return Math.abs(c-a)<=Math.abs(b-a)?c:b},this._scales[0]);return this._lodByScale[a].scale};var a;f([c.property({readOnly:!0})],g.prototype,"effectiveLODs",void 0);f([c.property({readOnly:!0})],g.prototype,"effectiveMinZoom",void 0);f([c.property({readOnly:!0})],g.prototype,"effectiveMaxZoom",void 0);f([c.property({readOnly:!0})],g.prototype,
"effectiveMinScale",void 0);f([c.property({readOnly:!0})],g.prototype,"effectiveMaxScale",void 0);f([c.property({type:[e]})],g.prototype,"lods",void 0);f([c.property()],g.prototype,"minZoom",void 0);f([c.property()],g.prototype,"maxZoom",void 0);f([c.property()],g.prototype,"minScale",void 0);f([c.property()],g.prototype,"maxScale",void 0);f([c.property()],g.prototype,"snapToZoom",void 0);return g=a=f([c.subclass("esri.views.2d.constraints.ZoomConstraint")],g)}(c.declared(m))})},"esri/views/2d/PaddedViewState":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators ../../core/libs/gl-matrix-2/vec2 ../../core/libs/gl-matrix-2/vec2f64 ./viewpointUtils ./ViewState".split(" "),
function(r,g,p,f,m,c,e,h,n,a){var b=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.left=0;b.top=0;b.right=0;b.bottom=0;return b}p(b,a);f([c.property()],b.prototype,"left",void 0);f([c.property()],b.prototype,"top",void 0);f([c.property()],b.prototype,"right",void 0);f([c.property()],b.prototype,"bottom",void 0);return b=f([c.subclass("esri.views.2d.PaddedViewState.Padding")],b)}(c.declared(m));return function(d){function k(){for(var c=[],k=0;k<arguments.length;k++)c[k]=arguments[k];
var f=d.apply(this,c)||this;f.paddedViewState=new a;f._updateContent=function(){var a=h.vec2f64.create();return function(){var b=f._get("size"),d=f._get("padding");if(b&&d){var c=f.paddedViewState;e.vec2.set(a,d.left+d.right,d.top+d.bottom);e.vec2.subtract(a,b,a);e.vec2.copy(c.size,a);if(b=c.viewpoint)f.viewpoint=b}}}();f.watch(["size","padding"],f._updateContent,!0);f.padding=new b;f.size=[0,0];return f}p(k,d);Object.defineProperty(k.prototype,"padding",{set:function(a){this._set("padding",a||new b)},
enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"viewpoint",{set:function(a){if(a){var b=a.clone();this.paddedViewState.viewpoint=a;n.addPadding(b,a,this._get("size"),this._get("padding"));a=this._viewpoint2D;var d=b.targetGeometry;a.center[0]=d.x;a.center[1]=d.y;a.rotation=b.rotation;a.scale=b.scale;a.spatialReference=d.spatialReference;this._update()}},enumerable:!0,configurable:!0});f([c.property()],k.prototype,"paddedViewState",void 0);f([c.property({type:b})],k.prototype,"padding",
null);f([c.property()],k.prototype,"viewpoint",null);return k=f([c.subclass("esri.views.2d.PaddedViewState")],k)}(c.declared(a))})},"esri/views/2d/ViewState":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../geometry ../../Viewpoint ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/libs/gl-matrix-2/common ../../core/libs/gl-matrix-2/mat2d ../../core/libs/gl-matrix-2/mat2df32 ../../core/libs/gl-matrix-2/mat2df64 ../../core/libs/gl-matrix-2/mat3 ../../core/libs/gl-matrix-2/mat3f32 ../../core/libs/gl-matrix-2/vec2 ../../core/libs/gl-matrix-2/vec2f32 ../../core/libs/gl-matrix-2/vec2f64 ../../core/libs/gl-matrix-2/types/vec2 ./viewpointUtils".split(" "),
function(r,g,p,f,m,c,e,h,n,a,b,d,k,l,q,A,u,t,x){var y=[0,0];return function(e){function g(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];a=e.apply(this,a)||this;a._viewpoint2D={center:u.vec2f64.create(),rotation:0,scale:0,spatialReference:null};a.center=[0,0];a.extent=new m.Extent;a.id=0;a.inverseTransform=d.mat2df64.create();a.resolution=0;a.rotation=0;a.scale=0;a.transform=d.mat2df64.create();a.transformNoRotation=d.mat2df64.create();a.displayMat3=l.mat3f32.create();a.displayViewMat3=
l.mat3f32.create();a.viewMat3=l.mat3f32.create();a.viewMat2d=b.mat2df32.create();a.worldScreenWidth=0;a.size=[0,0];return a}p(g,e);w=g;Object.defineProperty(g.prototype,"pixelRatio",{set:function(a){this._set("pixelRatio",a);this._update()},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"size",{set:function(a){this._set("size",a);this._update()},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"viewpoint",{set:function(a){if(a){var b=this._viewpoint2D,d=a.targetGeometry;
b.center[0]=d.x;b.center[1]=d.y;b.rotation=a.rotation;b.scale=a.scale;b.spatialReference=d.spatialReference}this._update()},enumerable:!0,configurable:!0});g.prototype.copy=function(a){var b=this.size,d=this.viewpoint;d&&b?(this.viewpoint=x.copy(d,a.viewpoint),this._set("size",q.vec2.copy(b,a.size))):(this.viewpoint=a.viewpoint.clone(),this._set("size",[a.size[0],a.size[1]]));this._set("pixelRatio",a.pixelRatio);return this};g.prototype.clone=function(){return new w({size:this.size,viewpoint:this.viewpoint.clone(),
pixelRatio:this.pixelRatio})};g.prototype.toMap=function(a,b,d){if(t.isVec2(b))return q.vec2.transformMat2d(a,b,this.inverseTransform);y[0]=b;y[1]=d;return q.vec2.transformMat2d(a,y,this.inverseTransform)};g.prototype.toScreen=function(a,b,d){if(t.isVec2(b))return q.vec2.transformMat2d(a,b,this.transform);y[0]=b;y[1]=d;return q.vec2.transformMat2d(a,y,this.transform)};g.prototype.toScreenNoRotation=function(a,b,d){if(t.isVec2(b))return q.vec2.transformMat2d(a,b,this.transformNoRotation);y[0]=b;y[1]=
d;return q.vec2.transformMat2d(a,y,this.transformNoRotation)};g.prototype.getScreenTransform=function(a,b){var d=this._viewpoint2D.center,c=this._get("pixelRatio")||1,k=this._get("size");x.getMatrix(a,d,k,b,0,c);return a};g.prototype._update=function(){var b=this._viewpoint2D,d=b.center,e=b.spatialReference,l=b.scale,h=b.rotation,b=this._get("pixelRatio")||1,f=this._get("size"),g=new c({targetGeometry:new m.Point(d[0],d[1],e),scale:l,rotation:h});this._set("viewpoint",g);if(f&&e&&l)return this.resolution=
x.getResolution(g),this.rotation=h,this.scale=l,this.spatialReference=e,q.vec2.copy(this.center,d),k.mat3.set(this.displayMat3,0!==f[0]?2/f[0]:0,0,0,0,0!==f[1]?-2/f[1]:0,0,-1,1,1),l=k.mat3.identity(this.viewMat3),d=A.vec2f32.fromValues(f[0]/2,f[1]/2),e=A.vec2f32.fromValues(-f[0]/2,-f[1]/2),h=n.common.toRadian(h),k.mat3.translate(l,l,d),k.mat3.rotate(l,l,h),k.mat3.translate(l,l,e),k.mat3.multiply(this.displayViewMat3,this.displayMat3,l),l=a.mat2d.identity(this.viewMat2d),a.mat2d.translate(l,l,d),a.mat2d.rotate(l,
l,h),a.mat2d.translate(l,l,e),x.getExtent(this.extent,g,f),x.getTransform(this.transform,g,f,b),a.mat2d.invert(this.inverseTransform,this.transform),x.getTransformNoRotation(this.transformNoRotation,g,f,b),this.worldScreenWidth=x.getWorldScreenWidth(this.spatialReference,this.resolution),this._set("id",this.id+1),this};var w;f([h.property({readOnly:!0})],g.prototype,"id",void 0);f([h.property({value:1,json:{write:!0}})],g.prototype,"pixelRatio",null);f([h.property({json:{write:!0}})],g.prototype,
"size",null);f([h.property({type:c,json:{write:!0}})],g.prototype,"viewpoint",null);return g=w=f([h.subclass("esri.views.2d.ViewState")],g)}(h.declared(e.JSONSupport))})},"esri/core/libs/gl-matrix-2/mat2df32":function(){define(["require","exports","./factories/mat2df32"],function(r,g,p){Object.defineProperty(g,"__esModule",{value:!0});g.mat2df32=p})},"esri/core/libs/gl-matrix-2/factories/mat2df32":function(){define(["require","exports"],function(r,g){function p(f,g,c,e){var h=g[e];g=g[e+1];f[e]=c[0]*
h+c[2]*g+c[4];f[e+1]=c[1]*h+c[3]*g+c[5]}Object.defineProperty(g,"__esModule",{value:!0});g.create=function(){var f=new Float32Array(6);f[0]=1;f[3]=1;return f};g.clone=function(f){var g=new Float32Array(6);g[0]=f[0];g[1]=f[1];g[2]=f[2];g[3]=f[3];g[4]=f[4];g[5]=f[5];return g};g.fromValues=function(f,g,c,e,h,n){var a=new Float32Array(6);a[0]=f;a[1]=g;a[2]=c;a[3]=e;a[4]=h;a[5]=n;return a};g.createView=function(f,g){return new Float32Array(f,g,6)};g.transform=p;g.transformMany=function(f,g,c,e,h,n){void 0===
e&&(e=0);void 0===h&&(h=0);void 0===n&&(n=2);for(h=h||g.length/n;e<h;e++)p(f,g,c,e*n)}})},"esri/core/libs/gl-matrix-2/mat3":function(){define(["require","exports","./math/mat3"],function(r,g,p){Object.defineProperty(g,"__esModule",{value:!0});g.mat3=p})},"esri/core/libs/gl-matrix-2/math/mat3":function(){define(["require","exports","./common"],function(r,g,p){function f(c,e,h){var f=e[0],a=e[1],b=e[2],d=e[3],k=e[4],l=e[5],g=e[6],m=e[7];e=e[8];var u=h[0],t=h[1],x=h[2],y=h[3],p=h[4],v=h[5],w=h[6],D=
h[7];h=h[8];c[0]=u*f+t*d+x*g;c[1]=u*a+t*k+x*m;c[2]=u*b+t*l+x*e;c[3]=y*f+p*d+v*g;c[4]=y*a+p*k+v*m;c[5]=y*b+p*l+v*e;c[6]=w*f+D*d+h*g;c[7]=w*a+D*k+h*m;c[8]=w*b+D*l+h*e;return c}function m(c,e,h){c[0]=e[0]-h[0];c[1]=e[1]-h[1];c[2]=e[2]-h[2];c[3]=e[3]-h[3];c[4]=e[4]-h[4];c[5]=e[5]-h[5];c[6]=e[6]-h[6];c[7]=e[7]-h[7];c[8]=e[8]-h[8];return c}Object.defineProperty(g,"__esModule",{value:!0});g.fromMat4=function(c,e){c[0]=e[0];c[1]=e[1];c[2]=e[2];c[3]=e[4];c[4]=e[5];c[5]=e[6];c[6]=e[8];c[7]=e[9];c[8]=e[10];
return c};g.copy=function(c,e){c[0]=e[0];c[1]=e[1];c[2]=e[2];c[3]=e[3];c[4]=e[4];c[5]=e[5];c[6]=e[6];c[7]=e[7];c[8]=e[8];return c};g.set=function(c,e,h,f,a,b,d,k,l,g){c[0]=e;c[1]=h;c[2]=f;c[3]=a;c[4]=b;c[5]=d;c[6]=k;c[7]=l;c[8]=g;return c};g.identity=function(c){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=1;c[5]=0;c[6]=0;c[7]=0;c[8]=1;return c};g.transpose=function(c,e){if(c===e){var h=e[1],f=e[2],a=e[5];c[1]=e[3];c[2]=e[6];c[3]=h;c[5]=e[7];c[6]=f;c[7]=a}else c[0]=e[0],c[1]=e[3],c[2]=e[6],c[3]=e[1],c[4]=e[4],
c[5]=e[7],c[6]=e[2],c[7]=e[5],c[8]=e[8];return c};g.invert=function(c,e){var h=e[0],f=e[1],a=e[2],b=e[3],d=e[4],k=e[5],l=e[6],g=e[7];e=e[8];var m=e*d-k*g,u=-e*b+k*l,t=g*b-d*l,x=h*m+f*u+a*t;if(!x)return null;x=1/x;c[0]=m*x;c[1]=(-e*f+a*g)*x;c[2]=(k*f-a*d)*x;c[3]=u*x;c[4]=(e*h-a*l)*x;c[5]=(-k*h+a*b)*x;c[6]=t*x;c[7]=(-g*h+f*l)*x;c[8]=(d*h-f*b)*x;return c};g.adjoint=function(c,e){var h=e[0],f=e[1],a=e[2],b=e[3],d=e[4],k=e[5],l=e[6],g=e[7];e=e[8];c[0]=d*e-k*g;c[1]=a*g-f*e;c[2]=f*k-a*d;c[3]=k*l-b*e;c[4]=
h*e-a*l;c[5]=a*b-h*k;c[6]=b*g-d*l;c[7]=f*l-h*g;c[8]=h*d-f*b;return c};g.determinant=function(c){var e=c[3],h=c[4],f=c[5],a=c[6],b=c[7],d=c[8];return c[0]*(d*h-f*b)+c[1]*(-d*e+f*a)+c[2]*(b*e-h*a)};g.multiply=f;g.translate=function(c,e,h){var f=e[0],a=e[1],b=e[2],d=e[3],k=e[4],l=e[5],g=e[6],m=e[7];e=e[8];var u=h[0];h=h[1];c[0]=f;c[1]=a;c[2]=b;c[3]=d;c[4]=k;c[5]=l;c[6]=u*f+h*d+g;c[7]=u*a+h*k+m;c[8]=u*b+h*l+e;return c};g.rotate=function(c,e,h){var f=e[0],a=e[1],b=e[2],d=e[3],k=e[4],l=e[5],g=e[6],m=e[7];
e=e[8];var u=Math.sin(h);h=Math.cos(h);c[0]=h*f+u*d;c[1]=h*a+u*k;c[2]=h*b+u*l;c[3]=h*d-u*f;c[4]=h*k-u*a;c[5]=h*l-u*b;c[6]=g;c[7]=m;c[8]=e;return c};g.scale=function(c,e,h){var f=h[0],a=h[1];h=h[2];c[0]=f*e[0];c[1]=f*e[1];c[2]=f*e[2];c[3]=a*e[3];c[4]=a*e[4];c[5]=a*e[5];c[6]=h*e[6];c[7]=h*e[7];c[8]=h*e[8];return c};g.scaleByVec2=function(c,e,h){var f=h[0];h=h[1];c[0]=f*e[0];c[1]=f*e[1];c[2]=f*e[2];c[3]=h*e[3];c[4]=h*e[4];c[5]=h*e[5];return c};g.fromTranslation=function(c,e){c[0]=1;c[1]=0;c[2]=0;c[3]=
0;c[4]=1;c[5]=0;c[6]=e[0];c[7]=e[1];c[8]=1;return c};g.fromRotation=function(c,e){var h=Math.sin(e);e=Math.cos(e);c[0]=e;c[1]=h;c[2]=0;c[3]=-h;c[4]=e;c[5]=0;c[6]=0;c[7]=0;c[8]=1;return c};g.fromScaling=function(c,e){c[0]=e[0];c[1]=0;c[2]=0;c[3]=0;c[4]=e[1];c[5]=0;c[6]=0;c[7]=0;c[8]=1;return c};g.fromMat2d=function(c,e){c[0]=e[0];c[1]=e[1];c[2]=0;c[3]=e[2];c[4]=e[3];c[5]=0;c[6]=e[4];c[7]=e[5];c[8]=1;return c};g.fromQuat=function(c,e){var h=e[0],f=e[1],a=e[2];e=e[3];var b=h+h,d=f+f,k=a+a,h=h*b,l=f*
b,f=f*d,g=a*b,m=a*d,a=a*k,b=e*b,d=e*d;e*=k;c[0]=1-f-a;c[3]=l-e;c[6]=g+d;c[1]=l+e;c[4]=1-h-a;c[7]=m-b;c[2]=g-d;c[5]=m+b;c[8]=1-h-f;return c};g.normalFromMat4Legacy=function(c,e){var h=e[0],f=e[1],a=e[2],b=e[4],d=e[5],k=e[6],l=e[8],g=e[9];e=e[10];var m=e*d-k*g,u=-e*b+k*l,t=g*b-d*l,x=h*m+f*u+a*t;if(!x)return null;x=1/x;c[0]=m*x;c[1]=(-e*f+a*g)*x;c[2]=(k*f-a*d)*x;c[3]=u*x;c[4]=(e*h-a*l)*x;c[5]=(-k*h+a*b)*x;c[6]=t*x;c[7]=(-g*h+f*l)*x;c[8]=(d*h-f*b)*x;return c};g.normalFromMat4=function(c,e){var h=e[0],
f=e[1],a=e[2],b=e[3],d=e[4],k=e[5],l=e[6],g=e[7],m=e[8],u=e[9],t=e[10],x=e[11],y=e[12],p=e[13],v=e[14];e=e[15];var w=h*k-f*d,D=h*l-a*d,r=h*g-b*d,B=f*l-a*k,J=f*g-b*k,E=a*g-b*l,F=m*p-u*y,H=m*v-t*y,m=m*e-x*y,G=u*v-t*p,u=u*e-x*p,t=t*e-x*v,x=w*t-D*u+r*G+B*m-J*H+E*F;if(!x)return null;x=1/x;c[0]=(k*t-l*u+g*G)*x;c[1]=(l*m-d*t-g*H)*x;c[2]=(d*u-k*m+g*F)*x;c[3]=(a*u-f*t-b*G)*x;c[4]=(h*t-a*m+b*H)*x;c[5]=(f*m-h*u-b*F)*x;c[6]=(p*E-v*J+e*B)*x;c[7]=(v*r-y*E-e*D)*x;c[8]=(y*J-p*r+e*w)*x;return c};g.projection=function(c,
e,h){c[0]=2/e;c[1]=0;c[2]=0;c[3]=0;c[4]=-2/h;c[5]=0;c[6]=-1;c[7]=1;c[8]=1;return c};g.str=function(c){return"mat3("+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+", "+c[4]+", "+c[5]+", "+c[6]+", "+c[7]+", "+c[8]+")"};g.frob=function(c){return Math.sqrt(Math.pow(c[0],2)+Math.pow(c[1],2)+Math.pow(c[2],2)+Math.pow(c[3],2)+Math.pow(c[4],2)+Math.pow(c[5],2)+Math.pow(c[6],2)+Math.pow(c[7],2)+Math.pow(c[8],2))};g.add=function(c,e,h){c[0]=e[0]+h[0];c[1]=e[1]+h[1];c[2]=e[2]+h[2];c[3]=e[3]+h[3];c[4]=e[4]+h[4];c[5]=e[5]+
h[5];c[6]=e[6]+h[6];c[7]=e[7]+h[7];c[8]=e[8]+h[8];return c};g.subtract=m;g.multiplyScalar=function(c,e,h){c[0]=e[0]*h;c[1]=e[1]*h;c[2]=e[2]*h;c[3]=e[3]*h;c[4]=e[4]*h;c[5]=e[5]*h;c[6]=e[6]*h;c[7]=e[7]*h;c[8]=e[8]*h;return c};g.multiplyScalarAndAdd=function(c,e,h,f){c[0]=e[0]+h[0]*f;c[1]=e[1]+h[1]*f;c[2]=e[2]+h[2]*f;c[3]=e[3]+h[3]*f;c[4]=e[4]+h[4]*f;c[5]=e[5]+h[5]*f;c[6]=e[6]+h[6]*f;c[7]=e[7]+h[7]*f;c[8]=e[8]+h[8]*f;return c};g.exactEquals=function(c,e){return c[0]===e[0]&&c[1]===e[1]&&c[2]===e[2]&&
c[3]===e[3]&&c[4]===e[4]&&c[5]===e[5]&&c[6]===e[6]&&c[7]===e[7]&&c[8]===e[8]};g.equals=function(c,e){var h=c[0],f=c[1],a=c[2],b=c[3],d=c[4],k=c[5],l=c[6],g=c[7];c=c[8];var m=e[0],u=e[1],t=e[2],x=e[3],y=e[4],z=e[5],v=e[6],w=e[7];e=e[8];return Math.abs(h-m)<=p.EPSILON*Math.max(1,Math.abs(h),Math.abs(m))&&Math.abs(f-u)<=p.EPSILON*Math.max(1,Math.abs(f),Math.abs(u))&&Math.abs(a-t)<=p.EPSILON*Math.max(1,Math.abs(a),Math.abs(t))&&Math.abs(b-x)<=p.EPSILON*Math.max(1,Math.abs(b),Math.abs(x))&&Math.abs(d-
y)<=p.EPSILON*Math.max(1,Math.abs(d),Math.abs(y))&&Math.abs(k-z)<=p.EPSILON*Math.max(1,Math.abs(k),Math.abs(z))&&Math.abs(l-v)<=p.EPSILON*Math.max(1,Math.abs(l),Math.abs(v))&&Math.abs(g-w)<=p.EPSILON*Math.max(1,Math.abs(g),Math.abs(w))&&Math.abs(c-e)<=p.EPSILON*Math.max(1,Math.abs(c),Math.abs(e))};g.mul=f;g.sub=m})},"esri/core/libs/gl-matrix-2/mat3f32":function(){define(["require","exports","./factories/mat3f32"],function(r,g,p){Object.defineProperty(g,"__esModule",{value:!0});g.mat3f32=p})},"esri/core/libs/gl-matrix-2/factories/mat3f32":function(){define(["require",
"exports"],function(r,g){Object.defineProperty(g,"__esModule",{value:!0});g.create=function(){var g=new Float32Array(9);g[0]=1;g[4]=1;g[8]=1;return g};g.clone=function(g){var f=new Float32Array(9);f[0]=g[0];f[1]=g[1];f[2]=g[2];f[3]=g[3];f[4]=g[4];f[5]=g[5];f[6]=g[6];f[7]=g[7];f[8]=g[8];return f};g.fromValues=function(g,f,m,c,e,h,n,a,b){var d=new Float32Array(9);d[0]=g;d[1]=f;d[2]=m;d[3]=c;d[4]=e;d[5]=h;d[6]=n;d[7]=a;d[8]=b;return d};g.createView=function(g,f){return new Float32Array(g,f,9)}})},"esri/core/libs/gl-matrix-2/vec2f32":function(){define(["require",
"exports","./factories/vec2f32"],function(r,g,p){Object.defineProperty(g,"__esModule",{value:!0});g.vec2f32=p})},"esri/core/libs/gl-matrix-2/factories/vec2f32":function(){define(["require","exports"],function(r,g){function p(){return new Float32Array(2)}function f(c,e){var a=new Float32Array(2);a[0]=c;a[1]=e;return a}function m(){return f(1,1)}function c(){return f(1,0)}function e(){return f(0,1)}Object.defineProperty(g,"__esModule",{value:!0});g.create=p;g.clone=function(c){var e=new Float32Array(2);
e[0]=c[0];e[1]=c[1];return e};g.fromValues=f;g.createView=function(c,e){return new Float32Array(c,e,2)};g.zeros=function(){return p()};g.ones=m;g.unitX=c;g.unitY=e;g.ZEROS=p();g.ONES=m();g.UNIT_X=c();g.UNIT_Y=e()})},"esri/core/libs/gl-matrix-2/types/vec2":function(){define(["require","exports"],function(r,g){function p(f){return f instanceof Float32Array&&2<=f.length}function f(f){return Array.isArray(f)&&2<=f.length}Object.defineProperty(g,"__esModule",{value:!0});g.isVec2f32=p;g.isVec2f64=f;g.isVec2=
function(g){return p(g)||f(g)}})},"esri/views/2d/tiling":function(){define("require exports ./tiling/TileInfoView ./tiling/TileKey ./tiling/TileQueue ./tiling/TileStrategy".split(" "),function(r,g,p,f,m,c){Object.defineProperty(g,"__esModule",{value:!0});g.TileInfoView=p;g.TileKey=f;g.TileQueue=m;g.TileStrategy=c})},"esri/views/2d/tiling/TileInfoView":function(){define("require exports ../../../geometry/support/spatialReferenceUtils ./LODInfo ./TileCoverage ./TileKey ./TileSpan".split(" "),function(r,
g,p,f,m,c,e){var h=new c("0/0/0/0"),n=function(){function a(a,b,c,e,h,f,g,n){this.x=a;this.ymin=b;this.ymax=c;this.invM=e;this.leftAdjust=h;this.rightAdjust=f;this.leftBound=g;this.rightBound=n}a.create=function(b,c){var d;b[1]>c[1]&&(d=[c,b],b=d[0],c=d[1]);d=b[0];b=b[1];var k=c[0];c=c[1];var e=k-d,h=c-b,h=0!==h?e/h:0,f=(Math.ceil(b)-b)*h,g=(Math.floor(b)-b)*h;return new a(d,Math.floor(b),Math.ceil(c),h,0>e?f:g,0>e?g:f,0>e?k:d,0>e?d:k)};a.prototype.incrRow=function(){this.x+=this.invM};a.prototype.getLeftCol=
function(){return Math.max(this.x+this.leftAdjust,this.leftBound)};a.prototype.getRightCol=function(){return Math.min(this.x+this.rightAdjust,this.rightBound)};return a}(),a=[[0,0],[0,0],[0,0],[0,0]];return function(){function b(a,b){var d=this;this.tileInfo=a;this.fullExtent=b;this.scales=[];this._lodInfos=null;this._infoByScale={};this._infoByLevel={};var c=a.lods.slice();c.sort(function(a,b){return b.scale-a.scale});var k=this._lodInfos=c.map(function(d){return f.create(a,d,b)});c.forEach(function(a,
b){d._infoByLevel[a.level]=k[b];d._infoByScale[a.scale]=k[b];d.scales[b]=a.scale},this);this._wrap=a.isWrappable}Object.defineProperty(b.prototype,"spatialReference",{get:function(){return this.tileInfo.spatialReference},enumerable:!0,configurable:!0});b.prototype.getLODInfoAt=function(a){return this._infoByLevel["number"===typeof a?a:a.level]};b.prototype.getTileBounds=function(a,b,c){void 0===c&&(c=!1);h.set(b);return(b=this._infoByLevel[h.level])?b.getTileBounds(a,h,c):a};b.prototype.getTileCoords=
function(a,b,c){void 0===c&&(c=!1);h.set(b);return(b=this._infoByLevel[h.level])?b.getTileCoords(a,h,c):a};b.prototype.getTileCoverage=function(b,c,l){void 0===c&&(c=192);void 0===l&&(l="closest");l="closest"===l?this.getClosestInfoForScale(b.scale):this.getSmallestInfoForScale(b.scale);var d=m.pool.acquire(l),k=this._wrap,h;h=Infinity;var f=-Infinity,g,y,p=d.spans;a[0][0]=a[0][1]=a[1][1]=a[3][0]=-c;a[1][0]=a[2][0]=b.size[0]+c;a[2][1]=a[3][1]=b.size[1]+c;for(c=0;c<a.length;c++){var v=a[c];b.toMap(v,
v);v[0]=l.getColumnForX(v[0]);v[1]=l.getRowForY(v[1])}b=[];v=3;for(c=0;4>c;c++){if(a[c][1]!==a[v][1]){var w=n.create(a[c],a[v]);h=Math.min(w.ymin,h);f=Math.max(w.ymax,f);void 0===b[w.ymin]&&(b[w.ymin]=[]);b[w.ymin].push(w)}v=c}if(null==h||null==f||100<f-h)return null;for(v=[];h<f;){null!=b[h]&&(v=v.concat(b[h]));g=Infinity;y=-Infinity;for(c=v.length-1;0<=c;c--)w=v[c],g=Math.min(g,w.getLeftCol()),y=Math.max(y,w.getRightCol());g=Math.floor(g);y=Math.floor(y);if(h>=l.first[1]&&h<=l.last[1])if(k)if(l.size[0]<
l.worldSize[0])for(w=Math.floor(y/l.worldSize[0]),c=Math.floor(g/l.worldSize[0]);c<=w;c++)p.push(new e(h,Math.max(l.getFirstColumnForWorld(c),g),Math.min(l.getLastColumnForWorld(c),y)));else p.push(new e(h,g,y));else g>l.last[0]||y<l.first[0]||(g=Math.max(g,l.first[0]),y=Math.min(y,l.last[0]),p.push(new e(h,g,y)));h+=1;for(c=v.length-1;0<=c;c--)w=v[c],w.ymax>=h?w.incrRow():v.splice(c,1)}return d};b.prototype.getTileParentId=function(a){h.set(a);a=this._lodInfos.indexOf(this._infoByLevel[h.level])-
1;if(0>a)return null;this._getTileIdAtLOD(h,this._lodInfos[a],h);return h.id};b.prototype.getTileResolution=function(a){return(a=this._infoByLevel["object"===typeof a?a.level:a])?a.resolution:-1};b.prototype.getTileScale=function(a){return(a=this._infoByLevel[a.level])?a.scale:-1};b.prototype.intersects=function(a,b){h.set(b);b=this._infoByLevel[h.level];var d=a.lodInfo;if(d.resolution>b.resolution){this._getTileIdAtLOD(h,d,h);for(var c=d.denormalizeCol(h.col,h.world),k=0,e=a.spans;k<e.length;k++){var f=
e[k];if(f.row===h.row&&f.colFrom<=c&&f.colTo>=c)return!0}}if(d.resolution<b.resolution){e=a.spans.reduce(function(a,b){a[0]=Math.min(a[0],b.row);a[1]=Math.max(a[1],b.row);a[2]=Math.min(a[2],b.colFrom);a[3]=Math.max(a[3],b.colTo);return a},[Infinity,-Infinity,Infinity,-Infinity]);a=e[0];var c=e[1],k=e[2],e=e[3],g=b.denormalizeCol(h.col,h.world),f=d.getColumnForX(b.getXForColumn(g)),n=d.getRowForY(b.getYForRow(h.row)),g=d.getColumnForX(b.getXForColumn(g+1))-1;b=d.getRowForY(b.getYForRow(h.row+1))-1;
return!(f>e||g<k||n>c||b<a)}var m=d.denormalizeCol(h.col,h.world);return a.spans.some(function(a){return a.row===h.row&&a.colFrom<=m&&a.colTo>=m})};b.prototype.normalizeBounds=function(a,b,c){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];this._wrap&&(b=p.getInfo(this.tileInfo.spatialReference),c=-c*(b.valid[1]-b.valid[0]),a[0]+=c,a[2]+=c);return a};b.prototype.getSmallestInfoForScale=function(a){var b=this.scales;if(this._infoByScale[a])return this._infoByScale[a];if(a>b[0])return this._infoByScale[b[0]];
for(var d=1;d<b.length-1;d++)if(a>b[d]+1E-6)return this._infoByScale[b[d-1]];return this._infoByScale[b[b.length-1]]};b.prototype.getClosestInfoForScale=function(a){var b=this.scales;if(this._infoByScale[a])return this._infoByScale[a];a=b.reduce(function(b,d){return Math.abs(d-a)<Math.abs(b-a)?d:b},b[0]);return this._infoByScale[a]};b.prototype.scaleToLevel=function(a){var b=this.scales;if(this._infoByScale[a])return this._infoByScale[a].level;for(var d=b.length-1;0<=d;d--)if(a<b[d])return d===b.length-
1?this._infoByScale[b[b.length-1]].level:this._infoByScale[b[d]].level+(b[d]-a)/(b[d]-b[d+1]);return this._infoByScale[b[0]].level};b.prototype.scaleToZoom=function(a){return this.tileInfo.scaleToZoom(a)};b.prototype._getTileIdAtLOD=function(a,b,c){var d=this._infoByLevel[c.level];a.set(c);if(b.resolution<d.resolution)return null;if(b.resolution===d.resolution)return a;a.level=b.level;a.col=Math.floor(c.col*d.resolution/b.resolution+.01);a.row=Math.floor(c.row*d.resolution/b.resolution+.01);return a};
return b}()})},"esri/views/2d/tiling/LODInfo":function(){define(["require","exports","../../../geometry/support/spatialReferenceUtils","./TileKey"],function(r,g,p,f){function m(c,h,f){c[0]=h;c[1]=f;return c}var c=new f("0/0/0/0");return function(){function e(c,e,a,b,d,k,l,f,g,m,t,x){this.level=c;this.resolution=e;this.scale=a;this.origin=b;this.first=d;this.last=k;this.size=l;this.norm=f;this.worldStart=g;this.worldEnd=m;this.worldSize=t;this.wrap=x}e.create=function(c,f,a){var b=p.getInfo(c.spatialReference),
d=[c.origin.x,c.origin.y],k=[c.size[0]*f.resolution,c.size[1]*f.resolution],l=[-Infinity,-Infinity],h=[Infinity,Infinity],g=[Infinity,Infinity];a&&(m(l,Math.max(0,Math.floor((a.xmin-d[0])/k[0])),Math.max(0,Math.floor((d[1]-a.ymax)/k[1]))),m(h,Math.max(0,Math.floor((a.xmax-d[0])/k[0])),Math.max(0,Math.floor((d[1]-a.ymin)/k[1]))),m(g,h[0]-l[0]+1,h[1]-l[1]+1));var n;c.isWrappable?(c=[Math.ceil(Math.round(2*b.origin[1]/f.resolution)/c.size[0]),g[1]],b=[Math.floor((b.origin[0]-d[0])/k[0]),l[1]],a=[c[0]+
b[0]-1,h[1]],n=!0):(b=l,a=h,c=g,n=!1);return new e(f.level,f.resolution,f.scale,d,l,h,g,k,b,a,c,n)};e.prototype.normalizeCol=function(c){if(!this.wrap)return c;var e=this.worldSize[0];return 0>c?e-1-Math.abs((c+1)%e):c%e};e.prototype.denormalizeCol=function(c,e){return this.wrap?this.worldSize[0]*e+c:c};e.prototype.getWorldForColumn=function(c){return this.wrap?Math.floor(c/this.worldSize[0]):0};e.prototype.getFirstColumnForWorld=function(c){return c*this.worldSize[0]+this.first[0]};e.prototype.getLastColumnForWorld=
function(c){return c*this.worldSize[0]+this.first[0]+this.size[0]-1};e.prototype.getColumnForX=function(c){return(c-this.origin[0])/this.norm[0]};e.prototype.getXForColumn=function(c){return this.origin[0]+c*this.norm[0]};e.prototype.getRowForY=function(c){return(this.origin[1]-c)/this.norm[1]};e.prototype.getYForRow=function(c){return this.origin[1]-c*this.norm[1]};e.prototype.getTileBounds=function(e,f,a){void 0===a&&(a=!1);c.set(f);var b=a?c.col:this.denormalizeCol(c.col,c.world),d=c.row;f=this.getXForColumn(b);
a=this.getYForRow(d+1);b=this.getXForColumn(b+1);d=this.getYForRow(d);e[0]=f;e[1]=a;e[2]=b;e[3]=d;return e};e.prototype.getTileCoords=function(e,f,a){void 0===a&&(a=!1);c.set(f);f=a?c.col:this.denormalizeCol(c.col,c.world);Array.isArray(e)?m(e,this.getXForColumn(f),this.getYForRow(c.row)):(e.x=this.getXForColumn(f),e.y=this.getYForRow(c.row));return e};return e}()})},"esri/views/2d/tiling/TileKey":function(){define(["require","exports","../../../core/ObjectPool"],function(r,g,p){return function(){function f(f,
c,e,h){this.set(f,c,e,h)}f.getId=function(f,c,e,h){return"object"===typeof f?f.level+"/"+f.row+"/"+f.col+"/"+f.world:f+"/"+c+"/"+e+"/"+h};Object.defineProperty(f.prototype,"key",{get:function(){return this},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"id",{get:function(){return this.toString()},enumerable:!0,configurable:!0});f.prototype.equals=function(f){return this.level===f.level&&this.row===f.row&&this.col===f.col&&this.world===f.world};f.prototype.release=function(){this.world=
this.col=this.row=this.level=0};f.prototype.set=function(f,c,e,h){null==f?this.world=this.col=this.row=this.level=0:"object"===typeof f?(this.level=f.level||0,this.row=f.row||0,this.col=f.col||0,this.world=f.world||0):"string"===typeof f?(f=f.split("/"),c=f[1],e=f[2],h=f[3],this.level=parseFloat(f[0]),this.row=parseFloat(c),this.col=parseFloat(e),this.world=parseFloat(h)):(this.level=+f,this.row=+c,this.col=+e,this.world=+h||0);return this};f.prototype.toString=function(){return this.level+"/"+this.row+
"/"+this.col+"/"+this.world};f.prototype.getChildKeys=function(){var g=this.level+1,c=this.row<<1,e=this.col<<1,h=this.world;return[new f(g,c,e,h),new f(g,c,e+1,h),new f(g,c+1,e,h),new f(g,c+1,e+1,h)]};f.prototype.compareRowMajor=function(f){return this.row<f.row?-1:this.row>f.row?1:this.col<f.col?-1:this.col>f.col?1:0};f.pool=new p(f,!0,null,25,50);return f}()})},"esri/views/2d/tiling/TileCoverage":function(){define(["require","exports","../../../core/ObjectPool"],function(r,g,p){return function(){function f(f){this.lodInfo=
f;this.spans=[]}f.prototype.release=function(){};f.prototype.forEach=function(f,c){var e=this.spans,h=this.lodInfo,g=h.level;if(0!==e.length)for(var a=0;a<e.length;a++)for(var b=e[a],d=b.row,k=b.colTo,b=b.colFrom;b<=k;b++)f.call(c,g,d,h.normalizeCol(b),h.getWorldForColumn(b))};f.pool=new p(f,!0);return f}()})},"esri/views/2d/tiling/TileSpan":function(){define(["require","exports","../../../core/ObjectPool"],function(r,g,p){return function(){function f(f,c,e){this.row=f;this.colFrom=c;this.colTo=e}
f.pool=new p(f,!0);return f}()})},"esri/views/2d/tiling/TileQueue":function(){define("require exports ../../../core/tsSupport/decorateHelper ../../../core/tsSupport/declareExtendsHelper ../../../core/Accessor ../../../core/SetUtils ../../../core/accessorSupport/decorators ../../../core/libs/gl-matrix-2/vec2 ../../support/QueueProcessor".split(" "),function(r,g,p,f,m,c,e,h,n){function a(a,b){a.length=0;b.forEach(function(b){return a.push(b)});return a}var b=new Set,d=[],k=new Map,l=[0,0];return function(g){function q(a){a=
g.call(this,a)||this;a._keyToItem=new Map;a.concurrency=6;a.strategy="scale-first";a.tileInfoView=null;return a}f(q,g);q.prototype.initialize=function(){var a=this,b=this.process;this._queue=new n.QueueProcessor({concurrency:this.concurrency,process:function(d,c){d=a._keyToItem.get(d);return b(d,{signal:c})},peeker:"scale-first"===this.strategy?function(b){return a._peekByScaleFirst(b)}:function(b){return a._peekByCenterFirst(b)}})};q.prototype.destroy=function(){this.clear();this._queue.destroy();
this._queue=null};Object.defineProperty(q.prototype,"length",{get:function(){return this._queue?this._queue.length:0},enumerable:!0,configurable:!0});Object.defineProperty(q.prototype,"onGoingCount",{get:function(){return this._keyToItem.size},enumerable:!0,configurable:!0});Object.defineProperty(q.prototype,"updating",{get:function(){return 0<this.length||0<this.onGoingCount},enumerable:!0,configurable:!0});q.prototype.abort=function(a){this._queue.abort("string"===typeof a?a:a.id)};q.prototype.clear=
function(){this._queue.clear();this._keyToItem.clear();this.notifyChange("updating")};q.prototype.has=function(a){return"string"===typeof a?this._keyToItem.has(a):this._keyToItem.has(a.id)};q.prototype.isOngoing=function(a){a="string"===typeof a?a:a.id;return this.has(a)&&this._queue.isOngoing(a)};q.prototype.pause=function(){this._queue.pause()};q.prototype.push=function(a){var b=this,d=a.key.id;if(this.has(d))return this.get(d);var c=this._queue.push(d),e=function(){b._keyToItem.delete(d);b.notifyChange("updating")};
this._keyToItem.set(d,a);c.then(e,e);this.notifyChange("updating");return c};q.prototype.reset=function(){this._queue.reset();this.notifyChange("updating")};q.prototype.resume=function(){this._queue.resume()};q.prototype._peekByScaleFirst=function(e){var f=this;if(!this.state)return c.firstOfSet(e);var l=this.tileInfoView,h=Number.NEGATIVE_INFINITY,g=Number.POSITIVE_INFINITY;e.forEach(function(a){a=f._keyToItem.get(a);var d=f.tileInfoView.getTileScale(a.key);k.has(d)||(k.set(d,[]),h=Math.max(d,h),
g=Math.min(d,g));k.get(d).push(a.key);b.add(d)});var q=this.state.scale;k.has(q)||(a(d,b),d.sort(),q=d.reduce(function(a,b){return Math.abs(b-q)<Math.abs(a-q)?b:a},d[0]));q=Math.min(q,h);q=Math.max(q,g);e=k.get(q);var n=l.getClosestInfoForScale(q),m=n.getColumnForX(this.state.center[0]),u=n.getRowForY(this.state.center[1]);e.sort(function(a,b){var d=n.denormalizeCol(a.col,a.world),c=n.denormalizeCol(b.col,b.world);return Math.sqrt((m-d)*(m-d)+(u-a.row)*(u-a.row))-Math.sqrt((m-c)*(m-c)+(u-b.row)*(u-
b.row))});b.clear();k.clear();return e[0].id};q.prototype._peekByCenterFirst=function(a){var b=this;if(!this.state)return c.firstOfSet(a);var d=this.tileInfoView,e=this.state.center,k=Number.POSITIVE_INFINITY,f=null;a.forEach(function(a){a=b._keyToItem.get(a);d.getTileCoords(l,a.key);var c=h.vec2.distance(l,e);c<k&&(k=c,f=a.key)});return f.id};p([e.property({constructOnly:!0})],q.prototype,"concurrency",void 0);p([e.property({constructOnly:!0})],q.prototype,"process",void 0);p([e.property()],q.prototype,
"state",void 0);p([e.property({constructOnly:!0})],q.prototype,"strategy",void 0);p([e.property({constructOnly:!0})],q.prototype,"tileInfoView",void 0);p([e.property({readOnly:!0})],q.prototype,"updating",null);return q=p([e.subclass("esri.views.2d.tiling.TileQueue")],q)}(e.declared(m))})},"esri/views/support/QueueProcessor":function(){define("require exports ../../core/maybe ../../core/promiseUtils ../../core/Queue ../../core/scheduling".split(" "),function(r,g,p,f,m,c){Object.defineProperty(g,"__esModule",
{value:!0});var e=function(){return function(c,e){this.item=c;this.controller=e;this.promise=null}}();r=function(){function h(c){var a=this;this._deferreds=new Map;this._controllers=new Map;this._processingItems=new Map;this._isPaused=!1;this._task=this._schedule=null;this.concurrency=1;c.concurrency&&(this.concurrency=c.concurrency);this._queue=new m.default(c.peeker);this.process=c.process;var b=c.scheduler;c.task&&p.isSome(b)&&(this._task=b.registerTask(c.task,function(b){return a.update(b)},function(){return a.needsUpdate()}))}
h.prototype.destroy=function(){this.clear();this._schedule&&(this._schedule.remove(),this._schedule=null);this._task&&(this._task.remove(),this._task=null)};Object.defineProperty(h.prototype,"length",{get:function(){return this._processingItems.size+this._queue.length},enumerable:!0,configurable:!0});h.prototype.abort=function(c){(c=this._controllers.get(c))&&c.abort()};h.prototype.clear=function(){this._queue.clear();var c=[];this._controllers.forEach(function(a){return c.push(a)});this._controllers.clear();
c.forEach(function(a){return a.abort()});this._processingItems.clear();this._cancelNext()};h.prototype.get=function(c){return(c=this._deferreds.get(c))?c.promise:void 0};h.prototype.isOngoing=function(c){return this._processingItems.has(c)};h.prototype.has=function(c){return this._deferreds.has(c)};h.prototype.pause=function(){this._isPaused||(this._isPaused=!0,this._cancelNext())};h.prototype.push=function(c){var a=this,b=this.get(c);if(b)return b;var d,b=f.createAbortController(),e=function(){l.remove();
a._deferreds.delete(c);a._controllers.delete(c);a._queue.remove(c);a._processingItems.delete(c);a._scheduleNext()},l=f.onAbortOrThrow(b.signal,function(){var b=a._processingItems.get(c);b&&b.controller.abort();e();d.reject(f.createAbortError())});d=f.createDeferred();this._deferreds.set(c,d);this._controllers.set(c,b);d.promise.then(e,e);this._queue.push(c);this._scheduleNext();return d.promise};h.prototype.reset=function(){var c=[];this._processingItems.forEach(function(a){return c.push(a)});this._processingItems.clear();
for(var a=0;a<c.length;a++){var b=c[a];this._queue.push(b.item);b.controller.abort()}this._scheduleNext()};h.prototype.resume=function(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())};h.prototype.needsUpdate=function(){return!this._isPaused&&0<this._queue.length&&this._processingItems.size<this.concurrency};h.prototype.update=function(c){for(;!c.done&&0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),c.madeProgress()};h.prototype._scheduleNext=
function(){var e=this;this._task||this._isPaused||this._schedule||(this._schedule=c.schedule(function(){e._schedule=null;e._next()}))};h.prototype._next=function(){for(;0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())};h.prototype._cancelNext=function(){this._schedule&&(this._schedule.remove(),this._schedule=null)};h.prototype._processResult=function(c,a){this._canProcessFulfillment(c)&&(this._scheduleNext(),this._deferreds.get(c.item).resolve(a))};
h.prototype._processError=function(c,a){this._canProcessFulfillment(c)&&(this._scheduleNext(),this._deferreds.get(c.item).reject(a))};h.prototype._canProcessFulfillment=function(c){return this._deferreds.get(c.item)&&this._processingItems.get(c.item)===c?!0:!1};h.prototype._process=function(c){var a=this;if(!p.isNone(c)){var b,d=f.createAbortController(),k=new e(c,d);this._processingItems.set(c,k);try{b=this.process(c,d.signal)}catch(l){this._processError(k,l)}b&&"function"===typeof b.then?(k.promise=
b,b.then(function(b){return a._processResult(k,b)},function(b){return a._processError(k,b)})):this._processResult(k,b)}};Object.defineProperty(h.prototype,"test",{get:function(){var c=this;return{update:function(a){return c.update(a)}}},enumerable:!0,configurable:!0});return h}();g.QueueProcessor=r})},"esri/core/Queue":function(){define(["require","exports","./SetUtils"],function(r,g,p){Object.defineProperty(g,"__esModule",{value:!0});r=function(){function f(f){void 0===f&&(f=function(c){return p.firstOfSet(c)});
this._peeker=f;this._items=new Set}Object.defineProperty(f.prototype,"length",{get:function(){return this._items.size},enumerable:!0,configurable:!0});f.prototype.clear=function(){this._items.clear()};f.prototype.peek=function(){if(0!==this._items.size)return this._peeker(this._items)};f.prototype.push=function(f){this.contains(f)||this._items.add(f)};f.prototype.contains=function(f){return this._items.has(f)};f.prototype.pop=function(){if(0!==this.length){var f=this.peek();this._items.delete(f);
return f}};f.prototype.remove=function(f){this._items.delete(f)};return f}();g.default=r})},"esri/views/2d/tiling/TileStrategy":function(){define("require exports ../../../core/tsSupport/extendsHelper ./TileCache ./TileCoverage ./TileKey".split(" "),function(r,g,p,f,m,c){var e=new c(0,0,0,0),h=new Map,n=[],a=[];return function(){function b(a){var b=this;this._previousScale=Number.POSITIVE_INFINITY;this.cachePolicy="keep";this.coveragePolicy="closest";this.resampling=!0;this.tileIndex=new Map;this.tiles=
[];this.buffer=192;this.acquireTile=a.acquireTile;this.releaseTile=a.releaseTile;this.tileInfoView=a.tileInfoView;this.resampling=null==a.resampling||!!a.resampling;a.cachePolicy&&(this.cachePolicy=a.cachePolicy);a.coveragePolicy&&(this.coveragePolicy=a.coveragePolicy);null!=a.buffer&&(this.buffer=a.buffer);a.cacheSize&&(this._tileCache=new f.default(a.cacheSize,this.tileInfoView,function(a){b.releaseTile(a)}))}b.prototype.destroy=function(){this.tileIndex.clear()};b.prototype.update=function(b){var c=
this,d=this.resampling,f=this.tileIndex,g=this.tileInfoView.getTileCoverage(b.state,this.buffer,this.coveragePolicy);a.length=0;n.length=0;h.clear();if(g){var u=this.tileInfoView.tileInfo,t=u.minScale,x=u.maxScale,y=g.spans,p=g.lodInfo,v=p.level,w=b.state,D=w.scale,u=w.center,w=w.resolution,r=!b.stationary&&D>this._previousScale;this._previousScale=D;this.tiles.length=0;if(!d&&(D>t||D<x))return this.tiles.length=0,h.clear(),f.forEach(function(a){c.releaseTile(a)}),f.clear(),a.length=0,n.length=0,
h.clear(),m.pool.release(g),!0;f.forEach(function(a){return a.visible=!0});x=t=0;if(0<y.length)for(D=0;D<y.length;D++){b=y[D];for(var B=b.row,J=b.colTo,E=b.colFrom;E<=J;E++)if(t++,b=e.set(v,B,p.normalizeCol(E),p.getWorldForColumn(E)).id,f.has(b))d=f.get(b),d.isReady?(h.set(b,d),x++):r||this._addParentTile(b,h);else{d=void 0;if(this._tileCache&&this._tileCache.has(b)){if(d=this._tileCache.pop(b),this.tileIndex.set(b,d),d.isReady){h.set(b,d);x++;continue}}else d=this.acquireTile(e),this.tileIndex.set(b,
d);r||this._addParentTile(b,h)}}var F=x===t;f.forEach(function(b,d){e.set(d);if(!h.has(d)){var k=c.tileInfoView.intersects(g,e);!k||!r&&F?"purge"===c.cachePolicy?e.level===v&&k||n.push(d):(e.level>v||!k)&&n.push(d):b.isReady?a.push(d):e.level>v&&n.push(d)}});for(y=0;y<a.length;y++)b=a[y],(d=f.get(b))&&d.isReady&&h.set(b,d);for(y=0;y<n.length;y++)b=n[y],d=f.get(b),this._tileCache?this._tileCache.add(d):this.releaseTile(d),f["delete"](b);h.forEach(function(a){return c.tiles.push(a)});f.forEach(function(a){h.has(a.key.id)||
(a.visible=!1)});this._tileCache&&this._tileCache.prune(v,u,w);m.pool.release(g);return F}};b.prototype.clear=function(a){var b=this;void 0===a&&(a=!0);var c=this.tileIndex;a&&c.forEach(function(a){b.releaseTile(a)});c.clear()};b.prototype._addParentTile=function(a,b){for(var c=null;;){a=this.tileInfoView.getTileParentId(a);if(!a)break;if(this.tileIndex.has(a)){if((c=this.tileIndex.get(a))&&c.isReady){b.has(c.key.id)||b.set(c.key.id,c);break}}else if(this._tileCache&&this._tileCache.has(a)&&(c=this._tileCache.pop(a),
this.tileIndex.set(a,c),c&&c.isReady)){b.has(c.key.id)||b.set(c.key.id,c);break}}};return b}()})},"esri/views/2d/tiling/TileCache":function(){define(["require","exports","../../../core/libs/gl-matrix-2/vec2"],function(r,g,p){Object.defineProperty(g,"__esModule",{value:!0});r=function(){function f(f,c,e){this.maxSize=f;this.tileInfoView=c;this.removedFunc=e;this._tilePerId=new Map;this._tileKeysPerLevel=[]}f.prototype.has=function(f){return this._tilePerId.has(f)};f.prototype.get=function(f){return this._tilePerId.get(f)};
f.prototype.pop=function(f){var c=this._tilePerId.get(f);if(!c)return null;var e=this._tileKeysPerLevel[c.key.level];this._tilePerId["delete"](f);for(var h=0;h<e.length;h++)if(e[h].id===f){e.splice(h,1);break}c.visible=!0;return c};f.prototype.add=function(f){f.visible=!1;var c=f.key,e=c.id;this._tilePerId.has(e)||(this._tilePerId.set(e,f),f=c.level,this._tileKeysPerLevel[f]||(this._tileKeysPerLevel[f]=[]),this._tileKeysPerLevel[f].push(c))};f.prototype.prune=function(f,c,e){var h=this._tilePerId.size;
if(!(h<=this.maxSize)){for(var g=this._tileKeysPerLevel.length-1;h>this.maxSize&&0<=g;)g!==f&&(h=this._pruneAroundCenterTile(h,c,e,g)),g--;h>this.maxSize&&(h=this._pruneAroundCenterTile(h,c,e,f))}};f.prototype._pruneAroundCenterTile=function(f,c,e,h){h=this._tileKeysPerLevel[h];if(!h||0===h.length)return f;var g=this.tileInfoView.tileInfo,a=g.size,b=g.origin,d=e*a[0],k=e*a[1],l=[0,0],q=[0,0];for(h.sort(function(a,e){l[0]=b.x+d*(a.col+.5);l[1]=b.y-k*(a.row+.5);q[0]=b.x+d*(e.col+.5);q[1]=b.y-k*(e.row+
.5);return p.vec2.squaredDistance(l,c)-p.vec2.squaredDistance(q,c)});0<h.length&&(e=h.pop(),this._removeTile(e.id),f--,f!==this.maxSize););return f};f.prototype._removeTile=function(f){var c=this._tilePerId.get(f);this.removedFunc&&this.removedFunc(c);this._tilePerId["delete"](f)};return f}();g.default=r})},"esri/views/2d/support/Timeline":function(){define(["require","exports","../../../core/tsSupport/decorateHelper","../../../core/tsSupport/declareExtendsHelper","../../../core/accessorSupport/decorators"],
function(r,g,p,f,m){Object.defineProperty(g,"__esModule",{value:!0});r=function(){function c(){this._names=new Map}c.prototype.begin=function(c){this._names.has(c)||(this._names.set(c,!1),-1!==c.indexOf("Brush")&&this.record("Esri.FirstDraw"),performance.mark("Esri."+c+".Start"))};c.prototype.end=function(c){this._names.has(c)&&!this._names.get(c)&&(this._names.set(c,!0),performance.mark("Esri."+c+".End"))};c.prototype.record=function(c){this._names.has(c)||(this._names.set(c,!0),performance.mark("Esri."+
c))};return c=p([m.subclass("esri.views.2d.support.Timeline")],c)}();g.Timeline=r})},"esri/views/2d/input/MapViewInputManager":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/Handles ../../../core/watchUtils ../../../core/accessorSupport/decorators ./handlers/DoubleClickZoom ./handlers/DoubleTapDragZoom ./handlers/DragPan ./handlers/DragRotate ./handlers/GamepadNavigation ./handlers/KeyPan ./handlers/KeyRotate ./handlers/KeyZoom ./handlers/MouseWheelZoom ./handlers/PinchAction ../../input/BrowserEventSource ../../input/InputManager ../../input/handlers/PreventContextMenu ../../input/recognizers/DoubleTapDrag ../../input/recognizers/Drag ../../input/recognizers/ImmediateDoubleClick ../../input/recognizers/PointerClickHoldAndDrag ../../input/recognizers/SingleAndDoubleClick".split(" "),
function(r,g,p,f,m,c,e,h,n,a,b,d,k,l,q,A,u,t,x,y,z,v,w,D,C,B){var J={left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},E={zoomIn:["\x3d","+"],zoomOut:["-","_"]},F={clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"};return function(g){function m(){var a=null!==g&&g.apply(this,arguments)||this;a._handles=new c;return a}p(m,g);m.prototype.initialize=function(){var a=this;this._handles.add([e.whenNot(this.view,
"ready",function(){return a._disconnect()}),e.when(this.view,"ready",function(){return a._connect()})])};m.prototype.destroy=function(){this._handles&&(this._handles.removeAll(),this._handles=null);this._disconnect()};m.prototype._disconnect=function(){this._inputManager&&(this.view.viewEvents.disconnect(),this._inputManager.destroy(),this._inputManager=null,this._source.destroy(),this._source=null)};m.prototype._connect=function(){var c=this,f=new x.BrowserEventSource(this.view.surface,this.view.input),
h=[new D.ImmediateDoubleClick,new C.PointerClickHoldAndDrag,new B.SingleAndDoubleClick,new w.Drag(this.view.navigation),new v.DoubleTapDrag],h=new y.InputManager({eventSource:f,recognizers:h});h.installHandlers("prevent-context-menu",[new z.PreventContextMenu],y.ViewEventPriorities.INTERNAL);h.installHandlers("navigation",[new t.PinchRotateAndZoom(this.view),new k.GamepadNavigation(this.view),new u.MouseWheelZoom(this.view),new n.DoubleClickZoom(this.view),new n.DoubleClickZoom(this.view,["Ctrl"]),
new b.DragPan(this.view,"primary"),new l.KeyPan(this.view,J),new A.KeyZoom(this.view,E),new q.KeyRotate(this.view,F),new d.DragRotate(this.view,"secondary"),new a.DoubleTapDragZoom(this.view,"touch")],y.ViewEventPriorities.INTERNAL);this.view.viewEvents.connect(h);this._source=f;this._inputManager=h;e.init(this.view.navigation,"browserTouchPanEnabled",function(a){c._source.browserTouchPanningEnabled=!a})};Object.defineProperty(m.prototype,"test",{get:function(){return{inputManager:this._inputManager}},
enumerable:!0,configurable:!0});f([h.property()],m.prototype,"view",void 0);return m=f([h.subclass("esri.views.2d.input.MapViewInputManager")],m)}(h.declared(m))})},"esri/views/2d/input/handlers/DoubleClickZoom":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler","../../../input/handlers/support"],function(r,g,p,f,m){Object.defineProperty(g,"__esModule",{value:!0});r=function(c){function e(e,f){var a=c.call(this,!0)||this;a.view=e;a.registerIncoming("double-click",
f,function(b){return a._handleDoubleClick(b,f)});return a}p(e,c);e.prototype._handleDoubleClick=function(c,e){m.eventMatchesPointerAction(c.data,"primary")&&(c.stopPropagation(),e?this.view.mapViewNavigation.zoomOut([c.data.x,c.data.y]):this.view.mapViewNavigation.zoomIn([c.data.x,c.data.y]))};return e}(f.InputHandler);g.DoubleClickZoom=r})},"esri/views/input/handlers/support":function(){define(["require","exports"],function(r,g){Object.defineProperty(g,"__esModule",{value:!0});g.eventMatchesPointerAction=
function(g,f){switch(f){case "primary":return"touch"===g.pointerType||0===g.button;case "secondary":return"touch"!==g.pointerType&&2===g.button;case "tertiary":return"touch"!==g.pointerType&&1===g.button}};g.eventMatchesMousePointerAction=function(g,f){if("touch"===g.pointerType)return!1;switch(f){case "primary":return 0===g.button;case "secondary":return 2===g.button;case "tertiary":return 1===g.button}}})},"esri/views/2d/input/handlers/DoubleTapDragZoom":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper",
"../../../../core/compilerUtils","../../../input/InputHandler"],function(r,g,p,f,m){Object.defineProperty(g,"__esModule",{value:!0});r=function(c){function e(e,f,a){var b=c.call(this,!0)||this;b.view=e;b.pointerType=f;b.registerIncoming("double-tap-drag",a,function(a){return b._handleDoubleTapDrag(a)});return b}p(e,c);e.prototype._handleDoubleTapDrag=function(c){var e=c.data;if(e.pointerType===this.pointerType){c.stopPropagation();var a=e.action;c=e.delta;var b=this.view,e=b.mapViewNavigation;switch(a){case "begin":this._currentScale=
this._startScale=a=b.scale;this._previousDelta=c;e.begin();break;case "update":if(this._previousDelta.y===c.y)break;this._previousDelta=c;c=this._startScale*Math.pow(1.015,c.y);e.setViewpointImmediate(c/this._currentScale);this._currentScale=c;break;case "end":a=b.constraints;b=a.effectiveLODs;if(!a.snapToZoom||!b){e.end();break}b=a.snapScale(this._currentScale);c=(0<c.y?Math.max(b,a.snapToPreviousScale(this._startScale)):Math.min(b,a.snapToNextScale(this._startScale)))/this._currentScale;e.zoom(c);
break;default:f.neverReached(a)}}};return e}(m.InputHandler);g.DoubleTapDragZoom=r})},"esri/views/2d/input/handlers/DragPan":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../input/DragEventSeparator ../../../input/InputHandler ../../../input/handlers/support".split(" "),function(r,g,p,f,m,c){Object.defineProperty(g,"__esModule",{value:!0});r=function(e){function h(h,a,b){var d=e.call(this,!0)||this;d.view=h;d.pointerAction=a;d.registerIncoming("drag",b,function(a){return d._handleDrag(a)});
d.registerIncoming("pointer-down",function(){return d.stopMomentumNavigation()});var k=d.view.mapViewNavigation;d.dragEventSeparator=new f.DragEventSeparator({start:function(a,b){k.pan.begin(d.view,b.data);b.stopPropagation()},update:function(a,b){k.pan.update(d.view,b.data);b.stopPropagation()},end:function(a,b){k.pan.end(d.view,b.data);b.stopPropagation()},condition:function(a,b){return 1===a&&c.eventMatchesPointerAction(b.data,d.pointerAction)}});return d}p(h,e);h.prototype._handleDrag=function(c){var a=
this.view.mapViewNavigation;a.pinch.zoomMomentum||a.pinch.rotateMomentum?this.stopMomentumNavigation():this.dragEventSeparator.handle(c)};h.prototype.stopMomentumNavigation=function(){this.view.mapViewNavigation.pan.stopMomentumNavigation()};return h}(m.InputHandler);g.DragPan=r})},"esri/views/input/DragEventSeparator":function(){define(["require","exports"],function(r,g){Object.defineProperty(g,"__esModule",{value:!0});r=function(){function g(f){this.callbacks=f;this.currentCount=0;this.callbacks.condition||
(this.callbacks.condition=function(){return!0})}g.prototype.handle=function(f){var g=f.data,c=g.pointers.size;switch(g.action){case "start":this.currentCount=c;this.emitStart(f);break;case "added":this.emitEnd(this.previousEvent);this.currentCount=c;this.emitStart(f);break;case "update":this.emitUpdate(f);break;case "removed":this.startEvent&&this.emitEnd(this.previousEvent);this.currentCount=c;this.emitStart(f);break;case "end":this.emitEnd(f),this.currentCount=0}this.previousEvent=f};g.prototype.emitStart=
function(f){this.startEvent=f;this.callbacks.condition(this.currentCount,f)&&this.callbacks.start(this.currentCount,f,this.startEvent)};g.prototype.emitUpdate=function(f){this.callbacks.condition(this.currentCount,f)&&this.callbacks.update(this.currentCount,f,this.startEvent)};g.prototype.emitEnd=function(f){this.callbacks.condition(this.currentCount,f)&&this.callbacks.end(this.currentCount,f,this.startEvent);this.startEvent=null};return g}();g.DragEventSeparator=r})},"esri/views/2d/input/handlers/DragRotate":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../input/DragEventSeparator ../../../input/InputHandler ../../../input/handlers/support".split(" "),
function(r,g,p,f,m,c){Object.defineProperty(g,"__esModule",{value:!0});r=function(e){function h(h,a,b){var d=e.call(this,!0)||this;d.view=h;d.pointerAction=a;var k=d.view.mapViewNavigation;d.dragEventSeparator=new f.DragEventSeparator({start:function(a,b){k.rotate.begin(d.view,b.data);b.stopPropagation()},update:function(a,b){k.rotate.update(d.view,b.data);b.stopPropagation()},end:function(a,b){k.rotate.end();b.stopPropagation()},condition:function(a,b){return 1===a&&c.eventMatchesPointerAction(b.data,
d.pointerAction)}});d.registerIncoming("drag",b,function(a){return d.dragEventSeparator.handle(a)});return d}p(h,e);return h}(m.InputHandler);g.DragRotate=r})},"esri/views/2d/input/handlers/GamepadNavigation":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/Handles ../../../../core/scheduling ../../../../core/watchUtils ../../viewpointUtils ../../../input/InputHandler ../../../navigation/gamepadAndKeyboardUtils".split(" "),function(r,g,p,f,m,c,e,h,n){Object.defineProperty(g,
"__esModule",{value:!0});r=function(k){function h(a){var b=k.call(this,!0)||this;b.view=a;b.frameTask=null;b.watchHandles=new f;b.currentDevice=null;b.transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0};b.handle=b.registerIncoming("gamepad",function(a){return b.handleEvent(a)});b.handle.pause();return b}p(h,k);h.prototype.onInstall=function(a){var b=this;k.prototype.onInstall.call(this,a);this.watchHandles.add([c.init(this.view.navigation.gamepad,"enabled",function(a){a?(b.handle.resume(),
b.frameTask||(b.frameTask=m.addFrameTask({update:function(a){return b.frameUpdate(a.deltaTime)}}))):(b.handle.pause(),b.frameTask&&(b.frameTask.remove(),b.frameTask=null))})])};h.prototype.onUninstall=function(){this.watchHandles.removeAll();this.frameTask&&(this.frameTask.remove(),this.frameTask=null);k.prototype.onUninstall.call(this)};h.prototype.handleEvent=function(a){var b=this.view.navigation.gamepad.device;b&&a.data.device!==b||this.currentDevice&&this.currentDevice!==a.data.device||("end"===
a.data.action?(this.currentDevice=null,n.resetTransformation(this.transformation)):(this.currentDevice=a.data.device,n.extractTransformation(a.data,this.view.navigation.gamepad,this.transformation)))};h.prototype.frameUpdate=function(c){var k=this.transformation;if(!n.isZeroTransformation(k)){var f=this.view.viewpoint.clone(),h=b*this.view.navigation.gamepad.velocityFactor*c;e.translateBy(f,f,[k.translation[0]*h,-k.translation[1]*h]);h=this.view.size;e.scaleAndRotateBy(f,f,1+k.translation[2]*d*c,
this.view.constraints.rotationEnabled?-k.heading*a*c:0,[h[0]/2,h[1]],h);c=this.view.constraints.constrain(f,this.view.viewpoint);this.view.viewpoint=c}};return h}(h.InputHandler);g.GamepadNavigation=r;var a=.06,b=.7,d=6E-4})},"esri/views/navigation/gamepadAndKeyboardUtils":function(){define(["require","exports","../../core/libs/gl-matrix-2/vec3"],function(r,g,p){function f(f){var c=f*f;0>f&&(c*=-1);return c}Object.defineProperty(g,"__esModule",{value:!0});g.quadraticAccentuation=f;g.resetTransformation=
function(f){f.translation[0]=0;f.translation[1]=0;f.translation[2]=0;f.heading=0;f.tilt=0;return f};g.extractTransformation=function(g,c,e){var h=g.state;g=g.device;c="forward-down"===c.tiltDirection?1:-1;"standard"===g.deviceType?(e.translation[0]=f(h.axes[0]),e.translation[1]=f(h.axes[1]),e.translation[2]=f(h.buttons[7])-f(h.buttons[6]),e.heading=f(h.axes[2]),e.tilt=f(h.axes[3])):"spacemouse"===g.deviceType&&(e.translation[0]=1.2*f(h.axes[0]),e.translation[1]=1.2*f(h.axes[1]),e.translation[2]=2*
-f(h.axes[2]),e.heading=1.2*f(h.axes[5]),e.tilt=1.2*f(h.axes[3]));e.tilt*=c;p.vec3.scale(e.translation,e.translation,1);return e};g.extractTransformationKeyboard=function(f,c){c.translation[0]=f[1]-f[0];c.translation[1]=f[3]-f[2];c.translation[2]=f[4]-f[5];c.heading=f[7]-f[6];c.tilt=f[8]-f[9];c.zoom=f[10]-f[11];return c};g.isZeroTransformation=function(f){return 0===f.translation[0]&&0===f.translation[1]&&0===f.translation[2]&&0===f.heading&&0===f.tilt&&0===f.zoom}})},"esri/views/2d/input/handlers/KeyPan":function(){define(["require",
"exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler"],function(r,g,p,f){Object.defineProperty(g,"__esModule",{value:!0});r=function(f){function c(c,h,g){var a,b=f.call(this,!0)||this;b.view=c;b.keys=h;b._pressed=!1;b._keyMap=(a={},a[h.left]="left",a[h.right]="right",a[h.up]="up",a[h.down]="down",a);b.registerIncoming("key-down",g,function(a){return b._handleKeyDown(a)});b.registerIncoming("key-up",g,function(a){return b._handleKeyUp(a)});b.registerIncoming("blur",g,function(){return b._handleBlur()});
return b}p(c,f);c.prototype._handleKeyDown=function(c){c.data.repeat||this._handleKey(c,!0)};c.prototype._handleKeyUp=function(c){this._handleKey(c,!1)};c.prototype._handleBlur=function(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())};c.prototype._handleKey=function(c,f){var e=this._keyMap[c.data.key];if(this._pressed=null!=e){if(f)switch(this.view.mapViewNavigation.begin(),e){case "left":this.view.mapViewNavigation.continousPanLeft();break;case "right":this.view.mapViewNavigation.continousPanRight();
break;case "up":this.view.mapViewNavigation.continousPanUp();break;case "down":this.view.mapViewNavigation.continousPanDown()}else this._pressed=!1,this.view.mapViewNavigation.stop();c.stopPropagation()}};return c}(f.InputHandler);g.KeyPan=r})},"esri/views/2d/input/handlers/KeyRotate":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler"],function(r,g,p,f){Object.defineProperty(g,"__esModule",{value:!0});r=function(f){function c(c,h,g){var a,
b=f.call(this,!0)||this;b.view=c;b.keys=h;b._pressed=!1;b._keyToDirection=(a={},a[h.clockwiseOption1]="clockwise",a[h.clockwiseOption2]="clockwise",a[h.counterClockwiseOption1]="counterClockwise",a[h.counterClockwiseOption2]="counterClockwise",a[h.resetOption1]="reset",a[h.resetOption2]="reset",a);b.registerIncoming("key-down",g,function(a){return b._handleKeyDown(a)});b.registerIncoming("key-up",g,function(a){return b._handleKeyUp(a)});b.registerIncoming("blur",g,function(){return b._handleBlur()});
return b}p(c,f);c.prototype._handleKeyDown=function(c){c.data.repeat||this._handleKey(c,!0)};c.prototype._handleKeyUp=function(c){this._handleKey(c,!1)};c.prototype._handleBlur=function(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())};c.prototype._handleKey=function(c,f){var e=c.modifiers;if(!(0<e.size&&!e.has("Shift")||!this.view.constraints.rotationEnabled)&&(e=this._keyToDirection[c.data.key],this._pressed=null!=e)){if(f)switch(this.view.mapViewNavigation.begin(),e){case "clockwise":this.view.mapViewNavigation.continousRotateClockwise();
break;case "counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case "reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();c.stopPropagation()}};return c}(f.InputHandler);g.KeyRotate=r})},"esri/views/2d/input/handlers/KeyZoom":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../../core/compilerUtils","../../../input/InputHandler"],function(r,g,p,f,m){Object.defineProperty(g,
"__esModule",{value:!0});r=function(c){function e(e,f,a){var b=c.call(this,!0)||this;b.view=e;b.keys=f;b._keysToZoomAction={};b.registerIncoming("key-down",a,function(a){return b._handleKeyDown(a)});f.zoomIn.forEach(function(a){return b._keysToZoomAction[a]=0});f.zoomOut.forEach(function(a){return b._keysToZoomAction[a]=1});return b}p(e,c);e.prototype._handleKeyDown=function(c){this._handleKey(c)};e.prototype._handleKey=function(c){var e=c.modifiers;if(!(0<e.size)||e.has("Shift"))if(e=c.data.key,
e in this._keysToZoomAction){var e=this._keysToZoomAction[e],a=this.view.mapViewNavigation,b=null;switch(e){case 0:b=a.zoomIn();break;case 1:b=a.zoomOut();break;default:f.neverReached(e);return}a.begin();b.then(function(){return a.end()});c.stopPropagation()}};return e}(m.InputHandler);g.KeyZoom=r})},"esri/views/2d/input/handlers/MouseWheelZoom":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler"],function(r,g,p,f){Object.defineProperty(g,
"__esModule",{value:!0});r=function(f){function c(c,h){var e=f.call(this,!0)||this;e.view=c;e._canZoom=!0;e.registerIncoming("mouse-wheel",h,function(a){return e._handleMouseWheel(a)});return e}p(c,f);c.prototype._handleMouseWheel=function(c){var e=this;if(this.view.navigation.mouseWheelZoomEnabled&&(c.preventDefault(),c.stopPropagation(),this._canZoom)){var f=this.view.mapViewNavigation;c=c.data;if(c=f.zoom(1/Math.pow(.6,1/60*c.deltaY),[c.x,c.y]))this._canZoom=!1,c.catch(function(){}).then(function(){e._canZoom=
!0;f.end()})}};return c}(f.InputHandler);g.MouseWheelZoom=r})},"esri/views/2d/input/handlers/PinchAction":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/DragEventSeparator","../../../input/InputHandler"],function(r,g,p,f,m){Object.defineProperty(g,"__esModule",{value:!0});r=function(c){function e(e){var h=c.call(this,!0)||this;h.view=e;h.registerIncoming("drag",function(a){return h._handleDrag(a)});h.registerIncoming("pointer-down",function(){return h.stopMomentumNavigation()});
var a=h.view.mapViewNavigation;h.dragEventSeparator=new f.DragEventSeparator({start:function(b,c){a.pinch.begin(h.view,c.data);c.stopPropagation()},update:function(b,c){a.pinch.update(h.view,c.data);c.stopPropagation()},end:function(b,c){a.pinch.end(h.view);c.stopPropagation()},condition:function(a){return 2<=a}});return h}p(e,c);e.prototype._handleDrag=function(c){this.dragEventSeparator.handle(c)};e.prototype.stopMomentumNavigation=function(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()};
return e}(m.InputHandler);g.PinchRotateAndZoom=r})},"esri/views/input/BrowserEventSource":function(){define("require exports ../../core/has ../../core/screenUtils ../../core/libs/pep/pep ./keys ./gamepad/GamepadSource".split(" "),function(r,g,p,f,m,c,e){Object.defineProperty(g,"__esModule",{value:!0});var h=p("trident"),n=p("edge"),a=p("chrome"),b=p("ff"),d=p("safari");r=function(){function l(a,b){var c=this;this.input=b;this._active={};this._activePointerCaptures=new Set;this._keyDownState=new Set;
this._eventId=1;this._browserTouchPanningEnabled=!1;this._element=a;m.applyLocal(a);a.getAttribute("tabindex")||a.setAttribute("tabindex","0");this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost};
this._updateTouchAction();this._element.addEventListener("keydown",this._preventAltKeyDefault);this._gamepadSource=new e.GamepadSource(a,this.input);this._gamepadSource.onEvent=function(a){return c._callback("gamepad",a)}}l.prototype.destroy=function(){var a=this;this.activeEvents=this._callback=null;this._activePointerCaptures.forEach(function(b){a._releasePointerCaptureSafe(b)});this._gamepadSource&&(this._gamepadSource.destroy(),this._gamepadSource=null);this._activePointerCaptures=null;this._removeTouchAction();
this._element.removeEventListener("keydown",this._preventAltKeyDefault)};Object.defineProperty(l.prototype,"browserTouchPanningEnabled",{get:function(){return this._browserTouchPanningEnabled},set:function(a){this._browserTouchPanningEnabled=a;this._updateTouchAction();this._updateTouchEventHandling()},enumerable:!0,configurable:!0});Object.defineProperty(l.prototype,"onEventReceived",{set:function(a){this._callback=a},enumerable:!0,configurable:!0});Object.defineProperty(l.prototype,"activeEvents",
{set:function(a){var b=this,c;for(c in this._active)a&&a.has(c)||(this._element.removeEventListener(k[c],this._active[c]),delete this._active[c]);a&&a.forEach(function(a){if(!b._active[a]&&k[a]){var c=(b._eventHandlers[a]||b._handleDefault).bind(b,a);b._element.addEventListener(k[a],c);b._active[a]=c}});this._gamepadSource.pollingEnabled=a&&a.has("gamepad")},enumerable:!0,configurable:!0});l.prototype.setPointerCapture=function(a,b){b?(this._element.setPointerCapture(a.pointerId),this._activePointerCaptures.add(a.pointerId)):
(this._releasePointerCaptureSafe(a.pointerId),this._activePointerCaptures.delete(a.pointerId))};l.prototype._updateTouchAction=function(){this._element.classList.remove(this._browserTouchPanningEnabled?"esri-view-surface--touch-none":"esri-view-surface--touch-pan");this._element.classList.add(this._browserTouchPanningEnabled?"esri-view-surface--touch-pan":"esri-view-surface--touch-none")};l.prototype._updateTouchEventHandling=function(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",
this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)};l.prototype._removeTouchAction=function(){this._element.classList.remove("esri-view-surface--touch-none");this._element.classList.remove("esri-view-surface--touch-pan");this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)};l.prototype._releasePointerCaptureSafe=function(a){try{this._element.hasPointerCapture&&!this._element.hasPointerCapture(a)||this._element.releasePointerCapture(a)}catch(A){}};
l.prototype._updateNormalizedPointerLikeEvent=function(a,b){a=f.createScreenPointFromNativeEvent(this._element,a);l.test.disableSubpixelCoordinates&&(a.x=Math.round(a.x),a.y=Math.round(a.y));b.x=a.x;b.y=a.y;return b};l.prototype._handleKey=function(a,b){var d=c.eventKey(b);d&&"key-up"===a&&this._keyDownState.delete(d);b={native:b,key:d,repeat:d&&this._keyDownState.has(d)};d&&"key-down"===a&&this._keyDownState.add(b.key);this._callback(a,b)};l.prototype._handlePointer=function(a,b){b=this._updateNormalizedPointerLikeEvent(b,
{native:b,x:0,y:0,pointerType:b.pointerType,button:b.button,buttons:b.buttons,eventId:this._eventId++});this._callback(a,b)};l.prototype._handlePointerPreventDefault=function(a,b){var c=this._updateNormalizedPointerLikeEvent(b,{native:b,x:0,y:0,pointerType:b.pointerType,button:b.button,buttons:b.buttons,eventId:this._eventId++});b.preventDefault();this._callback(a,c)};l.prototype._handleMouseWheel=function(c,e){var k=e.deltaY;switch(e.deltaMode){case 0:if(h||n)k=k/document.documentElement.clientHeight*
600;break;case 1:k*=30;break;case 2:k*=900}h||n?k*=.7:a||d?k*=.6:b&&(k*=1.375);var f=Math.abs(k);100<f&&(k=k/f*200/(1+Math.exp(-.02*(f-100))));e=this._updateNormalizedPointerLikeEvent(e,{native:e,x:0,y:0,deltaY:k});this._callback(c,e)};l.prototype._handlePointerCaptureLost=function(a,b){this._activePointerCaptures.delete(b.pointerId);this._handleDefault(a,b)};l.prototype._handleDefault=function(a,b){var c={native:b};b.preventDefault();this._callback(a,c)};l.prototype._preventAltKeyDefault=function(a){"Alt"===
a.key&&a.preventDefault()};l.prototype._preventMultiTouchPanning=function(a){1<a.touches.length&&a.preventDefault()};l.test={disableSubpixelCoordinates:!1};return l}();g.BrowserEventSource=r;var k={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave",
"pointer-cancel":"pointercancel",focus:"focus",blur:"blur"}})},"esri/core/libs/pep/pep":function(){define(function(){function r(c,d){d=d||Object.create(null);var e=document.createEvent("Event");e.initEvent(c,d.bubbles||!1,d.cancelable||!1);c=2;for(var k;c<a.length;c++)k=a[c],e[k]=d[k]||b[c];e.buttons=d.buttons||0;c=0;c=d.pressure&&e.buttons?d.pressure:e.buttons?.5:0;e.x=e.clientX;e.y=e.clientY;e.pointerId=d.pointerId||0;e.width=d.width||0;e.height=d.height||0;e.pressure=c;e.tiltX=d.tiltX||0;e.tiltY=
d.tiltY||0;e.twist=d.twist||0;e.tangentialPressure=d.tangentialPressure||0;e.pointerType=d.pointerType||"";e.hwTimestamp=d.hwTimestamp||0;e.isPrimary=d.isPrimary||!1;return e}function g(){this.array=[];this.size=0}function p(a,b,c,d){this.addCallback=a.bind(d);this.removeCallback=b.bind(d);this.changedCallback=c.bind(d);w&&(this.observer=new w(this.mutationWatcher.bind(this)))}function f(a){return"body /shadow-deep/ "+m(a)}function m(a){return'[touch-action\x3d"'+a+'"]'}function c(a){return"{ -ms-touch-action: "+
a+"; touch-action: "+a+"; }"}function e(){if(J){C.forEach(function(a){String(a)===a?(B+=m(a)+c(a)+"\n",E&&(B+=f(a)+c(a)+"\n")):(B+=a.selectors.map(m)+c(a.rule)+"\n",E&&(B+=a.selectors.map(f)+c(a.rule)+"\n"))});var a=document.createElement("style");a.textContent=B;document.head.appendChild(a)}}function h(a){if(!u.pointermap.has(a))throw a=Error("NotFoundError"),a.name="NotFoundError",a;}function n(a){for(var b=a.parentNode;b&&b!==a.ownerDocument;)b=b.parentNode;if(!b)throw a=Error("InvalidStateError"),
a.name="InvalidStateError",a;}var a="bubbles cancelable view detail screenX screenY clientX clientY ctrlKey altKey shiftKey metaKey button relatedTarget pageX pageY".split(" "),b=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0],d=window.Map&&window.Map.prototype.forEach?Map:g;g.prototype={set:function(a,b){if(void 0===b)return this.delete(a);this.has(a)||this.size++;this.array[a]=b},has:function(a){return void 0!==this.array[a]},delete:function(a){this.has(a)&&(delete this.array[a],this.size--)},
get:function(a){return this.array[a]},clear:function(){this.size=this.array.length=0},forEach:function(a,b){return this.array.forEach(function(c,d){a.call(b,c,d,this)},this)}};var k="bubbles cancelable view detail screenX screenY clientX clientY ctrlKey altKey shiftKey metaKey button relatedTarget buttons pointerId width height pressure tiltX tiltY pointerType hwTimestamp isPrimary type target currentTarget which pageX pageY timeStamp".split(" "),l=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0,
0,0,0,0,0,"",0,!1,"",null,null,0,0,0,0],q={pointerover:1,pointerout:1,pointerenter:1,pointerleave:1},A="undefined"!==typeof SVGElementInstance,u={pointermap:new d,eventMap:Object.create(null),captureInfo:Object.create(null),eventSources:Object.create(null),eventSourceList:[],registerSource:function(a,b){var c=b.events;c&&(c.forEach(function(a){b[a]&&(this.eventMap[a]=b[a].bind(b))},this),this.eventSources[a]=b,this.eventSourceList.push(b))},register:function(a){for(var b=this.eventSourceList.length,
c=0,d;c<b&&(d=this.eventSourceList[c]);c++)d.register.call(d,a)},unregister:function(a){for(var b=this.eventSourceList.length,c=0,d;c<b&&(d=this.eventSourceList[c]);c++)d.unregister.call(d,a)},contains:function(a,b){try{return a.contains(b)}catch(Z){return!1}},down:function(a){a.bubbles=!0;this.fireEvent("pointerdown",a)},move:function(a){a.bubbles=!0;this.fireEvent("pointermove",a)},up:function(a){a.bubbles=!0;this.fireEvent("pointerup",a)},enter:function(a){a.bubbles=!1;this.fireEvent("pointerenter",
a)},leave:function(a){a.bubbles=!1;this.fireEvent("pointerleave",a)},over:function(a){a.bubbles=!0;this.fireEvent("pointerover",a)},out:function(a){a.bubbles=!0;this.fireEvent("pointerout",a)},cancel:function(a){a.bubbles=!0;this.fireEvent("pointercancel",a)},leaveOut:function(a){this.out(a);this.propagate(a,this.leave,!1)},enterOver:function(a){this.over(a);this.propagate(a,this.enter,!0)},eventHandler:function(a){if(!a._handledByPE){var b=a.type;(b=this.eventMap&&this.eventMap[b])&&b(a);a._handledByPE=
!0}},listen:function(a,b){b.forEach(function(b){this.addEvent(a,b)},this)},unlisten:function(a,b){b.forEach(function(b){this.removeEvent(a,b)},this)},addEvent:function(a,b){a.addEventListener(b,this.boundHandler)},removeEvent:function(a,b){a.removeEventListener(b,this.boundHandler)},makeEvent:function(a,b){this.captureInfo[b.pointerId]&&(b.relatedTarget=null);a=new r(a,b);b.preventDefault&&(a.preventDefault=b.preventDefault);a._target=a._target||b.target;return a},fireEvent:function(a,b){a=this.makeEvent(a,
b);return this.dispatchEvent(a)},cloneEvent:function(a){for(var b=Object.create(null),c,d=0;d<k.length;d++)c=k[d],b[c]=a[c]||l[d],A&&("target"===c||"relatedTarget"===c)&&b[c]instanceof SVGElementInstance&&(b[c]=b[c].correspondingUseElement);a.preventDefault&&(b.preventDefault=function(){a.preventDefault()});return b},getTarget:function(a){var b=this.captureInfo[a.pointerId];if(!b)return a._target;if(a._target===b||!(a.type in q))return b},propagate:function(a,b,c){for(var d=a.target,e=[];null!=d&&
d!==document&&!d.contains(a.relatedTarget);)if(e.push(d),d=d.parentNode,!d)return;c&&e.reverse();e.forEach(function(c){a.target=c;b.call(this,a)},this)},setCapture:function(a,b,c){this.captureInfo[a]&&this.releaseCapture(a,c);this.captureInfo[a]=b;this.implicitRelease=this.releaseCapture.bind(this,a,c);document.addEventListener("pointerup",this.implicitRelease);document.addEventListener("pointercancel",this.implicitRelease);var d=new r("gotpointercapture");d.pointerId=a;d._target=b;c||this.asyncDispatchEvent(d)},
releaseCapture:function(a,b){var c=this.captureInfo[a];if(c){this.captureInfo[a]=void 0;document.removeEventListener("pointerup",this.implicitRelease);document.removeEventListener("pointercancel",this.implicitRelease);var d=new r("lostpointercapture");d.pointerId=a;d._target=c;b||this.asyncDispatchEvent(d)}},dispatchEvent:function(a){var b=this.getTarget(a);if(b)return b.dispatchEvent(a)},asyncDispatchEvent:function(a){requestAnimationFrame(this.dispatchEvent.bind(this,a))}};u.boundHandler=u.eventHandler.bind(u);
var t={shadow:function(a){if(a)return a.shadowRoot||a.webkitShadowRoot},canTarget:function(a){return a&&!!a.elementFromPoint},targetingShadow:function(a){a=this.shadow(a);if(this.canTarget(a))return a},olderShadow:function(a){var b=a.olderShadowRoot;!b&&(a=a.querySelector("shadow"))&&(b=a.olderShadowRoot);return b},allShadows:function(a){var b=[];for(a=this.shadow(a);a;)b.push(a),a=this.olderShadow(a);return b},searchRoot:function(a,b,c){if(a){var d=a.elementFromPoint(b,c),e;for(e=this.targetingShadow(d);e;){if(a=
e.elementFromPoint(b,c))return d=this.targetingShadow(a),this.searchRoot(d,b,c)||a;e=this.olderShadow(e)}return d}},owner:function(a){for(;a.parentNode;)a=a.parentNode;a.nodeType!==Node.DOCUMENT_NODE&&a.nodeType!==Node.DOCUMENT_FRAGMENT_NODE&&(a=document);return a},findTarget:function(a){var b=a.clientX,c=a.clientY;a=this.owner(a.target);a.elementFromPoint(b,c)||(a=document);return this.searchRoot(a,b,c)}},x=Array.prototype.forEach.call.bind(Array.prototype.forEach),y=Array.prototype.map.call.bind(Array.prototype.map),
z=Array.prototype.slice.call.bind(Array.prototype.slice),v=Array.prototype.filter.call.bind(Array.prototype.filter),w=window.MutationObserver||window.WebKitMutationObserver,D={subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0,attributeFilter:["touch-action"]};p.prototype={watchSubtree:function(a){this.observer&&t.canTarget(a)&&this.observer.observe(a,D)},enableOnSubtree:function(a){this.watchSubtree(a);a===document&&"complete"!==document.readyState?this.installOnLoad():this.installNewSubtree(a)},
installNewSubtree:function(a){x(this.findElements(a),this.addElement,this)},findElements:function(a){return a.querySelectorAll?a.querySelectorAll("[touch-action]"):[]},removeElement:function(a){this.removeCallback(a)},addElement:function(a){this.addCallback(a)},elementChanged:function(a,b){this.changedCallback(a,b)},concatLists:function(a,b){return a.concat(z(b))},installOnLoad:function(){document.addEventListener("readystatechange",function(){"complete"===document.readyState&&this.installNewSubtree(document)}.bind(this))},
isElement:function(a){return a.nodeType===Node.ELEMENT_NODE},flattenMutationTree:function(a){var b=y(a,this.findElements,this);b.push(v(a,this.isElement));return b.reduce(this.concatLists,[])},mutationWatcher:function(a){a.forEach(this.mutationHandler,this)},mutationHandler:function(a){"childList"===a.type?(this.flattenMutationTree(a.addedNodes).forEach(this.addElement,this),this.flattenMutationTree(a.removedNodes).forEach(this.removeElement,this)):"attributes"===a.type&&this.elementChanged(a.target,
a.oldValue)}};var C=["none","auto","pan-x","pan-y",{rule:"pan-x pan-y",selectors:["pan-x pan-y","pan-y pan-x"]}],B="",J=window.PointerEvent||window.MSPointerEvent,E=!window.ShadowDOMPolyfill&&document.head.createShadowRoot,F=u.pointermap,H=[1,4,2,8,16],G=!1;try{G=1===(new MouseEvent("test",{buttons:1})).buttons}catch(M){}var L={POINTER_ID:1,POINTER_TYPE:"mouse",events:["mousedown","mousemove","mouseup","mouseover","mouseout"],register:function(a){u.listen(a,this.events)},unregister:function(a){u.unlisten(a,
this.events)},lastTouches:[],isEventSimulatedFromTouch:function(a){var b=this.lastTouches,c=a.clientX;a=a.clientY;for(var d=0,e=b.length,k;d<e&&(k=b[d]);d++){var f=Math.abs(a-k.y);if(25>=Math.abs(c-k.x)&&25>=f)return!0}},prepareEvent:function(a){var b=u.cloneEvent(a),c=b.preventDefault;b.preventDefault=function(){a.preventDefault();c()};b.pointerId=this.POINTER_ID;b.isPrimary=!0;b.pointerType=this.POINTER_TYPE;return b},prepareButtonsForMove:function(a,b){var c=F.get(this.POINTER_ID);a.buttons=0!==
b.which&&c?c.buttons:0;b.buttons=a.buttons},mousedown:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=F.get(this.POINTER_ID),c=this.prepareEvent(a);G||(c.buttons=H[c.button],b&&(c.buttons|=b.buttons),a.buttons=c.buttons);F.set(this.POINTER_ID,a);b&&0!==b.buttons?u.move(c):u.down(c)}},mousemove:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=this.prepareEvent(a);G||this.prepareButtonsForMove(b,a);b.button=-1;F.set(this.POINTER_ID,a);u.move(b)}},mouseup:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=
F.get(this.POINTER_ID),c=this.prepareEvent(a);if(!G){var d=H[c.button];c.buttons=b?b.buttons&~d:0;a.buttons=c.buttons}F.set(this.POINTER_ID,a);c.buttons&=~H[c.button];0===c.buttons?u.up(c):u.move(c)}},mouseover:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=this.prepareEvent(a);G||this.prepareButtonsForMove(b,a);b.button=-1;F.set(this.POINTER_ID,a);u.enterOver(b)}},mouseout:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=this.prepareEvent(a);G||this.prepareButtonsForMove(b,a);b.button=
-1;u.leaveOut(b)}},cancel:function(a){a=this.prepareEvent(a);u.cancel(a);this.deactivateMouse()},deactivateMouse:function(){F.delete(this.POINTER_ID)}},R=u.captureInfo,O=t.findTarget.bind(t),N=t.allShadows.bind(t),P=u.pointermap,S,I={events:["touchstart","touchmove","touchend","touchcancel"],register:function(a){S.enableOnSubtree(a)},unregister:function(){},elementAdded:function(a){var b=a.getAttribute("touch-action"),c=this.touchActionToScrollType(b);c&&(a._scrollType=c,u.listen(a,this.events),N(a).forEach(function(a){a._scrollType=
c;u.listen(a,this.events)},this))},elementRemoved:function(a){a._scrollType=void 0;u.unlisten(a,this.events);N(a).forEach(function(a){a._scrollType=void 0;u.unlisten(a,this.events)},this)},elementChanged:function(a,b){var c=a.getAttribute("touch-action"),d=this.touchActionToScrollType(c);b=this.touchActionToScrollType(b);d&&b?(a._scrollType=d,N(a).forEach(function(a){a._scrollType=d},this)):b?this.elementRemoved(a):d&&this.elementAdded(a)},scrollTypes:{EMITTER:"none",XSCROLLER:"pan-x",YSCROLLER:"pan-y",
SCROLLER:/^(?:pan-x pan-y)|(?:pan-y pan-x)|auto$/},touchActionToScrollType:function(a){var b=this.scrollTypes;if("none"===a)return"none";if(a===b.XSCROLLER)return"X";if(a===b.YSCROLLER)return"Y";if(b.SCROLLER.exec(a))return"XY"},POINTER_TYPE:"touch",firstTouch:null,isPrimaryTouch:function(a){return this.firstTouch===a.identifier},setPrimaryTouch:function(a){if(0===P.size||1===P.size&&P.has(1))this.firstTouch=a.identifier,this.firstXY={X:a.clientX,Y:a.clientY},this.scrolling=!1,this.cancelResetClickCount()},
removePrimaryPointer:function(a){a.isPrimary&&(this.firstXY=this.firstTouch=null,this.resetClickCount())},clickCount:0,resetId:null,resetClickCount:function(){var a=function(){this.clickCount=0;this.resetId=null}.bind(this);this.resetId=setTimeout(a,200)},cancelResetClickCount:function(){this.resetId&&clearTimeout(this.resetId)},typeToButtons:function(a){var b=0;if("touchstart"===a||"touchmove"===a)b=1;return b},touchToPointer:function(a){var b=this.currentTouchEvent,c=u.cloneEvent(a),d=c.pointerId=
a.identifier+2;c.target=R[d]||O(c);c.bubbles=!0;c.cancelable=!0;c.detail=this.clickCount;c.button=0;c.buttons=this.typeToButtons(b.type);c.width=2*(a.radiusX||a.webkitRadiusX||0);c.height=2*(a.radiusY||a.webkitRadiusY||0);c.pressure=a.force||a.webkitForce||.5;c.isPrimary=this.isPrimaryTouch(a);c.pointerType=this.POINTER_TYPE;c.altKey=b.altKey;c.ctrlKey=b.ctrlKey;c.metaKey=b.metaKey;c.shiftKey=b.shiftKey;var e=this;c.preventDefault=function(){e.scrolling=!1;e.firstXY=null;b.preventDefault()};return c},
processTouches:function(a,b){var c=a.changedTouches;this.currentTouchEvent=a;a=0;for(var d;a<c.length;a++)d=c[a],b.call(this,this.touchToPointer(d))},shouldScroll:function(a){if(this.firstXY){var b;b=a.currentTarget._scrollType;if("none"===b)b=!1;else if("XY"===b)b=!0;else{a=a.changedTouches[0];var c="Y"===b?"X":"Y";b=Math.abs(a["client"+b]-this.firstXY[b])>=Math.abs(a["client"+c]-this.firstXY[c])}this.firstXY=null;return b}},findTouch:function(a,b){for(var c=0,d=a.length,e;c<d&&(e=a[c]);c++)if(e.identifier===
b)return!0},vacuumTouches:function(a){var b=a.touches;if(P.size>=b.length){var c=[];P.forEach(function(a,d){1===d||this.findTouch(b,d-2)||c.push(a.out)},this);c.forEach(this.cancelOut,this)}},touchstart:function(a){this.vacuumTouches(a);this.setPrimaryTouch(a.changedTouches[0]);this.dedupSynthMouse(a);this.scrolling||(this.clickCount++,this.processTouches(a,this.overDown))},overDown:function(a){P.set(a.pointerId,{target:a.target,out:a,outTarget:a.target});u.enterOver(a);u.down(a)},touchmove:function(a){this.scrolling||
(this.shouldScroll(a)?(this.scrolling=!0,this.touchcancel(a)):(a.preventDefault(),this.processTouches(a,this.moveOverOut)))},moveOverOut:function(a){var b=P.get(a.pointerId);if(b){var c=b.out,d=b.outTarget;u.move(a);c&&d!==a.target&&(c.relatedTarget=a.target,a.relatedTarget=d,c.target=d,a.target?(u.leaveOut(c),u.enterOver(a)):(a.target=d,a.relatedTarget=null,this.cancelOut(a)));b.out=a;b.outTarget=a.target}},touchend:function(a){this.dedupSynthMouse(a);this.processTouches(a,this.upOut)},upOut:function(a){this.scrolling||
(u.up(a),u.leaveOut(a));this.cleanUpPointer(a)},touchcancel:function(a){this.processTouches(a,this.cancelOut)},cancelOut:function(a){u.cancel(a);u.leaveOut(a);this.cleanUpPointer(a)},cleanUpPointer:function(a){P.delete(a.pointerId);this.removePrimaryPointer(a)},dedupSynthMouse:function(a){var b=L.lastTouches;a=a.changedTouches[0];this.isPrimaryTouch(a)&&(a={x:a.clientX,y:a.clientY},b.push(a),b=function(a,b){b=a.indexOf(b);-1<b&&a.splice(b,1)}.bind(null,b,a),setTimeout(b,2500))}};S=new p(I.elementAdded,
I.elementRemoved,I.elementChanged,I);var K=u.pointermap,Q=window.MSPointerEvent&&"number"===typeof window.MSPointerEvent.MSPOINTER_TYPE_MOUSE,T={events:"MSPointerDown MSPointerMove MSPointerUp MSPointerOut MSPointerOver MSPointerCancel MSGotPointerCapture MSLostPointerCapture".split(" "),register:function(a){u.listen(a,this.events)},unregister:function(a){u.unlisten(a,this.events)},POINTER_TYPES:["","unavailable","touch","pen","mouse"],prepareEvent:function(a){var b=a;Q&&(b=u.cloneEvent(a),b.pointerType=
this.POINTER_TYPES[a.pointerType]);return b},cleanup:function(a){K.delete(a)},MSPointerDown:function(a){K.set(a.pointerId,a);a=this.prepareEvent(a);u.down(a)},MSPointerMove:function(a){a=this.prepareEvent(a);u.move(a)},MSPointerUp:function(a){var b=this.prepareEvent(a);u.up(b);this.cleanup(a.pointerId)},MSPointerOut:function(a){a=this.prepareEvent(a);u.leaveOut(a)},MSPointerOver:function(a){a=this.prepareEvent(a);u.enterOver(a)},MSPointerCancel:function(a){var b=this.prepareEvent(a);u.cancel(b);this.cleanup(a.pointerId)},
MSLostPointerCapture:function(a){a=u.makeEvent("lostpointercapture",a);u.dispatchEvent(a)},MSGotPointerCapture:function(a){a=u.makeEvent("gotpointercapture",a);u.dispatchEvent(a)}},V,U,Y;window.navigator.msPointerEnabled?(V=function(a){h(a);n(this);0!==u.pointermap.get(a).buttons&&(u.setCapture(a,this,!0),this.msSetPointerCapture(a))},U=function(a){h(a);u.releaseCapture(a,!0);this.msReleasePointerCapture(a)}):(V=function(a){h(a);n(this);0!==u.pointermap.get(a).buttons&&u.setCapture(a,this)},U=function(a){h(a);
u.releaseCapture(a)});Y=function(a){return!!u.captureInfo[a]};var W=window.PointerEvent||window.MSPointerEvent;return{dispatcher:u,Installer:p,PointerEvent:r,PointerMap:d,targetFinding:t,applyGlobal:function(){e();window.PointerEvent||(window.PointerEvent=r,window.navigator.msPointerEnabled?(Object.defineProperty(window.navigator,"maxTouchPoints",{value:window.navigator.msMaxTouchPoints,enumerable:!0}),u.registerSource("ms",T)):(Object.defineProperty(window.navigator,"maxTouchPoints",{value:0,enumerable:!0}),
u.registerSource("mouse",L),void 0!==window.ontouchstart&&u.registerSource("touch",I)),u.register(document));window.Element&&!Element.prototype.setPointerCapture&&Object.defineProperties(Element.prototype,{setPointerCapture:{value:V},releasePointerCapture:{value:U},hasPointerCapture:{value:Y}})},applyLocal:function(a){W||(window.PointerEvent||(window.navigator.msPointerEnabled?u.registerSource("ms",T):(u.registerSource("mouse",L),void 0!==window.ontouchstart&&u.registerSource("touch",I)),u.register(document)),
window.Element&&!Element.prototype.setPointerCapture&&(a.setPointerCapture=V.bind(a),a.releasePointerCapture=U.bind(a),a.hasPointerCapture=Y.bind(a)),a.getAttribute("touch-action")||a.setAttribute("touch-action","none"))}}})},"esri/views/input/gamepad/GamepadSource":function(){define("require exports ../../../core/tsSupport/assignHelper ../../../core/scheduling ./GamepadInputDevice ./GamepadState".split(" "),function(r,g,p,f,m,c){Object.defineProperty(g,"__esModule",{value:!0});r=function(){function e(e,
f){var a=this;this.element=e;this.input=f;this.handleGamepadConnectedEvent=function(b){a.handleGamepadConnected(b.gamepad)};this.handleGamepadDisconnectedEvent=function(b){b=b.gamepad;var d=a.inputDevices[b.index];d&&(a.emitGamepadEvent(b,c.extractState(d),!1),a.inputDevices[b.index]=void 0,a.latestUpdate[b.index]=void 0,a.input.gamepad.devices.remove(d))};this.frameTask=null;this.latestUpdate=[];this.inputDevices=[];this.callback=null;if(this.supported="getGamepads"in window.navigator)this.forEachGamepad(function(b){return a.handleGamepadConnected(b)}),
window.addEventListener("gamepadconnected",this.handleGamepadConnectedEvent),window.addEventListener("gamepaddisconnected",this.handleGamepadDisconnectedEvent)}e.prototype.destroy=function(){this.pollingEnabled=!1;this.supported&&(window.removeEventListener("gamepadconnected",this.handleGamepadConnectedEvent),window.removeEventListener("gamepaddisconnected",this.handleGamepadDisconnectedEvent))};Object.defineProperty(e.prototype,"onEvent",{set:function(c){this.callback=c},enumerable:!0,configurable:!0});
Object.defineProperty(e.prototype,"pollingEnabled",{set:function(c){this.supported&&(c?this.startPolling():this.stopPolling())},enumerable:!0,configurable:!0});e.prototype.handleGamepadConnected=function(c){var e=new m(c);"unknown"!==e.deviceType&&(this.inputDevices[c.index]=e,this.input.gamepad.devices.add(e))};e.prototype.startPolling=function(){var c=this;null==this.frameTask&&(this.frameTask=f.addFrameTask({update:function(){return c.readGamepadState()}}))};e.prototype.stopPolling=function(){null!=
this.frameTask&&(this.frameTask.remove(),this.frameTask=null,this.latestUpdate=[])};e.prototype.readGamepadState=function(){var e=this,f=document.hasFocus(),a=this.element.contains(document.activeElement),b="document"===this.input.gamepad.enabledFocusMode&&!f||"view"===this.input.gamepad.enabledFocusMode&&!a;this.forEachGamepad(function(a){var d=e.inputDevices[a.index];if(d){var f=e.latestUpdate[a.index],d=c.extractState(d),h=b||c.stateIdle(d);f&&(f.timestamp===a.timestamp||!f.active&&h||c.stateEqual(f.state,
d))||e.emitGamepadEvent(a,d,!h)}})};e.prototype.forEachGamepad=function(c){for(var e=window.navigator.getGamepads(),a=0;a<e.length;a++){var b=e[a];this.validate(b)&&c(b)}};e.prototype.emitGamepadEvent=function(c,e,a){var b=this.latestUpdate[c.index];if((b=b&&b.active)||a)this.latestUpdate[c.index]={timestamp:c.timestamp,state:e,active:a},this.callback&&this.callback({device:this.inputDevices[c.index],state:e,action:!b&&a?"start":b&&a?"update":"end"})};e.prototype.validate=function(c){if(!c||!c.connected)return!1;
for(var e=0;e<c.axes.length;e++)if(isNaN(c.axes[e]))return!1;return!0};return e}();g.GamepadSource=r})},"esri/views/input/gamepad/GamepadState":function(){define(["require","exports","../../../core/mathUtils"],function(r,g,p){Object.defineProperty(g,"__esModule",{value:!0});g.extractState=function(f){var g=f.native;return{buttons:g.buttons.map(function(c){return c.pressed?c.value?c.value:1:0}),axes:g.axes.map(function(c){var e=f.axisThreshold,h=Math.abs(c);c=h<e?0:p.sign(c)*(h-e)/(1-e);return c})}};
g.stateEqual=function(f,g){if(f.axes.length!==g.axes.length||f.buttons.length!==g.buttons.length)return!1;for(var c=0;c<f.axes.length;c++)if(f.axes[c]!==g.axes[c])return!1;for(c=0;c<f.buttons.length;c++)if(f.buttons[c]!==g.buttons[c])return!1;return!0};g.stateIdle=function(f){for(var g=0;g<f.axes.length;g++)if(0!==f.axes[g])return!1;for(g=0;g<f.buttons.length;g++)if(0!==f.buttons[g])return!1;return!0}})},"esri/views/input/handlers/PreventContextMenu":function(){define(["require","exports","../../../core/tsSupport/extendsHelper",
"../InputHandler"],function(r,g,p,f){Object.defineProperty(g,"__esModule",{value:!0});r=function(f){function c(){var c=f.call(this,!0)||this;c.registerIncoming("context-menu",function(c){c.data.native.preventDefault()});return c}p(c,f);return c}(f.InputHandler);g.PreventContextMenu=r;g.default=r})},"esri/views/input/recognizers/DoubleTapDrag":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/clock ../../../core/MapUtils ../../../core/screenUtils ../DragEventSeparator ../InputHandler ./SingleAndDoubleClick ./support".split(" "),
function(r,g,p,f,m,c,e,h,n,a){Object.defineProperty(g,"__esModule",{value:!0});r=function(b){function d(a,d,h,g,m){void 0===a&&(a=n.DefaultParameters.maximumDoubleClickDelay);void 0===d&&(d=n.DefaultParameters.maximumDoubleClickDistance);void 0===h&&(h=n.DefaultParameters.maximumDoubleTouchDelay);void 0===g&&(g=n.DefaultParameters.maximumDoubleTouchDistance);void 0===m&&(m=f.default);var k=b.call(this,!1)||this;k.maximumDoubleClickDelay=a;k.maximumDoubleClickDistance=d;k.maximumDoubleTouchDelay=h;
k.maximumDoubleTouchDistance=g;k._clock=m;k._doubleTapDragReady=!1;k._doubleTapDragActive=!1;k._dragStartCenter=c.createScreenPoint(0,0);k._pointerState=new Map;k._doubleTapDrag=k.registerOutgoing("double-tap-drag");k._dragEventSeparator=new e.DragEventSeparator({start:function(a,b){return k._dragStart(a,b)},update:function(a,b){return k._dragUpdate(b)},end:function(a,b){return k._dragEnd(b)}});k.registerIncoming("drag",function(a){return k._dragEventSeparator.handle(a)});k.registerIncoming("pointer-down",
function(a){return k._handlePointerDown(a)});k.registerIncoming("pointer-up",function(){return k._handlePointerUp()});return k}p(d,b);d.prototype.onUninstall=function(){this._pointerState.forEach(function(a){null!=a.doubleTapTimeout&&(a.doubleTapTimeout.remove(),a.doubleTapTimeout=null)})};Object.defineProperty(d.prototype,"hasPendingInputs",{get:function(){return m.someMap(this._pointerState,function(a){return null!=a.doubleTapTimeout})},enumerable:!0,configurable:!0});d.prototype._clearPointerDown=
function(a){var b=this._pointerState.get(a);b&&(b.doubleTapTimeout.remove(),b.doubleTapTimeout=null,this._pointerState.delete(a),this.refreshHasPendingInputs())};d.prototype._createDoubleTapDragData=function(a,b,c){return{action:a,delta:b,button:c.button,buttons:c.buttons,pointer:c.pointer,pointers:c.pointers,pointerType:c.pointerType,timestamp:c.timestamp}};d.prototype._dragStart=function(a,b){if(this._doubleTapDragReady&&1===a){this._doubleTapDragReady=!1;this._doubleTapDragActive=!0;var d=b.data;
a=b.modifiers;this._dragStartCenter=d.center;d=this._createDoubleTapDragData("begin",c.createScreenPoint(0,0),d);this._doubleTapDrag.emit(d,void 0,a);b.stopPropagation()}};d.prototype._dragUpdate=function(a){if(this._doubleTapDragActive){var b=a.data,d=a.modifiers,e=b.center,e=c.createScreenPoint(e.x-this._dragStartCenter.x,e.y-this._dragStartCenter.y),b=this._createDoubleTapDragData("update",e,b);this._doubleTapDrag.emit(b,void 0,d);a.stopPropagation()}};d.prototype._dragEnd=function(a){if(this._doubleTapDragActive){var b=
a.data,d=a.modifiers,e=b.center,e=c.createScreenPoint(e.x-this._dragStartCenter.x,e.y-this._dragStartCenter.y),b=this._createDoubleTapDragData("end",e,b);this._doubleTapDrag.emit(b,void 0,d);this._doubleTapDragActive=!1;a.stopPropagation()}};d.prototype._handlePointerDown=function(b){var c=b.data,d=this._pointerId(c),e=this._pointerState.get(d),k=c.native.pointerType;e?(k="touch"===k?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance,this._clearPointerDown(d),a.manhattanDistance(e.event.data,
c)>k?this._storePointerDown(b):this._doubleTapDragReady=!0):this._storePointerDown(b)};d.prototype._handlePointerUp=function(){this._doubleTapDragReady=!1};d.prototype._pointerId=function(a){var b=a.native;a=b.pointerId;var c=b.button,b=b.pointerType;return"mouse"===b?a+":"+c:""+b};d.prototype._storePointerDown=function(a){var b=this,c=a.data,d=c.native.pointerType,e=this._pointerId(c),c=this._clock.setTimeout(function(){return b._clearPointerDown(e)},"touch"===d?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay);
this._pointerState.set(e,{event:a,doubleTapTimeout:c});this.refreshHasPendingInputs()};return d}(h.InputHandler);g.DoubleTapDrag=r})},"esri/views/input/recognizers/SingleAndDoubleClick":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/clock ../../../core/MapUtils ../InputHandler ./support".split(" "),function(r,g,p,f,m,c,e){Object.defineProperty(g,"__esModule",{value:!0});g.DefaultParameters={maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,
maximumDoubleTouchDistance:35};r=function(c){function h(a,b,d,e,h){void 0===a&&(a=g.DefaultParameters.maximumDoubleClickDelay);void 0===b&&(b=g.DefaultParameters.maximumDoubleClickDistance);void 0===d&&(d=g.DefaultParameters.maximumDoubleTouchDelay);void 0===e&&(e=g.DefaultParameters.maximumDoubleTouchDistance);void 0===h&&(h=f.default);var k=c.call(this,!1)||this;k.maximumDoubleClickDelay=a;k.maximumDoubleClickDistance=b;k.maximumDoubleTouchDelay=d;k.maximumDoubleTouchDistance=e;k._clock=h;k._pointerState=
new Map;k._click=k.registerOutgoing("click");k._doubleClick=k.registerOutgoing("double-click");k.registerIncoming("immediate-click",k._handleImmediateClick.bind(k));k.registerIncoming("pointer-drag",k._handlePointerDrag.bind(k));k.registerIncoming("drag",k._handleDrag.bind(k));return k}p(h,c);h.prototype.onUninstall=function(){this._pointerState.forEach(function(a){null!=a.doubleClickTimeout&&(a.doubleClickTimeout.remove(),a.doubleClickTimeout=null)})};Object.defineProperty(h.prototype,"hasPendingInputs",
{get:function(){return m.someMap(this._pointerState,function(a){return null!=a.doubleClickTimeout})},enumerable:!0,configurable:!0});h.prototype._pointerId=function(a){a=a.native;return"mouse"===a.pointerType?a.pointerId+":"+a.button:""+a.pointerType};h.prototype._handleImmediateClick=function(a){var b=a.data,c=this._pointerId(b),k=this._pointerState.get(c);if(k){var f="touch"===b.native.pointerType?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;e.manhattanDistance(k.event.data,b)>
f?(this._clearDoubleClickTimeout(c,!0),this._startClick(a)):(this._clearDoubleClickTimeout(c,!1),this._doubleClick.emit(k.event.data,void 0,k.event.modifiers))}else this._startClick(a)};h.prototype._startClick=function(a){var b=this,c=this._pointerId(a.data);this._pointerState.set(c,{event:a,doubleClickTimeout:this._clock.setTimeout(function(){return b._doubleClickTimeoutExceeded(c)},"touch"===a.data.native.pointerType?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay)});this.refreshHasPendingInputs()};
h.prototype._handlePointerDrag=function(a){a=this._pointerId(a.data.currentEvent);this._clearDoubleClickTimeout(a,!0)};h.prototype._handleDrag=function(a){a=this._pointerId(a.data.pointer);this._clearDoubleClickTimeout(a,!0)};h.prototype._clearDoubleClickTimeout=function(a,b){var c=this._pointerState.get(a);c&&(c.doubleClickTimeout.remove(),c.doubleClickTimeout=null,b&&this._doubleClickTimeoutExceeded(a),this._pointerState.delete(a),this.refreshHasPendingInputs())};h.prototype._doubleClickTimeoutExceeded=
function(a){var b=this._pointerState.get(a);this._click.emit(b.event.data,void 0,b.event.modifiers);b.doubleClickTimeout=null;this._pointerState.delete(a);this.refreshHasPendingInputs()};return h}(c.InputHandler);g.SingleAndDoubleClick=r})},"esri/views/input/recognizers/support":function(){define(["require","exports","../../../core/screenUtils"],function(r,g,p){Object.defineProperty(g,"__esModule",{value:!0});g.manhattanDistance=function(f,g){return Math.abs(g.x-f.x)+Math.abs(g.y-f.y)};g.euclideanDistance=
function(f,g){var c=g.x-f.x;f=g.y-f.y;return Math.sqrt(c*c+f*f)};g.fitCircleLSQ=function(f,g){g?(g.radius=0,g.center.x=0,g.center.y=0):g={radius:0,center:p.createScreenPoint()};if(0===f.length)return g;if(1===f.length)return g.center.x=f[0].x,g.center.y=f[0].y,g;if(2===f.length){var c=f[0];f=f[1];var e=[f.x-c.x,f.y-c.y],h=e[0],e=e[1];g.radius=Math.sqrt(h*h+e*e)/2;g.center.x=(c.x+f.x)/2;g.center.y=(c.y+f.y)/2;return g}for(var n=0,a=0,b=0;b<f.length;b++)n+=f[b].x,a+=f[b].y;for(var n=n/f.length,a=a/
f.length,d=f.map(function(a){return a.x-n}),k=f.map(function(b){return b.y-a}),l=c=g=0,q=0,m=h=0,b=e=0;b<d.length;b++){var u=d[b],t=k[b],x=u*u,y=t*t;g+=x;c+=y;l+=u*t;q+=x*u;h+=y*t;m+=u*y;e+=t*x}b=g;d=l;k=c;q=.5*(q+m);h=.5*(h+e);e=b*k-l*d;m=(q*k-h*d)/e;h=(b*h-l*q)/e;e=p.createScreenPoint(m+n,h+a);return{radius:Math.sqrt(m*m+h*h+(g+c)/f.length),center:e}}})},"esri/views/input/recognizers/Drag":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/screenUtils ../../../layers/support/timeUtils ../InputHandler ./support".split(" "),
function(r,g,p,f,m,c,e){function h(a){var b=[];a.forEach(function(a){b.push(f.createScreenPoint(a.event.x,a.event.y))});return e.fitCircleLSQ(b)}function n(a){var c=h(a),d=0;a.forEach(function(a){for(var e=b(a,c),e=e-a.lastAngle;e>Math.PI;)e-=2*Math.PI;for(;e<-Math.PI;)e+=2*Math.PI;e=a.lastAngle+e;a.lastAngle=e;d+=e-a.initialAngle});d/=a.size||1;return{angle:d,radius:c.radius,center:c.center}}function a(a){var b=new Map;a.forEach(function(a,c){return b.set(c,a.event)});return b}function b(a,b){a=
a.event;return Math.atan2(a.y-b.center.y,a.x-b.center.x)}Object.defineProperty(g,"__esModule",{value:!0});r=function(c){function d(a){var b=c.call(this,!1)||this;b.navigationTouch=a;b.startStateModifiers=new Set;b.activePointerMap=new Map;b.isDragging=!1;b.isCurrentDragSuppressed=!1;b.drag=b.registerOutgoing("drag");b.registerIncoming("pointer-drag",b.handlePointerDrag.bind(b));b.registerIncoming("pointer-up",b.handlePointerUpAndPointerLost.bind(b));b.registerIncoming("pointer-capture-lost",b.handlePointerUpAndPointerLost.bind(b));
b.registerIncoming("pointer-cancel",b.handlePointerUpAndPointerLost.bind(b));return b}p(d,c);d.prototype.createPayload=function(b,c,d,e){return{action:b,pointerType:this.pointerType,button:this.mouseButton,buttons:c.buttons,timestamp:e,pointers:a(this.activePointerMap),pointer:c,angle:d.angle,radius:d.radius,center:d.center}};d.prototype.addPointer=function(a){var c=a.native.pointerId,d=n(this.activePointerMap).angle;a={event:a,initialAngle:0,lastAngle:0};this.activePointerMap.set(c,a);c=b(a,h(this.activePointerMap));
a.initialAngle=c;a.lastAngle=c;this.updatePointerAngles(d)};d.prototype.updatePointer=function(a){if(!a||null!=a.x||null!=a.y){var b=this.activePointerMap.get(a.native.pointerId);b?b.event=a:this.addPointer(a)}};d.prototype.removePointer=function(a){var b=n(this.activePointerMap).angle;this.activePointerMap.delete(a);this.updatePointerAngles(b)};d.prototype.updatePointerAngles=function(a){var c=n(this.activePointerMap);this.activePointerMap.forEach(function(d){d.initialAngle=b(d,c)-a;d.lastAngle=
b(d,c)-a})};d.prototype.emitEvent=function(a,b,c){var d=n(this.activePointerMap);this.drag.emit(this.createPayload(a,b,d,c),void 0,this.startStateModifiers)};d.prototype.handlePointerUpAndPointerLost=function(a){var b=a.data.native.pointerId,c=m.Milliseconds(a.timestamp);this.activePointerMap.get(b)&&(1===this.activePointerMap.size?(this.updatePointer(a.data),!this.isCurrentDragSuppressed&&this.emitEvent("end",a.data,c),this.isCurrentDragSuppressed=this.isDragging=!1,this.removePointer(b)):(this.removePointer(b),
this.emitEvent("removed",a.data,m.Milliseconds(a.timestamp))))};d.prototype.handlePointerDrag=function(a){var b=a.data,c=b.currentEvent,d=m.Milliseconds(a.timestamp);switch(b.action){case "start":case "update":this.isDragging?this.activePointerMap.has(c.native.pointerId)?(this.updatePointer(c),!this.isCurrentDragSuppressed&&this.emitEvent("update",c,d)):(this.addPointer(c),this.emitEvent("added",c,d),this.isCurrentDragSuppressed=this.isSuppressed):(this.updatePointer(c),this.pointerType=a.data.startEvent.pointerType,
this.mouseButton=a.data.startEvent.button,this.startStateModifiers=a.modifiers,this.isDragging=!0,this.isCurrentDragSuppressed=this.isSuppressed,!this.isCurrentDragSuppressed&&this.emitEvent("start",c,d))}};Object.defineProperty(d.prototype,"isSuppressed",{get:function(){return this.navigationTouch&&!this.navigationTouch.browserTouchPanEnabled&&"touch"===this.pointerType&&1===this.activePointerMap.size},enumerable:!0,configurable:!0});return d}(c.InputHandler);g.Drag=r;(function(a){a[a.Left=0]="Left";
a[a.Middle=1]="Middle";a[a.Right=2]="Right";a[a.Back=3]="Back";a[a.Forward=4]="Forward";a[a.Undefined=-1]="Undefined"})(g.Button||(g.Button={}))})},"esri/views/input/recognizers/ImmediateDoubleClick":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/clock ../InputHandler ./SingleAndDoubleClick ./support".split(" "),function(r,g,p,f,m,c,e){Object.defineProperty(g,"__esModule",{value:!0});r=function(g){function h(a,b,d,e,h){void 0===a&&(a=c.DefaultParameters.maximumDoubleClickDelay);
void 0===b&&(b=c.DefaultParameters.maximumDoubleClickDistance);void 0===d&&(d=c.DefaultParameters.maximumDoubleTouchDelay);void 0===e&&(e=c.DefaultParameters.maximumDoubleTouchDistance);void 0===h&&(h=f.default);var k=g.call(this,!1)||this;k.maximumDoubleClickDelay=a;k.maximumDoubleClickDistance=b;k.maximumDoubleTouchDelay=d;k.maximumDoubleTouchDistance=e;k._clock=h;k._pointerState=new Map;k._immediateDoubleClick=k.registerOutgoing("immediate-double-click");k.registerIncoming("pointer-down",k._handlePointerDown.bind(k));
k.registerIncoming("pointer-up",function(a){k._handlePointerLoss(a,"pointer-up")});k.registerIncoming("pointer-capture-lost",function(a){k._handlePointerLoss(a,"pointer-capture-lost")});k.registerIncoming("pointer-cancel",function(a){k._handlePointerLoss(a,"pointer-cancel")});return k}p(h,g);h.prototype.onUninstall=function(){this._pointerState.forEach(function(a){a.immediateDoubleClick&&a.immediateDoubleClick.timeoutHandle.remove()});g.prototype.onUninstall.call(this)};h.prototype._handlePointerDown=
function(a){a=a.data;var b=a.native.pointerId;this._pointerState.has(b)||(this._pointerState.set(b,{downButton:a.native.button,immediateDoubleClick:null}),this.startCapturingPointer(a.native))};h.prototype._handlePointerLoss=function(a,b){var c=a.data,k=this._pointerState.get(c.native.pointerId);if(k&&"pointer-up"===b&&k.downButton===c.native.button)if(b=k.immediateDoubleClick){b.timeoutHandle.remove();var f="touch"===a.data.native.pointerType?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;
e.manhattanDistance(b,a.data)>f?this._startImmediateDoubleClick(a,k):(this._immediateDoubleClick.emit(a.data,void 0,b.modifiers),this._removeState(c.native))}else this._startImmediateDoubleClick(a,k)};h.prototype._startImmediateDoubleClick=function(a,b){var c=this;b.immediateDoubleClick={x:a.data.x,y:a.data.y,modifiers:a.modifiers,timeoutHandle:this._clock.setTimeout(function(){return c._removeState(a.data.native)},"touch"===a.data.native.pointerType?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay)}};
h.prototype._removeState=function(a){this._pointerState.delete(a.pointerId);this.stopCapturingPointer(a);this.refreshHasPendingInputs()};return h}(m.InputHandler);g.ImmediateDoubleClick=r})},"esri/views/input/recognizers/PointerClickHoldAndDrag":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/clock ../InputHandler ./support".split(" "),function(r,g,p,f,m,c){Object.defineProperty(g,"__esModule",{value:!0});g.DefaultParameters={maximumClickDelay:300,movementUntilMouseDrag:1.5,
movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500};r=function(e){function h(c,a,b,d,k,h){void 0===c&&(c=g.DefaultParameters.maximumClickDelay);void 0===a&&(a=g.DefaultParameters.movementUntilMouseDrag);void 0===b&&(b=g.DefaultParameters.movementUntilPenDrag);void 0===d&&(d=g.DefaultParameters.movementUntilTouchDrag);void 0===k&&(k=g.DefaultParameters.holdDelay);void 0===h&&(h=f.default);var l=e.call(this,!1)||this;l.maximumClickDelay=c;l.movementUntilMouseDrag=a;l.movementUntilPenDrag=
b;l.movementUntilTouchDrag=d;l.holdDelay=k;l._clock=h;l._pointerState=new Map;l._pointerDrag=l.registerOutgoing("pointer-drag");l._immediateClick=l.registerOutgoing("immediate-click");l._pointerHold=l.registerOutgoing("hold");l.registerIncoming("pointer-down",l._handlePointerDown.bind(l));l.registerIncoming("pointer-up",function(a){l._handlePointerLoss(a,"pointer-up")});l.registerIncoming("pointer-capture-lost",function(a){l._handlePointerLoss(a,"pointer-capture-lost")});l.registerIncoming("pointer-cancel",
function(a){l._handlePointerLoss(a,"pointer-cancel")});l._moveHandle=l.registerIncoming("pointer-move",l._handlePointerMove.bind(l));l._moveHandle.pause();return l}p(h,e);h.prototype.onUninstall=function(){this._pointerState.forEach(function(c){null!=c.holdTimeout&&(c.holdTimeout.remove(),c.holdTimeout=null)});e.prototype.onUninstall.call(this)};h.prototype._handlePointerDown=function(c){var a=this,b=c.data,d=b.native.pointerId,e=null;0===this._pointerState.size&&(e=this._clock.setTimeout(function(){var b=
a._pointerState.get(d);b&&(b.isDragging||(a._pointerHold.emit(b.previousEvent,void 0,c.modifiers),b.holdEmitted=!0),b.holdTimeout=null)},this.holdDelay));e={startEvent:b,previousEvent:b,startTimestamp:c.timestamp,isDragging:!1,downButton:b.native.button,holdTimeout:e,modifiers:new Set};this._pointerState.set(d,e);this.startCapturingPointer(b.native);this._moveHandle.resume();1<this._pointerState.size&&this.startDragging(c)};h.prototype._createPointerDragData=function(c,a,b){return{action:c,startEvent:a.startEvent,
previousEvent:a.previousEvent,currentEvent:b}};h.prototype._handlePointerMove=function(e){var a=e.data,b=this._pointerState.get(a.native.pointerId);if(b){if(b.isDragging)this._pointerDrag.emit(this._createPointerDragData("update",b,a),void 0,b.modifiers);else{var d=c.euclideanDistance(a,b.startEvent),k=this._getDragThreshold(a.native.pointerType);d>k&&this.startDragging(e)}b.previousEvent=a}};h.prototype._getDragThreshold=function(c){switch(c){case "touch":return this.movementUntilTouchDrag;case "pen":return this.movementUntilPenDrag;
default:return this.movementUntilMouseDrag}};h.prototype.startDragging=function(c){var a=this,b=c.data,d=b.native.pointerId;this._pointerState.forEach(function(e){null!=e.holdTimeout&&(e.holdTimeout.remove(),e.holdTimeout=null);e.isDragging||(e.modifiers=c.modifiers,e.isDragging=!0,d===e.startEvent.native.pointerId?a._pointerDrag.emit(a._createPointerDragData("start",e,b)):a._pointerDrag.emit(a._createPointerDragData("start",e,e.previousEvent),c.timestamp))})};h.prototype._handlePointerLoss=function(c,
a){var b=c.data,d=b.native.pointerId,e=this._pointerState.get(d);e&&(null!=e.holdTimeout&&(e.holdTimeout.remove(),e.holdTimeout=null),e.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",e,"pointer-up"===a?b:e.previousEvent),void 0,e.modifiers):"pointer-up"===a&&e.downButton===b.native.button&&c.timestamp-e.startTimestamp<=this.maximumClickDelay&&!e.holdEmitted&&this._immediateClick.emit(b),this._pointerState.delete(d),this.stopCapturingPointer(b.native),0===this._pointerState.size&&
this._moveHandle.pause())};return h}(m.InputHandler);g.PointerClickHoldAndDrag=r})},"esri/views/2d/support/HighlightOptions":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../Color ../../../core/Accessor ../../../core/accessorSupport/decorators".split(" "),function(r,g,p,f,m,c,e){var h=0;return function(c){function a(){var a=null!==c&&c.apply(this,arguments)||this;a.color=new m([0,255,255]);a.haloOpacity=1;a.fillOpacity=
.25;return a}p(a,c);Object.defineProperty(a.prototype,"version",{get:function(){return h++},enumerable:!0,configurable:!0});f([e.property({readOnly:!0,dependsOn:["color","haloColor","haloOpacity","fillOpacity"]})],a.prototype,"version",null);f([e.property({type:m})],a.prototype,"color",void 0);f([e.property({type:m})],a.prototype,"haloColor",void 0);f([e.property()],a.prototype,"haloOpacity",void 0);f([e.property()],a.prototype,"fillOpacity",void 0);return a=f([e.subclass("esri.views.2d.support.HighlightOptions")],
a)}(e.declared(c))})},"esri/views/support/screenshotUtils":function(){define(["require","exports","../../core/tsSupport/assignHelper","../../core/compilerUtils","../../core/mathUtils"],function(r,g,p,f,m){function c(c,d){var e=c||{},k=e.format,h=e.quality,g=e.rotation,e=e.disableSlice,l=b(c,d.padding),t;t=d.width-l.left-l.right;d=d.height-l.top-l.bottom;l={x:0,y:0,width:t,height:d};if(c&&c.area){null!=c.area.x&&(l.x=Math.floor(c.area.x));null!=c.area.y&&(l.y=Math.floor(c.area.y));var x=null!=c.area.width?
Math.floor(c.area.width):null,u=null!=c.area.height?Math.floor(c.area.height):null;l.width=t-l.x;l.height=d-l.y;null!=x&&null!=u?(l.width=Math.min(l.width,x),l.height=Math.min(l.height,u)):null==x&&null!=u?(x=Math.min(l.width,x),l.height*=x/l.width,l.width=x):null!=x&&null==u&&(x=Math.min(l.height,u),l.width*=x/l.height,l.height=x)}l=a(l,c);x=Math.floor(Math.max(l.x,0));u=Math.floor(Math.max(l.y,0));t={x:x,y:u,width:Math.floor(Math.min(l.width,t-x)),height:Math.floor(Math.min(l.height,d-u))};d=t.width/
t.height;l=l.width/l.height;l!==d&&(l>d?(d=Math.floor(t.width/l),t={x:t.x,y:Math.floor(t.y+(t.height-d)/2),width:t.width,height:d}):(d=Math.floor(t.height*l),t={x:Math.floor(t.x+(t.width-d)/2),y:t.y,width:d,height:t.height}));l=n(c,t);d=l.width;l=l.height;a:switch(k){case "png":case "jpg":case "jpeg":break a;case null:case void 0:k=q;break a;default:f.neverReached(k),k=q}x=A[k];h=m.clamp(null!=h?h:x,0,100);return{format:k,quality:h,area:t,width:d,height:l,rotation:g,disableSlice:!!e,ignoreBackground:!(!c||
!c.ignoreBackground),ignorePadding:!(!c||!c.ignorePadding)}}function e(a,b){return a.toDataURL(l[b.format],b.quality/100)}function h(a,b,c){c||(d||(d=document.createElement("canvas"),d.width=1,d.height=1),c=d);return c.getContext("2d").createImageData(a,b)}function n(a,b){if(!a)return b;var c=a.width;a=a.height;if(null!=c&&null!=a)return{width:Math.floor(c),height:Math.floor(a)};if(null==c&&null==a)return b;b=b.width/b.height;return null==a?{width:Math.floor(c),height:Math.floor(c/b)}:{width:Math.floor(a*
b),height:Math.floor(a)}}function a(a,b){if(!b||null==b.width||null==b.height)return a;b=b.width/b.height;var c=a.width/a.height;if(c===b)return a;if(c<b)return b=Math.floor(a.height*b),a.x-=(b-a.width)/2,a.width=b,a;b=Math.floor(a.width/b);a.y-=(b-a.height)/2;a.height=b;return a}function b(a,b){return!b||a&&a.ignorePadding?u:b}Object.defineProperty(g,"__esModule",{value:!0});g.completeUserSettings=c;g.toRenderSettings=function(a,d){var e=c(a,d),k=e.area,f=e.width/k.width,h=b(e,d.padding),g=h.left+
h.right,l=h.top+h.bottom;return{framebufferWidth:Math.floor((d.width-g)*f+g),framebufferHeight:Math.floor((d.height-l)*f+l),region:{x:Math.floor(k.x*f)+h.left,y:Math.floor(k.y*f)+h.top,width:e.width,height:e.height},format:e.format,quality:e.quality,rotation:e.rotation,pixelRatio:f,layers:a&&a.layers?a.layers:[],disableSlice:e.disableSlice,ignoreBackground:e.ignoreBackground,ignorePadding:e.ignorePadding}};g.encodeResult=function(a,b,c,d){if(d.premultipliedAlpha)for(var k=a.data,f=k.length,h=0;h<
f;h+=4){var g=k[h+3];0<g&&(g/=255,k[h+0]/=g,k[h+1]/=g,k[h+2]/=g)}c.width=a.width;c.height=a.height;k=c.getContext("2d");k.putImageData(a,0,0);d.flipY&&(k.save(),k.globalCompositeOperation="copy",k.scale(1,-1),k.translate(0,-k.canvas.height),k.drawImage(k.canvas,0,0),k.restore());a=k.getImageData(0,0,a.width,a.height);b=e(c,b);c.width=0;c.height=0;return{dataUrl:b,data:a}};g.toDataUrl=e;g.createEmptyImageData=function(a,b,c){if(!a||!b)throw Error("Cannot construct image data without dimensions");if(k)try{return new ImageData(a,
b)}catch(z){k=!1}return h(a,b,c)};g.wrapImageData=function(a,b,c,d){if(!b||!c)throw Error("Cannot construct image data without dimensions");if(k)try{return new ImageData(a,b,c)}catch(v){k=!1}b=h(b,c,d);b.data.set(a,0);return b};g.resampleHermite=function(a,b,c,d,e,k,f,h){void 0===d&&(d=0);void 0===e&&(e=0);void 0===k&&(k=a.width-d);void 0===f&&(f=a.height-e);void 0===h&&(h=!1);var g=a.data,l=b.width,q=b.height,m=b.data;k/=l;f/=q;var t=Math.ceil(k/2),n=Math.ceil(f/2);a=a.width;for(var u=0;u<q;u++)for(var x=
0;x<l;x++){for(var v=4*(x+(h?q-u-1:u)*l),w=0,p=0,y=0,z=0,A=0,r=0,D=(u+.5)*f,C=Math.floor(u*f);C<(u+1)*f;C++)for(var U=Math.abs(D-(C+.5))/n,Y=(x+.5)*k,U=U*U,W=Math.floor(x*k);W<(x+1)*k;W++){var M=Math.abs(Y-(W+.5))/t,M=Math.sqrt(U+M*M);if(!(1<=M)){var M=2*M*M*M-3*M*M+1,X=4*(d+W+(e+C)*a),r=r+M*g[X+3],p=p+M;!c&&255>g[X+3]&&(M=M*g[X+3]/255);y+=M*g[X];z+=M*g[X+1];A+=M*g[X+2];w+=M}}m[v]=y/w;m[v+1]=z/w;m[v+2]=A/w;m[v+3]=r/p}return b};g.screenshotSuperSampleSettings=function(a,c,d){if(!c)return a;c=a.framebufferWidth;
var e=a.framebufferHeight,k=a.pixelRatio,f=a.region;d=b(a,d);var h=d.left+d.right,g=d.top+d.bottom,l=c-h,q=e-g,m=Math.min(8,Math.min((2048-h)/l,(2048-g)/q));return 1.5>m?a:p({},a,{framebufferWidth:Math.round(l*m)+h,framebufferHeight:Math.round(q*m)+g,pixelRatio:k*m,resample:{region:{x:Math.round((f.x-d.left)*m)+d.left,y:Math.round((f.y-d.top)*m)+d.top,width:Math.round(f.width*m),height:Math.round(f.height*m)},width:c,height:e}})};var d=null,k=!0,l={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},
q="jpg",A={png:100,jpg:98,jpeg:98},u={top:0,right:0,bottom:0,left:0}})},"esri/views/support/WebGLRequirements":function(){define(["require","exports","../../core/tsSupport/assignHelper","../../core/Error","../../core/has"],function(r,g,p,f,m){Object.defineProperty(g,"__esModule",{value:!0});var c={supportsMajorWebPerformanceCaveat:!1};g.check=function(e){e=p({},c,e);return m("esri-webgl")?!e.supportsMajorWebPerformanceCaveat&&m("esri-webgl-major-performance-caveat")?new f("webgl:major-performance-caveat-detected",
"Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is blacklisted."):m("esri-webgl-high-precision-fragment")?m("esri-webgl-vertex-shader-samplers")?m("esri-webgl-element-index-uint")?m("esri-webgl-standard-derivatives")?m("esri-webgl-instanced-arrays")?null:new f("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported."):new f("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported."):
new f("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported."):new f("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new f("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new f("webgl:required","WebGL is required but not supported.")}})},"esri/views/ui/2d/DefaultUI2D":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ../DefaultUI".split(" "),
function(r,g,p,f,m,c){return function(c){function e(e){e=c.call(this,e)||this;e.components=["attribution","zoom"];return e}p(e,c);f([m.property()],e.prototype,"components",void 0);return e=f([m.subclass("esri.views.ui.2d.DefaultUI2D")],e)}(m.declared(c))})},"esri/views/ui/DefaultUI":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/watchUtils ../../core/accessorSupport/decorators ./Component ./UI ../../widgets/Attribution ../../widgets/Compass ../../widgets/NavigationToggle ../../widgets/Zoom".split(" "),
function(r,g,p,f,m,c,e,h,n,a,b,d){return function(k){function h(a){a=k.call(this,a)||this;a._defaultPositionLookup={attribution:"manual",compass:"top-leading","navigation-toggle":"top-leading",zoom:"top-leading"};a.components=[];return a}p(h,k);h.prototype.initialize=function(){this._handles.add([m.init(this,"components",this._componentsWatcher.bind(this)),m.init(this,"view",this._updateViewAwareWidgets.bind(this))])};h.prototype._removeComponents=function(a){var b=this;a.forEach(function(a){if(a=
b._find(a))b.remove(a),a.destroy()})};h.prototype._updateViewAwareWidgets=function(a){var b=this;this.components.forEach(function(c){(c=(c=b._find(c))&&c.widget)&&void 0!==c.view&&(c.view=a)})};h.prototype._componentsWatcher=function(a,b){this._removeComponents(b);this._addComponents(a);this._adjustPadding(a)};h.prototype._adjustPadding=function(a){-1!==a.indexOf("attribution")||this._isOverridden("padding")||(this.padding=this.padding.top)};h.prototype._addComponents=function(a){var b=this;this.initialized&&
a.forEach(function(a){return b.add(b._createComponent(a),b._defaultPositionLookup[a])})};h.prototype._createComponent=function(a){var b=this._createWidget(a);if(b)return new e({id:a,node:b})};h.prototype._createWidget=function(a){if("attribution"===a)return this._createAttribution();if("compass"===a)return this._createCompass();if("navigation-toggle"===a)return this._createNavigationToggle();if("zoom"===a)return this._createZoom()};h.prototype._createAttribution=function(){return new n({view:this.view})};
h.prototype._createCompass=function(){return new a({view:this.view})};h.prototype._createNavigationToggle=function(){return new b({view:this.view})};h.prototype._createZoom=function(){return new d({view:this.view})};f([c.property()],h.prototype,"components",void 0);return h=f([c.subclass("esri.views.ui.DefaultUI")],h)}(c.declared(h))})},"esri/views/ui/Component":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/domUtils ../../core/accessorSupport/decorators".split(" "),
function(r,g,p,f,m,c,e){return function(h){function g(){var a=null!==h&&h.apply(this,arguments)||this;a.widget=null;return a}p(g,h);g.prototype.destroy=function(){this.widget&&this.widget.destroy();this.node=null};Object.defineProperty(g.prototype,"id",{get:function(){return this.get("widget.id")||this.get("node.id")},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"node",{set:function(a){var b=this._get("node");a!==b&&(a&&a.classList.add("esri-component"),b&&b.classList.remove("esri-component"),
this._set("node",a))},enumerable:!0,configurable:!0});g.prototype.castNode=function(a){if(!a)return this._set("widget",null),null;if("string"===typeof a||a&&"nodeType"in a)return this._set("widget",null),c.byId(a);a&&"function"===typeof a.render&&!a.domNode&&(a.domNode=document.createElement("div"));this._set("widget",a);return a.domNode};f([e.property()],g.prototype,"id",null);f([e.property()],g.prototype,"node",null);f([e.cast("node")],g.prototype,"castNode",null);f([e.property({readOnly:!0})],
g.prototype,"widget",void 0);return g=f([e.subclass("esri.views.ui.Component")],g)}(e.declared(m))})},"esri/views/ui/UI":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/domUtils ../../core/Evented ../../core/Handles ../../core/watchUtils ../../core/accessorSupport/decorators ./Component ../../widgets/support/widgetUtils".split(" "),function(r,g,p,f,m,c,e,h,n,a,b,d){function k(a){return"object"!==
typeof a||a instanceof b||"declaredClass"in a||!("component"in a||"index"in a||"position"in a)?null:a}function l(a,b){var c=b.bottom,d=b.left,e=b.right;a.style.top=b.top;a.style.bottom=c;a.style.left=d;a.style.right=e}var q={left:0,top:0,bottom:0,right:0},A={bottom:30,top:15,right:15,left:15};return function(e){function g(a){a=e.call(this,a)||this;a._cornerNameToContainerLookup={};a._positionNameToContainerLookup={};a._components=[];a._componentToKey=new Map;a._handles=new h;a.view=null;a._initContainers();
return a}f(g,e);g.prototype.initialize=function(){this._handles.add([n.init(this,"view.padding, container",this._applyViewPadding.bind(this)),n.init(this,"padding",this._applyUIPadding.bind(this))])};g.prototype.destroy=function(){this.container=null;for(var a=0,b=this._components;a<b.length;a++)b[a].destroy();this._components.length=0;this._handles.destroy();this._componentToKey.clear()};Object.defineProperty(g.prototype,"container",{set:function(a){var b=this._get("container");a!==b&&(a&&(a.classList.add("esri-ui"),
this._attachContainers(a)),b&&(b.classList.remove("esri-ui"),l(b,{top:"",bottom:"",left:"",right:""}),c.empty(b)),this._set("container",a))},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"height",{get:function(){var a=this.get("view.height")||0;if(0===a)return a;var b=this._getViewPadding();return Math.max(a-(b.top+b.bottom),0)},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"padding",{get:function(){return this._get("padding")},set:function(a){a?this._override("padding",
a):this._clearOverride("padding")},enumerable:!0,configurable:!0});g.prototype.castPadding=function(a){return"number"===typeof a?{bottom:a,top:a,right:a,left:a}:p({},A,a)};Object.defineProperty(g.prototype,"width",{get:function(){var a=this.get("view.width")||0;if(0===a)return a;var b=this._getViewPadding();return Math.max(a-(b.left+b.right),0)},enumerable:!0,configurable:!0});g.prototype.add=function(a,c){var d=this,e,f;if(Array.isArray(a))a.forEach(function(a){return d.add(a,c)});else{var g=k(a);
g&&(e=g.index,c=g.position,a=g.component,f=g.key);c&&"object"===typeof c&&(e=c.index,f=c.key,c=c.position);!a||c&&!this._isValidPosition(c)||(a instanceof b||(a=new b({node:a})),this._place({component:a,position:c,index:e}),this._components.push(a),f&&this._componentToKey.set(a,f))}};g.prototype.remove=function(a,b){var c=this;if(a){if(Array.isArray(a))return a.map(function(a){return c.remove(a,b)});var d=this._find(a);if(d){var e=this._componentToKey;if(!e.has(a)||e.get(a)===b)return e=this._components.indexOf(d),
d.node.parentNode&&d.node.parentNode.removeChild(d.node),this._componentToKey.delete(a),this._components.splice(e,1)[0]}}};g.prototype.empty=function(a){var b=this;if(Array.isArray(a))return a.map(function(a){return b.empty(a)}).reduce(function(a,b){return a.concat(b)});a=a||"manual";return"manual"===a?Array.prototype.slice.call(this._manualContainer.children).filter(function(a){return!a.classList.contains("esri-ui-corner")}).map(function(a){return b.remove(a)}):this._isValidPosition(a)?Array.prototype.slice.call(this._cornerNameToContainerLookup[a].children).map(this.remove,
this):null};g.prototype.move=function(a,b){var c=this;Array.isArray(a)&&a.forEach(function(a){return c.move(a,b)});if(a){var d,e=k(a)||k(b);e&&(d=e.index,b=e.position,a=e.component||a);(!b||this._isValidPosition(b))&&(a=this.remove(a))&&this.add(a,{position:b,index:d})}};g.prototype.find=function(a){return a?(a=this._findById(a))&&(a.widget||a.node):null};g.prototype._find=function(a){return a?a instanceof b?this._findByComponent(a):"string"===typeof a?this._findById(a):this._findByNode(a.domNode||
a):null};g.prototype._getViewPadding=function(){return this.get("view.padding")||q};g.prototype._attachContainers=function(a){a.appendChild(this._innerContainer);a.appendChild(this._manualContainer)};g.prototype._initContainers=function(){var a=document.createElement("div");a.classList.add("esri-ui-inner-container");a.classList.add("esri-ui-corner-container");var b=document.createElement("div");b.classList.add("esri-ui-inner-container");b.classList.add("esri-ui-manual-container");var c=document.createElement("div");
c.classList.add("esri-ui-top-left");c.classList.add("esri-ui-corner");a.appendChild(c);var e=document.createElement("div");e.classList.add("esri-ui-top-right");e.classList.add("esri-ui-corner");a.appendChild(e);var k=document.createElement("div");k.classList.add("esri-ui-bottom-left");k.classList.add("esri-ui-corner");a.appendChild(k);var f=document.createElement("div");f.classList.add("esri-ui-bottom-right");f.classList.add("esri-ui-corner");a.appendChild(f);this._innerContainer=a;this._manualContainer=
b;a=d.isRTL();this._cornerNameToContainerLookup={"top-left":c,"top-right":e,"bottom-left":k,"bottom-right":f,"top-leading":a?e:c,"top-trailing":a?c:e,"bottom-leading":a?f:k,"bottom-trailing":a?k:f};this._positionNameToContainerLookup=p({manual:b},this._cornerNameToContainerLookup)};g.prototype._isValidPosition=function(a){return!!this._positionNameToContainerLookup[a]};g.prototype._place=function(a){var b=a.component,d=a.index;a=this._positionNameToContainerLookup[a.position||"manual"];var e=-1<d,
k=b.widget;k&&!k._started&&"function"===typeof k.postMixInProperties&&"function"===typeof k.buildRendering&&"function"===typeof k.postCreate&&"function"===typeof k.startup&&b.widget.startup();e?(e=Array.prototype.slice.call(a.children),0===d?a.firstChild?c.insertBefore(b.node,a.firstChild):a.appendChild(b.node):d>=e.length?a.appendChild(b.node):c.insertBefore(b.node,e[d])):a.appendChild(b.node)};g.prototype._applyViewPadding=function(){var a=this.container;a&&l(a,this._toPxPosition(this._getViewPadding()))};
g.prototype._applyUIPadding=function(){var a=this._innerContainer;a&&l(a,this._toPxPosition(this.padding))};g.prototype._toPxPosition=function(a){return{top:this._toPxUnit(a.top),left:this._toPxUnit(a.left),right:this._toPxUnit(a.right),bottom:this._toPxUnit(a.bottom)}};g.prototype._toPxUnit=function(a){return 0===a?"0":a+"px"};g.prototype._findByComponent=function(a){var b=null,c;this._components.some(function(d){(c=d===a)&&(b=d);return c});return b};g.prototype._findById=function(a){var b=null,
c;this._components.some(function(d){(c=d.id===a)&&(b=d);return c});return b};g.prototype._findByNode=function(a){var b=null,c;this._components.some(function(d){(c=d.node===a)&&(b=d);return c});return b};m([a.property()],g.prototype,"container",null);m([a.property({dependsOn:["view.height"]})],g.prototype,"height",null);m([a.property({value:A})],g.prototype,"padding",null);m([a.cast("padding")],g.prototype,"castPadding",null);m([a.property()],g.prototype,"view",void 0);m([a.property({dependsOn:["view.width"]})],
g.prototype,"width",null);return g=m([a.subclass("esri.views.ui.UI")],g)}(a.declared(e.EventedAccessor))})},"esri/widgets/Attribution":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/i18n!./Attribution/nls/Attribution ../core/watchUtils ../core/accessorSupport/decorators ./Widget ./Attribution/AttributionViewModel ./support/widget".split(" "),function(r,g,p,f,m,c,e,h,n,a){return function(b){function d(a){a=b.call(this,a)||this;a._isOpen=
!1;a._attributionTextOverflowed=!1;a._prevSourceNodeHeight=0;a.iconClass="esri-icon-description";a.itemDelimiter=" | ";a.label=m.widgetLabel;a.view=null;a.viewModel=new n;return a}p(d,b);d.prototype.postInitialize=function(){var a=this;this.own(c.on(this,"viewModel.items","change",function(){return a.scheduleRender()}))};Object.defineProperty(d.prototype,"attributionText",{get:function(){return this.viewModel.items.reduce(function(a,b){-1===a.indexOf(b.text)&&a.push(b.text);return a},[]).join(this.itemDelimiter)},
enumerable:!0,configurable:!0});d.prototype.render=function(){var b,c=(b={},b["esri-attribution--open"]=this._isOpen,b);return a.tsx("div",{bind:this,class:this.classes("esri-attribution esri-widget",c),onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),a.tsx("div",{class:"esri-attribution__powered-by"},"Powered by"," ",a.tsx("a",{class:this.classes("esri-attribution__link","esri-widget__anchor"),href:"http://www.esri.com/",target:"_blank",rel:"noreferrer"},"Esri")))};
d.prototype._renderSourcesNode=function(){var b,c=this._isOpen,d=this._isInteractive(),e=d?0:-1,f=this.attributionText,g=d?"button":void 0,c=(b={},b["esri-attribution__sources--open"]=c,b["esri-interactive"]=d,b);return a.tsx("div",{afterCreate:this._afterSourcesNodeCreate,afterUpdate:this._afterSourcesNodeUpdate,bind:this,class:this.classes("esri-attribution__sources",c),innerHTML:f,role:g,tabIndex:e})};d.prototype._afterSourcesNodeCreate=function(a){this._prevSourceNodeHeight=a.clientWidth};d.prototype._afterSourcesNodeUpdate=
function(a){var b=!1,c=a.clientHeight;a=a.scrollWidth>=a.clientWidth;var d=this._attributionTextOverflowed!==a;this._attributionTextOverflowed=a;d&&(b=!0);this._isOpen&&(a=c<this._prevSourceNodeHeight,this._prevSourceNodeHeight=c,a&&(this._isOpen=!1,b=!0));b&&this.scheduleRender()};d.prototype._toggleState=function(){this._isInteractive()&&(this._isOpen=!this._isOpen)};d.prototype._isInteractive=function(){return this._isOpen||this._attributionTextOverflowed};f([e.property({dependsOn:["viewModel.items.length",
"itemDelimiter"],readOnly:!0}),a.renderable()],d.prototype,"attributionText",null);f([e.property()],d.prototype,"iconClass",void 0);f([e.property(),a.renderable()],d.prototype,"itemDelimiter",void 0);f([e.property()],d.prototype,"label",void 0);f([e.aliasOf("viewModel.view")],d.prototype,"view",void 0);f([e.property({type:n}),a.renderable(["state","view.size"])],d.prototype,"viewModel",void 0);f([a.accessibleHandler()],d.prototype,"_toggleState",null);return d=f([e.subclass("esri.widgets.Attribution")],
d)}(e.declared(h))})},"esri/widgets/Attribution/AttributionViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/awaiterHelper ../../core/tsSupport/generatorHelper ../../geometry ../../core/arrayUtils ../../core/asyncUtils ../../core/Collection ../../core/HandleOwner ../../core/watchUtils ../../core/accessorSupport/decorators ../../geometry/support/contains ../../geometry/support/webMercatorUtils".split(" "),
function(r,g,p,f,m,c,e,h,n,a,b,d,k,l,q){function A(a,b){return a.length!==b.length||a.some(function(a,c){return a.text!==b[c].text})}function u(a,b,c){c&&b&&(h.find(a,function(a){return a.layerView===b&&a.text===c})||a.push({text:c,layerView:b}))}var t=[];return function(b){function g(c){var e=b.call(this,c)||this;e.clear=function(){e._fetchedAttributionData.clear();e._pendingAttributions.clear();e.handles.remove("suspension");e.notifyChange("state")};e._pendingAttributions=new Set;e._fetchedAttributionData=
new Map;e.items=new a;e.view=null;e._allLayerViewsChange=function(a){e.handles.remove("suspension");var b=e.get("view.allLayerViews");b&&e.handles.add(b.map(function(a){return a.watch(["suspended","attributionVisible"],e._updateAttributionItems)}),"suspension");a&&a.removed&&a.removed.forEach(function(a){e._pendingAttributions.delete(a);e._fetchedAttributionData.delete(a)});e._updateAttributionItems()};e._updateAttributionItems=function(){var a=e.get("view.allLayerViews");t.length=0;a?(a.forEach(function(a){if(!a.suspended&&
a.get("layer.attributionVisible")){var b=a.layer;if(b&&"copyright"in b&&"function"===typeof b.originOf&&"user"===b.originOf("copyright"))u(t,a,b.copyright);else if(b.hasAttributionData)if(e._fetchedAttributionData.has(a)){var c=e._fetchedAttributionData.get(a);c&&u(t,a,e._getDynamicAttribution(c,e.view,b))}else e._fetchAttributionData(a);else(c=b.get("portalItem.accessInformation"))?u(t,a,c):u(t,a,b.copyright)}}),A(e.items,t)&&(e.items.removeAll(),e.items.addMany(t)),e.notifyChange("state")):e.clear()};
e.handles.add([d.on(e,"view.allLayerViews","change",e._allLayerViewsChange,e._allLayerViewsChange,e.clear),d.whenTrue(e,"view.stationary",function(){return e._updateAttributionItems()})]);return e}p(g,b);g.prototype.destroy=function(){this.view=null;this._fetchedAttributionData.clear();this._pendingAttributions.clear()};Object.defineProperty(g.prototype,"state",{get:function(){return this.get("view.ready")?0<this._pendingAttributions.size?"loading":"ready":"disabled"},enumerable:!0,configurable:!0});
g.prototype._fetchAttributionData=function(a){return m(this,void 0,void 0,function(){var b,d;return c(this,function(c){switch(c.label){case 0:if(this._pendingAttributions.has(a))return[2];this._pendingAttributions.add(a);return[4,n.result(a.layer.fetchAttributionData())];case 1:return b=c.sent(),this._pendingAttributions.has(a)&&(d=b.ok?this._createContributionIndex(b.value,"bing-maps"===a.layer.type):null,this._pendingAttributions.delete(a),this._fetchedAttributionData.set(a,d)),this._updateAttributionItems(),
[2]}})})};g.prototype._createContributionIndex=function(a,b){a=a.contributors;var c={};if(!a)return c;for(var d=0;d<a.length;d++){var k=a[d],f=k.coverageAreas;if(!f)return;for(var g=0;g<f.length;g++)for(var h=f[g],l=h.bbox,m=h.zoomMin-(b&&h.zoomMin?1:0),n=h.zoomMax-(b&&h.zoomMax?1:0),h={extent:q.geographicToWebMercator({xmin:l[1],ymin:l[0],xmax:l[3],ymax:l[2],spatialReference:e.SpatialReference.WGS84}),attribution:k.attribution||"",score:null!=h.score?h.score:100,id:d};m<=n;m++)c[m]=c[m]||[],c[m].push(h)}c.maxKey=
Math.max.apply(null,Object.keys(c));return c};g.prototype._getDynamicAttribution=function(a,b,c){var d=b.extent;c=c.tileInfo.scaleToZoom(b.scale);c=Math.min(a.maxKey,Math.round(c));if(!d||null==c||-1>=c)return"";a=a[c];var e=q.project(d.center.clone().normalize(),b.spatialReference),k={};return a?a.filter(function(a){var b=!k[a.id]&&e&&l.extentContainsPoint(a.extent,e);b&&(k[a.id]=!0);return b}).sort(function(a,b){return b.score-a.score||a.objectId-b.objectId}).map(function(a){return a.attribution}).join(", "):
""};f([k.property({readOnly:!0,type:a})],g.prototype,"items",void 0);f([k.property({dependsOn:["view.ready"],readOnly:!0})],g.prototype,"state",null);f([k.property()],g.prototype,"view",void 0);return g=f([k.subclass("esri.widgets.Attribution.AttributionViewModel")],g)}(k.declared(b.HandleOwner))})},"esri/widgets/Compass":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/i18n!./Compass/nls/Compass ../core/accessorSupport/decorators ./Widget ./Compass/CompassViewModel ./support/widget".split(" "),
function(r,g,p,f,m,c,e,h,n){return function(a){function b(b){b=a.call(this,b)||this;b.goToOverride=null;b.iconClass="esri-icon-locate-circled";b.label=m.widgetLabel;b.view=null;b.viewModel=new h;return b}p(b,a);b.prototype.reset=function(){};b.prototype.render=function(){var a,b,c=this.viewModel,e=c.orientation,c=c.state,f="disabled"===c,g="compass"===("rotation"===c?"rotation":"compass"),c=f?-1:0,f=(a={},a["esri-disabled"]=f,a["esri-interactive"]=!f,a);a=(b={},b["esri-icon-compass"]=g,b["esri-icon-dial"]=
!g,b);return n.tsx("div",{bind:this,class:this.classes("esri-compass esri-widget--button esri-widget",f),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:c,"aria-label":m.reset,title:m.reset},n.tsx("span",{"aria-hidden":"true",class:this.classes("esri-compass__icon",a),styles:this._toRotationTransform(e)}),n.tsx("span",{class:"esri-icon-font-fallback-text"},m.reset))};b.prototype._reset=function(){this.viewModel.reset()};b.prototype._toRotationTransform=function(a){return{transform:"rotateZ("+
a.z+"deg)"}};f([c.aliasOf("viewModel.goToOverride")],b.prototype,"goToOverride",void 0);f([c.property()],b.prototype,"iconClass",void 0);f([c.property()],b.prototype,"label",void 0);f([c.aliasOf("viewModel.view")],b.prototype,"view",void 0);f([c.property({type:h}),n.renderable(["viewModel.orientation","viewModel.state"])],b.prototype,"viewModel",void 0);f([c.aliasOf("viewModel.reset")],b.prototype,"reset",null);f([n.accessibleHandler()],b.prototype,"_reset",null);return b=f([c.subclass("esri.widgets.Compass")],
b)}(c.declared(e))})},"esri/widgets/Compass/CompassViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Handles ../../core/watchUtils ../../core/accessorSupport/decorators ../support/GoTo".split(" "),function(r,g,p,f,m,c,e,h,n){return function(a){function b(b){b=a.call(this,b)||this;b._handles=new c;b.orientation={x:0,y:0,z:0};b.view=null;b._updateForCamera=b._updateForCamera.bind(b);b._updateForRotation=
b._updateForRotation.bind(b);b._updateRotationWatcher=b._updateRotationWatcher.bind(b);b.view;return b}p(b,a);b.prototype.initialize=function(){this._handles.add(e.init(this,"view",this._updateRotationWatcher))};b.prototype.destroy=function(){this._handles.destroy();this.view=this._handles=null};Object.defineProperty(b.prototype,"canShowNorth",{get:function(){var a=this.get("view.spatialReference");return!(!a||!a.isWebMercator&&!a.isGeographic)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,
"state",{get:function(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"},enumerable:!0,configurable:!0});b.prototype.reset=function(){if(this.get("view.ready")){var a={};"2d"===this.view.type?a.rotation=0:a.heading=0;this.callGoTo({target:a})}};b.prototype._updateForRotation=function(a){void 0!==a&&null!==a&&(this.orientation={z:a})};b.prototype._updateForCamera=function(a){a&&(this.orientation={x:0,y:0,z:-a.heading})};b.prototype._updateRotationWatcher=function(a){this._handles.removeAll();
a&&("2d"===a.type?this._handles.add(e.init(this,"view.rotation",this._updateForRotation)):this._handles.add(e.init(this,"view.camera",this._updateForCamera)))};f([h.property({dependsOn:["view.spatialReference.isWebMercator","view.spatialReference.wkid"],readOnly:!0})],b.prototype,"canShowNorth",null);f([h.property()],b.prototype,"orientation",void 0);f([h.property({dependsOn:["view.ready","canShowNorth"],readOnly:!0})],b.prototype,"state",null);f([h.property()],b.prototype,"view",void 0);f([h.property()],
b.prototype,"reset",null);return b=f([h.subclass("esri.widgets.CompassViewModel")],b)}(h.declared(n.GoToMixin(m)))})},"esri/widgets/NavigationToggle":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/i18n!./NavigationToggle/nls/NavigationToggle ../core/accessorSupport/decorators ./Widget ./NavigationToggle/NavigationToggleViewModel ./support/widget".split(" "),function(r,g,p,f,m,c,e,h,n){return function(a){function b(b){b=a.call(this,b)||
this;b.iconClass="esri-icon-pan2";b.label=m.widgetLabel;b.view=null;b.viewModel=new h;return b}p(b,a);Object.defineProperty(b.prototype,"layout",{set:function(a){"horizontal"!==a&&(a="vertical");this._set("layout",a)},enumerable:!0,configurable:!0});b.prototype.toggle=function(){};b.prototype.render=function(){var a,b,c,e="disabled"===this.get("viewModel.state"),f="pan"===this.get("viewModel.navigationMode"),g=(a={},a["esri-disabled"]=e,a["esri-navigation-toggle--horizontal"]="horizontal"===this.layout,
a);a=(b={},b["esri-navigation-toggle__button--active"]=f,b);b=(c={},c["esri-navigation-toggle__button--active"]=!f,c);c=e?-1:0;return n.tsx("div",{bind:this,class:this.classes("esri-navigation-toggle esri-widget",g),onclick:this._toggle,onkeydown:this._toggle,tabIndex:c,"aria-label":m.toggle,title:m.toggle},n.tsx("div",{class:this.classes("esri-navigation-toggle__button esri-widget--button","esri-navigation-toggle__button--pan",a)},n.tsx("span",{class:"esri-icon-pan"})),n.tsx("div",{class:this.classes("esri-navigation-toggle__button esri-widget--button",
"esri-navigation-toggle__button--rotate",b)},n.tsx("span",{class:"esri-icon-rotate"})))};b.prototype._toggle=function(){this.toggle()};f([c.property()],b.prototype,"iconClass",void 0);f([c.property()],b.prototype,"label",void 0);f([c.property({value:"vertical"}),n.renderable()],b.prototype,"layout",null);f([c.aliasOf("viewModel.view"),n.renderable()],b.prototype,"view",void 0);f([c.property({type:h}),n.renderable(["viewModel.state","viewModel.navigationMode"])],b.prototype,"viewModel",void 0);f([c.aliasOf("viewModel.toggle")],
b.prototype,"toggle",null);f([n.accessibleHandler()],b.prototype,"_toggle",null);return b=f([c.subclass("esri.widgets.NavigationToggle")],b)}(c.declared(e))})},"esri/widgets/NavigationToggle/NavigationToggleViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Handles ../../core/watchUtils ../../core/accessorSupport/decorators".split(" "),function(r,g,p,f,m,c,e,h){return function(g){function a(a){a=
g.call(this,a)||this;a._handles=new c;a.navigationMode="pan";a.view=null;a.toggle=a.toggle.bind(a);return a}p(a,g);a.prototype.initialize=function(){this._handles.add(e.when(this,"view.inputManager",this._setNavigationMode.bind(this)))};a.prototype.destroy=function(){this._handles.destroy();this.view=this._handles=null};Object.defineProperty(a.prototype,"state",{get:function(){return this.get("view.ready")&&"3d"===this.view.type?"ready":"disabled"},enumerable:!0,configurable:!0});a.prototype.toggle=
function(){"disabled"!==this.state&&(this.navigationMode="pan"!==this.navigationMode?"pan":"rotate",this._setNavigationMode())};a.prototype._setNavigationMode=function(){this.get("view.inputManager").primaryDragAction="pan"===this.navigationMode?"pan":"rotate"};f([h.property({dependsOn:["view.ready"],readOnly:!0})],a.prototype,"state",null);f([h.property()],a.prototype,"navigationMode",void 0);f([h.property()],a.prototype,"view",void 0);f([h.property()],a.prototype,"toggle",null);return a=f([h.subclass("esri.widgets.NavigationToggleViewModel")],
a)}(h.declared(m))})},"esri/widgets/Zoom":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/i18n!./Zoom/nls/Zoom ../core/accessorSupport/decorators ./Widget ./Zoom/IconButton ./Zoom/ZoomViewModel ./support/widget".split(" "),function(r,g,p,f,m,c,e,h,n,a){return function(b){function d(a){a=b.call(this,a)||this;a.iconClass="esri-icon-zoom-in-magnifying-glass";a.label=m.widgetLabel;a.view=null;a.viewModel=new n;return a}p(d,b);d.prototype.postInitialize=
function(){this._zoomInButton=new h({action:this.zoomIn,iconClass:"esri-icon-plus",title:m.zoomIn});this._zoomOutButton=new h({action:this.zoomOut,iconClass:"esri-icon-minus",title:m.zoomOut})};Object.defineProperty(d.prototype,"layout",{set:function(a){"horizontal"!==a&&(a="vertical");this._set("layout",a)},enumerable:!0,configurable:!0});d.prototype.render=function(){var b,c=this.viewModel,d=(b={},b["esri-zoom--horizontal"]="horizontal"===this.layout,b);this._zoomInButton.enabled="ready"===c.state&&
c.canZoomIn;this._zoomOutButton.enabled="ready"===c.state&&c.canZoomOut;return a.tsx("div",{class:this.classes("esri-zoom esri-widget",d)},this._zoomInButton.render(),this._zoomOutButton.render())};d.prototype.zoomIn=function(){};d.prototype.zoomOut=function(){};f([c.property()],d.prototype,"iconClass",void 0);f([c.property()],d.prototype,"label",void 0);f([c.property({value:"vertical"}),a.renderable()],d.prototype,"layout",null);f([c.aliasOf("viewModel.view"),a.renderable()],d.prototype,"view",void 0);
f([c.property({type:n}),a.renderable(["viewModel.canZoomIn","viewModel.canZoomOut","viewModel.state"])],d.prototype,"viewModel",void 0);f([c.aliasOf("viewModel.zoomIn")],d.prototype,"zoomIn",null);f([c.aliasOf("viewModel.zoomOut")],d.prototype,"zoomOut",null);return d=f([c.subclass("esri.widgets.Zoom")],d)}(c.declared(e))})},"esri/widgets/Zoom/IconButton":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../Widget ../support/widget".split(" "),
function(r,g,p,f,m,c,e){return function(c){function g(){var a=null!==c&&c.apply(this,arguments)||this;a.enabled=!0;a.iconClass="";a.title="";return a}p(g,c);g.prototype.render=function(){var a,b,c=this.enabled?0:-1,k=(a={},a["esri-disabled"]=!this.enabled,a["esri-interactive"]=this.enabled,a);a=(b={},b[this.iconClass]=!!this.iconClass,b);return e.tsx("div",{bind:this,class:this.classes("esri-widget--button esri-widget",k),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:c,
title:this.title},e.tsx("span",{"aria-hidden":"true",role:"presentation",class:this.classes("esri-icon",a)}),e.tsx("span",{class:"esri-icon-font-fallback-text"},this.title))};g.prototype._triggerAction=function(){this.action.call(this)};f([m.property()],g.prototype,"action",void 0);f([m.property(),e.renderable()],g.prototype,"enabled",void 0);f([m.property(),e.renderable()],g.prototype,"iconClass",void 0);f([m.property(),e.renderable()],g.prototype,"title",void 0);f([e.accessibleHandler()],g.prototype,
"_triggerAction",null);return g=f([m.subclass("esri.widgets.IconButton")],g)}(m.declared(c))})},"esri/widgets/Zoom/ZoomViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/promiseUtils ../../core/accessorSupport/decorators ./ZoomConditions2D ./ZoomConditions3D".split(" "),function(r,g,p,f,m,c,e,h,n){return function(a){function b(b){b=a.call(this,b)||this;b.canZoomIn=!1;b.canZoomOut=!1;b.zoomIn=b.zoomIn.bind(b);
b.zoomOut=b.zoomOut.bind(b);return b}p(b,a);b.prototype.destroy=function(){this.view=null};Object.defineProperty(b.prototype,"state",{get:function(){return this.get("view.ready")?"ready":"disabled"},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"view",{set:function(a){a?"2d"===a.type?this._zoomConditions=new h({view:a}):"3d"===a.type&&(this._zoomConditions=new n({view:a})):this._zoomConditions=null;this._set("view",a)},enumerable:!0,configurable:!0});b.prototype.zoomIn=function(){if(this.canZoomIn){var a=
this.view;"2d"===a.type?a.mapViewNavigation.zoomIn():c.ignoreAbortErrors(a.goTo({zoomFactor:2}))}};b.prototype.zoomOut=function(){if(this.canZoomOut){var a=this.view;"2d"===a.type?a.mapViewNavigation.zoomOut():c.ignoreAbortErrors(a.goTo({zoomFactor:.5}))}};f([e.property()],b.prototype,"_zoomConditions",void 0);f([e.property({aliasOf:"_zoomConditions.canZoomIn",readOnly:!0})],b.prototype,"canZoomIn",void 0);f([e.property({aliasOf:"_zoomConditions.canZoomOut",readOnly:!0})],b.prototype,"canZoomOut",
void 0);f([e.property({dependsOn:["view.ready"],readOnly:!0})],b.prototype,"state",null);f([e.property()],b.prototype,"view",null);f([e.property()],b.prototype,"zoomIn",null);f([e.property()],b.prototype,"zoomOut",null);return b=f([e.subclass("esri.widgets.Zoom.ZoomViewModel")],b)}(e.declared(m))})},"esri/widgets/Zoom/ZoomConditions2D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators".split(" "),
function(r,g,p,f,m,c){return function(e){function g(){return null!==e&&e.apply(this,arguments)||this}p(g,e);Object.defineProperty(g.prototype,"canZoomIn",{get:function(){if(!this.get("view.ready"))return!1;var c=this.get("view.animation.target.scale")||this.get("view.scale"),a=this.get("view.constraints.effectiveMaxScale");return 0===a||c>a},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"canZoomOut",{get:function(){if(!this.get("view.ready"))return!1;var c=this.get("view.animation.target.scale")||
this.get("view.scale"),a=this.get("view.constraints.effectiveMinScale");return 0===a||c<a},enumerable:!0,configurable:!0});f([c.property({dependsOn:["view.ready","view.scale","view.animation.target.scale","view.constraints.effectiveMaxScale"],readOnly:!0})],g.prototype,"canZoomIn",null);f([c.property({dependsOn:["view.ready","view.scale","view.animation.target.scale","view.constraints.effectiveMinScale"],readOnly:!0})],g.prototype,"canZoomOut",null);f([c.property()],g.prototype,"view",void 0);return g=
f([c.subclass("esri.widgets.Zoom.ZoomConditions2D")],g)}(c.declared(m))})},"esri/widgets/Zoom/ZoomConditions3D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators".split(" "),function(r,g,p,f,m,c){return function(e){function g(){return null!==e&&e.apply(this,arguments)||this}p(g,e);Object.defineProperty(g.prototype,"canZoomIn",{get:function(){return!!this.get("view.ready")},enumerable:!0,
configurable:!0});Object.defineProperty(g.prototype,"canZoomOut",{get:function(){return!!this.get("view.ready")},enumerable:!0,configurable:!0});f([c.property({dependsOn:["view.ready"],readOnly:!0})],g.prototype,"canZoomIn",null);f([c.property({dependsOn:["view.ready"],readOnly:!0})],g.prototype,"canZoomOut",null);f([c.property()],g.prototype,"view",void 0);return g=f([c.subclass("esri.widgets.Zoom.ZoomConditions3D")],g)}(c.declared(m))})},"esri/core/libs/gl-matrix-2/mat4":function(){define(["require",
"exports","./math/mat4"],function(r,g,p){Object.defineProperty(g,"__esModule",{value:!0});g.mat4=p})},"esri/core/libs/gl-matrix-2/math/mat4":function(){define(["require","exports","../factories/vec3f64","./common"],function(r,g,p,f){function m(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function c(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],m=b[5],n=b[6],p=b[7],z=b[8],v=b[9],w=b[10],r=b[11],C=b[12],B=b[13],J=b[14];
b=b[15];var E=c[0],F=c[1],H=c[2],G=c[3];a[0]=E*d+F*h+H*z+G*C;a[1]=E*e+F*m+H*v+G*B;a[2]=E*f+F*n+H*w+G*J;a[3]=E*g+F*p+H*r+G*b;E=c[4];F=c[5];H=c[6];G=c[7];a[4]=E*d+F*h+H*z+G*C;a[5]=E*e+F*m+H*v+G*B;a[6]=E*f+F*n+H*w+G*J;a[7]=E*g+F*p+H*r+G*b;E=c[8];F=c[9];H=c[10];G=c[11];a[8]=E*d+F*h+H*z+G*C;a[9]=E*e+F*m+H*v+G*B;a[10]=E*f+F*n+H*w+G*J;a[11]=E*g+F*p+H*r+G*b;E=c[12];F=c[13];H=c[14];G=c[15];a[12]=E*d+F*h+H*z+G*C;a[13]=E*e+F*m+H*v+G*B;a[14]=E*f+F*n+H*w+G*J;a[15]=E*g+F*p+H*r+G*b;return a}function e(a,b,c){var d=
b[0],e=b[1],f=b[2],g=b[3],h=d+d,m=e+e,n=f+f;b=d*h;var p=d*m,d=d*n,z=e*m,e=e*n,f=f*n,h=g*h,m=g*m,g=g*n;a[0]=1-(z+f);a[1]=p+g;a[2]=d-m;a[3]=0;a[4]=p-g;a[5]=1-(b+f);a[6]=e+h;a[7]=0;a[8]=d+m;a[9]=e-h;a[10]=1-(b+z);a[11]=0;a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;return a}function h(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];a[2]=b[2]-c[2];a[3]=b[3]-c[3];a[4]=b[4]-c[4];a[5]=b[5]-c[5];a[6]=b[6]-c[6];a[7]=b[7]-c[7];a[8]=b[8]-c[8];a[9]=b[9]-c[9];a[10]=b[10]-c[10];a[11]=b[11]-c[11];a[12]=b[12]-c[12];a[13]=b[13]-
c[13];a[14]=b[14]-c[14];a[15]=b[15]-c[15];return a}Object.defineProperty(g,"__esModule",{value:!0});g.copy=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a};g.set=function(a,b,c,e,f,g,h,m,n,p,y,z,v,w,r,C,B){a[0]=b;a[1]=c;a[2]=e;a[3]=f;a[4]=g;a[5]=h;a[6]=m;a[7]=n;a[8]=p;a[9]=y;a[10]=z;a[11]=v;a[12]=w;a[13]=r;a[14]=C;a[15]=B;return a};g.identity=m;g.transpose=
function(a,b){if(a===b){var c=b[1],e=b[2],f=b[3],g=b[6],h=b[7],m=b[11];a[1]=b[4];a[2]=b[8];a[3]=b[12];a[4]=c;a[6]=b[9];a[7]=b[13];a[8]=e;a[9]=g;a[11]=b[14];a[12]=f;a[13]=h;a[14]=m}else a[0]=b[0],a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=b[1],a[5]=b[5],a[6]=b[9],a[7]=b[13],a[8]=b[2],a[9]=b[6],a[10]=b[10],a[11]=b[14],a[12]=b[3],a[13]=b[7],a[14]=b[11],a[15]=b[15];return a};g.invert=function(a,b){var c=b[0],e=b[1],f=b[2],g=b[3],h=b[4],m=b[5],n=b[6],p=b[7],y=b[8],z=b[9],v=b[10],w=b[11],r=b[12],C=b[13],B=b[14];
b=b[15];var J=c*m-e*h,E=c*n-f*h,F=c*p-g*h,H=e*n-f*m,G=e*p-g*m,L=f*p-g*n,R=y*C-z*r,O=y*B-v*r,N=y*b-w*r,P=z*B-v*C,S=z*b-w*C,I=v*b-w*B,K=J*I-E*S+F*P+H*N-G*O+L*R;if(!K)return null;K=1/K;a[0]=(m*I-n*S+p*P)*K;a[1]=(f*S-e*I-g*P)*K;a[2]=(C*L-B*G+b*H)*K;a[3]=(v*G-z*L-w*H)*K;a[4]=(n*N-h*I-p*O)*K;a[5]=(c*I-f*N+g*O)*K;a[6]=(B*F-r*L-b*E)*K;a[7]=(y*L-v*F+w*E)*K;a[8]=(h*S-m*N+p*R)*K;a[9]=(e*N-c*S-g*R)*K;a[10]=(r*G-C*F+b*J)*K;a[11]=(z*F-y*G-w*J)*K;a[12]=(m*O-h*P-n*R)*K;a[13]=(c*P-e*O+f*R)*K;a[14]=(C*E-r*H-B*J)*K;
a[15]=(y*H-z*E+v*J)*K;return a};g.adjoint=function(a,b){var c=b[0],e=b[1],f=b[2],g=b[3],h=b[4],m=b[5],n=b[6],p=b[7],y=b[8],z=b[9],v=b[10],w=b[11],r=b[12],C=b[13],B=b[14];b=b[15];a[0]=m*(v*b-w*B)-z*(n*b-p*B)+C*(n*w-p*v);a[1]=-(e*(v*b-w*B)-z*(f*b-g*B)+C*(f*w-g*v));a[2]=e*(n*b-p*B)-m*(f*b-g*B)+C*(f*p-g*n);a[3]=-(e*(n*w-p*v)-m*(f*w-g*v)+z*(f*p-g*n));a[4]=-(h*(v*b-w*B)-y*(n*b-p*B)+r*(n*w-p*v));a[5]=c*(v*b-w*B)-y*(f*b-g*B)+r*(f*w-g*v);a[6]=-(c*(n*b-p*B)-h*(f*b-g*B)+r*(f*p-g*n));a[7]=c*(n*w-p*v)-h*(f*w-
g*v)+y*(f*p-g*n);a[8]=h*(z*b-w*C)-y*(m*b-p*C)+r*(m*w-p*z);a[9]=-(c*(z*b-w*C)-y*(e*b-g*C)+r*(e*w-g*z));a[10]=c*(m*b-p*C)-h*(e*b-g*C)+r*(e*p-g*m);a[11]=-(c*(m*w-p*z)-h*(e*w-g*z)+y*(e*p-g*m));a[12]=-(h*(z*B-v*C)-y*(m*B-n*C)+r*(m*v-n*z));a[13]=c*(z*B-v*C)-y*(e*B-f*C)+r*(e*v-f*z);a[14]=-(c*(m*B-n*C)-h*(e*B-f*C)+r*(e*n-f*m));a[15]=c*(m*v-n*z)-h*(e*v-f*z)+y*(e*n-f*m);return a};g.determinant=function(a){var b=a[0],c=a[1],e=a[2],f=a[3],g=a[4],h=a[5],m=a[6],n=a[7],p=a[8],r=a[9],z=a[10],v=a[11],w=a[12],D=a[13],
C=a[14];a=a[15];return(b*h-c*g)*(z*a-v*C)-(b*m-e*g)*(r*a-v*D)+(b*n-f*g)*(r*C-z*D)+(c*m-e*h)*(p*a-v*w)-(c*n-f*h)*(p*C-z*w)+(e*n-f*m)*(p*D-r*w)};g.multiply=c;g.translate=function(a,b,c){var d=c[0],e=c[1];c=c[2];var f=void 0,g=void 0,h=void 0,m=void 0,n=void 0,p=void 0,z=void 0,v=void 0,w=void 0,r=void 0,C=void 0,B=void 0;b===a?(a[12]=b[0]*d+b[4]*e+b[8]*c+b[12],a[13]=b[1]*d+b[5]*e+b[9]*c+b[13],a[14]=b[2]*d+b[6]*e+b[10]*c+b[14],a[15]=b[3]*d+b[7]*e+b[11]*c+b[15]):(f=b[0],g=b[1],h=b[2],m=b[3],n=b[4],p=
b[5],z=b[6],v=b[7],w=b[8],r=b[9],C=b[10],B=b[11],a[0]=f,a[1]=g,a[2]=h,a[3]=m,a[4]=n,a[5]=p,a[6]=z,a[7]=v,a[8]=w,a[9]=r,a[10]=C,a[11]=B,a[12]=f*d+n*e+w*c+b[12],a[13]=g*d+p*e+r*c+b[13],a[14]=h*d+z*e+C*c+b[14],a[15]=m*d+v*e+B*c+b[15]);return a};g.scale=function(a,b,c){var d=c[0],e=c[1];c=c[2];a[0]=b[0]*d;a[1]=b[1]*d;a[2]=b[2]*d;a[3]=b[3]*d;a[4]=b[4]*e;a[5]=b[5]*e;a[6]=b[6]*e;a[7]=b[7]*e;a[8]=b[8]*c;a[9]=b[9]*c;a[10]=b[10]*c;a[11]=b[11]*c;a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a};g.rotate=
function(a,b,c,e){var d=e[0],k=e[1];e=e[2];var g=Math.sqrt(d*d+k*k+e*e),h=void 0,m=void 0,n=void 0,p=void 0,r=void 0,v=void 0,w=void 0,D=void 0,C=void 0,B=void 0,J=void 0,E=void 0,F=void 0,H=void 0,G=void 0,L=void 0,R=void 0,O=void 0,N=void 0,P=void 0,S=void 0,I=void 0,m=h=void 0;if(g<f.EPSILON)return null;g=1/g;d*=g;k*=g;e*=g;h=Math.sin(c);m=Math.cos(c);n=1-m;p=b[0];r=b[1];v=b[2];w=b[3];D=b[4];C=b[5];B=b[6];J=b[7];E=b[8];F=b[9];H=b[10];G=b[11];L=d*d*n+m;R=k*d*n+e*h;O=e*d*n-k*h;N=d*k*n-e*h;P=k*k*
n+m;S=e*k*n+d*h;I=d*e*n+k*h;h=k*e*n-d*h;m=e*e*n+m;a[0]=p*L+D*R+E*O;a[1]=r*L+C*R+F*O;a[2]=v*L+B*R+H*O;a[3]=w*L+J*R+G*O;a[4]=p*N+D*P+E*S;a[5]=r*N+C*P+F*S;a[6]=v*N+B*P+H*S;a[7]=w*N+J*P+G*S;a[8]=p*I+D*h+E*m;a[9]=r*I+C*h+F*m;a[10]=v*I+B*h+H*m;a[11]=w*I+J*h+G*m;b!==a&&(a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);return a};g.rotateX=function(a,b,c){var d=Math.sin(c);c=Math.cos(c);var e=b[4],f=b[5],g=b[6],h=b[7],m=b[8],n=b[9],p=b[10],r=b[11];b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],
a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[4]=e*c+m*d;a[5]=f*c+n*d;a[6]=g*c+p*d;a[7]=h*c+r*d;a[8]=m*c-e*d;a[9]=n*c-f*d;a[10]=p*c-g*d;a[11]=r*c-h*d;return a};g.rotateY=function(a,b,c){var d=Math.sin(c);c=Math.cos(c);var e=b[0],f=b[1],g=b[2],h=b[3],m=b[8],n=b[9],p=b[10],r=b[11];b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=e*c-m*d;a[1]=f*c-n*d;a[2]=g*c-p*d;a[3]=h*c-r*d;a[8]=e*d+m*c;a[9]=f*d+n*c;a[10]=g*d+p*c;a[11]=h*d+r*c;return a};g.rotateZ=function(a,
b,c){var d=Math.sin(c);c=Math.cos(c);var e=b[0],f=b[1],g=b[2],h=b[3],m=b[4],n=b[5],p=b[6],r=b[7];b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=e*c+m*d;a[1]=f*c+n*d;a[2]=g*c+p*d;a[3]=h*c+r*d;a[4]=m*c-e*d;a[5]=n*c-f*d;a[6]=p*c-g*d;a[7]=r*c-h*d;return a};g.fromTranslation=function(a,b){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=b[0];a[13]=b[1];a[14]=b[2];a[15]=1;return a};g.fromScaling=function(a,
b){a[0]=b[0];a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b[1];a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=b[2];a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};g.fromRotation=function(a,b,c){var d=c[0],e=c[1];c=c[2];var g=Math.sqrt(d*d+e*e+c*c),h=void 0,m=void 0,n=void 0;if(g<f.EPSILON)return null;g=1/g;d*=g;e*=g;c*=g;h=Math.sin(b);m=Math.cos(b);n=1-m;a[0]=d*d*n+m;a[1]=e*d*n+c*h;a[2]=c*d*n-e*h;a[3]=0;a[4]=d*e*n-c*h;a[5]=e*e*n+m;a[6]=c*e*n+d*h;a[7]=0;a[8]=d*c*n+e*h;a[9]=e*c*n-d*h;a[10]=c*c*n+m;a[11]=0;a[12]=0;a[13]=0;
a[14]=0;a[15]=1;return a};g.fromXRotation=function(a,b){var c=Math.sin(b);b=Math.cos(b);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=c;a[7]=0;a[8]=0;a[9]=-c;a[10]=b;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};g.fromYRotation=function(a,b){var c=Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=0;a[2]=-c;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=c;a[9]=0;a[10]=b;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};g.fromZRotation=function(a,b){var c=Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=c;a[2]=0;a[3]=0;a[4]=
-c;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};g.fromRotationTranslation=e;g.fromQuat2=function(a,b){var c=n,f=-b[0],g=-b[1],h=-b[2],m=b[3],p=b[4],t=b[5],r=b[6],y=b[7],z=f*f+g*g+h*h+m*m;0<z?(c[0]=2*(p*m+y*f+t*h-r*g)/z,c[1]=2*(t*m+y*g+r*f-p*h)/z,c[2]=2*(r*m+y*h+p*g-t*f)/z):(c[0]=2*(p*m+y*f+t*h-r*g),c[1]=2*(t*m+y*g+r*f-p*h),c[2]=2*(r*m+y*h+p*g-t*f));e(a,b,c);return a};var n=p.create();g.getTranslation=function(a,b){a[0]=b[12];a[1]=b[13];a[2]=b[14];return a};
g.getScaling=function(a,b){var c=b[0],e=b[1],f=b[2],g=b[4],h=b[5],m=b[6],n=b[8],p=b[9];b=b[10];a[0]=Math.sqrt(c*c+e*e+f*f);a[1]=Math.sqrt(g*g+h*h+m*m);a[2]=Math.sqrt(n*n+p*p+b*b);return a};g.getRotation=function(a,b){var c=b[0]+b[5]+b[10],e=0;0<c?(e=2*Math.sqrt(c+1),a[3]=.25*e,a[0]=(b[6]-b[9])/e,a[1]=(b[8]-b[2])/e,a[2]=(b[1]-b[4])/e):b[0]>b[5]&&b[0]>b[10]?(e=2*Math.sqrt(1+b[0]-b[5]-b[10]),a[3]=(b[6]-b[9])/e,a[0]=.25*e,a[1]=(b[1]+b[4])/e,a[2]=(b[8]+b[2])/e):b[5]>b[10]?(e=2*Math.sqrt(1+b[5]-b[0]-b[10]),
a[3]=(b[8]-b[2])/e,a[0]=(b[1]+b[4])/e,a[1]=.25*e,a[2]=(b[6]+b[9])/e):(e=2*Math.sqrt(1+b[10]-b[0]-b[5]),a[3]=(b[1]-b[4])/e,a[0]=(b[8]+b[2])/e,a[1]=(b[6]+b[9])/e,a[2]=.25*e);return a};g.fromRotationTranslationScale=function(a,b,c,e){var d=b[0],f=b[1],k=b[2],g=b[3],h=d+d,m=f+f,n=k+k;b=d*h;var p=d*m,d=d*n,v=f*m,f=f*n,k=k*n,h=g*h,m=g*m,g=g*n,n=e[0],w=e[1];e=e[2];a[0]=(1-(v+k))*n;a[1]=(p+g)*n;a[2]=(d-m)*n;a[3]=0;a[4]=(p-g)*w;a[5]=(1-(b+k))*w;a[6]=(f+h)*w;a[7]=0;a[8]=(d+m)*e;a[9]=(f-h)*e;a[10]=(1-(b+v))*
e;a[11]=0;a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;return a};g.fromRotationTranslationScaleOrigin=function(a,b,c,e,f){var d=b[0],k=b[1],g=b[2],h=b[3],l=d+d,m=k+k,n=g+g;b=d*l;var p=d*m,w=d*n,d=k*m,k=k*n,r=g*n,g=h*l,m=h*m,C=h*n,B=e[0],J=e[1],n=e[2];e=f[0];h=f[1];f=f[2];var l=(1-(d+r))*B,E=(p+C)*B,B=(w-m)*B,p=(p-C)*J,r=(1-(b+r))*J,J=(k+g)*J,w=(w+m)*n,k=(k-g)*n;b=(1-(b+d))*n;a[0]=l;a[1]=E;a[2]=B;a[3]=0;a[4]=p;a[5]=r;a[6]=J;a[7]=0;a[8]=w;a[9]=k;a[10]=b;a[11]=0;a[12]=c[0]+e-(l*e+p*h+w*f);a[13]=c[1]+h-(E*
e+r*h+k*f);a[14]=c[2]+f-(B*e+J*h+b*f);a[15]=1;return a};g.fromQuat=function(a,b){var c=b[0],e=b[1],f=b[2];b=b[3];var g=c+c,h=e+e,m=f+f,c=c*g,n=e*g,e=e*h,p=f*g,r=f*h,f=f*m,g=b*g,h=b*h;b*=m;a[0]=1-e-f;a[1]=n+b;a[2]=p-h;a[3]=0;a[4]=n-b;a[5]=1-c-f;a[6]=r+g;a[7]=0;a[8]=p+h;a[9]=r-g;a[10]=1-c-e;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};g.frustum=function(a,b,c,e,f,g,h){var d=1/(c-b),k=1/(f-e),l=1/(g-h);a[0]=2*g*d;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*g*k;a[6]=0;a[7]=0;a[8]=(c+b)*d;a[9]=(f+e)*k;a[10]=
(h+g)*l;a[11]=-1;a[12]=0;a[13]=0;a[14]=h*g*2*l;a[15]=0;return a};g.perspective=function(a,b,c,e,f){b=1/Math.tan(b/2);var d=void 0;a[0]=b/c;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[11]=-1;a[12]=0;a[13]=0;a[15]=0;null!=f&&Infinity!==f?(d=1/(e-f),a[10]=(f+e)*d,a[14]=2*f*e*d):(a[10]=-1,a[14]=-2*e);return a};g.perspectiveFromFieldOfView=function(a,b,c,e){var d=Math.tan(b.upDegrees*Math.PI/180),f=Math.tan(b.downDegrees*Math.PI/180),g=Math.tan(b.leftDegrees*Math.PI/180);b=Math.tan(b.rightDegrees*
Math.PI/180);var k=2/(g+b),h=2/(d+f);a[0]=k;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=h;a[6]=0;a[7]=0;a[8]=-((g-b)*k*.5);a[9]=(d-f)*h*.5;a[10]=e/(c-e);a[11]=-1;a[12]=0;a[13]=0;a[14]=e*c/(c-e);a[15]=0;return a};g.ortho=function(a,b,c,e,f,g,h){var d=1/(b-c),k=1/(e-f),l=1/(g-h);a[0]=-2*d;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*k;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*l;a[11]=0;a[12]=(b+c)*d;a[13]=(f+e)*k;a[14]=(h+g)*l;a[15]=1;return a};g.lookAt=function(a,b,c,e){var d=void 0,g=void 0,k=void 0,h=void 0,n=void 0,p=void 0,
r=void 0,z=void 0,v=void 0,w=void 0,D=b[0],C=b[1];b=b[2];k=e[0];h=e[1];e=e[2];r=c[0];z=c[1];c=c[2];if(Math.abs(D-r)<f.EPSILON&&Math.abs(C-z)<f.EPSILON&&Math.abs(b-c)<f.EPSILON)return m(a);r=D-r;z=C-z;v=b-c;w=1/Math.sqrt(r*r+z*z+v*v);r*=w;z*=w;v*=w;d=h*v-e*z;g=e*r-k*v;k=k*z-h*r;(w=Math.sqrt(d*d+g*g+k*k))?(w=1/w,d*=w,g*=w,k*=w):k=g=d=0;h=z*k-v*g;n=v*d-r*k;p=r*g-z*d;(w=Math.sqrt(h*h+n*n+p*p))?(w=1/w,h*=w,n*=w,p*=w):p=n=h=0;a[0]=d;a[1]=h;a[2]=r;a[3]=0;a[4]=g;a[5]=n;a[6]=z;a[7]=0;a[8]=k;a[9]=p;a[10]=v;
a[11]=0;a[12]=-(d*D+g*C+k*b);a[13]=-(h*D+n*C+p*b);a[14]=-(r*D+z*C+v*b);a[15]=1;return a};g.targetTo=function(a,b,c,e){var d=b[0],f=b[1];b=b[2];var g=e[0],k=e[1],h=e[2];e=d-c[0];var m=f-c[1];c=b-c[2];var n=e*e+m*m+c*c;0<n&&(n=1/Math.sqrt(n),e*=n,m*=n,c*=n);var p=k*c-h*m,h=h*e-g*c,g=g*m-k*e,n=p*p+h*h+g*g;0<n&&(n=1/Math.sqrt(n),p*=n,h*=n,g*=n);a[0]=p;a[1]=h;a[2]=g;a[3]=0;a[4]=m*g-c*h;a[5]=c*p-e*g;a[6]=e*h-m*p;a[7]=0;a[8]=e;a[9]=m;a[10]=c;a[11]=0;a[12]=d;a[13]=f;a[14]=b;a[15]=1;return a};g.str=function(a){return"mat4("+
a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"};g.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2)+Math.pow(a[9],2)+Math.pow(a[10],2)+Math.pow(a[11],2)+Math.pow(a[12],2)+Math.pow(a[13],2)+Math.pow(a[14],2)+Math.pow(a[15],2))};g.add=function(a,b,
c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];a[2]=b[2]+c[2];a[3]=b[3]+c[3];a[4]=b[4]+c[4];a[5]=b[5]+c[5];a[6]=b[6]+c[6];a[7]=b[7]+c[7];a[8]=b[8]+c[8];a[9]=b[9]+c[9];a[10]=b[10]+c[10];a[11]=b[11]+c[11];a[12]=b[12]+c[12];a[13]=b[13]+c[13];a[14]=b[14]+c[14];a[15]=b[15]+c[15];return a};g.subtract=h;g.multiplyScalar=function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;a[3]=b[3]*c;a[4]=b[4]*c;a[5]=b[5]*c;a[6]=b[6]*c;a[7]=b[7]*c;a[8]=b[8]*c;a[9]=b[9]*c;a[10]=b[10]*c;a[11]=b[11]*c;a[12]=b[12]*c;a[13]=b[13]*c;a[14]=b[14]*
c;a[15]=b[15]*c;return a};g.multiplyScalarAndAdd=function(a,b,c,e){a[0]=b[0]+c[0]*e;a[1]=b[1]+c[1]*e;a[2]=b[2]+c[2]*e;a[3]=b[3]+c[3]*e;a[4]=b[4]+c[4]*e;a[5]=b[5]+c[5]*e;a[6]=b[6]+c[6]*e;a[7]=b[7]+c[7]*e;a[8]=b[8]+c[8]*e;a[9]=b[9]+c[9]*e;a[10]=b[10]+c[10]*e;a[11]=b[11]+c[11]*e;a[12]=b[12]+c[12]*e;a[13]=b[13]+c[13]*e;a[14]=b[14]+c[14]*e;a[15]=b[15]+c[15]*e;return a};g.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&
a[8]===b[8]&&a[9]===b[9]&&a[10]===b[10]&&a[11]===b[11]&&a[12]===b[12]&&a[13]===b[13]&&a[14]===b[14]&&a[15]===b[15]};g.equals=function(a,b){var c=a[0],e=a[1],g=a[2],h=a[3],m=a[4],n=a[5],p=a[6],r=a[7],y=a[8],z=a[9],v=a[10],w=a[11],D=a[12],C=a[13],B=a[14];a=a[15];var J=b[0],E=b[1],F=b[2],H=b[3],G=b[4],L=b[5],R=b[6],O=b[7],N=b[8],P=b[9],S=b[10],I=b[11],K=b[12],Q=b[13],T=b[14];b=b[15];return Math.abs(c-J)<=f.EPSILON*Math.max(1,Math.abs(c),Math.abs(J))&&Math.abs(e-E)<=f.EPSILON*Math.max(1,Math.abs(e),Math.abs(E))&&
Math.abs(g-F)<=f.EPSILON*Math.max(1,Math.abs(g),Math.abs(F))&&Math.abs(h-H)<=f.EPSILON*Math.max(1,Math.abs(h),Math.abs(H))&&Math.abs(m-G)<=f.EPSILON*Math.max(1,Math.abs(m),Math.abs(G))&&Math.abs(n-L)<=f.EPSILON*Math.max(1,Math.abs(n),Math.abs(L))&&Math.abs(p-R)<=f.EPSILON*Math.max(1,Math.abs(p),Math.abs(R))&&Math.abs(r-O)<=f.EPSILON*Math.max(1,Math.abs(r),Math.abs(O))&&Math.abs(y-N)<=f.EPSILON*Math.max(1,Math.abs(y),Math.abs(N))&&Math.abs(z-P)<=f.EPSILON*Math.max(1,Math.abs(z),Math.abs(P))&&Math.abs(v-
S)<=f.EPSILON*Math.max(1,Math.abs(v),Math.abs(S))&&Math.abs(w-I)<=f.EPSILON*Math.max(1,Math.abs(w),Math.abs(I))&&Math.abs(D-K)<=f.EPSILON*Math.max(1,Math.abs(D),Math.abs(K))&&Math.abs(C-Q)<=f.EPSILON*Math.max(1,Math.abs(C),Math.abs(Q))&&Math.abs(B-T)<=f.EPSILON*Math.max(1,Math.abs(B),Math.abs(T))&&Math.abs(a-b)<=f.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))};g.mul=c;g.sub=h})},"esri/core/libs/gl-matrix-2/mat4f32":function(){define(["require","exports","./factories/mat4f32"],function(r,g,p){Object.defineProperty(g,
"__esModule",{value:!0});g.mat4f32=p})},"esri/core/libs/gl-matrix-2/factories/mat4f32":function(){define(["require","exports"],function(r,g){function p(){var f=new Float32Array(16);f[0]=1;f[5]=1;f[10]=1;f[15]=1;return f}Object.defineProperty(g,"__esModule",{value:!0});g.create=p;g.clone=function(f){var g=new Float32Array(16);g[0]=f[0];g[1]=f[1];g[2]=f[2];g[3]=f[3];g[4]=f[4];g[5]=f[5];g[6]=f[6];g[7]=f[7];g[8]=f[8];g[9]=f[9];g[10]=f[10];g[11]=f[11];g[12]=f[12];g[13]=f[13];g[14]=f[14];g[15]=f[15];return g};
g.fromValues=function(f,g,c,e,h,n,a,b,d,k,l,p,r,u,t,x){var m=new Float32Array(16);m[0]=f;m[1]=g;m[2]=c;m[3]=e;m[4]=h;m[5]=n;m[6]=a;m[7]=b;m[8]=d;m[9]=k;m[10]=l;m[11]=p;m[12]=r;m[13]=u;m[14]=t;m[15]=x;return m};g.createView=function(f,g){return new Float32Array(f,g,16)};g.IDENTITY=p()})},"esri/core/libs/gl-matrix-2/vec3f32":function(){define(["require","exports","./factories/vec3f32"],function(r,g,p){Object.defineProperty(g,"__esModule",{value:!0});g.vec3f32=p})},"esri/core/libs/gl-matrix-2/factories/vec3f32":function(){define(["require",
"exports"],function(r,g){function p(){return new Float32Array(3)}function f(c,a,b){var d=new Float32Array(3);d[0]=c;d[1]=a;d[2]=b;return d}function m(){return f(1,1,1)}function c(){return f(1,0,0)}function e(){return f(0,1,0)}function h(){return f(0,0,1)}Object.defineProperty(g,"__esModule",{value:!0});g.create=p;g.clone=function(c){var a=new Float32Array(3);a[0]=c[0];a[1]=c[1];a[2]=c[2];return a};g.fromValues=f;g.createView=function(c,a){return new Float32Array(c,a,3)};g.zeros=function(){return p()};
g.ones=m;g.unitX=c;g.unitY=e;g.unitZ=h;g.ZEROS=p();g.ONES=m();g.UNIT_X=c();g.UNIT_Y=e();g.UNIT_Z=h()})},"esri/core/libs/gl-matrix-2/vec4f32":function(){define(["require","exports","./factories/vec4f32"],function(r,g,p){Object.defineProperty(g,"__esModule",{value:!0});g.vec4f32=p})},"esri/core/libs/gl-matrix-2/factories/vec4f32":function(){define(["require","exports"],function(r,g){function p(){return new Float32Array(4)}function f(a,b,c,e){var d=new Float32Array(4);d[0]=a;d[1]=b;d[2]=c;d[3]=e;return d}
function m(){return f(1,1,1,1)}function c(){return f(1,0,0,0)}function e(){return f(0,1,0,0)}function h(){return f(0,0,1,0)}function n(){return f(0,0,0,1)}Object.defineProperty(g,"__esModule",{value:!0});g.create=p;g.clone=function(a){var b=new Float32Array(4);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b};g.fromValues=f;g.createView=function(a,b){return new Float32Array(a,b,4)};g.zeros=function(){return p()};g.ones=m;g.unitX=c;g.unitY=e;g.unitZ=h;g.unitW=n;g.ZEROS=p();g.ONES=m();g.UNIT_X=c();
g.UNIT_Y=e();g.UNIT_Z=h();g.UNIT_W=n()})},"esri/widgets/Search/LocatorSearchSource":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/assignHelper ../../core/lang ../../core/accessorSupport/decorators ../../tasks/Locator ./SearchSource ./support/locatorUtils".split(" "),function(r,g,p,f,m,c,e,h,n,a){return function(b){function d(){var c=null!==b&&b.apply(this,arguments)||this;c.categories=null;c.countryCode=null;c.defaultZoomScale=
null;c.locator=null;c.locationType=null;c.name="";c.placeholder="";c.searchTemplate="";c.singleLineFieldName=null;c.suggestionsEnabled=null;c.zoomScale=null;c.getResults=function(b,d){return a.getResults(m({source:c},b),d)};c.getSuggestions=function(b,d){return a.getSuggestions(m({source:c},b),d)};return c}p(d,b);g=d;d.prototype.readLocator=function(a,b){return(a=b.url)?new h({url:a}):null};d.prototype.writeLocator=function(a,b){b.url=a?a.url:null};d.prototype.clone=function(){return new g({autoNavigate:this.autoNavigate,
filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?c.clone(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,searchExtent:this.searchExtent?this.searchExtent.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,
categories:this.categories?c.clone(this.categories):null,countryCode:this.countryCode,locationType:this.locationType,locator:this.locator,searchTemplate:this.searchTemplate,singleLineFieldName:this.singleLineFieldName,zoomScale:this.zoomScale})};var g;f([e.property()],d.prototype,"categories",void 0);f([e.property()],d.prototype,"countryCode",void 0);f([e.property({json:{write:!0}})],d.prototype,"defaultZoomScale",void 0);f([e.property({type:h})],d.prototype,"locator",void 0);f([e.reader("locator",
["url"])],d.prototype,"readLocator",null);f([e.writer("locator")],d.prototype,"writeLocator",null);f([e.property()],d.prototype,"locationType",void 0);f([e.property({json:{write:!0}})],d.prototype,"name",void 0);f([e.property({json:{write:!0}})],d.prototype,"placeholder",void 0);f([e.property()],d.prototype,"searchTemplate",void 0);f([e.property({json:{write:!0}})],d.prototype,"singleLineFieldName",void 0);f([e.property({json:{read:{source:"suggest"},write:{target:"suggest"}}})],d.prototype,"suggestionsEnabled",
void 0);f([e.property({json:{write:!0}})],d.prototype,"zoomScale",void 0);return d=g=f([e.subclass("esri.widgets.Search.LocatorSearchSource")],d)}(e.declared(n))})},"esri/tasks/Locator":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/assignHelper ../request ../core/accessorSupport/decorators ../geometry/SpatialReference ./Task ./support/AddressCandidate".split(" "),function(r,g,p,f,m,c,e,h,n,a){return function(b){function d(a){a=
b.call(this,a)||this;a.outSpatialReference=null;a.url=null;return a}p(d,b);d.prototype.addressToLocations=function(a,b){var d=a.address,e=a.categories,f=a.countryCode,g=a.forStorage,k=a.location,h=a.locationType,l=a.magicKey,n=a.maxLocations,p=a.outFields;a=a.searchExtent;var r=k?k.clone().normalize():null,C=a?a.shiftCentralMeridian():null,B=this.outSpatialReference,k=this.parsedUrl;a=this.requestOptions;e={f:"json",outSR:B?JSON.stringify(B.toJSON()):null,outFields:p?p.join(","):null,searchExtent:C?
JSON.stringify(C.toJSON()):null,category:e?e.join(","):null,countryCode:f||null,magicKey:l||null,location:r,locationType:h||null,maxLocations:n||null,forStorage:g||null};d={query:this._encode(m({},k.query,d,e))};b=m({},a,b,d);return c(k.path+"/findAddressCandidates",b).then(this._handleAddressToLocationsResponse)};d.prototype.suggestLocations=function(a,b){var d=this.parsedUrl,e=this.requestOptions,f=a.location,g=a.searchExtent,f=f?f.clone().normalize():null,g=g?g.shiftCentralMeridian():null;a={f:"json",
text:a.text,maxSuggestions:a.maxSuggestions,searchExtent:g?JSON.stringify(g.toJSON()):null,category:a.categories?a.categories.join(","):null,countryCode:a.countryCode||null,location:f};a={query:this._encode(m({},d.query,a))};b=m({},e,b,a);return c(d.path+"/suggest",b).then(this._handleSuggestLocationsResponse)};d.prototype.addressesToLocations=function(a,b){var d=this.outSpatialReference,e=this.parsedUrl,f=this.requestOptions,g=a.addresses,h=a.categories,k=a.locationType;a=a.countryCode;var l=[];
Array.isArray(g)&&g.forEach(function(a){l.push({attributes:a})});d={category:h?h.join(","):null,sourceCountry:a||null,addresses:JSON.stringify({records:l}),locationType:k||null,f:"json",outSR:d?JSON.stringify(d):null};d={query:this._encode(m({},e.query,d))};b=m({},f,b,d);return c(e.path+"/geocodeAddresses",b).then(this._handleAddressesToLocationsResponse)};d.prototype.locationToAddress=function(a,b){var d=a.locationType,e=(a=a.location)?a.clone().normalize():null,f="undefined"!==typeof e,g=this.outSpatialReference;
a=this.parsedUrl;var h=this.requestOptions,d={outSR:g?JSON.stringify(g.toJSON()):null,location:f?JSON.stringify(e.toJSON()):null,locationType:d||null,f:"json"},d={query:this._encode(m({},a.query,d))};b=m({},h,b,d);return c(a.path+"/reverseGeocode",b).then(this._handleLocationToAddressResponse)};d.prototype._handleAddressToLocationsResponse=function(b){b=b.data;if(!b)return[];var c=b.candidates,d=b.spatialReference;return c?c.map(function(b){if(b){var c=b.extent,e=b.location,f=c?c&&"number"===typeof c.xmin&&
"number"===typeof c.ymin&&"number"===typeof c.xmax&&"number"===typeof c.ymax:!0;if(e&&"number"===typeof e.x&&"number"===typeof e.y&&f)return c&&(c.spatialReference=d),e.spatialReference=d,a.fromJSON(b)}}):[]};d.prototype._handleSuggestLocationsResponse=function(a){return(a=a.data)?a.suggestions||[]:[]};d.prototype._handleAddressesToLocationsResponse=function(b){b=b.data;if(!b)return[];var c=b.locations,d=b.spatialReference;return c?c.map(function(b){var c=b.location;c&&(c.spatialReference=d);return a.fromJSON(b)}):
[]};d.prototype._handleLocationToAddressResponse=function(b){if(b=b.data){var c=b.address;return a.fromJSON({address:c&&c.Match_addr||"",attributes:c||{},location:b.location,score:100})}};f([e.property({type:h})],d.prototype,"outSpatialReference",void 0);f([e.property()],d.prototype,"url",void 0);return d=f([e.subclass("esri.tasks.Locator")],d)}(e.declared(n))})},"esri/tasks/support/AddressCandidate":function(){define("require exports ../../core/tsSupport/decorateHelper ../../core/tsSupport/declareExtendsHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ../../geometry/Extent ../../geometry/Point".split(" "),
function(r,g,p,f,m,c,e,h){return function(g){function a(a){a=g.call(this,a)||this;a.address=null;a.attributes=null;a.extent=null;a.location=null;a.score=null;return a}f(a,g);p([c.property({type:String,json:{write:!0}})],a.prototype,"address",void 0);p([c.property({type:Object,json:{write:!0}})],a.prototype,"attributes",void 0);p([c.property({type:e,json:{write:!0}})],a.prototype,"extent",void 0);p([c.property({type:h,json:{write:!0}})],a.prototype,"location",void 0);p([c.property({type:Number,json:{write:!0}})],
a.prototype,"score",void 0);return a=p([c.subclass("esri.tasks.support.AddressCandidate")],a)}(c.declared(m.JSONSupport))})},"esri/widgets/Search/support/locatorUtils":function(){define("require exports ../../../Graphic ../../../core/maybe ../../../core/promiseUtils ./geometryUtils".split(" "),function(r,g,p,f,m,c){function e(a,c){var d=a.source,e=a.spatialReference,f=a.location,g=a.sourceIndex,h=a.view;a=d.locator;var k=d.zoomScale,m=d.defaultZoomScale,n=h&&h.scale;c=c&&c.signal;e&&(a.outSpatialReference=
e);return a.locationToAddress({location:f},{signal:c}).then(function(a){return b([a],{sourceIndex:g,scale:n,view:h,zoomScale:k,defaultZoomScale:m})})}function h(a,b){var d=a.filter,e=a.searchExtent;a=a.withinViewEnabled;var f=b&&b.extent;return(b=c.createExtentFromGeometry(d&&d.geometry,b,b&&b.scale))||e||(a&&f?f:void 0)}function n(a,c){var d=a.source,e=a.suggestResult,g=a.spatialReference,k=a.view,n=a.maxResults,p=a.sourceIndex,r=d&&d.zoomScale,z=d&&d.defaultZoomScale;if(!e.text.trim())return m.resolve();
a=""+(!e.key&&d.prefix?d.prefix:"")+e.text+(!e.key&&d.suffix?d.suffix:"");var v={},w=d.locator,D=k&&k.scale,C=h(d,k);c=c&&c.signal;if(!w)return m.resolve();d.categories&&(v.categories=d.categories);d.locationType&&(v.locationType=d.locationType);g&&(w.outSpatialReference=g);if(g=k&&k.get("extent.center"))v.location=g;v.maxLocations=n;C&&(v.searchExtent=f.unwrap(C));d.countryCode&&(v.countryCode=d.countryCode);var B=e.key;B&&(v.magicKey=B);v.address={};v.address[d.singleLineFieldName||"Single Line Input"]=
a;d.outFields&&(v.outFields=d.outFields);return w.addressToLocations(v,{signal:c}).then(function(a){return b(a,{key:B,scale:D,sourceIndex:p,view:k,zoomScale:r,defaultZoomScale:z})})}function a(a,b){return a.map(function(a){return{text:a.text,key:a.magicKey,sourceIndex:b}})}function b(a,b){return a.map(function(a){var d=b.key,e=b.scale,f=b.sourceIndex,g=b.view,h=b.zoomScale,k=b.defaultZoomScale,l=a.extent,m=a.location,n=a.address;a=new p({geometry:m,attributes:a.attributes});l=l||m;e=c.createExtentFromGeometry(l,
g,e);g=h?c.scaleExtent(e,g,h):k&&"point"===l.type?c.scaleExtent(e,g,k):e;m=m?m.x+","+m.y:"";return{extent:g,feature:a,key:d,name:n||m,sourceIndex:f}})}Object.defineProperty(g,"__esModule",{value:!0});g.getResults=function(a,b){return a.location?e(a,b):n(a,b)};g.getSuggestions=function(b,c){var d=b.source,e=b.spatialReference,g=b.view,k=b.suggestTerm,n=b.maxSuggestions,p=b.sourceIndex;b={};var r=d.locator,z=h(d,g);c=c&&c.signal;if(!r)return m.resolve();d.categories&&(b.categories=d.categories);r.outSpatialReference=
e;if(e=g&&g.get("extent.center"))b.location=e;if(!k.trim())return m.resolve();e=d.prefix;g=d.suffix;b.text=""+(void 0===e?"":e)+k+(void 0===g?"":g);z&&(b.searchExtent=f.unwrap(z));b.maxSuggestions=n;d.countryCode&&(b.countryCode=d.countryCode);return r.suggestLocations(b,{signal:c}).then(function(b){return a(b,p)})};g.isArcGISWorldGeocoder=function(a){return a?/(?:arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/gi.test(a)||/(?:\/servers\/[\da-z\.-]+\/rest\/services\/world\/geocodeserver).*/gi.test(a):
!1}})},"*now":function(r){r(['dojo/i18n!*preload*esri/widgets/nls/Search*["ar","bs","ca","cs","da","de","de-ch","el","en-au","en-ca","en-gb","en-us","es","es-mx","et","fi","fr","fr-ch","he","hr","hu","id","it","it-ch","ja","ko","lt","lv","nl","nb","pl","pt","pt-br","pt-pt","ro","ru","sl","sr","sv","th","tr","uk","vi","zh-cn","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper @dojo/framework/shim/array dojo/i18n!../nls/common dojo/i18n!./Search/nls/Search ../intl ../../esri/core/promiseUtils ../core/events ../core/Handles ../core/string ../core/watchUtils ../core/accessorSupport/decorators ./Widget ./Search/SearchResultRenderer ./Search/SearchViewModel ./support/widget".split(" "),function(r,g,p,f,m,c,e,h,n,a,b,d,k,l,q,A,u,t){var x=/<[a-z/][\s\S]*>/i;return function(g){function q(a){var c=
g.call(this,a)||this;c._handles=new b;c._inputNode=null;c._sourceMenuButtonNode=null;c._sourceListNode=null;c._suggestionListNode=null;c._searchResultRenderer=new A;c._relatedTarget=null;c.activeMenu="none";c.activeSource=null;c.activeSourceIndex=null;c.allPlaceholder=null;c.allSources=null;c.autoNavigate=null;c.autoSelect=null;c.defaultSources=null;c.disabled=!1;c.goToOverride=null;c.iconClass="esri-icon-search";c.includeDefaultSources=null;c.label=e.widgetLabel;c.locationEnabled=null;c.maxResults=
null;c.maxSuggestions=null;c.minSuggestCharacters=null;c.popupEnabled=null;c.popupTemplate=null;c.portal=null;c.resultGraphic=null;c.resultGraphicEnabled=null;c.results=null;c.searchAllEnabled=null;c.searchTerm=null;c.selectedResult=null;c.sources=null;c.suggestions=null;c.suggestionsEnabled=null;c.view=null;c.viewModel=new u;c.own(k.watch(c,"searchTerm",function(a){if(a&&"warning"===c.activeMenu||!a&&!c.get("viewModel.selectedSuggestion.location"))c.activeMenu="none"}),k.on(c,"viewModel.allSources",
"change",function(){return c._watchSourceChanges()}),k.init(c,["viewModel.popupTemplate","viewModel.popupTemplate.content"],function(){"{Match_addr}"===c.get("viewModel.popupTemplate.content")&&(c.viewModel.popupTemplate.content=c._renderSearchResultsContent.bind(c))}));return c}p(q,g);q.prototype.postInitialize=function(){this.viewModel.load().catch(function(){})};q.prototype.destroy=function(){this._handles.destroy();this._handles=null;this._cancelSuggest();this._cancelSearch();this._searchResultRenderer&&
(this._searchResultRenderer.viewModel=null,this._searchResultRenderer.destroy(),this._searchResultRenderer=null)};q.prototype.clear=function(){};q.prototype.focus=function(){this._inputNode&&(this.activeMenu="suggestion",this._inputNode.focus(),this.emit("search-focus"))};q.prototype.blur=function(a){this._inputNode&&(this._inputNode.blur(),this._inputBlur(a),this.emit("search-blur"))};q.prototype.search=function(a){var b=this;this.activeMenu="none";this._cancelSuggest();this._cancelSearch();var c=
n.createAbortController(),d=c.signal;this._searchController=c;return this.viewModel.search(a,{signal:d}).catch(function(a){if(b._searchController===c)return b.activeMenu="none",b._searchController=null,a}).then(function(a){if(b._searchController===c)return b.activeMenu=a.numResults?"none":"warning",b._searchController=null,a})};q.prototype.suggest=function(a){var b=this;this._cancelSuggest();var c=n.createAbortController(),d=c.signal;this._suggestController=c;return this.viewModel.suggest(a,null,
{signal:d}).then(function(a){if(b._suggestController===c)return b._suggestController=null,a.numResults&&(b.activeMenu="suggestion"),b._scrollToTopSuggestion(),a}).catch(function(){if(b._suggestController===c)return b._suggestController=null})};q.prototype.render=function(){var a=this,b,d,f=this.viewModel,g=f.activeSourceIndex,k=f.suggestions,l=f.maxInputLength,m=f.placeholder,n=f.searchTerm,p=f.searchAllEnabled,q=f.allSources,r=this._getSourceName(g),x=(""+n).trim(),y=this.activeMenu,z=this.id,A=
this.viewModel.state,I=this.id+"-suggest-menu",K=n?t.tsx("div",{key:"esri-search__clear-button",bind:this,role:"button",class:this.classes("esri-search__clear-button","esri-widget--button"),tabindex:"0",title:e.clearButtonTitle,onfocus:this._clearButtonFocus,onclick:this._handleClearButtonClick,onkeydown:this._handleClearButtonClick},t.tsx("span",{"aria-hidden":"true",class:"esri-icon-close"})):null,Q=this.locationEnabled&&!x,T=Q?t.tsx("ul",{role:"presentation",key:"esri-search__suggestion-list-current-location",
class:this.classes("esri-menu__list","esri-search__suggestions-list","esri-search__suggestions-list--current-location")},t.tsx("li",{bind:this,onclick:this._handleUseCurrentLocationClick,onkeydown:this._handleUseCurrentLocationClick,onkeyup:this._handleSuggestionKeyup,role:"menuitem",class:"esri-menu__list-item",tabindex:"-1"},t.tsx("span",{"aria-hidden":"true",role:"presentation",class:"esri-icon-locate-circled"})," ",e.useCurrentLocation)):null,V=1<q.length&&g===u.ALL_INDEX,g=k?k.map(function(b){var c=
b.sourceIndex,d=b.results.length,e=d&&V?a._getSuggestionHeaderNode(c):null;b=b.results.map(function(b,c){return a._getSuggestionNode(b,c)});c=d?t.tsx("ul",{role:"presentation",key:"esri-search__suggestion-list-"+c,class:a.classes("esri-menu__list","esri-search__suggestions-list")},b):null;return[e,c]}):null,Q=Q||g&&g.length,l=t.tsx("input",{bind:this,placeholder:m,"aria-label":e.searchButtonTitle,maxlength:l,autocomplete:"off",type:"text",tabindex:"0",class:this.classes("esri-input","esri-search__input"),
"aria-autocomplete":"list",value:n,"aria-haspopup":"true","aria-owns":Q?I:null,role:"textbox",onkeydown:this._handleInputKeydown,onkeyup:this._handleInputKeyup,onclick:this._handleInputClick,oninput:this._handleInputPaste,onpaste:this._handleInputPaste,afterCreate:t.storeNode,"data-node-ref":"_inputNode",onfocusout:this._storeRelatedTarget,onfocus:this.focus,onblur:this.blur,title:n?"":m}),l=t.tsx("form",{key:"esri-search__form",bind:this,class:"esri-search__form",onsubmit:this._formSubmit,role:"search"},
l),I=Q?t.tsx("div",{id:I,"aria-expanded":"suggestion"===y,key:"esri-search__suggestions-menu",class:this.classes("esri-menu","esri-search__suggestions-menu"),role:"menu",bind:this,afterCreate:t.storeNode,"data-node-ref":"_suggestionListNode"},T,g):null,K=t.tsx("div",{key:"esri-search__input-container",class:"esri-search__input-container"},l,I,K),I=t.tsx("div",{key:"esri-search__submit-button",bind:this,role:"button",title:e.searchButtonTitle,class:this.classes("esri-search__submit-button","esri-widget--button"),
tabindex:"0",onclick:this._handleSearchButtonClick,onkeydown:this._handleSearchButtonClick},t.tsx("span",{"aria-hidden":"true",role:"presentation",class:"esri-icon-search"}),t.tsx("span",{class:"esri-icon-font-fallback-text"},e.searchButtonTitle)),n=x?h.substitute(e.noResultsFoundForValue,{value:'"'+n+'"'}):e.noResultsFound,n=f.get("selectedSuggestion.location")||x?t.tsx("div",{key:"esri-search__no_results"},t.tsx("div",{class:"esri-search__warning-header"},e.noResults),t.tsx("div",{class:"esri-search__warning-text"},
n)):null,f=f.get("selectedSuggestion.location")||x?null:t.tsx("div",{key:"esri-search__empty-search"},t.tsx("span",{"aria-hidden":"true",class:"esri-icon-notice-triangle"}),t.tsx("span",{class:"esri-search__no-value-text"},e.emptyValue)),f=t.tsx("div",{key:"esri-search__error-menu",class:this.classes("esri-menu","esri-search__warning-menu")},t.tsx("div",{class:"esri-search__warning-body"},n,f)),x=1<q.length,q=q&&q.toArray(),p=p?this._getSourceNode(u.ALL_INDEX):null,z=z+"-source-menu",r=x?t.tsx("div",
{key:"esri-search__source-menu-button",bind:this,role:"button",title:e.searchIn,"aria-haspopup":"true","aria-expanded":"source"===y,"aria-controls":z,class:this.classes("esri-search__sources-button","esri-widget--button"),tabindex:"0",onkeydown:this._handleSourceMenuButtonKeydown,onclick:this._handleSourcesMenuToggleClick,onkeyup:this._handleSourceMenuButtonKeyup,onblur:this._sourcesButtonBlur,afterCreate:t.storeNode,"data-node-ref":"_sourceMenuButtonNode"},t.tsx("span",{"aria-hidden":"true",role:"presentation",
class:"esri-icon-down-arrow esri-search__sources-button--down"}),t.tsx("span",{"aria-hidden":"true",role:"presentation",class:"esri-icon-up-arrow esri-search__sources-button--up"}),t.tsx("span",{class:"esri-search__source-name"},r)):null,z=x?t.tsx("ul",{id:z,role:"menu",bind:this,afterCreate:t.storeNode,"data-node-ref":"_sourceListNode",class:"esri-menu__list"},p,q.map(function(b,c){return a._getSourceNode(c)})):null,z=x?t.tsx("div",{tabIndex:0,key:"esri-search__source-menu",class:this.classes("esri-menu",
"esri-search__sources-menu")},z):null,y=(b={},b["esri-search--multiple-sources"]=x,b["esri-search--loading"]="loading"===A,b["esri-search--searching"]="searching"===A,b["esri-search--warning"]="warning"===y,b["esri-search--sources"]="source"===y,b["esri-search--show-suggestions"]="suggestion"===y,b);b=(d={},d["esri-disabled"]="disabled"===A,d["esri-widget--disabled"]=this.disabled,d);d="loading"===A?t.tsx("div",{role:"presentation",class:"esri-widget__loader",key:"base-loader"},t.tsx("span",{"aria-hidden":"true",
role:"presentation",class:"esri-widget__loader-animation"}),t.tsx("span",{class:"esri-icon-font-fallback-text"},e.searchButtonTitle),t.tsx("span",{class:"esri-widget__loader-text"},c.loading)):t.tsx("div",{role:"presentation",class:this.classes(y,"esri-search__container"),key:"base-container"},r,z,K,I,f);return t.tsx("div",{class:this.classes("esri-search esri-widget",b)},d)};q.prototype._watchSourceChanges=function(){var a=this,b=this._handles,c=this.viewModel.allSources;b.remove("sources");c.forEach(function(c){return b.add(k.watch(c,
"name",function(){return a.scheduleRender()}),"sources")})};q.prototype._handleSourceMenuButtonKeydown=function(b){var c=a.eventKey(b);"ArrowUp"===c||"ArrowDown"===c||"End"===c||"Home"===c?(b.preventDefault(),b.stopPropagation(),this.activeMenu="source"):this._handleSourcesMenuToggleClick(b)};q.prototype._handleSourcesMenuToggleClick=function(b){var c="source"===this.activeMenu;this.activeMenu=c?"none":"source";this.renderNow();c?this._sourceMenuButtonNode&&this._sourceMenuButtonNode.focus():(c=this._sourceListNode?
this._sourceListNode.getElementsByTagName("li"):null)&&(b="End"===a.eventKey(b)?c[c.length-1]:c[0])&&b.focus()};q.prototype._handleClearButtonClick=function(){this.viewModel.clear();this._focus()};q.prototype._handleSearchButtonClick=function(){this.search()};q.prototype._handleSuggestionClick=function(a){if(a=a.currentTarget["data-suggestion"])this._focus(),this.search(a)};q.prototype._handleUseCurrentLocationClick=function(){var a=this;this._focus("none");this._cancelSuggest();this._cancelSearch();
var b=n.createAbortController(),c=b.signal;this._searchController=b;this.viewModel.searchNearby({signal:c}).catch().then(function(){a._searchController=null})};q.prototype._handleSourceClick=function(a){this.viewModel.activeSourceIndex=a.currentTarget["data-source-index"];this._focus("none")};q.prototype._sourcesButtonBlur=function(a){this._removeActiveMenu(a&&a.relatedTarget,this._sourceListNode)};q.prototype._inputBlur=function(a){a=a&&a.relatedTarget;this._removeActiveMenu(a?a:this._relatedTarget,
this._suggestionListNode)};q.prototype._storeRelatedTarget=function(a){this._relatedTarget=a.relatedTarget};q.prototype._clearButtonFocus=function(){this.activeMenu="none"};q.prototype._removeActiveMenu=function(a,b){!a||a&&b&&b.contains(a)||(this.activeMenu="none")};q.prototype._cancelSuggest=function(){this._suggestController&&(this._suggestController.abort(),this._suggestController=null)};q.prototype._cancelSearch=function(){this._searchController&&(this._searchController.abort(),this._searchController=
null)};q.prototype._handleInputKeydown=function(b){var c=a.eventKey(b);("Tab"===c||"Escape"===c||b.shiftKey&&"Tab"===c)&&this._cancelSuggest()};q.prototype._handleInputKeyup=function(b){var c=a.eventKey(b),d=b.ctrlKey||b.metaKey||"Copy"===c||"ArrowLeft"===c||"ArrowRight"===c||"Enter"===c||"Shift"===c,e=this._suggestionListNode?this._suggestionListNode.getElementsByTagName("li"):null;d||("Tab"===c||"Escape"===c||b.shiftKey&&"Tab"===c?(this._cancelSuggest(),"Escape"===c&&(this.activeMenu="none")):"ArrowUp"!==
c&&"ArrowDown"!==c||!e?this.viewModel.searchTerm&&this.suggest():(this.activeMenu="suggestion",b.stopPropagation(),b.preventDefault(),this._cancelSuggest(),(b=e["ArrowUp"===c?e.length-1:0])&&b.focus()))};q.prototype._scrollToTopSuggestion=function(){this._suggestionListNode&&(this._suggestionListNode.scrollTop=0)};q.prototype._handleInputClick=function(){this.activeMenu="suggestion"};q.prototype._handleInputPaste=function(a){a=a.target;this.viewModel.searchTerm!==a.value&&(this.viewModel.searchTerm=
a.value);this.viewModel.searchTerm&&this.suggest()};q.prototype._handleSourceMenuButtonKeyup=function(b){var c=a.eventKey(b);if("ArrowUp"===c||"ArrowDown"===c||"Home"===c||"End"===c)b.stopPropagation(),b.preventDefault(),(b=this._sourceListNode?this._sourceListNode.getElementsByTagName("li"):null)&&(c=b["ArrowUp"===c||"End"===c?b.length-1:0])&&c.focus()};q.prototype._handleSourceKeyup=function(b){var c=b.target,d=this._sourceListNode?m.from(this._sourceListNode.getElementsByTagName("li")):null,e=
a.eventKey(b);if("Escape"===e)this._focus("none"),this._sourceMenuButtonNode&&this._sourceMenuButtonNode.focus();else if(d){c=d.indexOf(c);if("Home"===e||"End"===e||"ArrowUp"===e||"ArrowDown"===e)b.stopPropagation(),b.preventDefault();"Home"===e?(d=d[0])&&d.focus():"End"===e?(d=d[d.length-1])&&d.focus():"ArrowUp"===e?(b=c-1,(d=0>b?this._sourceMenuButtonNode:d[b])&&d.focus()):"ArrowDown"===e&&(b=c+1,(d=b>=d.length?this._sourceMenuButtonNode:d[b])&&d.focus())}};q.prototype._handleSuggestionKeyup=function(b){var c=
b.target,d=this._suggestionListNode?m.from(this._suggestionListNode.getElementsByTagName("li")):null,c=d.indexOf(c),e=a.eventKey(b);this._cancelSuggest();if("Backspace"===e||"Delete"===e)this._focus();else if("Escape"===e)this._focus("none");else if(d){if("Home"===e||"End"===e||"ArrowUp"===e||"ArrowDown"===e)b.stopPropagation(),b.preventDefault();"Home"===e&&(b=d[0])&&b.focus();"End"===e&&(b=d[d.length-1])&&b.focus();"ArrowUp"===e?(--c,(d=0>c?d[d.length-1]:d[c])&&d.focus()):"ArrowDown"===e&&(c+=1,
(d=c>=d.length?d[0]:d[c])&&d.focus())}};q.prototype._focus=function(a){this.focus();a&&(this.activeMenu=a)};q.prototype._formSubmit=function(a){a.preventDefault();this.search()};q.prototype._getSourceName=function(a){var b=this.viewModel.allSources.getItemAt(a);return a===u.ALL_INDEX?e.all:b?b.name||e.untitledSource:e.untitledSource};q.prototype._getSuggestionHeaderNode=function(a){var b=this._getSourceName(a);return t.tsx("div",{key:"esri-search__suggestion-header-"+a,class:"esri-menu__header"},
b)};q.prototype._splitResult=function(a,b){b=d.escapeRegExpString(b);return a.replace(new RegExp("(^|)("+b+")(|$)","ig"),"$1|$2|$3").split("|")};q.prototype._getSuggestionNode=function(a,b){var c=this.viewModel.searchTerm;if(c){var d=a.text||e.untitledResult,f=[];if(x.test(d))f.push(t.tsx("div",{innerHTML:d}));else{var d=this._splitResult(d,c),g=c.toLowerCase();d.forEach(function(a,b){a&&a.length&&(a.toLowerCase()===g?f.push(t.tsx("strong",{key:b},a)):f.push(a))})}return t.tsx("li",{bind:this,onclick:this._handleSuggestionClick,
onkeydown:this._handleSuggestionClick,onkeyup:this._handleSuggestionKeyup,key:"esri-search__suggestion$-{sourceIndex}_"+b,"data-suggestion":a,role:"menuitem",class:"esri-menu__list-item",tabindex:"-1"},f)}};q.prototype._getSourceNode=function(a){var b,c=(b={},b["esri-menu__list-item--active"]=a===this.viewModel.activeSourceIndex,b);return t.tsx("li",{bind:this,key:"esri-search__source-"+a,onclick:this._handleSourceClick,onkeydown:this._handleSourceClick,onkeyup:this._handleSourceKeyup,"data-source-index":a,
role:"menuitem",class:this.classes("esri-search__source","esri-menu__list-item",c),tabindex:"-1"},this._getSourceName(a))};q.prototype._renderSearchResultsContent=function(){this._searchResultRenderer.showMoreResultsOpen=!1;this._searchResultRenderer.viewModel=this.viewModel;return this._searchResultRenderer};f([l.property(),t.renderable()],q.prototype,"activeMenu",void 0);f([l.aliasOf("viewModel.activeSource"),t.renderable()],q.prototype,"activeSource",void 0);f([l.aliasOf("viewModel.activeSourceIndex"),
t.renderable()],q.prototype,"activeSourceIndex",void 0);f([l.aliasOf("viewModel.allPlaceholder"),t.renderable()],q.prototype,"allPlaceholder",void 0);f([l.aliasOf("viewModel.allSources")],q.prototype,"allSources",void 0);f([l.aliasOf("viewModel.autoNavigate")],q.prototype,"autoNavigate",void 0);f([l.aliasOf("viewModel.autoSelect")],q.prototype,"autoSelect",void 0);f([l.aliasOf("viewModel.defaultSources")],q.prototype,"defaultSources",void 0);f([t.renderable(),l.property()],q.prototype,"disabled",
void 0);f([l.aliasOf("viewModel.goToOverride")],q.prototype,"goToOverride",void 0);f([l.property()],q.prototype,"iconClass",void 0);f([l.aliasOf("viewModel.includeDefaultSources")],q.prototype,"includeDefaultSources",void 0);f([l.property()],q.prototype,"label",void 0);f([t.renderable(),l.aliasOf("viewModel.locationEnabled")],q.prototype,"locationEnabled",void 0);f([l.aliasOf("viewModel.maxResults")],q.prototype,"maxResults",void 0);f([l.aliasOf("viewModel.maxSuggestions")],q.prototype,"maxSuggestions",
void 0);f([l.aliasOf("viewModel.minSuggestCharacters")],q.prototype,"minSuggestCharacters",void 0);f([l.aliasOf("viewModel.popupEnabled")],q.prototype,"popupEnabled",void 0);f([l.aliasOf("viewModel.popupTemplate")],q.prototype,"popupTemplate",void 0);f([l.aliasOf("viewModel.portal")],q.prototype,"portal",void 0);f([l.aliasOf("viewModel.resultGraphic")],q.prototype,"resultGraphic",void 0);f([l.aliasOf("viewModel.resultGraphicEnabled")],q.prototype,"resultGraphicEnabled",void 0);f([l.aliasOf("viewModel.results"),
t.renderable()],q.prototype,"results",void 0);f([l.aliasOf("viewModel.searchAllEnabled"),t.renderable()],q.prototype,"searchAllEnabled",void 0);f([l.aliasOf("viewModel.searchTerm"),t.renderable()],q.prototype,"searchTerm",void 0);f([l.aliasOf("viewModel.selectedResult")],q.prototype,"selectedResult",void 0);f([l.aliasOf("viewModel.sources")],q.prototype,"sources",void 0);f([l.aliasOf("viewModel.suggestions"),t.renderable()],q.prototype,"suggestions",void 0);f([l.aliasOf("viewModel.suggestionsEnabled")],
q.prototype,"suggestionsEnabled",void 0);f([l.aliasOf("viewModel.view"),t.renderable()],q.prototype,"view",void 0);f([t.vmEvent("search-complete search-clear search-start select-result suggest-start suggest-complete".split(" ")),l.property({type:u}),t.renderable(["viewModel.allSources","viewModel.activeSource.placeholder","viewModel.activeSource.name","viewModel.state"])],q.prototype,"viewModel",void 0);f([l.aliasOf("viewModel.clear")],q.prototype,"clear",null);f([t.accessibleHandler()],q.prototype,
"_handleSourcesMenuToggleClick",null);f([t.accessibleHandler()],q.prototype,"_handleClearButtonClick",null);f([t.accessibleHandler()],q.prototype,"_handleSearchButtonClick",null);f([t.accessibleHandler()],q.prototype,"_handleSuggestionClick",null);f([t.accessibleHandler()],q.prototype,"_handleUseCurrentLocationClick",null);f([t.accessibleHandler()],q.prototype,"_handleSourceClick",null);return q=f([l.subclass("esri.widgets.Search")],q)}(l.declared(q))});