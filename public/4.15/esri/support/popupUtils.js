// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.15/esri/copyright.txt for details.
//>>built
define("require exports ../core/tsSupport/assignHelper ../PopupTemplate ../layers/support/fieldUtils ../popup/content ../popup/FieldInfo ../popup/support/FieldInfoFormat".split(" "),function(y,h,m,n,p,k,q,g){function r(a,b){var c=a;b.ignoreFieldTypes&&(a=a.filter(function(a){return-1===b.ignoreFieldTypes.indexOf(a.type)}));if(0===a.length)return null;a===c&&(a=a.slice());a.sort(t);return{fields:a}}function t(a,b){return"oid"===a.type?-1:"oid"===b.type?1:l(a)?-1:l(b)?1:(a.alias||a.name).toLocaleLowerCase().localeCompare((b.alias||
b.name).toLocaleLowerCase())}function u(a){var b=a.visibleFieldNames,c=a.editFieldsInfo;return a.fields.map(function(a){var e=a.name,d;if(d=a.editable&&-1===v.indexOf(a.type)){if((d=a.name)&&c){var f=c.creationDateField,g=c.creatorField,h=c.editDateField,k=c.editorField;d=-1!==[f&&f.toLowerCase(),g&&g.toLowerCase(),h&&h.toLowerCase(),k&&k.toLowerCase()].indexOf(d.toLowerCase())}else d=!1;d=!d}return new q({fieldName:e,isEditable:d,label:a.alias,format:w(a),visible:b?b.has(a.name):!0})})}function w(a){switch(a.type){case "small-integer":case "integer":case "single":return new g({digitSeparator:!0,
places:0});case "double":return new g({digitSeparator:!0,places:2});case "date":return new g({dateFormat:"long-month-day-year"});default:return null}}function l(a){if("name"===(a.name&&a.name.toLowerCase())||"name"===(a.alias&&a.alias.toLowerCase()))return!0}Object.defineProperty(h,"__esModule",{value:!0});var v=["oid","global-id","guid"];h.createPopupTemplate=function(a,b){var c=a.displayField,f=a.fields,e=a.title,d=a.visibleFieldNames;a=a.editFieldsInfo;if(!f)return null;b=m({},x,b);f=r(f,b);if(!f)return null;
e={titleBase:e,fields:f.fields,displayField:c};c=p.getDisplayFieldName(e);e=e.titleBase;c=c?e+": {"+c.trim()+"}":e;e=[new k.FieldsContent,new k.AttachmentsContent];d=u({fields:f.fields,visibleFieldNames:d,editFieldsInfo:a});return new n({title:c,content:e,fieldInfos:d})};var x={ignoreFieldTypes:["geometry","blob","raster","guid","xml"]}});